require.config({"config": {
        "jsbuild":{"mage/validation.min.js":"define(['jquery','moment','jquery-ui-modules/widget','jquery/validate','mage/translate'],function($,moment){'use strict';var creditCartTypes,rules,showLabel,originValidateDelegate;$.extend(true,$,{mage:{isEmpty:function(value){return value===''||value===undefined||value==null||value.length===0||/^\\s+$/.test(value);},isEmptyNoTrim:function(value){return value===''||value==null||value.length===0;},isBetween:function(value,from,to){return($.mage.isEmpty(from)||value>=$.mage.parseNumber(from))&&($.mage.isEmpty(to)||value<=$.mage.parseNumber(to));},parseNumber:function(value){var isDot,isComa;if(typeof value!=='string'){return parseFloat(value);}\nisDot=value.indexOf('.');isComa=value.indexOf(',');if(isDot!==-1&&isComa!==-1){if(isComa>isDot){value=value.replace('.','').replace(',','.');}else{value=value.replace(',','');}}else if(isComa!==-1){value=value.replace(',','.');}\nreturn parseFloat(value);},stripHtml:function(value){return value.replace(/<.[^<>]*?>/g,' ').replace(/&nbsp;|&#160;/gi,' ').replace(/[0-9.(),;:!?%#$'\"_+=\\/-]*/g,'');}}});$.validator.addMethod=function(name,method,message,dontSkip){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3||dontSkip){$.validator.addClassRules(name,$.validator.normalizeRule(name));}};creditCartTypes={'SO':[new RegExp('^(6334[5-9]([0-9]{11}|[0-9]{13,14}))|(6767([0-9]{12}|[0-9]{14,15}))$'),new RegExp('^([0-9]{3}|[0-9]{4})?$'),true],'SM':[new RegExp('(^(5[0678])[0-9]{11,18}$)|(^(6[^05])[0-9]{11,18}$)|'+'(^(601)[^1][0-9]{9,16}$)|(^(6011)[0-9]{9,11}$)|(^(6011)[0-9]{13,16}$)|'+'(^(65)[0-9]{11,13}$)|(^(65)[0-9]{15,18}$)|(^(49030)[2-9]([0-9]{10}$|[0-9]{12,13}$))|'+'(^(49033)[5-9]([0-9]{10}$|[0-9]{12,13}$))|(^(49110)[1-2]([0-9]{10}$|[0-9]{12,13}$))|'+'(^(49117)[4-9]([0-9]{10}$|[0-9]{12,13}$))|(^(49118)[0-2]([0-9]{10}$|[0-9]{12,13}$))|'+'(^(4936)([0-9]{12}$|[0-9]{14,15}$))'),new RegExp('^([0-9]{3}|[0-9]{4})?$'),true],'VI':[new RegExp('^4[0-9]{12}([0-9]{3})?$'),new RegExp('^[0-9]{3}$'),true],'MC':[new RegExp('^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$'),new RegExp('^[0-9]{3}$'),true],'AE':[new RegExp('^3[47][0-9]{13}$'),new RegExp('^[0-9]{4}$'),true],'DI':[new RegExp('^(6011(0|[2-4]|74|7[7-9]|8[6-9]|9)|6(4[4-9]|5))\\\\d*$'),new RegExp('^[0-9]{3}$'),true],'JCB':[new RegExp('^35(2[8-9]|[3-8])\\\\d*$'),new RegExp('^[0-9]{3}$'),true],'DN':[new RegExp('^(3(0[0-5]|095|6|[8-9]))\\\\d*$'),new RegExp('^[0-9]{3}$'),true],'UN':[new RegExp('^(622(1(2[6-9]|[3-9])|[3-8]|9([[0-1]|2[0-5]))|62[4-6]|628([2-8]))\\\\d*?$'),new RegExp('^[0-9]{3}$'),true],'MI':[new RegExp('^(5(0|[6-9])|63|67(?!59|6770|6774))\\\\d*$'),new RegExp('^[0-9]{3}$'),true],'MD':[new RegExp('^6759(?!24|38|40|6[3-9]|70|76)|676770|676774\\\\d*$'),new RegExp('^[0-9]{3}$'),true]};function validateCreditCard(s){var v='0123456789',w='',i,j,k,m,c,a,x;for(i=0;i<s.length;i++){x=s.charAt(i);if(v.indexOf(x,0)!==-1){w+=x;}}\nj=w.length / 2;k=Math.floor(j);m=Math.ceil(j)-k;c=0;for(i=0;i<k;i++){a=w.charAt(i*2+m)*2;c+=a>9?Math.floor(a / 10+a%10):a;}\nfor(i=0;i<k+m;i++){c+=w.charAt(i*2+1-m)*1;}\nreturn c%10===0;}\nfunction tableSingleValidation(value,element){var empty=$(element).closest('table').find('input.required-option:visible').filter(function(i,el){if($(el).is('disabled')){return $.mage.isEmpty(el.value);}}).length;return empty===0;}\nfunction resolveModulo(qty,qtyIncrements){while(qtyIncrements<1){qty*=10;qtyIncrements*=10;}\nreturn qty%qtyIncrements;}\nrules={'max-words':[function(value,element,params){return this.optional(element)||$.mage.stripHtml(value).match(/\\b\\w+\\b/g).length<=params;},$.mage.__('Please enter {0} words or less.')],'min-words':[function(value,element,params){return this.optional(element)||$.mage.stripHtml(value).match(/\\b\\w+\\b/g).length>=params;},$.mage.__('Please enter at least {0} words.')],'range-words':[function(value,element,params){return this.optional(element)||$.mage.stripHtml(value).match(/\\b\\w+\\b/g).length>=params[0]&&value.match(/bw+b/g).length<params[1];},$.mage.__('Please enter between {0} and {1} words.')],'letters-with-basic-punc':[function(value,element){return this.optional(element)||/^[a-z\\-.,()'\\\"\\s]+$/i.test(value);},$.mage.__('Letters or punctuation only please')],'alphanumeric':[function(value,element){return this.optional(element)||/^\\w+$/i.test(value);},$.mage.__('Letters, numbers, spaces or underscores only please')],'letters-only':[function(value,element){return this.optional(element)||/^[a-z]+$/i.test(value);},$.mage.__('Letters only please')],'no-whitespace':[function(value,element){return this.optional(element)||/^\\S+$/i.test(value);},$.mage.__('No white space please')],'no-marginal-whitespace':[function(value,element){return this.optional(element)||!/^\\s+|\\s+$/i.test(value);},$.mage.__('No marginal white space please')],'zip-range':[function(value,element){return this.optional(element)||/^90[2-5]-\\d{2}-\\d{4}$/.test(value);},$.mage.__('Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx')],'integer':[function(value,element){return this.optional(element)||/^-?\\d+$/.test(value);},$.mage.__('A positive or negative non-decimal number please')],'vinUS':[function(v){var i,n,d,f,cd,cdv,LL,VL,FL,rs;if(v.length!==17){return false;}\nLL=['A','B','C','D','E','F','G','H','J','K','L','M','N','P','R','S','T','U','V','W','X','Y','Z'];VL=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9];FL=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2];rs=0;for(i=0;i<17;i++){f=FL[i];d=v.slice(i,i+1);if(i===8){cdv=d;}\nif(!isNaN(d)){d*=f;}else{for(n=0;n<LL.length;n++){if(d.toUpperCase()===LL[n]){d=VL[n];d*=f;if(isNaN(cdv)&&n===8){cdv=LL[n];}\nbreak;}}}\nrs+=d;}\ncd=rs%11;if(cd===10){cd='X';}\nif(cd===cdv){return true;}\nreturn false;},$.mage.__('The specified vehicle identification number (VIN) is invalid.')],'dateITA':[function(value,element){var check=false,re=/^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/,adata,gg,mm,aaaa,xdata;if(re.test(value)){adata=value.split('/');gg=parseInt(adata[0],10);mm=parseInt(adata[1],10);aaaa=parseInt(adata[2],10);xdata=new Date(aaaa,mm-1,gg);if(xdata.getFullYear()===aaaa&&xdata.getMonth()===mm-1&&xdata.getDate()===gg){check=true;}else{check=false;}}else{check=false;}\nreturn this.optional(element)||check;},$.mage.__('Please enter a correct date')],'dateNL':[function(value,element){return this.optional(element)||/^\\d\\d?[\\.\\/-]\\d\\d?[\\.\\/-]\\d\\d\\d?\\d?$/.test(value);},'Vul hier een geldige datum in.'],'time':[function(value,element){return this.optional(element)||/^([01]\\d|2[0-3])(:[0-5]\\d){0,2}$/.test(value);},$.mage.__('Please enter a valid time, between 00:00 and 23:59')],'time12h':[function(value,element){return this.optional(element)||/^((0?[1-9]|1[012])(:[0-5]\\d){0,2}(\\s[AP]M))$/i.test(value);},$.mage.__('Please enter a valid time, between 00:00 am and 12:00 pm')],'phoneUS':[function(phoneNumber,element){phoneNumber=phoneNumber.replace(/\\s+/g,'');return this.optional(element)||phoneNumber.length>9&&phoneNumber.match(/^(1-?)?(\\([2-9]\\d{2}\\)|[2-9]\\d{2})-?[2-9]\\d{2}-?\\d{4}$/);},$.mage.__('Please specify a valid phone number')],'phoneUK':[function(phoneNumber,element){return this.optional(element)||phoneNumber.length>9&&phoneNumber.match(/^(\\(?(0|\\+44)[1-9]{1}\\d{1,4}?\\)?\\s?\\d{3,4}\\s?\\d{3,4})$/);},$.mage.__('Please specify a valid phone number')],'mobileUK':[function(phoneNumber,element){return this.optional(element)||phoneNumber.length>9&&phoneNumber.match(/^((0|\\+44)7\\d{3}\\s?\\d{6})$/);},$.mage.__('Please specify a valid mobile number')],'stripped-min-length':[function(value,element,param){return value.length>=param;},$.mage.__('Please enter at least {0} characters')],'validate-no-utf8mb4-characters':[function(value){var validator=this,message=$.mage.__('Please remove invalid characters: {0}.'),matches=value.match(/(?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/g),result=matches===null;if(!result){validator.charErrorMessage=message.replace('{0}',matches.join());}\nreturn result;},function(){return this.charErrorMessage;}],'email2':[function(value,element){return this.optional(element)||/^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)*(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?$/i.test(value);},$.validator.messages.email],'url2':[function(value,element){return this.optional(element)||/^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)*(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(value);},$.validator.messages.url],'credit-card-types':[function(value,element,param){var validTypes;if(/[^0-9-]+/.test(value)){return false;}\nvalue=value.replace(/\\D/g,'');validTypes=0x0000;if(param.mastercard){validTypes|=0x0001;}\nif(param.visa){validTypes|=0x0002;}\nif(param.amex){validTypes|=0x0004;}\nif(param.dinersclub){validTypes|=0x0008;}\nif(param.enroute){validTypes|=0x0010;}\nif(param.discover){validTypes|=0x0020;}\nif(param.jcb){validTypes|=0x0040;}\nif(param.unknown){validTypes|=0x0080;}\nif(param.all){validTypes=0x0001|0x0002|0x0004|0x0008|0x0010|0x0020|0x0040|0x0080;}\nif(validTypes&0x0001&&/^(51|52|53|54|55)/.test(value)){return value.length===16;}\nif(validTypes&0x0002&&/^(4)/.test(value)){return value.length===16;}\nif(validTypes&0x0004&&/^(34|37)/.test(value)){return value.length===15;}\nif(validTypes&0x0008&&/^(300|301|302|303|304|305|36|38)/.test(value)){return value.length===14;}\nif(validTypes&0x0010&&/^(2014|2149)/.test(value)){return value.length===15;}\nif(validTypes&0x0020&&/^(6011)/.test(value)){return value.length===16;}\nif(validTypes&0x0040&&/^(3)/.test(value)){return value.length===16;}\nif(validTypes&0x0040&&/^(2131|1800)/.test(value)){return value.length===15;}\nif(validTypes&0x0080){return true;}\nreturn false;},$.mage.__('Please enter a valid credit card number.')],'ipv4':[function(value,element){return this.optional(element)||/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i.test(value);},$.mage.__('Please enter a valid IP v4 address.')],'ipv6':[function(value,element){return this.optional(element)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b)\\.){3}(\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b)\\.){3}(\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b)\\.){3}(\\b((25[0-5])|(1\\d{2})|(2[0-4]\\d)|(\\d{1,2}))\\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(value);},$.mage.__('Please enter a valid IP v6 address.')],'pattern':[function(value,element,param){return this.optional(element)||new RegExp(param).test(value);},$.mage.__('Invalid format.')],'allow-container-className':[function(element){if(element.type==='radio'||element.type==='checkbox'){return $(element).hasClass('change-container-classname');}},''],'validate-no-html-tags':[function(value){return!/<(\\/)?\\w+/.test(value);},$.mage.__('HTML tags are not allowed.')],'validate-select':[function(value){return value!=='none'&&value!=null&&value.length!==0;},$.mage.__('Please select an option.')],'validate-no-empty':[function(value){return!$.mage.isEmpty(value);},$.mage.__('Empty Value.')],'validate-alphanum-with-spaces':[function(v){return $.mage.isEmptyNoTrim(v)||/^[a-zA-Z0-9 ]+$/.test(v);},$.mage.__('Please use only letters (a-z or A-Z), numbers (0-9) or spaces only in this field.')],'validate-data':[function(v){return $.mage.isEmptyNoTrim(v)||/^[A-Za-z]+[A-Za-z0-9_]+$/.test(v);},$.mage.__('Please use only letters (a-z or A-Z), numbers (0-9) or underscore (_) in this field, and the first character should be a letter.')],'validate-street':[function(v){return $.mage.isEmptyNoTrim(v)||/^[ \\w]{3,}([A-Za-z]\\.)?([ \\w]*\\#\\d+)?(\\r\\n| )[ \\w]{3,}/.test(v);},$.mage.__('Please use only letters (a-z or A-Z), numbers (0-9), spaces and \"#\" in this field.')],'validate-phoneStrict':[function(v){return $.mage.isEmptyNoTrim(v)||/^(\\()?\\d{3}(\\))?(-|\\s)?\\d{3}(-|\\s)\\d{4}$/.test(v);},$.mage.__('Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.')],'validate-phoneLax':[function(v){return $.mage.isEmptyNoTrim(v)||/^((\\d[\\-. ]?)?((\\(\\d{3}\\))|\\d{3}))?[\\-. ]?\\d{3}[\\-. ]?\\d{4}$/.test(v);},$.mage.__('Please enter a valid phone number. For example (123) 456-7890 or 123-456-7890.')],'validate-fax':[function(v){return $.mage.isEmptyNoTrim(v)||/^(\\()?\\d{3}(\\))?(-|\\s)?\\d{3}(-|\\s)\\d{4}$/.test(v);},$.mage.__('Please enter a valid fax number (Ex: 123-456-7890).')],'validate-email':[function(v){return $.mage.isEmptyNoTrim(v)||/^([a-z0-9,!\\#\\$%&'\\*\\+\\/=\\?\\^_`\\{\\|\\}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9,!\\#\\$%&'\\*\\+\\/=\\?\\^_`\\{\\|\\}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*@([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*\\.(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]){2,})$/i.test(v);},$.mage.__('Please enter a valid email address (Ex: johndoe@domain.com).')],'validate-emailSender':[function(v){return $.mage.isEmptyNoTrim(v)||/^[\\S ]+$/.test(v);},$.mage.__('Please enter a valid email address (Ex: johndoe@domain.com).')],'validate-password':[function(v){var pass;if(v==null){return false;}\npass=$.trim(v);if(!pass.length){return true;}\nreturn!(pass.length>0&&pass.length<6);},$.mage.__('Please enter 6 or more characters. Leading and trailing spaces will be ignored.')],'validate-admin-password':[function(v){var pass;if(v==null){return false;}\npass=$.trim(v);if(pass.length===0){return true;}\nif(!/[a-z]/i.test(v)||!/[0-9]/.test(v)){return false;}\nif(pass.length<7){return false;}\nreturn true;},$.mage.__('Please enter 7 or more characters, using both numeric and alphabetic.')],'validate-customer-password':[function(v,elm){var validator=this,counter=0,passwordMinLength=$(elm).data('password-min-length'),passwordMinCharacterSets=$(elm).data('password-min-character-sets'),pass=$.trim(v),result=pass.length>=passwordMinLength;if(result===false){validator.passwordErrorMessage=$.mage.__('Minimum length of this field must be equal or greater than %1 symbols. Leading and trailing spaces will be ignored.').replace('%1',passwordMinLength);return result;}\nif(pass.match(/\\d+/)){counter++;}\nif(pass.match(/[a-z]+/)){counter++;}\nif(pass.match(/[A-Z]+/)){counter++;}\nif(pass.match(/[^a-zA-Z0-9]+/)){counter++;}\nif(counter<passwordMinCharacterSets){result=false;validator.passwordErrorMessage=$.mage.__('Minimum of different classes of characters in password is %1. Classes of characters: Lower Case, Upper Case, Digits, Special Characters.').replace('%1',passwordMinCharacterSets);}\nreturn result;},function(){return this.passwordErrorMessage;}],'validate-url':[function(v){if($.mage.isEmptyNoTrim(v)){return true;}\nv=(v||'').replace(/^\\s+/,'').replace(/\\s+$/,'');return(/^(http|https|ftp):\\/\\/(([A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))(\\.[A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))*)(:(\\d+))?(\\/[A-Z0-9~](([A-Z0-9_~-]|\\.)*[A-Z0-9~]|))*\\/?(.*)?$/i).test(v);},$.mage.__('Please enter a valid URL. Protocol is required (http://, https:// or ftp://).')],'validate-clean-url':[function(v){return $.mage.isEmptyNoTrim(v)||/^(http|https|ftp):\\/\\/(([A-Z0-9][A-Z0-9_-]*)(\\.[A-Z0-9][A-Z0-9_-]*)+.(com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\\d+))?\\/?/i.test(v)||/^(www)((\\.[A-Z0-9][A-Z0-9_-]*)+.(com|org|net|dk|at|us|tv|info|uk|co.uk|biz|se)$)(:(\\d+))?\\/?/i.test(v);},$.mage.__('Please enter a valid URL. For example http://www.example.com or www.example.com.')],'validate-xml-identifier':[function(v){return $.mage.isEmptyNoTrim(v)||/^[A-Z][A-Z0-9_\\/-]*$/i.test(v);},$.mage.__('Please enter a valid XML-identifier (Ex: something_1, block5, id-4).')],'validate-ssn':[function(v){return $.mage.isEmptyNoTrim(v)||/^\\d{3}-?\\d{2}-?\\d{4}$/.test(v);},$.mage.__('Please enter a valid social security number (Ex: 123-45-6789).')],'validate-zip-us':[function(v){return $.mage.isEmptyNoTrim(v)||/(^\\d{5}$)|(^\\d{5}-\\d{4}$)/.test(v);},$.mage.__('Please enter a valid zip code (Ex: 90602 or 90602-1234).')],'validate-date-au':[function(v){var regex,d;if($.mage.isEmptyNoTrim(v)){return true;}\nregex=/^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/;if($.mage.isEmpty(v)||!regex.test(v)){return false;}\nd=new Date(v.replace(regex,'$2/$1/$3'));return parseInt(RegExp.$2,10)===1+d.getMonth()&&parseInt(RegExp.$1,10)===d.getDate()&&parseInt(RegExp.$3,10)===d.getFullYear();},$.mage.__('Please use this date format: dd/mm/yyyy. For example 17/03/2006 for the 17th of March, 2006.')],'validate-currency-dollar':[function(v){return $.mage.isEmptyNoTrim(v)||/^\\$?\\-?([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}\\d*(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$/.test(v);},$.mage.__('Please enter a valid $ amount. For example $100.00.')],'validate-not-negative-number':[function(v){if($.mage.isEmptyNoTrim(v)){return true;}\nv=$.mage.parseNumber(v);return!isNaN(v)&&v>=0;},$.mage.__('Please enter a number 0 or greater in this field.')],'validate-zero-or-greater':[function(v){if($.mage.isEmptyNoTrim(v)){return true;}\nv=$.mage.parseNumber(v);return!isNaN(v)&&v>=0;},$.mage.__('Please enter a number 0 or greater in this field.')],'validate-greater-than-zero':[function(v){if($.mage.isEmptyNoTrim(v)){return true;}\nv=$.mage.parseNumber(v);return!isNaN(v)&&v>0;},$.mage.__('Please enter a number greater than 0 in this field.')],'validate-css-length':[function(v){if(v!==''){return(/^[0-9]*\\.*[0-9]+(px|pc|pt|ex|em|mm|cm|in|%)?$/).test(v);}\nreturn true;},$.mage.__('Please input a valid CSS-length (Ex: 100px, 77pt, 20em, .5ex or 50%).')],'validate-number':[function(v){return $.mage.isEmptyNoTrim(v)||!isNaN($.mage.parseNumber(v))&&/^\\s*-?\\d*(\\.\\d*)?\\s*$/.test(v);},$.mage.__('Please enter a valid number in this field.')],'required-number':[function(v){return!!v.length;},$.mage.__('Please enter a valid number in this field.')],'validate-number-range':[function(v,elm,param){var numValue,dataAttrRange,classNameRange,result,range,m,classes,ii;if($.mage.isEmptyNoTrim(v)){return true;}\nnumValue=$.mage.parseNumber(v);if(isNaN(numValue)){return false;}\ndataAttrRange=/^(-?[\\d.,]+)?-(-?[\\d.,]+)?$/;classNameRange=/^number-range-(-?[\\d.,]+)?-(-?[\\d.,]+)?$/;result=true;range=param;if(typeof range==='string'){m=dataAttrRange.exec(range);if(m){result=result&&$.mage.isBetween(numValue,m[1],m[2]);}else{result=false;}}else if(elm&&elm.className){classes=elm.className.split(' ');ii=classes.length;while(ii--){range=classes[ii];m=classNameRange.exec(range);if(m){result=result&&$.mage.isBetween(numValue,m[1],m[2]);break;}}}\nreturn result;},$.mage.__('The value is not within the specified range.'),true],'validate-digits':[function(v){return $.mage.isEmptyNoTrim(v)||!/[^\\d]/.test(v);},$.mage.__('Please enter a valid number in this field.')],'validate-forbidden-extensions':[function(v,elem){var forbiddenExtensions=$(elem).attr('data-validation-params'),forbiddenExtensionsArray=forbiddenExtensions.split(','),extensionsArray=v.split(','),result=true;this.validateExtensionsMessage=$.mage.__('Forbidden extensions has been used. Avoid usage of ')+\nforbiddenExtensions;$.each(extensionsArray,function(key,extension){if(forbiddenExtensionsArray.indexOf(extension)!==-1){result=false;}});return result;},function(){return this.validateExtensionsMessage;}],'validate-digits-range':[function(v,elm,param){var numValue,dataAttrRange,classNameRange,result,range,m,classes,ii;if($.mage.isEmptyNoTrim(v)){return true;}\nnumValue=$.mage.parseNumber(v);if(isNaN(numValue)){return false;}\ndataAttrRange=/^(-?\\d+)?-(-?\\d+)?$/;classNameRange=/^digits-range-(-?\\d+)?-(-?\\d+)?$/;result=true;range=param;if(typeof range==='string'){m=dataAttrRange.exec(range);if(m){result=result&&$.mage.isBetween(numValue,m[1],m[2]);}else{result=false;}}else if(elm&&elm.className){classes=elm.className.split(' ');ii=classes.length;while(ii--){range=classes[ii];m=classNameRange.exec(range);if(m){result=result&&$.mage.isBetween(numValue,m[1],m[2]);break;}}}\nreturn result;},$.mage.__('The value is not within the specified range.'),true],'validate-range':[function(v,elm){var minValue,maxValue,ranges,reRange,result,values,i,name,validRange,minValidRange,maxValidRange;if($.mage.isEmptyNoTrim(v)){return true;}else if($.validator.methods['validate-digits']&&$.validator.methods['validate-digits'](v)){minValue=maxValue=$.mage.parseNumber(v);}else{ranges=/^(-?\\d+)?-(-?\\d+)?$/.exec(v);if(ranges){minValue=$.mage.parseNumber(ranges[1]);maxValue=$.mage.parseNumber(ranges[2]);if(minValue>maxValue){return false;}}else{return false;}}\nreRange=/^range-(-?\\d+)?-(-?\\d+)?$/;result=true;values=$(elm).prop('class').split(' ');for(i=values.length-1;i>=0;i--){name=values[i];validRange=reRange.exec(name);if(validRange){minValidRange=$.mage.parseNumber(validRange[1]);maxValidRange=$.mage.parseNumber(validRange[2]);result=result&&(isNaN(minValidRange)||minValue>=minValidRange)&&(isNaN(maxValidRange)||maxValue<=maxValidRange);}}\nreturn result;},$.mage.__('The value is not within the specified range.')],'validate-alpha':[function(v){return $.mage.isEmptyNoTrim(v)||/^[a-zA-Z]+$/.test(v);},$.mage.__('Please use letters only (a-z or A-Z) in this field.')],'validate-code':[function(v){return $.mage.isEmptyNoTrim(v)||/^[a-zA-Z]+[a-zA-Z0-9_]+$/.test(v);},$.mage.__('Please use only letters (a-z or A-Z), numbers (0-9) or underscore (_) in this field, and the first character should be a letter.')],'validate-alphanum':[function(v){return $.mage.isEmptyNoTrim(v)||/^[a-zA-Z0-9]+$/.test(v);},$.mage.__('Please use only letters (a-z or A-Z) or numbers (0-9) in this field. No spaces or other characters are allowed.')],'validate-not-number-first':[function(value){return $.mage.isEmptyNoTrim(value)||/^[^0-9-\\.].*$/.test(value.trim());},$.mage.__('First character must be letter.')],'validate-date':[function(value,params,additionalParams){var test=moment(value,additionalParams.dateFormat);return $.mage.isEmptyNoTrim(value)||test.isValid();},$.mage.__('Please enter a valid date.')],'validate-date-range':[function(v,elm){var m=/\\bdate-range-(\\w+)-(\\w+)\\b/.exec(elm.className),currentYear,normalizedTime,dependentElements;if(!m||m[2]==='to'||$.mage.isEmptyNoTrim(v)){return true;}\ncurrentYear=new Date().getFullYear()+'';normalizedTime=function(vd){vd=vd.split(/[.\\/]/);if(vd[2]&&vd[2].length<4){vd[2]=currentYear.substr(0,vd[2].length)+vd[2];}\nreturn new Date(vd.join('/')).getTime();};dependentElements=$(elm.form).find('.validate-date-range.date-range-'+m[1]+'-to');return!dependentElements.length||$.mage.isEmptyNoTrim(dependentElements[0].value)||normalizedTime(v)<=normalizedTime(dependentElements[0].value);},$.mage.__('Make sure the To Date is later than or the same as the From Date.')],'validate-cpassword':[function(){var conf=$('#confirmation').length>0?$('#confirmation'):$($('.validate-cpassword')[0]),pass=false,passwordElements,i,passwordElement;if($('#password')){pass=$('#password');}\npasswordElements=$('.validate-password');for(i=0;i<passwordElements.length;i++){passwordElement=$(passwordElements[i]);if(passwordElement.closest('form').attr('id')===conf.closest('form').attr('id')){pass=passwordElement;}}\nif($('.validate-admin-password').length){pass=$($('.validate-admin-password')[0]);}\nreturn pass.val()===conf.val();},$.mage.__('Please make sure your passwords match.')],'validate-identifier':[function(v){return $.mage.isEmptyNoTrim(v)||/^[a-z0-9][a-z0-9_\\/-]+(\\.[a-z0-9_-]+)?$/.test(v);},$.mage.__('Please enter a valid URL Key (Ex: \"example-page\", \"example-page.html\" or \"anotherlevel/example-page\").')],'validate-zip-international':[function(){return true;},$.mage.__('Please enter a valid zip code.')],'validate-one-required':[function(v,elm){var p=$(elm).parent(),options=p.find('input');return options.map(function(el){return $(el).val();}).length>0;},$.mage.__('Please select one of the options above.')],'validate-state':[function(v){return v!==0||v==='';},$.mage.__('Please select State/Province.')],'required-file':[function(v,elm){var result=!$.mage.isEmptyNoTrim(v),ovId;if(!result){ovId=$('#'+$(elm).attr('id')+'_value');if(ovId.length>0){result=!$.mage.isEmptyNoTrim(ovId.val());}}\nreturn result;},$.mage.__('Please select a file.')],'validate-ajax-error':[function(v,element){element=$(element);element.on('change.ajaxError',function(){element.removeClass('validate-ajax-error');element.off('change.ajaxError');});return!element.hasClass('validate-ajax-error');},''],'validate-optional-datetime':[function(v,elm,param){var dateTimeParts=$('.datetime-picker[id^=\"options_'+param+'\"]'),hasWithValue=false,hasWithNoValue=false,pattern=/day_part$/i,i;for(i=0;i<dateTimeParts.length;i++){if(!pattern.test($(dateTimeParts[i]).attr('id'))){if($(dateTimeParts[i]).val()==='s'){hasWithValue=true;}else{hasWithNoValue=true;}}}\nreturn hasWithValue^hasWithNoValue;},$.mage.__('The field isn\\'t complete.')],'validate-required-datetime':[function(v,elm,param){var dateTimeParts=$('.datetime-picker[id^=\"options_'+param+'\"]'),i;for(i=0;i<dateTimeParts.length;i++){if(dateTimeParts[i].value===''){return false;}}\nreturn true;},$.mage.__('This is a required field.')],'validate-one-required-by-name':[function(v,elm,selector){var name=elm.name.replace(/([\\\\\"])/g,'\\\\$1'),container=this.currentForm;selector=selector===true?'input[name=\"'+name+'\"]:checked':selector;return!!container.querySelectorAll(selector).length;},$.mage.__('Please select one of the options.')],'less-than-equals-to':[function(value,element,params){if($.isNumeric($(params).val())&&$.isNumeric(value)){this.lteToVal=$(params).val();return parseFloat(value)<=parseFloat($(params).val());}\nreturn true;},function(){var message=$.mage.__('Please enter a value less than or equal to %s.');return message.replace('%s',this.lteToVal);}],'greater-than-equals-to':[function(value,element,params){if($.isNumeric($(params).val())&&$.isNumeric(value)){this.gteToVal=$(params).val();return parseFloat(value)>=parseFloat($(params).val());}\nreturn true;},function(){var message=$.mage.__('Please enter a value greater than or equal to %s.');return message.replace('%s',this.gteToVal);}],'validate-emails':[function(value){var validRegexp,emails,i;if($.mage.isEmpty(value)){return true;}\nvalidRegexp=/^([a-z0-9,!\\#\\$%&'\\*\\+\\/=\\?\\^_`\\{\\|\\}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9,!\\#\\$%&'\\*\\+\\/=\\?\\^_`\\{\\|\\}~-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*@([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z0-9-]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*\\.(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]){2,})$/i;emails=value.split(/[\\s\\n\\,]+/g);for(i=0;i<emails.length;i++){if(!validRegexp.test(emails[i].trim())){return false;}}\nreturn true;},$.mage.__('Please enter valid email addresses, separated by commas. For example, johndoe@domain.com, johnsmith@domain.com.')],'validate-cc-type-select':[function(value,element,params){if(value&&params&&creditCartTypes[value]){return creditCartTypes[value][0].test($(params).val().replace(/\\s+/g,''));}\nreturn false;},$.mage.__('Card type does not match credit card number.')],'validate-cc-number':[function(value){if(value){return validateCreditCard(value);}\nreturn false;},$.mage.__('Please enter a valid credit card number.')],'validate-cc-type':[function(value,element,params){var ccType;if(value&&params){ccType=$(params).val();value=value.replace(/\\s/g,'').replace(/\\-/g,'');if(creditCartTypes[ccType]&&creditCartTypes[ccType][0]){return creditCartTypes[ccType][0].test(value);}else if(creditCartTypes[ccType]&&!creditCartTypes[ccType][0]){return true;}}\nreturn false;},$.mage.__('Credit card number does not match credit card type.')],'validate-cc-exp':[function(value,element,params){var isValid=false,month,year,currentTime,currentMonth,currentYear;if(value&&params){month=value;year=$(params).val();currentTime=new Date();currentMonth=currentTime.getMonth()+1;currentYear=currentTime.getFullYear();isValid=!year||year>currentYear||year==currentYear&&month>=currentMonth;}\nreturn isValid;},$.mage.__('Incorrect credit card expiration date.')],'validate-cc-cvn':[function(value,element,params){var ccType;if(value&&params){ccType=$(params).val();if(creditCartTypes[ccType]&&creditCartTypes[ccType][0]){return creditCartTypes[ccType][1].test(value);}}\nreturn false;},$.mage.__('Please enter a valid credit card verification number.')],'validate-cc-ukss':[function(value){return value;},$.mage.__('Please enter issue number or start date for switch/solo card type.')],'validate-length':[function(v,elm){var reMax=new RegExp(/^maximum-length-[0-9]+$/),reMin=new RegExp(/^minimum-length-[0-9]+$/),validator=this,result=true,length=0;$.each(elm.className.split(' '),function(index,name){if(name.match(reMax)&&result){length=name.split('-')[2];result=v.length<=length;validator.validateMessage=$.mage.__('Please enter less or equal than %1 symbols.').replace('%1',length);}\nif(name.match(reMin)&&result&&!$.mage.isEmpty(v)){length=name.split('-')[2];result=v.length>=length;validator.validateMessage=$.mage.__('Please enter more or equal than %1 symbols.').replace('%1',length);}});return result;},function(){return this.validateMessage;}],'required-entry':[function(value){return!$.mage.isEmpty(value);},$.mage.__('This is a required field.')],'not-negative-amount':[function(v){if(v.length){return(/^\\s*\\d+([,.]\\d+)*\\s*%?\\s*$/).test(v);}\nreturn true;},$.mage.__('Please enter positive number in this field.')],'validate-per-page-value-list':[function(v){var isValid=true,values=v.split(','),i;if($.mage.isEmpty(v)){return isValid;}\nfor(i=0;i<values.length;i++){if(!/^[0-9]+$/.test(values[i])){isValid=false;}}\nreturn isValid;},$.mage.__('Please enter a valid value, ex: 10,20,30')],'validate-per-page-value':[function(v,elm){var values;if($.mage.isEmpty(v)){return false;}\nvalues=$('#'+elm.id+'_values').val().split(',');return values.indexOf(v)!==-1;},$.mage.__('Please enter a valid value from list')],'validate-new-password':[function(v){if($.validator.methods['validate-password']&&!$.validator.methods['validate-password'](v)){return false;}\nif($.mage.isEmpty(v)&&v!==''){return false;}\nreturn true;},$.mage.__('Please enter 6 or more characters. Leading and trailing spaces will be ignored.')],'required-if-not-specified':[function(value,element,params){var valid=false,alternate=$(params),alternateValue;if(alternate.length>0){valid=this.check(alternate);if(valid){alternateValue=alternate.val();if(typeof alternateValue=='undefined'||alternateValue.length===0){valid=false;}}}\nif(!valid){valid=!this.optional(element);}\nreturn valid;},$.mage.__('This is a required field.')],'required-if-all-sku-empty-and-file-not-loaded':[function(value,element,params){var valid=false,alternate=$(params.specifiedId),alternateValue;if(alternate.length>0){valid=this.check(alternate);if(valid){alternateValue=alternate.val();if(typeof alternateValue=='undefined'||alternateValue.length===0){valid=false;}}}\nif(!valid){valid=!this.optional(element);}\n$('input['+params.dataSku+'=true]').each(function(){if($(this).val()!==''){valid=true;}});return valid;},$.mage.__('Please enter valid SKU key.')],'required-if-specified':[function(value,element,params){var valid=true,dependent=$(params),dependentValue;if(dependent.length>0){valid=this.check(dependent);if(valid){dependentValue=dependent.val();valid=typeof dependentValue!='undefined'&&dependentValue.length>0;}}\nif(valid){valid=!this.optional(element);}else{valid=true;}\nreturn valid;},$.mage.__('This is a required field.')],'required-number-if-specified':[function(value,element,params){var valid=true,dependent=$(params),depeValue;if(dependent.length){valid=this.check(dependent);if(valid){depeValue=dependent[0].value;valid=!!(depeValue&&depeValue.length);}}\nreturn valid?!!value.length:true;},$.mage.__('Please enter a valid number.')],'datetime-validation':[function(value,element){var isValid=true;if($(element).val().length===0){isValid=false;$(element).addClass('mage-error');}\nreturn isValid;},$.mage.__('This is required field')],'required-text-swatch-entry':[tableSingleValidation,$.mage.__('Admin is a required field in each row.')],'required-visual-swatch-entry':[tableSingleValidation,$.mage.__('Admin is a required field in each row.')],'required-dropdown-attribute-entry':[tableSingleValidation,$.mage.__('Admin is a required field in each row.')],'validate-item-quantity':[function(value,element,params){var validator=this,result=false,qty=$.mage.parseNumber(value),isMinAllowedValid=typeof params.minAllowed==='undefined'||qty>=$.mage.parseNumber(params.minAllowed),isMaxAllowedValid=typeof params.maxAllowed==='undefined'||qty<=$.mage.parseNumber(params.maxAllowed),isQtyIncrementsValid=typeof params.qtyIncrements==='undefined'||resolveModulo(qty,$.mage.parseNumber(params.qtyIncrements))===0.0;result=qty>0;if(result===false){validator.itemQtyErrorMessage=$.mage.__('Please enter a quantity greater than 0.');return result;}\nresult=isMinAllowedValid;if(result===false){validator.itemQtyErrorMessage=$.mage.__('The fewest you may purchase is %1.').replace('%1',params.minAllowed);return result;}\nresult=isMaxAllowedValid;if(result===false){validator.itemQtyErrorMessage=$.mage.__('The maximum you may purchase is %1.').replace('%1',params.maxAllowed);return result;}\nresult=isQtyIncrementsValid;if(result===false){validator.itemQtyErrorMessage=$.mage.__('You can buy this product only in quantities of %1 at a time.').replace('%1',params.qtyIncrements);return result;}\nreturn result;},function(){return this.itemQtyErrorMessage;}],'password-not-equal-to-user-name':[function(value,element,params){if(typeof params==='string'){return value.toLowerCase()!==params.toLowerCase();}\nreturn true;},$.mage.__('The password can\\'t be the same as the email address. Create a new password and try again.')]};$.each(rules,function(i,rule){rule.unshift(i);$.validator.addMethod.apply($.validator,rule);});$.validator.addClassRules({'required-option':{required:true},'required-options-count':{required:true},'validate-both-passwords':{'validate-cpassword':true}});$.validator.messages=$.extend($.validator.messages,{required:$.mage.__('This is a required field.'),remote:$.mage.__('Please fix this field.'),email:$.mage.__('Please enter a valid email address.'),url:$.mage.__('Please enter a valid URL.'),date:$.mage.__('Please enter a valid date.'),dateISO:$.mage.__('Please enter a valid date (ISO).'),number:$.mage.__('Please enter a valid number.'),digits:$.mage.__('Please enter only digits.'),creditcard:$.mage.__('Please enter a valid credit card number.'),equalTo:$.mage.__('Please enter the same value again.'),maxlength:$.validator.format($.mage.__('Please enter no more than {0} characters.')),minlength:$.validator.format($.mage.__('Please enter at least {0} characters.')),rangelength:$.validator.format($.mage.__('Please enter a value between {0} and {1} characters long.')),range:$.validator.format($.mage.__('Please enter a value between {0} and {1}.')),max:$.validator.format($.mage.__('Please enter a value less than or equal to {0}.')),min:$.validator.format($.mage.__('Please enter a value greater than or equal to {0}.'))});if($.metadata){$.metadata.setType('html5');}\nshowLabel=$.validator.prototype.showLabel;$.extend(true,$.validator.prototype,{showLabel:function(element,message){var label,elem;showLabel.call(this,element,message);label=this.errorsFor(element);elem=$(element);if(!label.attr('id')){label.attr('id',this.idOrName(element)+'-error');}\nelem.attr('aria-invalid','true').attr('aria-describedby',label.attr('id'));}});$.validator.validateElement=function(element){var form,validator,valid,classes;element=$(element);form=element.get(0).form;validator=form?$(form).data('validator'):null;if(validator){return validator.element(element.get(0));}\nvalid=true;classes=element.prop('class').split(' ');$.each(classes,$.proxy(function(i,className){if(this.methods[className]&&!this.methods[className](element.val(),element.get(0))){valid=false;return valid;}},this));return valid;};originValidateDelegate=$.fn.validateDelegate;$.fn.validateDelegate=function(){if(!this[0].form){return this;}\nreturn originValidateDelegate.apply(this,arguments);};$.validator.validateSingleElement=function(element,config){var errors={},valid=true,validateConfig={errorElement:'label',ignore:'.ignore-validate',hideError:false},form,validator,classes,elementValue;$.extend(validateConfig,config);element=$(element).not(validateConfig.ignore);if(!element.length){return true;}\nform=element.get(0).form;validator=form?$(form).data('validator'):null;if(validator){return validator.element(element.get(0));}\nclasses=element.prop('class').split(' ');validator=element.parent().data('validator')||$.mage.validation(validateConfig,element.parent()).validate;element.removeClass(validator.settings.errorClass);validator.toHide=validator.toShow;validator.hideErrors();validator.toShow=validator.toHide=$([]);$.each(classes,$.proxy(function(i,className){elementValue=element.val();if(element.is(':checkbox')||element.is(':radio')){elementValue=element.is(':checked')||null;}\nif(this.methods[className]&&!this.methods[className](elementValue,element.get(0))){valid=false;errors[element.get(0).name]=this.messages[className];validator.invalid[element.get(0).name]=true;if(!validateConfig.hideError){validator.showErrors(errors);}\nreturn valid;}},this));return valid;};$.widget('mage.validation',{options:{meta:'validate',onfocusout:false,onkeyup:false,onclick:false,ignoreTitle:true,errorClass:'mage-error',errorElement:'div',errorPlacement:function(error,element){var errorPlacement=element,fieldWrapper;if(element.hasClass('_has-datepicker')){errorPlacement=element.siblings('button');}\nfieldWrapper=element.closest('.addon');if(fieldWrapper.length){errorPlacement=fieldWrapper.after(error);}\nif(element.is(':checkbox')||element.is(':radio')){errorPlacement=element.parents('.control').children().last();if(!errorPlacement.length){errorPlacement=element.siblings('label').last();}}\nif(element.siblings('.tooltip').length){errorPlacement=element.siblings('.tooltip');}\nif(element.next().find('.tooltip').length){errorPlacement=element.next();}\nerrorPlacement.after(error);}},isValid:function(){return this.element.valid();},clearError:function(){if(arguments.length){$.each(arguments,$.proxy(function(index,item){this.validate.prepareElement(item);this.validate.hideErrors();},this));}else{this.validate.resetForm();}},_create:function(){this.validate=this.element.validate(this.options);this.element.find('.field.required').find('.control').find('input, select, textarea').attr('aria-required','true');this._listenFormValidate();},_listenFormValidate:function(){$('form').on('invalid-form.validate',this.listenFormValidateHandler);},listenFormValidateHandler:function(event,validation){var firstActive=$(validation.errorList[0].element||[]),lastActive=$(validation.findLastActive()||validation.errorList.length&&validation.errorList[0].element||[]),windowHeight=$(window).height(),parent,successList;if(lastActive.is(':hidden')){parent=lastActive.parent();$('html, body').animate({scrollTop:parent.offset().top-windowHeight / 2});}\nsuccessList=validation.successList;if(successList.length){$.each(successList,function(){$(this).removeAttr('aria-describedby').removeAttr('aria-invalid');});}\nif(firstActive.length){$('body,html,document').stop().animate({scrollTop:firstActive.offset().top-windowHeight / 2});firstActive.focus();}}});return $.mage.validation;});","mage/deletable-item.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.deletableItem',{options:{deleteEvent:'click',deleteSelector:'[data-role=\"delete\"]',hiddenClass:'no-display'},_bind:function(){var handlers={};handlers[this.options.deleteEvent+' '+this.options.deleteSelector]='_onDeleteClicked';handlers.hideDelete='_onHideDelete';handlers.showDelete='_onShowDelete';this._on(handlers);},_create:function(){this._bind();},_init:function(){this._onHideDelete();},_onDeleteClicked:function(e){e.stopPropagation();this.element.trigger('deleteItem');},_onHideDelete:function(){this.element.find(this.options.deleteSelector).addClass(this.options.hiddenClass);},_onShowDelete:function(){this.element.find(this.options.deleteSelector).removeClass(this.options.hiddenClass);}});return $.mage.deletableItem;});","mage/sticky.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.sticky',{options:{container:'',spacingTop:0,stickAfter:0,stickyClass:'_sticky'},_getOptionValue:function(option){var value=this.options[option]||0;if(typeof value==='function'){value=this.options[option]();}\nreturn value;},_create:function(){$(window).on({'scroll':$.proxy(this._stick,this),'resize':$.proxy(this.reset,this)});this.element.on('dimensionsChanged',$.proxy(this.reset,this));this.reset();},_stick:function(){var offset,isStatic,stuck,stickAfter;isStatic=this.element.css('position')==='static';if(!isStatic&&this.element.is(':visible')){offset=$(document).scrollTop()-\nthis.parentOffset+\nthis._getOptionValue('spacingTop');offset=Math.max(0,Math.min(offset,this.maxOffset));stuck=this.element.hasClass(this.options.stickyClass);stickAfter=this._getOptionValue('stickAfter');if(offset&&!stuck&&offset<stickAfter){offset=0;}\nthis.element.toggleClass(this.options.stickyClass,offset>0).css('top',offset);}},_calculateDimens:function(){var $parent=this.element.parent(),topMargin=parseInt(this.element.css('margin-top'),10),parentHeight=$parent.height()-topMargin,height=this.element.innerHeight(),maxScroll=document.body.offsetHeight-window.innerHeight;if(this.options.container.length>0){maxScroll=$(this.options.container).height();}\nthis.parentOffset=$parent.offset().top+topMargin;this.maxOffset=maxScroll-this.parentOffset;if(this.maxOffset+height>=parentHeight){this.maxOffset=parentHeight-height;}\nreturn this;},reset:function(){this._calculateDimens()._stick();}});return $.mage.sticky;});","mage/bootstrap.min.js":"define(['jquery','mage/apply/main','Magento_Ui/js/lib/knockout/bootstrap'],function($,mage){'use strict';$.ajaxSetup({cache:false});$(mage.apply);});","mage/edit-trigger.min.js":"define(['jquery','mage/template','jquery-ui-modules/widget'],function($,mageTemplate){'use strict';var editTriggerPrototype;$.widget('mage.editTrigger',{options:{img:'',alt:'[TR]',template:'#translate-inline-icon',zIndex:2000,editSelector:'[data-translate]',delay:2000,offsetTop:-3,singleElement:true},_create:function(){this.tmpl=mageTemplate(this.options.template);this._initTrigger();this._bind();},_getCss:function(){return{position:'absolute',cursor:'pointer',display:'none','z-index':this.options.zIndex};},_createTrigger:function(appendTo){var tmpl=this.tmpl({data:this.options});return $(tmpl).css(this._getCss()).data('role','edit-trigger-element').appendTo(appendTo);},_initTrigger:function(){this.trigger=this._createTrigger($('body'));},_bind:function(){this.trigger.on('click.'+this.widgetName,$.proxy(this._onClick,this));this.element.on('mousemove.'+this.widgetName,$.proxy(this._onMouseMove,this));},show:function(){if(this.trigger.is(':hidden')){this.trigger.show();}},hide:function(){this.currentTarget=null;if(this.trigger&&this.trigger.is(':visible')){this.trigger.hide();}},_setPosition:function(el){var offset=el.offset();this.trigger.css({top:offset.top+el.outerHeight()+this.options.offsetTop,left:offset.left});},_onMouseMove:function(e){var target=$(e.target),inner=target.find(this.options.editSelector);if($(e.target).is('button')&&inner.length){target=inner;}else if(!target.is(this.trigger)&&!target.is(this.options.editSelector)){target=target.parents(this.options.editSelector).first();}\nif(target.length){if(!target.is(this.trigger)){this._setPosition(target);this.currentTarget=target;}\nthis.show();}else{this.hide();}},_onClick:function(e){e.preventDefault();e.stopImmediatePropagation();$(this.currentTarget).trigger('edit.'+this.widgetName);this.hide(true);},destroy:function(){this.trigger.remove();this.element.off('.'+this.widgetName);return $.Widget.prototype.destroy.call(this);}});editTriggerPrototype=$.mage.editTrigger.prototype;$.widget('mage.editTrigger',$.extend({},editTriggerPrototype,{show:function(){editTriggerPrototype.show.apply(this,arguments);if(this.options.delay){this._clearTimer();}},hide:function(immediate){if(!immediate&&this.options.delay){if(!this.timer){this.timer=setTimeout($.proxy(function(){editTriggerPrototype.hide.apply(this,arguments);this._clearTimer();},this),this.options.delay);}}else{editTriggerPrototype.hide.apply(this,arguments);}},_clearTimer:function(){if(this.timer){clearTimeout(this.timer);this.timer=null;}}}));return $.mage.editTrigger;});","mage/storage.min.js":"define(['jquery','mage/url'],function($,urlBuilder){'use strict';return{get:function(url,global,contentType){global=global===undefined?true:global;contentType=contentType||'application/json';return $.ajax({url:urlBuilder.build(url),type:'GET',global:global,contentType:contentType});},post:function(url,data,global,contentType){global=global===undefined?true:global;contentType=contentType||'application/json';return $.ajax({url:urlBuilder.build(url),type:'POST',data:data,global:global,contentType:contentType});},put:function(url,data,global,contentType,headers){var ajaxSettings={};global=global===undefined?true:global;contentType=contentType||'application/json';ajaxSettings.url=urlBuilder.build(url);ajaxSettings.type='PUT';ajaxSettings.data=data;ajaxSettings.global=global;ajaxSettings.contentType=contentType;if(headers){ajaxSettings.headers=headers;}\nreturn $.ajax(ajaxSettings);},delete:function(url,global,contentType){global=global===undefined?true:global;contentType=contentType||'application/json';return $.ajax({url:urlBuilder.build(url),type:'DELETE',global:global,contentType:contentType});}};});","mage/common.min.js":"define(['jquery','domReady!'],function($){'use strict';$('form[data-auto-submit=\"true\"]').submit();$(document).on('submit','form',function(e){var formKeyElement,existingFormKeyElement,isKeyPresentInForm,isActionExternal,baseUrl=window.BASE_URL,form=$(e.target),formKey=$('input[name=\"form_key\"]').val(),formMethod=form.prop('method'),formAction=form.prop('action');isActionExternal=formAction.indexOf(baseUrl)!==0;existingFormKeyElement=form.find('input[name=\"form_key\"]');isKeyPresentInForm=existingFormKeyElement.length;if(isKeyPresentInForm&&existingFormKeyElement.attr('auto-added-form-key')==='1'){isKeyPresentInForm=form.find('> input[name=\"form_key\"]').length;}\nif(formKey&&!isKeyPresentInForm&&!isActionExternal&&formMethod!=='get'){formKeyElement=document.createElement('input');formKeyElement.setAttribute('type','hidden');formKeyElement.setAttribute('name','form_key');formKeyElement.setAttribute('value',formKey);formKeyElement.setAttribute('auto-added-form-key','1');form.get(0).appendChild(formKeyElement);}});});","mage/toggle.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.toggleAdvanced',{options:{baseToggleClass:'active'},_create:function(){this.beforeCreate();this._bindCore();this.afterCreate();},_bindCore:function(){var widget=this;this.element.on('click',$.proxy(function(e){widget._onClick();e.preventDefault();},this));},_onClick:function(){this._prepareOptions();this._toggleSelectors();},_prepareOptions:function(){this.options.baseToggleClass=this.element.data('base-toggle-class')?this.element.data('base-toggle-class'):this.options.baseToggleClass;},_toggleSelectors:function(){this.element.toggleClass(this.options.baseToggleClass);},beforeCreate:function(){},afterCreate:function(){}});$.widget('mage.toggleAdvanced',$.mage.toggleAdvanced,{options:{selectorsToggleClass:'hidden',toggleContainers:null},_toggleSelectors:function(){this._super();if(this.options.toggleContainers){$(this.options.toggleContainers).toggleClass(this.options.selectorsToggleClass);}else{this.element.toggleClass(this.options.baseToggleClass);}},_prepareOptions:function(){this.options.selectorsToggleClass=this.element.data('selectors-toggle-class')?this.element.data('selectors-toggle-class'):this.options.selectorsToggleClass;this.options.toggleContainers=this.element.data('toggle-selectors')?this.element.data('toggle-selectors'):this.options.toggleContainers;this._super();}});$.widget('mage.toggleAdvanced',$.mage.toggleAdvanced,{options:{newLabel:null,curLabel:null,currentLabelElement:null},_onClick:function(){this._super();this._toggleLabel();},_toggleLabel:function(){var cachedLabel,currentLabelSelector;if(this.options.newLabel){cachedLabel=this.options.newLabel;currentLabelSelector=this.options.currentLabelElement?$(this.options.currentLabelElement):this.element;this.element.data('toggle-label',this.options.curLabel);currentLabelSelector.html(this.options.newLabel);this.options.curLabel=this.options.newLabel;this.options.newLabel=cachedLabel;}},_prepareOptions:function(){this.options.newLabel=this.element.data('toggle-label')?this.element.data('toggle-label'):this.options.newLabel;this.options.currentLabelElement=this.element.data('current-label-el')?this.element.data('current-label-el'):this.options.currentLabelElement;if(!this.options.currentLabelElement){this.options.currentLabelElement=this.element;}\nthis.options.curLabel=$(this.options.currentLabelElement).html();this._super();}});return $.mage.toggleAdvanced;});","mage/multiselect.min.js":"define(['underscore','jquery','text!mage/multiselect.html','Magento_Ui/js/modal/alert','jquery-ui-modules/widget','jquery/editableMultiselect/js/jquery.multiselect'],function(_,$,searchTemplate,alert){'use strict';$.widget('mage.multiselect2',{options:{mselectContainer:'section.mselect-list',mselectItemsWrapperClass:'mselect-items-wrapper',mselectCheckedClass:'mselect-checked',containerClass:'paginated',searchInputClass:'admin__action-multiselect-search',selectedItemsCountClass:'admin__action-multiselect-items-selected',currentPage:1,lastAppendValue:0,updateDelay:1000,optionsLoaded:false},_create:function(){$.fn.multiselect.call(this.element,this.options);},_init:function(){this.domElement=this.element.get(0);this.$container=$(this.options.mselectContainer);this.$wrapper=this.$container.find('.'+this.options.mselectItemsWrapperClass);this.$item=this.$wrapper.find('div').first();this.selectedValues=[];this.values={};this.$container.addClass(this.options.containerClass).prepend(searchTemplate);this.$input=this.$container.find('.'+this.options.searchInputClass);this.$selectedCounter=this.$container.find('.'+this.options.selectedItemsCountClass);this.filter='';if(this.domElement.options.length){this._setLastAppendOption(this.domElement.options[this.domElement.options.length-1].value);}\nthis._initElement();this._events();},_initElement:function(){this.element.empty();_.each(this.options.selectedValues,function(value){this._createSelectedOption({value:value,label:value});},this);},_events:function(){var onKeyUp=_.debounce(this.onKeyUp,this.options.updateDelay);_.bindAll(this,'onScroll','onCheck','onOptionsChange');this.$wrapper.on('scroll',this.onScroll);this.$wrapper.on('change.mselectCheck','[type=checkbox]',this.onCheck);this.$input.on('keyup',_.bind(onKeyUp,this));this.element.on('change.hiddenSelect',this.onOptionsChange);},onScroll:function(){var height=this.$wrapper.height(),scrollHeight=this.$wrapper.prop('scrollHeight'),scrollTop=Math.ceil(this.$wrapper.prop('scrollTop'));if(!this.options.optionsLoaded&&scrollHeight-height<=scrollTop){this.loadOptions();}},onKeyUp:function(){if(this.getSearchCriteria()===this.filter){return false;}\nthis.setFilter();this.clearMultiselectOptions();this.setCurrentPage(0);this.loadOptions();},onOptionsChange:function(){this.selectedValues=_.map(this.domElement.options,function(option){this.values[option.value]=true;return option.value;},this);this._updateSelectedCounter();},onCheck:function(event){var checkbox=event.target,option={value:checkbox.value,label:$(checkbox).parent('label').text()};checkbox.checked?this._createSelectedOption(option):this._removeSelectedOption(option);event.stopPropagation();},onError:function(message){alert({content:message});},setFilter:function(){this.filter=this.getSearchCriteria()||'';},getSearchCriteria:function(){return $.trim(this.$input.val());},loadOptions:function(){var nextPage=this.getCurrentPage()+1;this.$wrapper.trigger('processStart');this.$input.prop('disabled',true);$.get(this.options.nextPageUrl,{p:nextPage,s:this.filter}).done(function(response){if(response.success){this.appendOptions(response.result);this.setCurrentPage(nextPage);}else{this.onError(response.errorMessage);}}.bind(this)).always(function(){this.$wrapper.trigger('processStop');this.$input.prop('disabled',false);if(this.filter){this.$input.focus();}}.bind(this));},appendOptions:function(options){var divOptions=[];if(!options.length){return false;}\nif(this.isOptionsLoaded(options)){return;}\noptions.forEach(function(option){if(!this.values[option.value]){this.values[option.value]=true;option.selected=this._isOptionSelected(option);divOptions.push(this._createMultiSelectOption(option));this._setLastAppendOption(option.value);}},this);this.$wrapper.append(divOptions);},clearMultiselectOptions:function(){this._setLastAppendOption(0);this.values={};this.$wrapper.empty();},isOptionsLoaded:function(options){this.options.optionsLoaded=this.options.lastAppendValue===options[options.length-1].value;return this.options.optionsLoaded;},setCurrentPage:function(page){this.options.currentPage=page;},getCurrentPage:function(){return this.options.currentPage;},_createSelectedOption:function(option){var selectOption=new Option(option.label,option.value,false,true);this.element.append(selectOption);this.selectedValues.push(option.value);this._updateSelectedCounter();return selectOption;},_removeSelectedOption:function(option){var unselectedOption=_.findWhere(this.domElement.options,{value:option.value});if(!_.isUndefined(unselectedOption)){this.domElement.remove(unselectedOption.index);this.selectedValues.splice(_.indexOf(this.selectedValues,option.value),1);this._updateSelectedCounter();}\nreturn unselectedOption;},_createMultiSelectOption:function(option){var item=this.$item.clone(),checkbox=item.find('input'),isSelected=!!option.selected;checkbox.val(option.value).prop('checked',isSelected).toggleClass(this.options.mselectCheckedClass,isSelected);item.find('label > span').text(option.label);return item;},_isOptionSelected:function(option){return!!~this.selectedValues.indexOf(option.value);},_setLastAppendOption:function(value){this.options.lastAppendValue=value;},_updateSelectedCounter:function(){this.$selectedCounter.text(this.selectedValues.length);}});return $.mage.multiselect2;});","mage/layout.min.js":"define(['underscore'],function(_){return{build:function(config){var types=_.map(_.flatten(config),function(item){return item.type;});require(types,function(){});}};});","mage/calendar.min.js":"define(['jquery','jquery-ui-modules/widget','jquery-ui-modules/datepicker','jquery-ui-modules/timepicker'],function($){'use strict';var calendarBasePrototype,datepickerPrototype=$.datepicker.constructor.prototype;$.datepicker.markerClassName='_has-datepicker';$.extend(datepickerPrototype,{_getTimezoneDate:function(options){var ms=Date.now();options=options||$.calendarConfig||{};if(typeof options.serverTimezoneOffset!=='undefined'){ms+=new Date().getTimezoneOffset()*60*1000+options.serverTimezoneOffset*1000;}else if(typeof options.serverTimezoneSeconds!=='undefined'){ms=(options.serverTimezoneSeconds+new Date().getTimezoneOffset()*60)*1000;}\nreturn new Date(ms);},_setTimezoneDateDatepicker:function(target){this._setDateDatepicker(target,this._getTimezoneDate());}});$.widget('mage.calendar',{options:{autoComplete:true},_create:function(){this._enableAMPM();this.options=$.extend({},$.calendarConfig?$.calendarConfig:{},this.options.showsTime?{showTime:true,showHour:true,showMinute:true}:{},this.options);this._initPicker(this.element);this._overwriteGenerateHtml();},_picker:function(){return this.options.showsTime?'datetimepicker':'datepicker';},_enableAMPM:function(){if(this.options.timeFormat&&this.options.timeFormat.indexOf('tt')>=0){this.options.ampm=true;}},_overwriteGenerateHtml:function(){$.datepicker.constructor.prototype._generateHTML=function(inst){var today=this._getTimezoneDate(),isRTL=this._get(inst,'isRTL'),showButtonPanel=this._get(inst,'showButtonPanel'),hideIfNoPrevNext=this._get(inst,'hideIfNoPrevNext'),navigationAsDateFormat=this._get(inst,'navigationAsDateFormat'),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,'showCurrentAtPos'),stepMonths=this._get(inst,'stepMonths'),isMultiMonth=parseInt(numMonths[0],10)!==1||parseInt(numMonths[1],10)!==1,currentDate=this._daylightSavingAdjust(!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)),minDate=this._getMinMaxDate(inst,'min'),maxDate=this._getMinMaxDate(inst,'max'),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear,maxDraw,prevText=this._get(inst,'prevText'),prev,nextText=this._get(inst,'nextText'),next,currentText=this._get(inst,'currentText'),gotoDate,controls,buttonPanel,firstDay,showWeek=this._get(inst,'showWeek'),dayNames=this._get(inst,'dayNames'),dayNamesMin=this._get(inst,'dayNamesMin'),monthNames=this._get(inst,'monthNames'),monthNamesShort=this._get(inst,'monthNamesShort'),beforeShowDay=this._get(inst,'beforeShowDay'),showOtherMonths=this._get(inst,'showOtherMonths'),selectOtherMonths=this._get(inst,'selectOtherMonths'),defaultDate=this._getDefaultDate(inst),html='',row=0,col=0,selectedDate,cornerClass=' ui-corner-all',group='',calender='',dow=0,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow=0,tbody,daySettings,otherMonth,unselectable;if(drawMonth<0){drawMonth+=12;drawYear--;}\nif(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}\ninst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst));prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class=\"ui-datepicker-prev ui-corner-all\" data-handler=\"prev\" data-event=\"click\"'+' title=\"'+prevText+'\">'+'<span class=\"ui-icon ui-icon-circle-triangle-'+(isRTL?'e':'w')+'\">'+''+prevText+'</span></a>':hideIfNoPrevNext?'':'<a class=\"ui-datepicker-prev ui-corner-all ui-state-disabled\" title=\"'+''+prevText+'\"><span class=\"ui-icon ui-icon-circle-triangle-'+''+(isRTL?'e':'w')+'\">'+prevText+'</span></a>';nextText=!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst));next=this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class=\"ui-datepicker-next ui-corner-all\" data-handler=\"next\" data-event=\"click\"'+'title=\"'+nextText+'\"><span class=\"ui-icon ui-icon-circle-triangle-'+''+(isRTL?'w':'e')+'\">'+nextText+'</span></a>':hideIfNoPrevNext?'':'<a class=\"ui-datepicker-next ui-corner-all ui-state-disabled\" title=\"'+nextText+'\">'+'<span class=\"ui-icon ui-icon-circle-triangle-'+(isRTL?'w':'e')+'\">'+nextText+'</span></a>';gotoDate=this._get(inst,'gotoCurrent')&&inst.currentDay?currentDate:today;currentText=!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst));controls=!inst.inline?'<button type=\"button\" class=\"ui-datepicker-close ui-state-default ui-priority-primary '+'ui-corner-all\" data-handler=\"hide\" data-event=\"click\">'+\nthis._get(inst,'closeText')+'</button>':'';buttonPanel=showButtonPanel?'<div class=\"ui-datepicker-buttonpane ui-widget-content\">'+(isRTL?controls:'')+\n(this._isInRange(inst,gotoDate)?'<button type=\"button\" class=\"ui-datepicker-current '+'ui-state-default ui-priority-secondary ui-corner-all\" data-handler=\"today\" data-event=\"click\"'+'>'+currentText+'</button>':'')+(isRTL?'':controls)+'</div>':'';firstDay=parseInt(this._get(inst,'firstDay'),10);firstDay=isNaN(firstDay)?0:firstDay;for(row=0;row<numMonths[0];row++){this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));calender='';if(isMultiMonth){calender+='<div class=\"ui-datepicker-group';if(numMonths[1]>1){switch(col){case 0:calender+=' ui-datepicker-group-first';cornerClass=' ui-corner-'+(isRTL?'right':'left');break;case numMonths[1]-1:calender+=' ui-datepicker-group-last';cornerClass=' ui-corner-'+(isRTL?'left':'right');break;default:calender+=' ui-datepicker-group-middle';cornerClass='';}}\ncalender+='\">';}\ncalender+='<div class=\"ui-datepicker-header '+'ui-widget-header ui-helper-clearfix'+cornerClass+'\">'+\n(/all|left/.test(cornerClass)&&parseInt(row,10)===0?isRTL?next:prev:'')+\n(/all|right/.test(cornerClass)&&parseInt(row,10)===0?isRTL?prev:next:'')+\nthis._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class=\"ui-datepicker-calendar\"><thead>'+'<tr>';thead=showWeek?'<th class=\"ui-datepicker-week-col\">'+this._get(inst,'weekHeader')+'</th>':'';for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+='<th'+((dow+firstDay+6)%7>=5?' class=\"ui-datepicker-week-end\"':'')+'>'+'<span title=\"'+dayNames[day]+'\">'+dayNamesMin[day]+'</span></th>';}\ncalender+=thead+'</tr></thead><tbody>';daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}\nleadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/ 7);numRows=isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows;this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+='<tr>';tbody=!showWeek?'':'<td class=\"ui-datepicker-week-col\">'+\nthis._get(inst,'calculateWeek')(printDate)+'</td>';for(dow=0;dow<7;dow++){daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[true,''];otherMonth=printDate.getMonth()!==drawMonth;unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&printDate>maxDate;tbody+='<td class=\"'+\n((dow+firstDay+6)%7>=5?' ui-datepicker-week-end':'')+\n(otherMonth?' ui-datepicker-other-month':'')+\n(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?' '+this._dayOverClass:'')+\n(unselectable?' '+this._unselectableClass+' ui-state-disabled':'')+\n(otherMonth&&!showOtherMonths?'':' '+daySettings[1]+\n(printDate.getTime()===currentDate.getTime()?' '+this._currentClass:'')+\n(printDate.getDate()===today.getDate()&&printDate.getMonth()===today.getMonth()&&printDate.getYear()===today.getYear()?' ui-datepicker-today':''))+'\"'+\n((!otherMonth||showOtherMonths)&&daySettings[2]?' title=\"'+daySettings[2]+'\"':'')+\n(unselectable?'':' data-handler=\"selectDay\" data-event=\"click\" data-month=\"'+''+printDate.getMonth()+'\" data-year=\"'+printDate.getFullYear()+'\"')+'>'+\n(otherMonth&&!showOtherMonths?'&#xa0;':unselectable?'<span class=\"ui-state-default\">'+printDate.getDate()+'</span>':'<a class=\"ui-state-default'+\n(printDate.getTime()===today.getTime()?' ':'')+\n(printDate.getTime()===currentDate.getTime()?' ui-state-active':'')+\n(otherMonth?' ui-priority-secondary':'')+'\" href=\"#\">'+printDate.getDate()+'</a>')+'</td>';printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}\ncalender+=tbody+'</tr>';}\ndrawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}\ncalender+='</tbody></table>'+(isMultiMonth?'</div>'+\n(numMonths[0]>0&&col===numMonths[1]-1?'<div class=\"ui-datepicker-row-break\"></div>':''):'');group+=calender;}\nhtml+=group;}\nhtml+=buttonPanel+($.ui.ie6&&!inst.inline?'<iframe src=\"javascript:false;\" class=\"ui-datepicker-cover\" frameborder=\"0\"></iframe>':'');inst._keyEvent=false;return html;};},_setCurrentDate:function(element){if(!element.val()){element[this._picker()]('setTimezoneDate').val('');}},_initPicker:function(element){var picker=element[this._picker()](this.options),pickerButtonText=picker.next('.ui-datepicker-trigger').find('img').attr('title');picker.next('.ui-datepicker-trigger').addClass('v-middle').text('').append('<span>'+pickerButtonText+'</span>');$(element).attr('autocomplete',this.options.autoComplete?'on':'off');this._setCurrentDate(element);},_destroy:function(){this.element[this._picker()]('destroy');this._super();},getTimezoneDate:function(){return datepickerPrototype._getTimezoneDate.call(this,this.options);}});calendarBasePrototype=$.mage.calendar.prototype;$.widget('mage.calendar',$.extend({},calendarBasePrototype,{dateTimeFormat:{date:{'EEEE':'DD','EEE':'D','EE':'D','E':'D','D':'o','MMMM':'MM','MMM':'M','MM':'mm','M':'mm','yyyy':'yy','y':'yy','Y':'yy','yy':'yy'},time:{'a':'TT'}},_create:function(){if(this.options.dateFormat){this.options.dateFormat=this._convertFormat(this.options.dateFormat,'date');}\nif(this.options.timeFormat){this.options.timeFormat=this._convertFormat(this.options.timeFormat,'time');}\ncalendarBasePrototype._create.apply(this,arguments);},_convertFormat:function(format,type){var symbols=format.match(/([a-z]+)/ig),separators=format.match(/([^a-z]+)/ig),self=this,convertedFormat='';if(symbols){$.each(symbols,function(key,val){convertedFormat+=(self.dateTimeFormat[type][val]||val)+\n(separators[key]||'');});}\nreturn convertedFormat;}}));$.widget('mage.dateRange',$.mage.calendar,{_initPicker:function(){var from,to;if(this.options.from&&this.options.to){from=this.element.find('#'+this.options.from.id);to=this.element.find('#'+this.options.to.id);this.options.onSelect=$.proxy(function(selectedDate){to[this._picker()]('option','minDate',selectedDate);},this);$.mage.calendar.prototype._initPicker.call(this,from);from.on('change',$.proxy(function(){to[this._picker()]('option','minDate',from[this._picker()]('getDate'));},this));this.options.onSelect=$.proxy(function(selectedDate){from[this._picker()]('option','maxDate',selectedDate);},this);$.mage.calendar.prototype._initPicker.call(this,to);to.on('change',$.proxy(function(){from[this._picker()]('option','maxDate',to[this._picker()]('getDate'));},this));}},_destroy:function(){if(this.options.from){this.element.find('#'+this.options.from.id)[this._picker()]('destroy');}\nif(this.options.to){this.element.find('#'+this.options.to.id)[this._picker()]('destroy');}\nthis._super();}});$.datepicker._gotoTodayOriginal=$.datepicker._gotoToday;$.datepicker._showDatepickerOriginal=$.datepicker._showDatepicker;$.datepicker._showDatepicker=function(input){if(!input.disabled){$.datepicker._showDatepickerOriginal.call(this,input);}};$.datepicker._gotoToday=function(el){$(el).datepicker('setTimezoneDate').blur().trigger('change');};return{dateRange:$.mage.dateRange,calendar:$.mage.calendar};});","mage/terms.min.js":"define(['jquery'],function($){'use strict';$.fn.terms=function(args){var defaults={start:0,wrapper:'',showAnchor:'',effects:'slide'},options=$.extend(defaults,args);this.each(function(){var obj=$(this),wrapper=options.wrapper!==''?'> '+options.wrapper:'',switches=$(wrapper+'> [data-section=\"title\"] > [data-toggle=\"switch\"]',obj),terms=$(wrapper+'> [data-section=\"content\"]',obj),t=switches.length,marginTop=$(switches[0]).closest('[data-section=\"title\"]').css('position')=='absolute'?0:null,title,current,showItem=function(item){if(item!=current&&!$(switches[item]).closest('[data-section=\"title\"]').hasClass('disabled')){$(switches).closest('[data-section=\"title\"]').removeClass('active');if(options.wrapper!==''){$(switches).parent().parent().removeClass('active');}\n$(terms).removeClass('active');$(switches[item]).closest('[data-section=\"title\"]').addClass('active');if(options.wrapper!==''){$(switches[current]).parent().parent().addClass('active');}\n$(terms[item]).addClass('active');current=item;}else if((obj.attr('data-sections')=='accordion'||$(switches[item]).closest('[data-section=\"title\"]').css('width')==obj.css('width'))&&item==current&&!$(switches[item]).closest('[data-section=\"title\"]').hasClass('disabled')){$(switches).closest('[data-section=\"title\"]').removeClass('active');if(options.wrapper!==''){$(switches).parent().parent().removeClass('active');}\n$(terms).removeClass('active');current=-1;}},init=function(){var linksList,i,classes,dataSection,itemHref,itemClass,fromUrl;if(t>0){if($(switches[0]).closest('[data-section=\"title\"]').css('display')=='table-cell'){obj.addClass('adjusted');if(obj[0].tagName=='DL'){linksList=$('<dd>');}else{linksList=$('<div>');}\nlinksList.addClass('sections-nav');obj.prepend(linksList);for(i=0;i<t;i++){title=$(switches[i]).html();classes=$(switches[i]).closest('[data-section=\"title\"]').attr('class');dataSection=$(switches[i]).closest('[data-section=\"title\"]').attr('data-section');itemHref=$(switches[i]).attr('href');itemClass=$(switches[i]).attr('class');$(switches[i]).parent('[data-section=\"title\"]').hide();switches[i]=$('<a/>',{href:itemHref,'class':itemClass,html:title}).appendTo(linksList);$(switches[i]).wrap('<strong class=\"'+classes+'\" data-section=\"'+dataSection+'\" />');}}\n$(switches).each(function(ind,el){$(el).click(function(event){event.preventDefault();showItem(ind);});if(marginTop!==null){$(el).closest('[data-section=\"title\"]').css({'top':marginTop+'px'});marginTop+=$(el).closest('[data-section=\"title\"]').outerHeight(true);obj.css({'min-height':marginTop+'px'});}});fromUrl=false;if(window.location.hash.length>0){$(terms).each(function(ind,el){if('#info-'+$(el).attr('id')==window.location.hash){showItem(ind);$('html, body').animate({scrollTop:$(switches[ind]).offset().top},700);fromUrl=true;}});}\nif(fromUrl===false){if(options.start%1===0){current=options.start+1;showItem(options.start);}else{$(terms).each(function(ind,el){if($(el).attr('id')==options.start){current=ind+1;showItem(ind);$('html, body').animate({scrollTop:$(switches[ind]).offset().top},700);}});}}}};init();});};return function(data,el){$(el).terms(data);};});","mage/tooltip.min.js":"define(['jquery','jquery-ui-modules/tooltip'],function($){'use strict';$.widget('mage.tooltip',$.ui.tooltip,{});return $.mage.tooltip;});","mage/url.min.js":"define([],function(){var baseUrl='';return{setBaseUrl:function(url){baseUrl=url;},build:function(path){if(path.indexOf(baseUrl)!==-1){return path;}\nreturn baseUrl+path;}};});","mage/translate-inline.min.js":"define(['jquery','mage/template','jquery-ui-modules/dialog','mage/translate'],function($,mageTemplate){'use strict';$.widget('mage.translateInline',$.ui.dialog,{options:{translateForm:{template:'#translate-form-template',data:{id:'translate-inline-form',message:'Please refresh the page to see your changes after submitting this form.'}},autoOpen:false,translateArea:null,modal:true,dialogClass:'popup-window',width:'75%',title:$.mage.__('Translate'),height:470,position:{my:'left top',at:'center top',of:'body'},buttons:[{text:$.mage.__('Submit'),'class':'action-primary',click:function(){$(this).translateInline('submit');}},{text:$.mage.__('Close'),'class':'action-close',click:function(){$(this).translateInline('close');}}],open:function(){var topMargin;$(this).closest('.ui-dialog').addClass('ui-dialog-active');topMargin=jQuery(this).closest('.ui-dialog').children('.ui-dialog-titlebar').outerHeight()+45;jQuery(this).closest('.ui-dialog').css('margin-top',topMargin);},close:function(){$(this).closest('.ui-dialog').removeClass('ui-dialog-active');}},_create:function(){this.tmpl=mageTemplate(this.options.translateForm.template);(this.options.translateArea&&$(this.options.translateArea).length?$(this.options.translateArea):this.element.closest('body')).on('edit.editTrigger',$.proxy(this._onEdit,this));this._super();},_prepareContent:function(templateData){var data=$.extend({items:templateData,escape:$.mage.escapeHTML},this.options.translateForm.data);this.data=data;return $(this.tmpl({data:data}));},_onEdit:function(e){this.target=e.target;this.element.html(this._prepareContent($(e.target).data('translate')));this.open(e);},submit:function(){if(this.formIsSubmitted){return;}\nthis._formSubmit();},_formSubmit:function(){var parameters;this.formIsSubmitted=true;parameters=$.param({area:this.options.area})+'&'+$('#'+this.options.translateForm.data.id).serialize();$.ajax({url:this.options.ajaxUrl,type:'POST',data:parameters,loaderContext:this.element,showLoader:true}).complete($.proxy(this._formSubmitComplete,this));},_formSubmitComplete:function(response){this.close();this.formIsSubmitted=false;this._updatePlaceholder(response.responseJSON[this.data.items[0].original]);},_updatePlaceholder:function(newValue){var target=jQuery(this.target);target.data('translate')[0].shown=newValue;target.data('translate')[0].translated=newValue;target.html(newValue);},destroy:function(){this.element.off('.editTrigger');this._super();}});$.extend(true,$,{mage:{escapeHTML:function(str){return str?jQuery('<div/>').text(str).html().replace(/\"/g,'&quot;'):false;}}});return $.mage.translateInline;});","mage/smart-keyboard-handler.min.js":"define(['jquery'],function($){'use strict';function KeyboardHandler(){var body=$('body'),focusState=false,tabFocusClass='_keyfocus',productsGrid='[data-container=\"product-grid\"]',catalogProductsGrid=$(productsGrid),CODE_TAB=9;function onFocusInHandler(){focusState=true;body.addClass(tabFocusClass).off('focusin.keyboardHandler',onFocusInHandler);}\nfunction onClickHandler(){focusState=false;body.removeClass(tabFocusClass).off('click',onClickHandler);}\nfunction smartKeyboardFocus(){$(document).on('keydown keypress',function(event){if(event.which===CODE_TAB&&!focusState){body.on('focusin.keyboardHandler',onFocusInHandler).on('click',onClickHandler);}});if(catalogProductsGrid.length){body.on('focusin.gridProducts',productsGrid,function(){if(body.hasClass(tabFocusClass)){$(this).addClass('active');}});body.on('focusout.gridProducts',productsGrid,function(){$(this).removeClass('active');});}}\nfunction handleFocus(element){element.on('focusin.emulateTabFocus',function(){focusState=true;body.addClass(tabFocusClass);element.off();});element.on('focusout.emulateTabFocus',function(){focusState=false;body.removeClass(tabFocusClass);element.off();});}\nreturn{apply:smartKeyboardFocus,focus:handleFocus};}\nreturn new KeyboardHandler;});","mage/tabs.min.js":"define(['jquery','jquery-ui-modules/widget','jquery-ui-modules/core','mage/mage','mage/collapsible'],function($){'use strict';$.widget('mage.tabs',{options:{active:0,disabled:[],openOnFocus:true,collapsible:false,collapsibleElement:'[data-role=collapsible]',header:'[data-role=title]',content:'[data-role=content]',trigger:'[data-role=trigger]',closedState:null,openedState:null,disabledState:null,ajaxUrlElement:'[data-ajax=true]',ajaxContent:false,loadingClass:null,saveState:false,animate:false,icons:{activeHeader:null,header:null}},_create:function(){if(typeof this.options.disabled==='string'){this.options.disabled=this.options.disabled.split(' ').map(function(item){return parseInt(item,10);});}\nthis._processPanels();this._handleDeepLinking();this._processTabIndex();this._closeOthers();this._bind();},_destroy:function(){$.each(this.collapsibles,function(){$(this).collapsible('destroy');});},_handleDeepLinking:function(){var self=this,anchor=window.location.hash,isValid=$.mage.isValidSelector(anchor),anchorId=anchor.replace('#','');if(anchor&&isValid){$.each(self.contents,function(i){if($(this).attr('id')===anchorId||$(this).find('#'+anchorId).length){self.collapsibles.not(self.collapsibles.eq(i)).collapsible('forceDeactivate');return false;}});}},_processTabIndex:function(){var self=this;self.triggers.attr('tabIndex',0);$.each(this.collapsibles,function(i){self.triggers.attr('tabIndex',0);self.triggers.eq(i).attr('tabIndex',0);});},_processPanels:function(){var isNotNested=this._isNotNested.bind(this);this.contents=this.element.find(this.options.content).filter(isNotNested);this.collapsibles=this.element.find(this.options.collapsibleElement).filter(isNotNested);this.collapsibles.attr('role','presentation').parent().attr('role','tablist');this.headers=this.element.find(this.options.header).filter(isNotNested);if(this.headers.length===0){this.headers=this.collapsibles;}\nthis.triggers=this.element.find(this.options.trigger).filter(isNotNested);if(this.triggers.length===0){this.triggers=this.headers;}\nthis._callCollapsible();},_isNotNested:function(index,element){var parentContent=$(element).parents(this.options.content);return!parentContent.length||!this.element.find(parentContent).length;},_callCollapsible:function(){var self=this,disabled=false,active=false;$.each(this.collapsibles,function(i){disabled=active=false;if($.inArray(i,self.options.disabled)!==-1){disabled=true;}\nif(i===self.options.active){active=true;}\nself._instantiateCollapsible(this,i,active,disabled);});},_instantiateCollapsible:function(element,index,active,disabled){$(element).collapsible($.extend({},this.options,{active:active,disabled:disabled,header:this.headers.eq(index),content:this.contents.eq(index),trigger:this.triggers.eq(index)}));},_closeOthers:function(){var self=this;$.each(this.collapsibles,function(){$(this).on('beforeOpen',function(){self.collapsibles.not(this).collapsible('forceDeactivate');});});},activate:function(index){this._toggleActivate('activate',index);},deactivate:function(index){this._toggleActivate('deactivate',index);},_toggleActivate:function(action,index){this.collapsibles.eq(index).collapsible(action);},disable:function(index){this._toggleEnable('disable',index);},enable:function(index){this._toggleEnable('enable',index);},_toggleEnable:function(action,index){var self=this;if($.isArray(index)){$.each(index,function(){self.collapsibles.eq(this).collapsible(action);});}else if(index===undefined){this.collapsibles.collapsible(action);}else{this.collapsibles.eq(index).collapsible(action);}},_keydown:function(event){var self=this,keyCode,toFocus,toFocusIndex,enabledTriggers,length,currentIndex,nextToFocus;if(event.altKey||event.ctrlKey){return;}\nkeyCode=$.ui.keyCode;toFocus=false;enabledTriggers=[];$.each(this.triggers,function(){if(!self.collapsibles.eq(self.triggers.index($(this))).collapsible('option','disabled')){enabledTriggers.push(this);}});length=$(enabledTriggers).length;currentIndex=$(enabledTriggers).index(event.target);nextToFocus=function(direction){if(length>0){if(direction==='right'){toFocusIndex=(currentIndex+1)%length;}else{toFocusIndex=(currentIndex+length-1)%length;}\nreturn enabledTriggers[toFocusIndex];}\nreturn event.target;};switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=nextToFocus('right');break;case keyCode.LEFT:case keyCode.UP:toFocus=nextToFocus('left');break;case keyCode.HOME:toFocus=enabledTriggers[0];break;case keyCode.END:toFocus=enabledTriggers[length-1];break;}\nif(toFocus){toFocusIndex=this.triggers.index(toFocus);$(event.target).attr('tabIndex',-1);$(toFocus).attr('tabIndex',0);toFocus.focus();if(this.options.openOnFocus){this.activate(toFocusIndex);}\nevent.preventDefault();}},_bind:function(){var events={keydown:'_keydown'};this._off(this.triggers);this._on(this.triggers,events);}});return $.mage.tabs;});","mage/dropdowns.min.js":"define(['jquery'],function($){'use strict';$.fn.dropdown=function(options){var defaults={parent:null,autoclose:true,btnArrow:'.arrow',menu:'[data-target=\"dropdown\"]',activeClass:'active'},actionElem=$(this),self=this;options=$.extend(defaults,options);actionElem=$(this);self=this;this.openDropdown=function(elem){elem.addClass(options.activeClass).attr('aria-expanded',true).parent().addClass(options.activeClass);elem.parent().find(options.menu).attr('aria-hidden',false);$(options.btnArrow,elem).text('-');};this.closeDropdown=function(elem){elem.removeClass(options.activeClass).attr('aria-expanded',false).parent().removeClass(options.activeClass);elem.parent().find(options.menu).attr('aria-hidden',true);$(options.btnArrow,elem).text('+');};this.reset=function(param){var params=param||{},dropdowns=params.elems||actionElem;dropdowns.each(function(index,elem){self.closeDropdown($(elem));});};if(options.autoclose===true){$(document).on('click.hideDropdown',this.reset);$(document).on('keyup.hideDropdown',function(e){var ESC_CODE='27';if(e.keyCode==ESC_CODE){self.reset();}});}\nif(options.events){$.each(options.events,function(index,event){$(document).on(event.name,event.selector,event.action);});}\nreturn this.each(function(){var elem=$(this),parent=$(options.parent).length>0?$(options.parent):elem.parent(),menu=$(options.menu,parent)||$('.dropdown-menu',parent);if(menu.length){elem.attr('aria-haspopup',true);}\nif(!elem.hasClass(options.activeClass)){elem.attr('aria-expanded',false);menu.attr('aria-hidden',true);}else{elem.attr('aria-expanded',true);menu.attr('aria-hidden',false);}\nif(!elem.is('a, button')){elem.attr('role','button');elem.attr('tabindex',0);}\nif(elem.attr('data-trigger-keypress-button')){elem.on('keypress',function(e){var keyCode=e.keyCode||e.which,ENTER_CODE=13;if(keyCode===ENTER_CODE){e.preventDefault();elem.trigger('click.toggleDropdown');}});}\nelem.on('click.toggleDropdown',function(){var el=actionElem;if(options.autoclose===true){actionElem=$();$(document).trigger('click.hideDropdown');actionElem=el;}\nself[el.hasClass(options.activeClass)?'closeDropdown':'openDropdown'](elem);return false;});});};return function(data,el){$(el).dropdown(data);};});","mage/translate.min.js":"define(['jquery','mage/mage','mageTranslationDictionary'],function($,mage,dictionary){'use strict';$.extend(true,$,{mage:{translate:(function(){var _data=dictionary;return{add:function(){if(arguments.length>1){_data[arguments[0]]=arguments[1];}else if(typeof arguments[0]==='object'){$.extend(_data,arguments[0]);}},translate:function(text){return _data[text]?_data[text]:text;}};}())}});$.mage.__=$.proxy($.mage.translate.translate,$.mage.translate);return $.mage.__;});","mage/template.min.js":"define(['underscore'],function(_){'use strict';function isSelector(selector){try{document.querySelector(selector);return true;}catch(e){return false;}}\nfunction unescape(str){return str.replace(/&lt;%|%3C%/g,'<%').replace(/%&gt;|%%3E/g,'%>');}\nfunction getTmplString(tmpl){if(isSelector(tmpl)){tmpl=document.querySelector(tmpl);if(tmpl){tmpl=tmpl.innerHTML.trim();}else{console.warn('No template was found by selector: '+tmpl);tmpl='';}}\nreturn unescape(tmpl);}\nreturn function(tmpl,data){var render;tmpl=getTmplString(tmpl);render=_.template(tmpl);return!_.isUndefined(data)?render(data):render;};});","mage/dialog.min.js":"define(['jquery','jquery-ui-modules/dialog'],function($){'use strict';$.widget('mage.dialog',$.ui.dialog,{});return $.mage.dialog;});","mage/trim-input.min.js":"define(['jquery'],function($){'use strict';$.widget('mage.trimInput',{options:{cache:{}},_create:function(){this.options.cache.input=$(this.element);this._bind();},_bind:function(){if(this.options.cache.input.length){this._on(this.options.cache.input,{'change':this._trimInput,'keyup':this._trimInput,'paste':this._trimInput});}},_trimInput:function(){var caretStart,caretEnd,input;caretStart=this.options.cache.input.get(0).selectionStart;caretEnd=this.options.cache.input.get(0).selectionEnd;input=this._getInputValue().trim();this.options.cache.input.val(input);if(caretStart!==null&&caretEnd!==null){this.options.cache.input.get(0).setSelectionRange(caretStart,caretEnd);}},_getInputValue:function(){return this.options.cache.input.val();}});return $.mage.trimInput;});","mage/ie-class-fixer.min.js":"(function(){var userAgent=navigator.userAgent,html=document.documentElement,gap='';if(html.className){gap=' ';}\nif(userAgent.match(/Trident.*rv[ :]*11\\./)){html.className+=gap+'ie11';}})();","mage/dropdown.min.js":"define(['jquery','jquery-ui-modules/dialog','mage/translate'],function($){'use strict';var timer=null;$.widget('mage.dropdownDialog',$.ui.dialog,{options:{triggerEvent:'click',triggerClass:null,parentClass:null,triggerTarget:null,defaultDialogClass:'mage-dropdown-dialog',dialogContentClass:null,shadowHinter:null,closeOnMouseLeave:true,closeOnClickOutside:true,minHeight:null,minWidth:null,width:null,modal:false,timeout:null,autoOpen:false,createTitleBar:false,autoPosition:false,autoSize:false,draggable:false,resizable:false,bodyClass:'',buttons:[{'class':'action close','text':$.mage.__('Close'),'click':function(){$(this).dropdownDialog('close');}}]},_create:function(){var _self=this;this._super();this.uiDialog.addClass(this.options.defaultDialogClass);if(_self.options.triggerTarget){$(_self.options.triggerTarget).on(_self.options.triggerEvent,function(event){event.preventDefault();event.stopPropagation();if(!_self._isOpen){$('.'+_self.options.defaultDialogClass+' > .ui-dialog-content').dropdownDialog('close');_self.open();}else{_self.close(event);}});}\nif(_self.options.shadowHinter){_self.hinter=$('<div class=\"'+_self.options.shadowHinter+'\"/>');_self.element.append(_self.hinter);}},open:function(){var _self=this;this._super();if(_self.options.dialogContentClass){_self.element.addClass(_self.options.dialogContentClass);}\nif(_self.options.closeOnMouseLeave){this._mouseEnter(_self.uiDialog);this._mouseLeave(_self.uiDialog);if(_self.options.triggerTarget){this._mouseLeave($(_self.options.triggerTarget));}}\nif(_self.options.closeOnClickOutside){$('body').on('click.outsideDropdown',function(event){if(_self._isOpen&&!$(event.target).closest('.ui-dialog').length){if(timer){clearTimeout(timer);}\n_self.close(event);}});}\nif(_self.options.triggerClass){$(_self.options.triggerTarget).addClass(_self.options.triggerClass);}\nif(_self.options.parentClass){$(_self.options.appendTo).addClass(_self.options.parentClass);}\nif(_self.options.bodyClass){$('body').addClass(_self.options.bodyClass);}\nif(_self.options.shadowHinter){_self._setShadowHinterPosition();}},close:function(){this._super();if(this.options.dialogContentClass){this.element.removeClass(this.options.dialogContentClass);}\nif(this.options.triggerClass){$(this.options.triggerTarget).removeClass(this.options.triggerClass);}\nif(this.options.parentClass){$(this.options.appendTo).removeClass(this.options.parentClass);}\nif(this.options.bodyClass){$('body').removeClass(this.options.bodyClass);}\nif(timer){clearTimeout(timer);}\nif(this.options.triggerTarget){$(this.options.triggerTarget).off('mouseleave');}\nthis.uiDialog.off('mouseenter');this.uiDialog.off('mouseleave');$('body').off('click.outsideDropdown');},_setShadowHinterPosition:function(){var _self=this,offset;offset=_self.options.position.of.offset().left-\n_self.element.offset().left+\n_self.options.position.of.outerWidth()/ 2;offset=isNaN(offset)?0:Math.floor(offset);_self.hinter.css('left',offset);},_position:function(){if(this.options.autoPosition){this._super();}},_createTitlebar:function(){if(this.options.createTitleBar){this._super();}else{this.uiDialogTitlebarClose=$('<div>');}},_size:function(){if(this.options.autoSize){this._super();}},_mouseLeave:function(handler){var _self=this;handler.on('mouseleave',function(event){event.stopPropagation();if(_self._isOpen){if(timer){clearTimeout(timer);}\ntimer=setTimeout(function(e){_self.close(e);},_self.options.timeout);}});},_mouseEnter:function(handler){handler.on('mouseenter',function(event){event.stopPropagation();if(timer){clearTimeout(timer);}});},_setOption:function(key,value){this._super(key,value);if(key==='triggerTarget'){this.options.triggerTarget=value;}}});return $.mage.dropdownDialog;});","mage/dataPost.min.js":"define(['jquery','mage/template','Magento_Ui/js/modal/confirm','jquery-ui-modules/widget'],function($,mageTemplate,uiConfirm){'use strict';$.widget('mage.dataPost',{options:{formTemplate:'<form action=\"<%- data.action %>\" method=\"post\">'+'<% _.each(data.data, function(value, index) { %>'+'<input name=\"<%- index %>\" value=\"<%- value %>\">'+'<% }) %></form>',postTrigger:['a[data-post]','button[data-post]','span[data-post]'],formKeyInputSelector:'input[name=\"form_key\"]'},_create:function(){this._bind();},_bind:function(){var events={};$.each(this.options.postTrigger,function(index,value){events['click '+value]='_postDataAction';});this._on(events);},_postDataAction:function(e){var params=$(e.currentTarget).data('post');e.preventDefault();this.postData(params);},postData:function(params){var formKey=$(this.options.formKeyInputSelector).val(),$form,input;if(formKey){params.data['form_key']=formKey;}\n$form=$(mageTemplate(this.options.formTemplate,{data:params}));if(params.files){$form[0].enctype='multipart/form-data';$.each(params.files,function(key,files){if(files instanceof FileList){input=document.createElement('input');input.type='file';input.name=key;input.files=files;$form[0].appendChild(input);}});}\nif(params.data.confirmation){uiConfirm({content:params.data.confirmationMessage,actions:{confirm:function(){$form.appendTo('body').hide().submit();}}});}else{$form.appendTo('body').hide().submit();}}});$(document).dataPost();return $.mage.dataPost;});","mage/decorate.min.js":"define(['jquery','mage/translate'],function($){var methods={list:function(isRecursive){return this.each(function(){var list=$(this),items;if(list.length>0){items=typeof isRecursive==='undefined'||isRecursive?list.find('li'):list.children();items.decorate('generic',['odd','even','last']);}});},generic:function(decoratorParams){var elements=$(this),allSupportedParams;if(elements){allSupportedParams={even:'odd',odd:'even',last:'last',first:'first'};decoratorParams=decoratorParams||allSupportedParams;$.each(decoratorParams,function(index,param){if(param==='even'||param==='odd'){elements.filter(':'+param).removeClass('odd even').addClass(allSupportedParams[param]);}else{elements.filter(':'+param).addClass(allSupportedParams[param]);}});}\nreturn this;},table:function(instanceOptions){return this.each(function(){var table=$(this),options;if(table.length>0){options={'tbody':false,'tbody tr':['odd','even','first','last'],'thead tr':['first','last'],'tfoot tr':['first','last'],'tr td':['last']};$.extend(options,instanceOptions||{});$.each(options,function(key,value){if(options[key]){if(key==='tr td'){$.each(table.find('tr'),function(){$(this).find('td').decorate('generic',options['tr td']);});}else{table.find(key).decorate('generic',value);}}});}});},dataList:function(){return this.each(function(){var list=$(this);if(list){list.find('dt').decorate('generic',['odd','even','last']);list.find('dd').decorate('generic',['odd','even','last']);}});}};$.fn.decorate=function(method){var message;if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}\nmessage=$.mage.__('Method %s does not exist on jQuery.decorate');$.error(message.replace('%s',method));};});","mage/polyfill.min.js":"try{if(!window.localStorage||!window.sessionStorage){throw new Error();}\nlocalStorage.setItem('storage_test',1);localStorage.removeItem('storage_test');}catch(e){(function(){'use strict';var Storage=function(type){var data;function createCookie(name,value,days){var date,expires;if(days){date=new Date();date.setTime(date.getTime()+days*24*60*60*1000);expires='; expires='+date.toGMTString();}else{expires='';}\ndocument.cookie=name+'='+value+expires+'; path=/';}\nfunction readCookie(name){var nameEQ=name+'=',ca=document.cookie.split(';'),i=0,c;for(i=0;i<ca.length;i++){c=ca[i];while(c.charAt(0)===' '){c=c.substring(1,c.length);}\nif(c.indexOf(nameEQ)===0){return c.substring(nameEQ.length,c.length);}}\nreturn null;}\nfunction getCookieName(){if(type!=='session'){return'localstorage';}\nif(!window.name){window.name=new Date().getTime();}\nreturn'sessionStorage'+window.name;}\nfunction setData(dataObject){data=encodeURIComponent(JSON.stringify(dataObject));createCookie(getCookieName(),data,365);}\nfunction clearData(){createCookie(getCookieName(),'',365);}\nfunction getData(){var dataResponse=readCookie(getCookieName());return dataResponse?JSON.parse(decodeURIComponent(dataResponse)):{};}\ndata=getData();return{length:0,clear:function(){data={};this.length=0;clearData();},getItem:function(key){return data[key]===undefined?null:data[key];},key:function(i){var ctr=0,k;for(k in data){if(data.hasOwnProperty(k)){if(ctr.toString()===i.toString()){return k;}\nctr++;}}\nreturn null;},removeItem:function(key){delete data[key];this.length--;setData(data);},setItem:function(key,value){data[key]=value.toString();this.length++;setData(data);}};};window.localStorage.prototype=window.localStorage=new Storage('local');window.sessionStorage.prototype=window.sessionStorage=new Storage('session');})();}","mage/popup-window.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.popupWindow',{options:{centerBrowser:0,centerScreen:0,height:500,left:0,location:0,menubar:0,resizable:0,scrollbars:0,status:0,width:500,windowName:null,windowURL:null,top:0,toolbar:0},_create:function(){this.element.on('click',$.proxy(this._openPopupWindow,this));},_openPopupWindow:function(event){var element=$(event.target),settings=this.options,windowFeatures='height='+settings.height+',width='+settings.width+',toolbar='+settings.toolbar+',scrollbars='+settings.scrollbars+',status='+settings.status+',resizable='+settings.resizable+',location='+settings.location+',menuBar='+settings.menubar,centeredX,centeredY;settings.windowName=settings.windowName||element.attr('name');settings.windowURL=settings.windowURL||element.attr('href');if(settings.centerBrowser){centeredY=window.screenY+(window.outerHeight / 2-settings.height / 2);centeredX=window.screenX+(window.outerWidth / 2-settings.width / 2);windowFeatures+=',left='+centeredX+',top='+centeredY;}else if(settings.centerScreen){centeredY=(screen.height-settings.height)/ 2;centeredX=(screen.width-settings.width)/ 2;windowFeatures+=',left='+centeredX+',top='+centeredY;}else{windowFeatures+=',left='+settings.left+',top='+settings.top;}\nwindow.open(settings.windowURL,settings.windowName,windowFeatures).focus();event.preventDefault();}});return $.mage.popupWindow;});","mage/menu.min.js":"define(['jquery','matchMedia','jquery-ui-modules/menu','jquery/jquery.mobile.custom','mage/translate'],function($,mediaCheck){'use strict';$.widget('mage.menu',$.ui.menu,{options:{responsive:false,expanded:false,showDelay:42,hideDelay:300,delay:0,mediaBreakpoint:'(max-width: 767px)'},_create:function(){var self=this;this.delay=this.options.delay;this._super();$(window).on('resize',function(){self.element.find('.submenu-reverse').removeClass('submenu-reverse');});},_init:function(){this._super();if(this.options.expanded===true){this.isExpanded();}\nif(this.options.responsive===true){mediaCheck({media:this.options.mediaBreakpoint,entry:$.proxy(function(){this._toggleMobileMode();},this),exit:$.proxy(function(){this._toggleDesktopMode();},this)});}\nthis._assignControls()._listen();this._setActiveMenu();},_assignControls:function(){this.controls={toggleBtn:$('[data-action=\"toggle-nav\"]'),swipeArea:$('.nav-sections')};return this;},_listen:function(){var controls=this.controls,toggle=this.toggle;controls.toggleBtn.off('click');controls.toggleBtn.on('click',toggle.bind(this));controls.swipeArea.off('swipeleft');controls.swipeArea.on('swipeleft',toggle.bind(this));},toggle:function(){var html=$('html');if(html.hasClass('nav-open')){html.removeClass('nav-open');setTimeout(function(){html.removeClass('nav-before-open');},this.options.hideDelay);}else{html.addClass('nav-before-open');setTimeout(function(){html.addClass('nav-open');},this.options.showDelay);}},_setActiveMenu:function(){var currentUrl=window.location.href.split('?')[0];if(!this._setActiveMenuForCategory(currentUrl)){this._setActiveMenuForProduct(currentUrl);}},_setActiveMenuForCategory:function(url){var activeCategoryLink=this.element.find('a[href=\"'+url+'\"]'),classes,classNav;if(!activeCategoryLink||!activeCategoryLink.hasClass('ui-corner-all')){return false;}else if(!activeCategoryLink.parent().hasClass('active')){activeCategoryLink.parent().addClass('active');classes=activeCategoryLink.parent().attr('class');classNav=classes.match(/(nav\\-)[0-9]+(\\-[0-9]+)+/gi);if(classNav){this._setActiveParent(classNav[0]);}}\nreturn true;},_setActiveParent:function(childClassName){var parentElement,parentClass=childClassName.substr(0,childClassName.lastIndexOf('-'));if(parentClass.lastIndexOf('-')!==-1){parentElement=this.element.find('.'+parentClass);if(parentElement){parentElement.addClass('has-active');}\nthis._setActiveParent(parentClass);}},_setActiveMenuForProduct:function(currentUrl){var categoryUrlExtension,lastUrlSection,possibleCategoryUrl,firstCategoryUrl=this.element.find('> li a').attr('href');if(firstCategoryUrl){lastUrlSection=firstCategoryUrl.substr(firstCategoryUrl.lastIndexOf('/'));categoryUrlExtension=lastUrlSection.lastIndexOf('.')!==-1?lastUrlSection.substr(lastUrlSection.lastIndexOf('.')):'';possibleCategoryUrl=currentUrl.substr(0,currentUrl.lastIndexOf('/'))+categoryUrlExtension;this._setActiveMenuForCategory(possibleCategoryUrl);}},isExpanded:function(){var subMenus=this.element.find(this.options.menus),expandedMenus=subMenus.find(this.options.menus);expandedMenus.addClass('expanded');},_activate:function(event){window.location.href=this.active.find('> a').attr('href');this.collapseAll(event);},_keydown:function(event){var match,prev,character,skip,regex,preventDefault=true;function escape(value){return value.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g,'\\\\$&');}\nif(this.active.closest(this.options.menus).attr('aria-expanded')!='true'){switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move('first','first',event);break;case $.ui.keyCode.END:this._move('last','last',event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:if(this.active&&!this.active.is('.ui-state-disabled')){this.expand(event);}\nbreak;case $.ui.keyCode.LEFT:this.previous(event);break;case $.ui.keyCode.RIGHT:this.next(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||'';character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}\nregex=new RegExp('^'+escape(character),'i');match=this.activeMenu.children('.ui-menu-item').filter(function(){return regex.test($(this).children('a').text());});match=skip&&match.index(this.active.next())!==-1?this.active.nextAll('.ui-menu-item'):match;if(!match.length){character=String.fromCharCode(event.keyCode);regex=new RegExp('^'+escape(character),'i');match=this.activeMenu.children('.ui-menu-item').filter(function(){return regex.test($(this).children('a').text());});}\nif(match.length){this.focus(event,match);if(match.length>1){this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}else{delete this.previousFilter;}}}else{switch(event.keyCode){case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is('.ui-state-disabled')){this.expand(event);}\nbreak;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.LEFT:case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||'';character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}\nregex=new RegExp('^'+escape(character),'i');match=this.activeMenu.children('.ui-menu-item').filter(function(){return regex.test($(this).children('a').text());});match=skip&&match.index(this.active.next())!==-1?this.active.nextAll('.ui-menu-item'):match;if(!match.length){character=String.fromCharCode(event.keyCode);regex=new RegExp('^'+escape(character),'i');match=this.activeMenu.children('.ui-menu-item').filter(function(){return regex.test($(this).children('a').text());});}\nif(match.length){this.focus(event,match);if(match.length>1){this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}else{delete this.previousFilter;}}}\nif(preventDefault){event.preventDefault();}},_toggleMobileMode:function(){var subMenus;$(this.element).off('mouseenter mouseleave');this._on({'click .ui-menu-item:has(a)':function(event){var target;event.preventDefault();target=$(event.target).closest('.ui-menu-item');if(!target.hasClass('level-top')||!target.has('.ui-menu').length){window.location.href=target.find('> a').attr('href');}},'click .ui-menu-item:has(.ui-state-active)':function(event){this.collapseAll(event,true);}});subMenus=this.element.find('.level-top');$.each(subMenus,$.proxy(function(index,item){var category=$(item).find('> a span').not('.ui-menu-icon').text(),categoryUrl=$(item).find('> a').attr('href'),menu=$(item).find('> .ui-menu');this.categoryLink=$('<a>').attr('href',categoryUrl).text($.mage.__('All %1').replace('%1',category));this.categoryParent=$('<li>').addClass('ui-menu-item all-category').html(this.categoryLink);if(menu.find('.all-category').length===0){menu.prepend(this.categoryParent);}},this));},_toggleDesktopMode:function(){var categoryParent,html;$(this.element).off('click mousedown mouseenter mouseleave');this._on({'mousedown .ui-menu-item > a':function(event){event.preventDefault();},'click .ui-state-disabled > a':function(event){event.preventDefault();},'click .ui-menu-item:has(a)':function(event){var target=$(event.target).closest('.ui-menu-item');if(!this.mouseHandled&&target.not('.ui-state-disabled').length){this.select(event);if(!event.isPropagationStopped()){this.mouseHandled=true;}\nif(target.has('.ui-menu').length){this.expand(event);}else if(!this.element.is(':focus')&&$(this.document[0].activeElement).closest('.ui-menu').length){this.element.trigger('focus',[true]);if(this.active&&this.active.parents('.ui-menu').length===1){clearTimeout(this.timer);}}}},'mouseenter .ui-menu-item':function(event){var target=$(event.currentTarget),submenu=this.options.menus,ulElement,ulElementWidth,width,targetPageX,rightBound;if(target.has(submenu)){ulElement=target.find(submenu);ulElementWidth=ulElement.outerWidth(true);width=target.outerWidth()*2;targetPageX=target.offset().left;rightBound=$(window).width();if(ulElementWidth+width+targetPageX>rightBound){ulElement.addClass('submenu-reverse');}\nif(targetPageX-ulElementWidth<0){ulElement.removeClass('submenu-reverse');}}\ntarget.siblings().children('.ui-state-active').removeClass('ui-state-active');this.focus(event,target);},'mouseleave':function(event){this.collapseAll(event,true);},'mouseleave .ui-menu':'collapseAll'});categoryParent=this.element.find('.all-category');html=$('html');categoryParent.remove();if(html.hasClass('nav-open')){html.removeClass('nav-open');setTimeout(function(){html.removeClass('nav-before-open');},this.options.hideDelay);}},_delay:function(handler,delay){var instance=this,handlerProxy=function(){return(typeof handler==='string'?instance[handler]:handler).apply(instance,arguments);};return setTimeout(handlerProxy,delay||0);},expand:function(event){var newItem=this.active&&this.active.children('.ui-menu').children('.ui-menu-item').first();if(newItem&&newItem.length){if(newItem.closest('.ui-menu').is(':visible')&&newItem.closest('.ui-menu').has('.all-categories')){return;}\nthis.active.siblings().children('.ui-state-active').removeClass('ui-state-active');this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},select:function(event){var ui;this.active=this.active||$(event.target).closest('.ui-menu-item');if(this.active.is('.all-category')){this.active=$(event.target).closest('.ui-menu-item');}\nui={item:this.active};if(!this.active.has('.ui-menu').length){this.collapseAll(event,true);}\nthis._trigger('select',event,ui);}});$.widget('mage.navigation',$.mage.menu,{options:{responsiveAction:'wrap',maxItems:null,container:'#menu',moreText:$.mage.__('more'),breakpoint:768},_init:function(){var that,responsive;this._super();that=this;responsive=this.options.responsiveAction;this.element.addClass('ui-menu-responsive').attr('responsive','main');this.setupMoreMenu();this.setMaxItems();if(responsive=='onResize'){$(window).on('resize',function(){if($(window).width()>that.options.breakpoint){that._responsive();$('[responsive=more]').show();}else{that.element.children().show();$('[responsive=more]').hide();}});}else if(responsive=='onReload'){this._responsive();}},setupMoreMenu:function(){var moreListItems=this.element.children().clone(),moreLink=$('<a>'+this.options.moreText+'</a>');moreListItems.hide();moreLink.attr('href','#');this.moreItemsList=$('<ul>').append(moreListItems);this.moreListContainer=$('<li>').append(moreLink).append(this.moreItemsList);this.responsiveMenu=$('<ul>').addClass('ui-menu-more').attr('responsive','more').append(this.moreListContainer).menu({position:{my:'right top',at:'right bottom'}}).insertAfter(this.element);},_responsive:function(){var container=$(this.options.container),containerSize=container.width(),width=0,items=this.element.children('li'),more=$('.ui-menu-more > li > ul > li a');items=items.map(function(){var item={};item.item=$(this);item.itemSize=$(this).outerWidth();return item;});$.each(items,function(index){var itemText=items[index].item.find('a:first').text();width+=parseInt(items[index].itemSize,null);if(width<containerSize){items[index].item.show();more.each(function(){var text=$(this).text();if(text===itemText){$(this).parent().hide();}});}else if(width>containerSize){items[index].item.hide();more.each(function(){var text=$(this).text();if(text===itemText){$(this).parent().show();}});}});},setMaxItems:function(){var items=this.element.children('li'),itemsCount=items.length,maxItems=this.options.maxItems,overflow=itemsCount-maxItems,overflowItems=items.slice(overflow);overflowItems.hide();overflowItems.each(function(){var itemText=$(this).find('a:first').text();$(this).hide();$('.ui-menu-more > li > ul > li a').each(function(){var text=$(this).text();if(text===itemText){$(this).parent().show();}});});}});return{menu:$.mage.menu,navigation:$.mage.navigation};});","mage/cookies.min.js":"define(['jquery','mage/mage','jquery/jquery.cookie'],function($){'use strict';var CookieHelper=function(){this.defaults={expires:null,path:'/',domain:null,secure:false,lifetime:null};function lifetimeToExpires(options,defaults){var expires,lifetime;lifetime=options.lifetime||defaults.lifetime;if(lifetime&&lifetime>0){expires=options.expires||new Date();return new Date(expires.getTime()+lifetime*1000);}\nreturn null;}\nthis.set=function(name,value,options){var expires,path,domain,secure;options=$.extend({},this.defaults,options||{});expires=lifetimeToExpires(options,this.defaults)||options.expires;path=options.path;domain=options.domain;secure=options.secure;document.cookie=name+'='+encodeURIComponent(value)+\n(expires?'; expires='+expires.toUTCString():'')+\n(path?'; path='+path:'')+\n(domain?'; domain='+domain:'')+\n(secure?'; secure':'');};this.get=function(name){var arg=name+'=',aLength=arg.length,cookie=document.cookie,cLength=cookie.length,i=0,j=0;while(i<cLength){j=i+aLength;if(cookie.substring(i,j)===arg){return this.getCookieVal(j);}\ni=cookie.indexOf(' ',i)+1;if(i===0){break;}}\nreturn null;};this.clear=function(name){if(this.get(name)){this.set(name,'',{expires:new Date('Jan 01 1970 00:00:01 GMT')});}};this.getCookieVal=function(offset){var cookie=document.cookie,endstr=cookie.indexOf(';',offset);if(endstr===-1){endstr=cookie.length;}\nreturn decodeURIComponent(cookie.substring(offset,endstr));};return this;};$.extend(true,$,{mage:{cookies:new CookieHelper()}});return function(pageOptions){$.extend($.mage.cookies.defaults,pageOptions);$.extend($.cookie.defaults,$.mage.cookies.defaults);};});","mage/fieldset-controls.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.fieldsetControls',{original:undefined,options:{inputSelector:'[data-reset=\"true\"]'},_create:function(){this.original=this.element.find(this.options.inputSelector).clone(true);this._bind();},_bind:function(){this._on({'fieldsetReset':'_onReset'});},_onReset:function(e){var items;e.stopPropagation();items=this.element.find(this.options.inputSelector);items.each($.proxy(function(index,item){if($(item).attr('type')=='file'){$(item).replaceWith($(this.original[index]).clone(true));}else if($(item).attr('type')=='checkbox'||$(item).attr('type')=='radio'){if($(this.original[index]).attr('checked')===undefined){$(item).removeAttr('checked');}else{$(item).attr('checked',$(this.original[index]).attr('checked'));}}else{$(item).val($(this.original[index]).val());}},this));}});$.widget('mage.fieldsetResetControl',{_create:function(){this._bind();},_bind:function(){this._on({click:'_onClick'});},_onClick:function(e){e.stopPropagation();$(this.element).trigger('fieldsetReset');}});return{fieldsetControls:$.mage.fieldsetControls,fieldsetResetControl:$.mage.fieldsetResetControl};});","mage/loader.min.js":"define(['jquery','mage/template','jquery-ui-modules/widget','mage/translate'],function($,mageTemplate){'use strict';$.widget('mage.loader',{loaderStarted:0,options:{icon:'',texts:{loaderText:$.mage.__('Please wait...'),imgAlt:$.mage.__('Loading...')},template:'<div class=\"loading-mask\" data-role=\"loader\">'+'<div class=\"loader\">'+'<div class=\"loading-gif-block\"><div class=\"loading-gif-img\"><span></span><span></span><span></span><span></span><span></span></div></div>'+'<p><%- data.texts.loaderText %></p>'+'</div>'+'</div>'},_create:function(){this._bind();},_bind:function(){this._on({'processStop':'hide','processStart':'show','show.loader':'show','hide.loader':'hide','contentUpdated.loader':'_contentUpdated'});},_contentUpdated:function(e){this.show(e);},show:function(e,ctx){this._render();this.loaderStarted++;this.spinner.show();if(ctx){this.spinner.css({width:ctx.outerWidth(),height:ctx.outerHeight(),position:'absolute'}).position({my:'top left',at:'top left',of:ctx});}\nreturn false;},hide:function(){if(this.loaderStarted>0){this.loaderStarted--;if(this.loaderStarted===0){this.spinner.hide();}}\nreturn false;},_render:function(){var html;if(!this.spinnerTemplate){this.spinnerTemplate=mageTemplate(this.options.template);html=$(this.spinnerTemplate({data:this.options}));html.prependTo(this.element);this.spinner=html;}},_destroy:function(){this.spinner.remove();}});$.widget('mage.loaderAjax',{options:{defaultContainer:'[data-container=body]',loadingClass:'ajax-loading'},_create:function(){this._bind();if(window.console&&!this.element.is(this.options.defaultContainer)&&$.mage.isDevMode(undefined)){console.warn('This widget is intended to be attached to the body, not below.');}},_bind:function(){$(document).on({'ajaxSend':this._onAjaxSend.bind(this),'ajaxComplete':this._onAjaxComplete.bind(this)});},_getJqueryObj:function(loaderContext){var ctx;if(loaderContext){if(loaderContext.jquery){ctx=loaderContext;}else{ctx=$(loaderContext);}}else{ctx=$('[data-container=\"body\"]');}\nreturn ctx;},_onAjaxSend:function(e,jqxhr,settings){var ctx;$(this.options.defaultContainer).addClass(this.options.loadingClass).attr({'aria-busy':true});if(settings&&settings.showLoader){ctx=this._getJqueryObj(settings.loaderContext);ctx.trigger('processStart');if(window.console&&!ctx.parents('[data-role=\"loader\"]').length){console.warn('Expected to start loader but did not find one in the dom');}}},_onAjaxComplete:function(e,jqxhr,settings){$(this.options.defaultContainer).removeClass(this.options.loadingClass).attr('aria-busy',false);if(settings&&settings.showLoader){this._getJqueryObj(settings.loaderContext).trigger('processStop');}}});return{loader:$.mage.loader,loaderAjax:$.mage.loaderAjax};});","mage/redirect-url.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.redirectUrl',{options:{event:'click',url:undefined},_bind:function(){var handlers={};handlers[this.options.event]='_onEvent';this._on(handlers);},_create:function(){this._bind();},_onEvent:function(){if(this.options.url){location.href=this.options.url;}else{location.href=this.element.val();}}});return $.mage.redirectUrl;});","mage/collapsible.min.js":"define(['jquery','jquery-ui-modules/widget','jquery-ui-modules/core','jquery/jquery-storageapi','mage/mage'],function($){'use strict';var hideProps={},showProps={};hideProps.height='hide';showProps.height='show';$.widget('mage.collapsible',{options:{active:false,disabled:false,collapsible:true,header:'[data-role=title]',content:'[data-role=content]',trigger:'[data-role=trigger]',closedState:null,openedState:null,disabledState:null,ajaxUrlElement:'[data-ajax=true]',ajaxContent:false,loadingClass:null,saveState:false,animate:false,icons:{activeHeader:null,header:null},collateral:{element:null,openedState:null}},_create:function(){this.storage=$.localStorage;this.icons=false;if(typeof this.options.icons==='string'){this.options.icons=$.parseJSON(this.options.icons);}\nthis._processPanels();this._processState();this._refresh();if(this.options.icons.header&&this.options.icons.activeHeader){this._createIcons();this.icons=true;}\nthis.element.on('dimensionsChanged',function(e){if(e.target&&e.target.classList.contains('active')){this._scrollToTopIfNotVisible();}}.bind(this));this._bind('click');this._trigger('created');},_refresh:function(){this.trigger.attr('tabIndex',0);if(this.options.active&&!this.options.disabled){if(this.options.openedState){this.element.addClass(this.options.openedState);}\nif(this.options.collateral.element&&this.options.collateral.openedState){$(this.options.collateral.element).addClass(this.options.collateral.openedState);}\nif(this.options.ajaxContent){this._loadContent();}\nthis.header.attr({'aria-selected':false});}else if(this.options.disabled){this.disable();}else{this.content.hide();if(this.options.closedState){this.element.addClass(this.options.closedState);}}},_processState:function(){var anchor=window.location.hash,isValid=$.mage.isValidSelector(anchor),urlPath=window.location.pathname.replace(/\\./g,''),state;this.stateKey=encodeURIComponent(urlPath+this.element.attr('id'));if(isValid&&($(this.content.find(anchor)).length>0||this.content.attr('id')===anchor.replace('#',''))){this.element.parents('[data-collapsible=true]').collapsible('forceActivate');if(!this.options.disabled){this.options.active=true;if(this.options.saveState){this.storage.set(this.stateKey,true);}}}else if(this.options.saveState&&!this.options.disabled){state=this.storage.get(this.stateKey);if(typeof state==='undefined'||state===null){this.storage.set(this.stateKey,this.options.active);}else if(state===true){this.options.active=true;}else if(state===false){this.options.active=false;}}},_createIcons:function(){var icons=this.options.icons;if(icons){$('<span>').addClass(icons.header).attr('data-role','icons').prependTo(this.header);if(this.options.active&&!this.options.disabled){this.header.children('[data-role=icons]').removeClass(icons.header).addClass(icons.activeHeader);}}},_destroyIcons:function(){this.header.children('[data-role=icons]').remove();},_destroy:function(){var options=this.options;this.element.removeAttr('data-collapsible');this.trigger.removeAttr('tabIndex');if(options.openedState){this.element.removeClass(options.openedState);}\nif(this.options.collateral.element&&this.options.collateral.openedState){$(this.options.collateral.element).removeClass(this.options.collateral.openedState);}\nif(options.closedState){this.element.removeClass(options.closedState);}\nif(options.disabledState){this.element.removeClass(options.disabledState);}\nif(this.icons){this._destroyIcons();}},_processPanels:function(){var headers,triggers;this.element.attr('data-collapsible','true');if(typeof this.options.header==='object'){this.header=this.options.header;}else{headers=this.element.find(this.options.header);if(headers.length>0){this.header=headers.eq(0);}else{this.header=this.element;}}\nif(typeof this.options.content==='object'){this.content=this.options.content;}else{this.content=this.header.next(this.options.content).eq(0);}\nif(this.header.attr('id')){this.content.attr('aria-labelledby',this.header.attr('id'));}\nif(this.content.attr('id')){this.header.attr('aria-controls',this.content.attr('id'));}\nthis.header.attr({'role':'tab','aria-selected':this.options.active,'aria-expanded':this.options.active});if(this.header.parent().attr('role')!=='presentation'){this.header.parent().attr('role','tablist');}\nthis.content.attr({'role':'tabpanel','aria-hidden':!this.options.active});if(typeof this.options.trigger==='object'){this.trigger=this.options.trigger;}else{triggers=this.header.find(this.options.trigger);if(triggers.length>0){this.trigger=triggers.eq(0);}else{this.trigger=this.header;}}},_keydown:function(event){var keyCode;if(event.altKey||event.ctrlKey){return;}\nkeyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;}},_bind:function(event){var self=this;this.events={keydown:'_keydown'};if(event){$.each(event.split(' '),function(index,eventName){self.events[eventName]='_eventHandler';});}\nthis._off(this.trigger);if(!this.options.disabled){this._on(this.trigger,this.events);}},disable:function(){this.options.disabled=true;this._off(this.trigger);this.forceDeactivate();if(this.options.disabledState){this.element.addClass(this.options.disabledState);}\nthis.trigger.attr('tabIndex',-1);},enable:function(){this.options.disabled=false;this._on(this.trigger,this.events);this.forceActivate();if(this.options.disabledState){this.element.removeClass(this.options.disabledState);}\nthis.trigger.attr('tabIndex',0);},_eventHandler:function(event){if(this.options.active&&this.options.collapsible){this.deactivate();}else{this.activate();}\nevent.preventDefault();},_animate:function(prop){var duration,easing,animate=this.options.animate;if(typeof animate==='number'){duration=animate;}\nif(typeof animate==='string'){animate=$.parseJSON(animate);}\nduration=duration||animate.duration;easing=animate.easing;this.content.animate(prop,duration,easing);},deactivate:function(){if(this.options.animate){this._animate(hideProps);}else{this.content.hide();}\nthis._close();},forceDeactivate:function(){this.content.hide();this._close();},_close:function(){this.options.active=false;if(this.options.saveState){this.storage.set(this.stateKey,false);}\nif(this.options.openedState){this.element.removeClass(this.options.openedState);}\nif(this.options.collateral.element&&this.options.collateral.openedState){$(this.options.collateral.element).removeClass(this.options.collateral.openedState);}\nif(this.options.closedState){this.element.addClass(this.options.closedState);}\nif(this.icons){this.header.children('[data-role=icons]').removeClass(this.options.icons.activeHeader).addClass(this.options.icons.header);}\nthis.header.attr({'aria-selected':'false','aria-expanded':'false'});this.content.attr({'aria-hidden':'true'});this.element.trigger('dimensionsChanged',{opened:false});},activate:function(){if(this.options.disabled){return;}\nif(this.options.animate){this._animate(showProps);}else{this.content.show();}\nthis._open();},forceActivate:function(){if(!this.options.disabled){this.content.show();this._open();}},_open:function(){this.element.trigger('beforeOpen');this.options.active=true;if(this.options.ajaxContent){this._loadContent();}\nif(this.options.saveState){this.storage.set(this.stateKey,true);}\nif(this.options.openedState){this.element.addClass(this.options.openedState);}\nif(this.options.collateral.element&&this.options.collateral.openedState){$(this.options.collateral.element).addClass(this.options.collateral.openedState);}\nif(this.options.closedState){this.element.removeClass(this.options.closedState);}\nif(this.icons){this.header.children('[data-role=icons]').removeClass(this.options.icons.header).addClass(this.options.icons.activeHeader);}\nthis.header.attr({'aria-selected':'true','aria-expanded':'true'});this.content.attr({'aria-hidden':'false'});this.element.trigger('dimensionsChanged',{opened:true});},_loadContent:function(){var url=this.element.find(this.options.ajaxUrlElement).attr('href'),that=this;if(url){that.xhr=$.get({url:url,dataType:'html'},function(){});}\nif(that.xhr&&that.xhr.statusText!=='canceled'){if(that.options.loadingClass){that.element.addClass(that.options.loadingClass);}\nthat.content.attr('aria-busy','true');that.xhr.done(function(response){setTimeout(function(){that.content.html(response);},1);});that.xhr.always(function(jqXHR,status){setTimeout(function(){if(status==='abort'){that.content.stop(false,true);}\nif(that.options.loadingClass){that.element.removeClass(that.options.loadingClass);}\nthat.content.removeAttr('aria-busy');if(jqXHR===that.xhr){delete that.xhr;}},1);});}},_scrollToTopIfNotVisible:function(){if(this._isElementOutOfViewport()){this.header[0].scrollIntoView();}},_isElementOutOfViewport:function(){var headerRect=this.header[0].getBoundingClientRect(),contentRect=this.content.get().length?this.content[0].getBoundingClientRect():false,headerOut,contentOut;headerOut=headerRect.bottom-headerRect.height<0||headerRect.right-headerRect.width<0||headerRect.left+headerRect.width>window.innerWidth||headerRect.top+headerRect.height>window.innerHeight;contentOut=contentRect?contentRect.bottom-contentRect.height<0||contentRect.right-contentRect.width<0||contentRect.left+contentRect.width>window.innerWidth||contentRect.top+contentRect.height>window.innerHeight:false;return headerOut?headerOut:contentOut;}});return $.mage.collapsible;});","mage/accordion.min.js":"define(['jquery','mage/tabs'],function($,tabs){'use strict';$.widget('mage.accordion',tabs,{options:{active:[0],multipleCollapsible:false,openOnFocus:false},_callCollapsible:function(){var self=this,disabled=false,active=false;if(typeof this.options.active==='string'){this.options.active=this.options.active.split(' ').map(function(item){return parseInt(item,10);});}\n$.each(this.collapsibles,function(i){disabled=active=false;if($.inArray(i,self.options.disabled)!==-1){disabled=true;}\nif($.inArray(i,self.options.active)!==-1){active=true;}\nself._instantiateCollapsible(this,i,active,disabled);});},_toggleActivate:function(action,index){var self=this;if($.isArray(index&&this.options.multipleCollapsible)){$.each(index,function(){self.collapsibles.eq(this).collapsible(action);});}else if(index===undefined&&this.options.multipleCollapsible){this.collapsibles.collapsible(action);}else{this._super(action,index);}},_handleDeepLinking:function(){if(!this.options.multipleCollapsible){this._super();}},_closeOthers:function(){var self=this;if(!this.options.multipleCollapsible){$.each(this.collapsibles,function(){$(this).on('beforeOpen',function(){self.collapsibles.not(this).collapsible('deactivate');});});}\n$.each(this.collapsibles,function(){$(this).on('beforeOpen',function(){var section=$(this);section.addClass('allow').prevAll().addClass('allow');section.nextAll().removeClass('allow');});});}});return $.mage.accordion;});","mage/mage.min.js":"define(['jquery','mage/apply/main'],function($,mage){'use strict';$.mage=$.mage||{};$.fn.mage=function(name,config){config=config||{};this.each(function(index,el){mage.applyFor(el,config,name);});return this;};$.extend($.mage,{init:function(){mage.apply();return this;},redirect:function(url,type,timeout,forced){var _redirect;forced=!!forced;timeout=timeout||0;type=type||'assign';_redirect=function(){window.location[type](type==='reload'?forced:url);};timeout?setTimeout(_redirect,timeout):_redirect();},isValidSelector:function(selector){try{document.querySelector(selector);return true;}catch(e){return false;}}});$('body').on('contentUpdated',function(){if(mage){mage.apply();}});return $.mage;});","mage/apply/main.min.js":"define(['underscore','jquery','./scripts'],function(_,$,processScripts){'use strict';var dataAttr='data-mage-init',nodeSelector='['+dataAttr+']';function init(el,config,component){require([component],function(fn){if(typeof fn==='object'){fn=fn[component].bind(fn);}\nif(_.isFunction(fn)){fn(config,el);}else if($(el)[component]){$(el)[component](config);}},function(error){if('console'in window&&typeof window.console.error==='function'){console.error(error);}\nreturn true;});}\nfunction getData(el){var data=el.getAttribute(dataAttr);el.removeAttribute(dataAttr);return{el:el,data:JSON.parse(data)};}\nreturn{apply:function(context){var virtuals=processScripts(!context?document:context),nodes=document.querySelectorAll(nodeSelector);_.toArray(nodes).map(getData).concat(virtuals).forEach(function(itemContainer){var element=itemContainer.el;_.each(itemContainer.data,function(obj,key){if(obj.mixins){require(obj.mixins,function(){var i,len;for(i=0,len=arguments.length;i<len;i++){$.extend(true,itemContainer.data[key],arguments[i](itemContainer.data[key],element));}\ndelete obj.mixins;init.call(null,element,obj,key);});}else{init.call(null,element,obj,key);}});});},applyFor:init};});","mage/apply/scripts.min.js":"define(['underscore','jquery'],function(_,$){'use strict';var scriptSelector='script[type=\"text/x-magento-init\"]',dataAttr='data-mage-init',virtuals=[];function addVirtual(components){virtuals.push({el:false,data:components});}\nfunction setData(components,elem){var data=elem.getAttribute(dataAttr);data=data?JSON.parse(data):{};_.each(components,function(obj,key){if(_.has(obj,'mixins')){data[key]=data[key]||{};data[key].mixins=data[key].mixins||[];data[key].mixins=data[key].mixins.concat(obj.mixins);delete obj.mixins;}});data=$.extend(true,data,components);data=JSON.stringify(data);elem.setAttribute(dataAttr,data);}\nfunction processElems(components,selector){var elems,iterator;if(selector==='*'){addVirtual(components);return;}\nelems=document.querySelectorAll(selector);iterator=setData.bind(null,components);_.toArray(elems).forEach(iterator);}\nfunction getNodeData(node){var data=node.textContent;node.parentNode.removeChild(node);return JSON.parse(data);}\nreturn function(){var nodes=document.querySelectorAll(scriptSelector);_.toArray(nodes).map(getNodeData).forEach(function(item){_.each(item,processElems);});return virtuals.splice(0,virtuals.length);};});","mage/validation/validation.min.js":"define(['jquery','mage/validation','mage/translate'],function($){'use strict';$.each({'validate-grouped-qty':[function(value,element,params){var result=false,total=0;$(params).find('input[data-validate*=\"validate-grouped-qty\"]').each(function(i,e){var val=$(e).val(),valInt;if(val&&val.length>0){result=true;valInt=parseFloat(val)||0;if(valInt>=0){total+=valInt;}else{result=false;return result;}}});return result&&total>0;},$.mage.__('Please specify the quantity of product(s).')],'validate-one-checkbox-required-by-name':[function(value,element,params){var checkedCount=0,container;if(element.type==='checkbox'){$('[name=\"'+element.name+'\"]').each(function(){if($(this).is(':checked')){checkedCount+=1;return false;}});}\ncontainer='#'+params;if(checkedCount>0){$(container).removeClass('validation-failed');$(container).addClass('validation-passed');return true;}\n$(container).addClass('validation-failed');$(container).removeClass('validation-passed');return false;},$.mage.__('Please select one of the options.')],'validate-date-between':[function(value,element,params){var minDate=new Date(params[0]),maxDate=new Date(params[1]),inputDate=new Date(element.value),message;minDate.setHours(0);maxDate.setHours(0);if(inputDate>=minDate&&inputDate<=maxDate){return true;}\nmessage=$.mage.__('Please enter a date between %min and %max.');this.dateBetweenErrorMessage=message.replace('%min',minDate).replace('%max',maxDate);return false;},function(){return this.dateBetweenErrorMessage;}],'validate-dob':[function(val,element,params){var dob=$(element).parents('.customer-dob'),dayVal,monthVal,yearVal,dobLength,day,month,year,curYear,validYearMessage,validateDayInMonth,validDateMessage,today,dateEntered;$(dob).find('.'+this.settings.errorClass).removeClass(this.settings.errorClass);dayVal=$(dob).find(params[0]).find('input:text').val();monthVal=$(dob).find(params[1]).find('input:text').val();yearVal=$(dob).find(params[2]).find('input:text').val();dobLength=dayVal.length+monthVal.length+yearVal.length;if(params[3]&&dobLength===0){this.dobErrorMessage=$.mage.__('This is a required field.');return false;}\nif(!params[3]&&dobLength===0){return true;}\nday=parseInt(dayVal,10)||0;month=parseInt(monthVal,10)||0;year=parseInt(yearVal,10)||0;curYear=(new Date()).getFullYear();if(!day||!month||!year){this.dobErrorMessage=$.mage.__('Please enter a valid full date.');return false;}\nif(month<1||month>12){this.dobErrorMessage=$.mage.__('Please enter a valid month (1-12).');return false;}\nif(year<1900||year>curYear){validYearMessage=$.mage.__('Please enter a valid year (1900-%1).');this.dobErrorMessage=validYearMessage.replace('%1',curYear.toString());return false;}\nvalidateDayInMonth=new Date(year,month,0).getDate();if(day<1||day>validateDayInMonth){validDateMessage=$.mage.__('Please enter a valid day (1-%1).');this.dobErrorMessage=validDateMessage.replace('%1',validateDayInMonth.toString());return false;}\ntoday=new Date();dateEntered=new Date();dateEntered.setFullYear(year,month-1,day);if(dateEntered>today){this.dobErrorMessage=$.mage.__('Please enter a date from the past.');return false;}\nday=day%10===day?'0'+day:day;month=month%10===month?'0'+month:month;$(element).val(month+'/'+day+'/'+year);return true;},function(){return this.dobErrorMessage;}]},function(i,rule){rule.unshift(i);$.validator.addMethod.apply($.validator,rule);});});","mage/validation/url.min.js":"define([],function(){'use strict';return{redirect:function(path){path=this.sanitize(path);if(this.validate(path)){window.location.href=path;}},validate:function(path){var hostname=window.location.hostname;if(path.indexOf(hostname)===-1||path.indexOf('javascript:')!==-1||path.indexOf('vbscript:')!==-1){return false;}\nreturn true;},sanitize:function(path){return path.replace('[^-A-Za-z0-9+&@#/%?=~_|!:,.;\\(\\)]','');}};});","mage/app/config.min.js":"define([],function(){return{getBaseUrl:function(){return this.values.baseUrl;},getFormKey:function(){return this.values.formKey;}};});","mage/requirejs/baseUrlResolver.min.js":"define('baseUrlInterceptor',['module'],function(module){'use strict';var ctx=require.s.contexts._,origNameToUrl=ctx.nameToUrl,newContextConstr=require.s.newContext;function trimDots(ary){var i,part,length=ary.length;for(i=0;i<length;i++){part=ary[i];if(part==='.'){ary.splice(i,1);i-=1;}else if(part==='..'){if(i===1&&(ary[2]==='..'||ary[0]==='..')){break;}else if(i>0){ary.splice(i-1,2);i-=2;}}}}\nfunction normalize(name,baseName,applyMap,localContext){var lastIndex,baseParts=baseName&&baseName.split('/'),normalizedBaseParts=baseParts;if(name&&name.charAt(0)==='.'){if(baseName){normalizedBaseParts=baseParts.slice(0,baseParts.length-1);name=name.split('/');lastIndex=name.length-1;if(localContext.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])){name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,'');}\nname=normalizedBaseParts.concat(name);trimDots(name);name=name.join('/');}else if(name.indexOf('./')===0){name=name.substring(2);}}\nreturn name;}\nfunction getUrl(context,url){var baseUrl=context.config.baseUrl,newConfig=context.config,modulePath=url.replace(baseUrl,''),newBaseUrl,rewrite=module.config()[modulePath];if(!rewrite){return url;}\nnewBaseUrl=normalize(rewrite,baseUrl,undefined,newConfig);return newBaseUrl+modulePath;}\nctx.nameToUrl=function(){return getUrl(ctx,origNameToUrl.apply(ctx,arguments));};require.s.newContext=function(){var newCtx=newContextConstr.apply(require.s,arguments),newOrigNameToUrl=newCtx.nameToUrl;newCtx.nameToUrl=function(){return getUrl(newCtx,newOrigNameToUrl.apply(newCtx,arguments));};return newCtx;};});require(['baseUrlInterceptor'],function(){'use strict';});","mage/requirejs/text.min.js":"define(['module'],function(module){'use strict';var xmlRegExp=/^\\s*<\\?xml(\\s)+version=[\\'\\\"](\\d)*.(\\d)*[\\'\\\"](\\s)*\\?>/im,bodyRegExp=/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\/body>/im,stripReg=/!strip$/i,defaultConfig=module.config&&module.config()||{};function stripContent(external){var matches;if(!external){return'';}\nmatches=external.match(bodyRegExp);external=matches?matches[1]:external.replace(xmlRegExp,'');return external;}\nfunction sameDomain(url){var uProtocol,uHostName,uPort,xdRegExp=/^([\\w:]+)?\\/\\/([^\\/\\\\]+)/i,location=window.location,match=xdRegExp.exec(url);if(!match){return true;}\nuProtocol=match[1];uHostName=match[2];uHostName=uHostName.split(':');uPort=uHostName[1]||'';uHostName=uHostName[0];return(!uProtocol||uProtocol===location.protocol)&&(!uHostName||uHostName.toLowerCase()===location.hostname.toLowerCase())&&(!uPort&&!uHostName||uPort===location.port);}\nfunction createRequest(url){var xhr=new XMLHttpRequest();if(!sameDomain(url)&&typeof XDomainRequest!=='undefined'){xhr=new XDomainRequest();}\nreturn xhr;}\nfunction getContent(url,callback,fail,headers){var xhr=createRequest(url),header;xhr.open('GET',url);if('setRequestHeader'in xhr&&headers){for(header in headers){if(headers.hasOwnProperty(header)){xhr.setRequestHeader(header.toLowerCase(),headers[header]);}}}\nxhr.onreadystatechange=function(){var status,err;if(xhr.readyState===4){status=xhr.status||0;if(status>399&&status<600){err=new Error(url+' HTTP status: '+status);err.xhr=xhr;if(fail){fail(err);}}else{callback(xhr.responseText);if(defaultConfig.onXhrComplete){defaultConfig.onXhrComplete(xhr,url);}}}};if(defaultConfig.onXhr){defaultConfig.onXhr(xhr,url);}\nxhr.send();}\nfunction loadContent(name,req,onLoad){var toStrip=stripReg.test(name),url=req.toUrl(name.replace(stripReg,'')),headers=defaultConfig.headers;getContent(url,function(content){content=toStrip?stripContent(content):content;onLoad(content);},onLoad.error,headers);}\nreturn{load:loadContent,get:getContent};});","mage/requirejs/resolver.min.js":"define(['underscore','domReady!'],function(_){'use strict';var context=require.s.contexts._,execCb=context.execCb,registry=context.registry,callbacks=[],retries=10,updateDelay=1,ready,update;function isSubscribed(callback){return!!_.findWhere(callbacks,callback);}\nfunction isRejected(module){return registry[module.id]&&(registry[module.id].inited||registry[module.id].error);}\nfunction isPending(module){if(!module.depCount){return false;}\nreturn module.depCount>_.filter(module.depMaps,isRejected).length;}\nfunction hasPending(){return _.some(registry,isPending);}\nfunction isReady(){return ready&&!hasPending();}\nfunction invoke(callback){callback.handler.call(callback.ctx);}\nfunction resolve(){ready=true;callbacks.splice(0).forEach(invoke);}\nfunction tick(){ready=false;update(retries);}\nfunction subscribe(handler,ctx){var callback={handler:handler,ctx:ctx};if(!isSubscribed(callback)){callbacks.push(callback);if(isReady()){_.defer(tick);}}}\nupdate=_.debounce(function(retry){if(!hasPending()){retry?update(--retry):resolve();}},updateDelay);context.execCb=function(){var exported=execCb.apply(context,arguments);tick();return exported;};return subscribe;});","mage/view/composite.min.js":"define(['jquery'],function($){return function(){var renderedChildren={},children={};return{addChild:function(child,key){children[key]=child;},render:function(root){$.each(children,function(key,child){var childRoot=$('<div>');renderedChildren[key]=child.render(childRoot);root.append(childRoot);});}};};});","mage/msie/file-reader.min.js":"define(['jquery'],function($){'use strict';var readAsBinaryStringIEFunc=function(fileData){var binary='',self=this,reader=new FileReader();reader.onload=function(){var bytes,length,index;bytes=new Uint8Array(reader.result);length=bytes.length;for(index=0;index<length;index++){binary+=String.fromCharCode(bytes[index]);}\nself.content=binary;$(self).trigger('onload');};reader.readAsArrayBuffer(fileData);};if(typeof FileReader.prototype.readAsBinaryString==='undefined'){FileReader.prototype.readAsBinaryString=readAsBinaryStringIEFunc;}});","mage/utils/main.min.js":"define(function(require){'use strict';var utils={},_=require('underscore');return _.extend(utils,require('./arrays'),require('./compare'),require('./misc'),require('./objects'),require('./strings'),require('./template'));});","mage/utils/misc.min.js":"define(['underscore','jquery','FormData'],function(_,$){'use strict';var defaultAttributes,ajaxSettings,map;defaultAttributes={method:'post',enctype:'multipart/form-data'};ajaxSettings={default:{method:'POST',cache:false,processData:false,contentType:false},simple:{method:'POST',dataType:'json'}};map={'D':'DDD','dd':'DD','d':'D','EEEE':'dddd','EEE':'ddd','e':'d','yyyy':'YYYY','yy':'YY','y':'YYYY','a':'A'};return{uniqueid:function(size){var code=Math.random()*25+65|0,idstr=String.fromCharCode(code);size=size||7;while(idstr.length<size){code=Math.floor(Math.random()*42+48);if(code<58||code>64){idstr+=String.fromCharCode(code);}}\nreturn idstr;},limit:function(owner,target,limit){var fn=owner[target];owner[target]=_.debounce(fn.bind(owner),limit);},normalizeDate:function(mageFormat){var result=mageFormat;_.each(map,function(moment,mage){result=result.replace(mage,moment);});return result;},inRange:function(value,min,max){return Math.min(Math.max(min,value),max);},submit:function(options,attrs){var form=document.createElement('form'),data=this.serialize(options.data),attributes=_.extend({},defaultAttributes,attrs||{});if(!attributes.action){attributes.action=options.url;}\ndata['form_key']=window.FORM_KEY;_.each(attributes,function(value,name){form.setAttribute(name,value);});data=_.map(data,function(value,name){return'<input type=\"hidden\" '+'name=\"'+_.escape(name)+'\" '+'value=\"'+_.escape(value)+'\"'+' />';}).join('');form.insertAdjacentHTML('afterbegin',data);document.body.appendChild(form);form.submit();},ajaxSubmit:function(options,config){var t=new Date().getTime(),settings;options.data['form_key']=window.FORM_KEY;options.data=this.prepareFormData(options.data,config.ajaxSaveType);settings=_.extend({},ajaxSettings[config.ajaxSaveType],options||{});if(!config.ignoreProcessEvents){$('body').trigger('processStart');}\nreturn $.ajax(settings).done(function(data){if(config.response){data.t=t;config.response.data(data);config.response.status(undefined);config.response.status(!data.error);}}).fail(function(){config.response.status(undefined);config.response.status(false);config.response.data({error:true,messages:'Something went wrong.',t:t});}).always(function(){if(!config.ignoreProcessEvents){$('body').trigger('processStop');}});},prepareFormData:function(data,type){var formData;if(type==='default'){formData=new FormData();_.each(this.serialize(data),function(val,name){formData.append(name,val);});}else if(type==='simple'){formData=this.serialize(data);}\nreturn formData;},filterFormData:function(data,suffix,separator){data=data||{};suffix=suffix||'prepared-for-send';separator=separator||'-';_.each(data,function(value,key){if(_.isObject(value)&&!Array.isArray(value)){this.filterFormData(value,suffix,separator);}else if(_.isString(key)&&~key.indexOf(suffix)){data[key.split(separator)[0]]=value;delete data[key];}},this);return data;},unescape:function(data){var unescaped=_.unescape(data),mapCharacters={'&#039;':'\\''};_.each(mapCharacters,function(value,key){unescaped=unescaped.replace(key,value);});return unescaped;},convertToMomentFormat:function(format){var newFormat;newFormat=format.replace(/yyyy|yy|y/,'YYYY');newFormat=newFormat.replace(/dd|d/g,'DD');return newFormat;},getUrlParameters:function(url){var params={},queries=url.split('?'),temp,i,l;if(!queries[1]){return params;}\nqueries=queries[1].split('&');for(i=0,l=queries.length;i<l;i++){temp=queries[i].split('=');if(temp[1]){params[temp[0]]=decodeURIComponent(temp[1].replace(/\\+/g,'%20'));}else{params[temp[0]]='';}}\nreturn params;}};});","mage/utils/wrapper.min.js":"define(['underscore'],function(_){'use strict';var superReg=/\\b_super\\b/;return{wrap:function(target,wrapper){if(!_.isFunction(target)||!_.isFunction(wrapper)){return wrapper;}\nreturn function(){var args=_.toArray(arguments),ctx=this,_super;_super=function(){var superArgs=arguments.length?arguments:args.slice(1);return target.apply(ctx,superArgs);};args.unshift(_super);return wrapper.apply(ctx,args);};},wrapSuper:function(target,wrapper){if(!this.hasSuper(wrapper)||!_.isFunction(target)){return wrapper;}\nreturn function(){var _super=this._super,args=arguments,result;this._super=function(){var superArgs=arguments.length?arguments:args;return target.apply(this,superArgs);};result=wrapper.apply(this,args);this._super=_super;return result;};},hasSuper:function(fn){return _.isFunction(fn)&&superReg.test(fn);},extend:function(target){var extenders=_.toArray(arguments).slice(1),iterator=this._extend.bind(this,target);extenders.forEach(iterator);return target;},_extend:function(target,extender){_.each(extender,function(value,key){target[key]=this.wrap(target[key],extender[key]);},this);}};});","mage/utils/compare.min.js":"define(['underscore','mage/utils/objects'],function(_,utils){'use strict';var result=[];function equalArrays(keepOrder,target){var args=_.toArray(arguments),arrays;if(!Array.isArray(keepOrder)){arrays=args.slice(2);}else{target=keepOrder;keepOrder=false;arrays=args.slice(1);}\nif(!arrays.length){return true;}\nreturn arrays.every(function(array){if(array===target){return true;}else if(array.length!==target.length){return false;}else if(!keepOrder){return!_.difference(target,array).length;}\nreturn array.every(function(value,index){return target[index]===value;});});}\nfunction isDifferent(a,b){var oldIsPrimitive=utils.isPrimitive(a);if(Array.isArray(a)&&Array.isArray(b)){return!equalArrays(true,a,b);}\nreturn oldIsPrimitive?a!==b:true;}\nfunction getPath(prefix,part){return prefix?prefix+'.'+part:part;}\nfunction hasOwn(obj,key){return Object.prototype.hasOwnProperty.call(obj,key);}\nfunction getContainers(changes){var containers={},indexed=_.indexBy(changes,'path');_.each(indexed,function(change,name){var path;name.split('.').forEach(function(part){path=getPath(path,part);if(path in indexed){return;}\n(containers[path]=containers[path]||[]).push(change);});});return containers;}\nfunction addChange(path,name,type,newValue,oldValue){var data;data={path:path,name:name,type:type};if(type!=='remove'){data.value=newValue;data.oldValue=oldValue;}else{data.oldValue=newValue;}\nresult.push(data);}\nfunction setAll(ns,name,type,iterator,placeholder){var key;if(arguments.length>4){type==='add'?addChange(ns,name,'update',iterator,placeholder):addChange(ns,name,'update',placeholder,iterator);}else{addChange(ns,name,type,iterator);}\nif(!utils.isObject(iterator)){return;}\nfor(key in iterator){if(hasOwn(iterator,key)){setAll(getPath(ns,key),key,type,iterator[key]);}}}\nfunction compare(old,current,ns,name){var key,oldIsObj=utils.isObject(old),newIsObj=utils.isObject(current);if(oldIsObj&&newIsObj){for(key in old){if(hasOwn(old,key)&&!hasOwn(current,key)){setAll(getPath(ns,key),key,'remove',old[key]);}}\nfor(key in current){if(hasOwn(current,key)){hasOwn(old,key)?compare(old[key],current[key],getPath(ns,key),key):setAll(getPath(ns,key),key,'add',current[key]);}}}else if(oldIsObj){setAll(ns,name,'remove',old,current);}else if(newIsObj){setAll(ns,name,'add',current,old);}else if(isDifferent(old,current)){addChange(ns,name,'update',current,old);}}\nreturn{compare:function(){var changes;compare.apply(null,arguments);changes=result.splice(0);return{containers:getContainers(changes),changes:changes,equal:!changes.length};},equalArrays:equalArrays};});","mage/utils/objects.min.js":"define(['ko','jquery','underscore'],function(ko,$,_){'use strict';var primitives=['undefined','boolean','number','string'];function setNested(parent,path,value){var last=path.pop(),len=path.length,pi=0,part=path[pi];for(;pi<len;part=path[++pi]){if(!_.isObject(parent[part])){parent[part]={};}\nparent=parent[part];}\nif(typeof parent[last]==='function'){parent[last](value);}else{parent[last]=value;}\nreturn value;}\nfunction getNested(parent,path){var exists=true,len=path.length,pi=0;for(;pi<len&&exists;pi++){parent=parent[path[pi]];if(typeof parent==='undefined'){exists=false;}}\nif(exists){if(ko.isObservable(parent)){parent=parent();}\nreturn parent;}}\nfunction removeNested(parent,path){var field=path.pop();parent=getNested(parent,path);if(_.isObject(parent)){delete parent[field];}}\nreturn{nested:function(data,path,value){var action=arguments.length>2?setNested:getNested;path=path?path.split('.'):[];return action(data,path,value);},nestedRemove:function(data,path){path=path.split('.');removeNested(data,path);},flatten:function(data,separator,parent,result){separator=separator||'.';result=result||{};if(!data){return result;}\n_.each(Object.keys(data),function(name){var node=data[name];if({}.toString.call(node)==='[object Function]'){return;}\nif(parent){name=parent+separator+name;}\ntypeof node==='object'?this.flatten(node,separator,name,result):result[name]=node;},this);return result;},unflatten:function(data,separator){var result={};separator=separator||'.';_.each(data,function(value,nodes){nodes=nodes.split(separator);setNested(result,nodes,value);});return result;},serialize:function(data){var result={};data=this.flatten(data);_.each(data,function(value,keys){keys=this.serializeName(keys);value=_.isUndefined(value)?'':value;result[keys]=value;},this);return result;},extend:function(){var args=_.toArray(arguments);args.unshift(true);return $.extend.apply($,args);},copy:function(data){var result=data,isArray=Array.isArray(data),placeholder;if(this.isObject(data)||isArray){placeholder=isArray?[]:{};result=this.extend(placeholder,data);}\nreturn result;},hardCopy:function(original){if(original===null||typeof original!=='object'){return original;}\nreturn JSON.parse(JSON.stringify(original));},omit:function(target,list){var removed={},ignored=list;if(this.isObject(list)){ignored=[];_.each(list,function(value,key){if(value){ignored.push(key);}});}else if(_.isString(list)){ignored=_.toArray(arguments).slice(1);}\n_.each(ignored,function(path){var value=this.nested(target,path);if(!_.isUndefined(value)){removed[path]=value;this.nestedRemove(target,path);}},this);return removed;},isObject:function(value){var objProto=Object.prototype;return typeof value=='object'?objProto.toString.call(value)==='[object Object]':false;},isPrimitive:function(value){return value===null||~primitives.indexOf(typeof value);},forEachRecursive:function(data,action,maxDepth){maxDepth=typeof maxDepth==='number'&&!isNaN(maxDepth)?maxDepth-1:7;if(!_.isFunction(action)||_.isFunction(data)||maxDepth<0){return;}\nif(!_.isObject(data)){action(data);return;}\n_.each(data,function(value){this.forEachRecursive(value,action,maxDepth);},this);action(data);},mapRecursive:function(data,action,maxDepth){var newData;maxDepth=typeof maxDepth==='number'&&!isNaN(maxDepth)?maxDepth-1:7;if(!_.isFunction(action)||_.isFunction(data)||maxDepth<0){return data;}\nif(!_.isObject(data)){return action(data);}\nif(_.isArray(data)){newData=_.map(data,function(item){return this.mapRecursive(item,action,maxDepth);},this);return action(newData);}\nnewData=_.mapObject(data,function(val,key){if(data.hasOwnProperty(key)){return this.mapRecursive(val,action,maxDepth);}\nreturn val;},this);return action(newData);},removeEmptyValues:function(data){if(!_.isObject(data)){return data;}\nif(_.isArray(data)){return data.filter(function(item){return!this.isEmptyObj(item);},this);}\nreturn _.omit(data,this.isEmptyObj.bind(this));},isEmptyObj:function(val){return _.isObject(val)&&_.isEmpty(val)||this.isEmpty(val)||val&&val.trim&&this.isEmpty(val.trim());}};});","mage/utils/arrays.min.js":"define(['underscore','./strings'],function(_,utils){'use strict';function getIndex(item,container){var index=container.indexOf(item);if(~index){return index;}\nreturn _.findIndex(container,function(value){return value&&value.name===item;});}\nreturn{toggle:function(arr,value,add){return add?this.add(arr,value):this.remove(arr,value);},remove:function(arr,value){var index=arr.indexOf(value);if(~index){arr.splice(index,1);}\nreturn this;},add:function(arr){var values=_.toArray(arguments).slice(1);values.forEach(function(value){if(!~arr.indexOf(value)){arr.push(value);}});return this;},insert:function(item,container,position){var currentIndex=getIndex(item,container),newIndex,target;if(typeof position==='undefined'){position=-1;}else if(typeof position==='string'){position=isNaN(+position)?position:+position;}\nnewIndex=position;if(~currentIndex){target=container.splice(currentIndex,1)[0];if(typeof item==='string'){item=target;}}\nif(typeof position!=='number'){target=position.after||position.before||position;newIndex=getIndex(target,container);if(~newIndex&&(position.after||newIndex>=currentIndex)){newIndex++;}}\nif(newIndex<0){newIndex+=container.length+1;}\ncontainer[newIndex]?container.splice(newIndex,0,item):container[newIndex]=item;return!~currentIndex?item:currentIndex!==newIndex;},formatOffset:function(elems,offset){if(utils.isEmpty(offset)){offset=-1;}\noffset=+offset;if(offset<0){offset+=elems.length+1;}\nreturn offset;}};});","mage/utils/template.min.js":"define(['jquery','underscore','mage/utils/objects','mage/utils/strings'],function($,_,utils,stringUtils){'use strict';var tmplSettings=_.templateSettings,interpolate=/\\$\\{([\\s\\S]+?)\\}/g,opener='${',template,hasStringTmpls;hasStringTmpls=(function(){var testString='var foo = \"bar\"; return `${ foo }` === foo';try{return Function(testString)();}catch(e){return false;}})();function isTmplIgnored(tmpl,target){var parsedTmpl;try{parsedTmpl=JSON.parse(tmpl);if(typeof parsedTmpl==='object'){return tmpl.includes('__disableTmpl');}}catch(e){}\nif(typeof target!=='undefined'){if(typeof target==='object'&&target.hasOwnProperty('__disableTmpl')){return target.__disableTmpl;}}\nreturn false;}\nif(hasStringTmpls){template=function(tmpl,$){return eval('`'+tmpl+'`');};}else{template=function(tmpl,data){var cached=tmplSettings.interpolate;tmplSettings.interpolate=interpolate;tmpl=_.template(tmpl,{variable:'$'})(data);tmplSettings.interpolate=cached;return tmpl;};}\nfunction isTemplate(value){return typeof value==='string'&&value.indexOf(opener)!==-1&&value.indexOf('${{')===-1;}\nfunction render(tmpl,data,castString,maxCycles){var last=tmpl,cycles=0;while(~tmpl.indexOf(opener)&&(typeof maxCycles==='undefined'||cycles<maxCycles)){if(!isTmplIgnored(tmpl)){tmpl=template(tmpl,data);}\nif(tmpl===last){break;}\nlast=tmpl;cycles++;}\nreturn castString?stringUtils.castString(tmpl):tmpl;}\nreturn{template:function(tmpl,data,castString,dontClone){if(typeof tmpl==='string'){return render(tmpl,data,castString);}\nif(!dontClone){tmpl=utils.copy(tmpl);}\ntmpl.$data=data||{};_.each(tmpl,function iterate(value,key,list){var disabled,maxCycles;if(key==='$data'){return;}\nif(isTemplate(key)){delete list[key];key=render(key,tmpl);list[key]=value;}\nif(isTemplate(value)){disabled=isTmplIgnored(value,list);if(typeof disabled==='object'&&disabled.hasOwnProperty(key)&&disabled[key]!==false){maxCycles=disabled[key];}\nif(disabled===true||maxCycles===true){maxCycles=0;}\nlist[key]=render(value,tmpl,castString,maxCycles);}else if($.isPlainObject(value)||Array.isArray(value)){_.each(value,iterate);}});delete tmpl.$data;return tmpl;}};});","mage/utils/strings.min.js":"define(['underscore'],function(_){'use strict';var jsonRe=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/;return{castString:function(str){try{str=str==='true'?true:str==='false'?false:str==='null'?null:+str+''===str?+str:jsonRe.test(str)?JSON.parse(str):str;}catch(e){}\nreturn str;},stringToArray:function(str,separator){separator=separator||' ';return typeof str==='string'?str.split(separator):str;},serializeName:function(name,separator){var result;separator=separator||'.';name=name.split(separator);result=name.shift();name.forEach(function(part){result+='['+part+']';});return result;},isEmpty:function(value){return value===''||_.isUndefined(value)||_.isNull(value);},fullPath:function(prefix,part){return prefix?prefix+'.'+part:part;},getPart:function(parts,offset,delimiter){delimiter=delimiter||'.';parts=parts.split(delimiter);offset=this.formatOffset(parts,offset);parts.splice(offset,1);return parts.join(delimiter)||'';},camelCaseToMinus:function camelCaseToMinus(string){return(''+string).split('').map(function(symbol,index){return index?symbol.toUpperCase()===symbol?'-'+symbol.toLowerCase():symbol:symbol.toLowerCase();}).join('');},minusToCamelCase:function minusToCamelCase(string){return(''+string).split('-').map(function(part,index){return index?part.charAt(0).toUpperCase()+part.slice(1):part;}).join('');}};});","mage/gallery/gallery.min.js":"define(['jquery','fotorama/fotorama','underscore','matchMedia','mage/template','text!mage/gallery/gallery.html','uiClass','mage/translate'],function($,fotorama,_,mediaCheck,template,galleryTpl,Class,$t){'use strict';var getMainImageIndex=function(data){var mainIndex;if(_.every(data,function(item){return _.isObject(item);})){mainIndex=_.findIndex(data,function(item){return item.isMain;});}\nreturn mainIndex>0?mainIndex:0;},getTranslate=function(el){var slideTransform=$(el).attr('style').split(';');slideTransform=$.map(slideTransform,function(style){style=style.trim();if(style.startsWith('transform: translate3d')){return style.match(/transform: translate3d\\((.+)px,(.+)px,(.+)px\\)/);}\nreturn false;});return slideTransform.filter(Boolean);},_toNumber=function(str){var type=typeof str;if(type==='string'){return parseInt(str);}\nreturn str;};return Class.extend({defaults:{settings:{},config:{},startConfig:{}},isTouchEnabled:(function(){return'ontouchstart'in document.documentElement;})(),initialize:function(config,element){var self=this;this._super();_.bindAll(this,'_focusSwitcher');if(this.isTouchEnabled){config.options.arrows=false;if(config.fullscreen){config.fullscreen.arrows=false;}}\nconfig.options.width=_toNumber(config.options.width);config.options.height=_toNumber(config.options.height);config.options.thumbwidth=_toNumber(config.options.thumbwidth);config.options.thumbheight=_toNumber(config.options.thumbheight);config.options.swipe=true;this.config=config;this.settings={$element:$(element),$pageWrapper:$('body>.page-wrapper'),currentConfig:config,defaultConfig:_.clone(config),fullscreenConfig:_.clone(config.fullscreen),breakpoints:config.breakpoints,activeBreakpoint:{},fotoramaApi:null,isFullscreen:false,api:null,data:_.clone(config.data)};config.options.ratio=config.options.width / config.options.height;config.options.height=null;$.extend(true,this.startConfig,config);this.initGallery();this.initApi();this.setupBreakpoints();this.initFullscreenSettings();this.settings.$element.on('click','.fotorama__stage__frame',function(){if(!$(this).parents('.fotorama__shadows--left, .fotorama__shadows--right').length&&!$(this).hasClass('fotorama-video-container')){self.openFullScreen();}});if(this.isTouchEnabled&&this.settings.isFullscreen){this.settings.$element.on('tap','.fotorama__stage__frame',function(){var translate=getTranslate($(this).parents('.fotorama__stage__shaft'));if(translate[1]==='0'&&!$(this).hasClass('fotorama-video-container')){self.openFullScreen();self.settings.$pageWrapper.hide();}});}},openFullScreen:function(){this.settings.api.fotorama.requestFullScreen();this.settings.$fullscreenIcon.css({opacity:1,visibility:'visible',display:'block'});},initFullscreenSettings:function(){var settings=this.settings,self=this;settings.$gallery=this.settings.$element.find('[data-gallery-role=\"gallery\"]');settings.$fullscreenIcon=this.settings.$element.find('[data-gallery-role=\"fotorama__fullscreen-icon\"]');settings.focusableStart=this.settings.$element.find('[data-gallery-role=\"fotorama__focusable-start\"]');settings.focusableEnd=this.settings.$element.find('[data-gallery-role=\"fotorama__focusable-end\"]');settings.closeIcon=this.settings.$element.find('[data-gallery-role=\"fotorama__fullscreen-icon\"]');settings.fullscreenConfig.swipe=true;settings.$gallery.on('fotorama:fullscreenenter',function(){settings.closeIcon.show();settings.focusableStart.attr('tabindex','0');settings.focusableEnd.attr('tabindex','0');settings.focusableStart.bind('focusin',self._focusSwitcher);settings.focusableEnd.bind('focusin',self._focusSwitcher);settings.api.updateOptions(settings.defaultConfig.options,true);settings.api.updateOptions(settings.fullscreenConfig,true);if(!_.isEqual(settings.activeBreakpoint,{})&&settings.breakpoints){settings.api.updateOptions(settings.activeBreakpoint.options,true);}\nsettings.isFullscreen=true;});settings.$gallery.on('fotorama:fullscreenexit',function(){settings.closeIcon.hide();settings.focusableStart.attr('tabindex','-1');settings.focusableEnd.attr('tabindex','-1');settings.api.updateOptions(settings.defaultConfig.options,true);settings.focusableStart.unbind('focusin',this._focusSwitcher);settings.focusableEnd.unbind('focusin',this._focusSwitcher);settings.closeIcon.hide();if(!_.isEqual(settings.activeBreakpoint,{})&&settings.breakpoints){settings.api.updateOptions(settings.activeBreakpoint.options,true);}\nsettings.isFullscreen=false;settings.$element.data('gallery').updateOptions({swipe:true});});},_focusSwitcher:function(e){var target=$(e.target),settings=this.settings;if(target.is(settings.focusableStart)){this._setFocus('start');}else if(target.is(settings.focusableEnd)){this._setFocus('end');}},_setFocus:function(position){var settings=this.settings,focusableElements,infelicity;if(position==='end'){settings.$gallery.find(settings.closeIcon).focus();}else if(position==='start'){infelicity=3;focusableElements=settings.$gallery.find(':focusable');focusableElements.eq(focusableElements.length-infelicity).focus();}},initGallery:function(){var breakpoints={},settings=this.settings,config=this.config,tpl=template(galleryTpl,{next:$t('Next'),previous:$t('Previous')}),mainImageIndex;if(settings.breakpoints){_.each(_.values(settings.breakpoints),function(breakpoint){var conditions;_.each(_.pairs(breakpoint.conditions),function(pair){conditions=conditions?conditions+' and ('+pair[0]+': '+pair[1]+')':'('+pair[0]+': '+pair[1]+')';});breakpoints[conditions]=breakpoint.options;});settings.breakpoints=breakpoints;}\n_.extend(config,config.options);config.options=undefined;config.click=false;config.breakpoints=null;settings.currentConfig=config;settings.$element.html(tpl);settings.$element.removeClass('_block-content-loading');settings.$elementF=$(settings.$element.children()[0]);settings.$elementF.fotorama(config);settings.fotoramaApi=settings.$elementF.data('fotorama');$.extend(true,config,this.startConfig);mainImageIndex=getMainImageIndex(config.data);if(mainImageIndex){this.settings.fotoramaApi.show({index:mainImageIndex,time:0});}},setupBreakpoints:function(){var pairs,settings=this.settings,config=this.config,startConfig=this.startConfig,isTouchEnabled=this.isTouchEnabled;if(_.isObject(settings.breakpoints)){pairs=_.pairs(settings.breakpoints);_.each(pairs,function(pair){mediaCheck({media:pair[0],entry:function(){$.extend(true,config,_.clone(startConfig));settings.api.updateOptions(settings.defaultConfig.options,true);if(settings.isFullscreen){settings.api.updateOptions(settings.fullscreenConfig,true);}\nif(isTouchEnabled){settings.breakpoints[pair[0]].options.arrows=false;if(settings.breakpoints[pair[0]].options.fullscreen){settings.breakpoints[pair[0]].options.fullscreen.arrows=false;}}\nsettings.api.updateOptions(settings.breakpoints[pair[0]].options,true);$.extend(true,config,settings.breakpoints[pair[0]]);settings.activeBreakpoint=settings.breakpoints[pair[0]];},exit:function(){$.extend(true,config,_.clone(startConfig));settings.api.updateOptions(settings.defaultConfig.options,true);if(settings.isFullscreen){settings.api.updateOptions(settings.fullscreenConfig,true);}\nsettings.activeBreakpoint={};}});});}},initApi:function(){var settings=this.settings,config=this.config,api={fotorama:settings.fotoramaApi,last:function(){settings.fotoramaApi.show('>>');},first:function(){settings.fotoramaApi.show('<<');},prev:function(){settings.fotoramaApi.show('<');},next:function(){settings.fotoramaApi.show('>');},seek:function(index){if(_.isNumber(index)&&index!==0){if(index>0){index-=1;}\nsettings.fotoramaApi.show(index);}},updateOptions:function(configuration,isInternal){var $selectable=$('a[href], area[href], input, select, '+'textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]').not('[tabindex=-1], [disabled], :hidden'),$focus=$(':focus'),index;if(_.isObject(configuration)){$selectable.each(function(number){if($(this).is($focus)){index=number;}});if(this.isTouchEnabled){configuration.arrows=false;}\nconfiguration.click=false;configuration.breakpoints=null;if(!isInternal){!_.isEqual(settings.activeBreakpoint,{}&&settings.brekpoints)?$.extend(true,settings.activeBreakpoint.options,configuration):settings.isFullscreen?$.extend(true,settings.fullscreenConfig,configuration):$.extend(true,settings.defaultConfig.options,configuration);}\n$.extend(true,settings.currentConfig.options,configuration);settings.fotoramaApi.setOptions(settings.currentConfig.options);if(_.isNumber(index)){$selectable.eq(index).focus();}}},updateData:function(data){var mainImageIndex;if(_.isArray(data)){settings.fotoramaApi.load(data);mainImageIndex=getMainImageIndex(data);if(mainImageIndex){settings.fotoramaApi.show({index:mainImageIndex,time:0});}\n$.extend(false,settings,{data:data,defaultConfig:data});$.extend(false,config,{data:data});}},returnCurrentImages:function(){var images=[];_.each(this.fotorama.data,function(item){images.push(_.omit(item,'$navThumbFrame','$navDotFrame','$stageFrame','labelledby'));});return images;},updateDataByIndex:function(index,item){settings.fotoramaApi.spliceByIndex(index,item);}};settings.$element.data('gallery',api);settings.api=settings.$element.data('gallery');settings.$element.trigger('gallery:loaded');}});});","IsobarCommerce_HomeUseProgram/js/hup-invite.min.js":"define(['jquery'],function($){'use strict';$(document).on(\"click\",\".hup-invite-input .email-box .btn\",function(e){$(this).attr(\"disabled\",\"disabled\");var emailVal=$(this).parents(\".hup-invite-input\").find(\".invite-email\").val();var formVal=$(this).parents(\"form\");var inputMessage=$(this).parents(\".hup-invite-input\").find(\".email-msg\");var _this=$(this);if(formVal.valid()){$.ajax({type:\"post\",url:\"/home-use-program/ajax/invite\",data:{\"email\":emailVal},success:function(data){_this.removeAttr(\"disabled\");inputMessage.text(data.message)}})}else{_this.removeAttr(\"disabled\");}\ne.preventDefault();})\n$(document).on(\"click\",\".page.messages\",function(){$(\".page.messages\").hide();})\n$(document).ready(function(){if($(\".page.messages .messages-wrapper\").length>0){setTimeout(function(){if($(\".page.messages .messages-wrapper .message-error.error\").length>0){$(\".page.messages\").show();}else{$(\".page.messages\").hide();}},3000);}})});","IsobarCommerce_HomeUseProgram/js/hup-store.min.js":"define(['jquery','swiper','Magento_Ui/js/modal/modal','mage/translate','Amasty_Checkout/js/model/amalert'],function($,Swiper,modal,$t,alert){'use strict';return function(){var res_store;var base_url=window.location.protocol+\"//\"+document.domain;var get_hupProductUrl=base_url+\"/home-use-program/ajax/get/\"\n$.ajax({method:'get',url:get_hupProductUrl,data:{\"form_key\":$.mage.cookies.get('form_key')},contentType:'application/json',async:true,showLoader:true,success:function(result){console.log(result);if(result.code==\"success\"){res_store=result.data;var hup_product=res_store.product;if(hup_product.length<=0){$('.private-store').html($t('We can\\'t find products matching the selection.'));return false;}\nvar hup_content='';hup_content+='<div class=\"store-list-bg\">'\nhup_content+='<div class=\"store-list-content\">'\nhup_content+='<div class=\"swiper-container store-list-container\">'\nhup_content+='<div class=\"swiper-wrapper\">'\nlet product_html='';$.each(hup_product,function(index,product_item){product_html+='<div class=\"item-list swiper-slide\" data-value=\"'+product_item.id+'\">'\nproduct_html+='<a href=\"'+product_item.url+'\">'\nproduct_html+=' <div class=\"img-box\"> <img src=\"'+product_item.image+'\" alt=\"\"> </div> </a>'\nproduct_html+=' <div class=\"product-name\">'+product_item.name+'</div>'\nproduct_html+='<div class=\"product-price\"><span>'+$t('sales price:')+'</span><span>'+$t('\uffe5')+price_switch(product_item.price)+'</span> </div>'\nproduct_html+='<div class=\"product-btn\"> <div class=\"action tocart\">'+$t('Add to Cart')+'</div> </div></div>'})\nhup_content+=product_html;hup_content+='</div> </div>'\nhup_content+='<div class=\"control\"> <div class=\"swiper-button swiper-button-prev\"></div> <div class=\"swiper-button swiper-button-next\"></div> </div>'\nhup_content+='</div> </div>'\n$('.private-store').html(hup_content);}else{$('.private-store').html(result.message);return false;}\nif($(\".store-list-container\").length){var hupProductSwiper=new Swiper('.store-list-container',{watchOverflow:true,slidesPerView:4,spaceBetween:24,slidesPerGroup:4,loop:false,loopFillGroupWithBlank:true,keyboard:true,noSwiping:true,breakpoints:{320:{slidesPerView:1,slidesPerGroup:1},640:{slidesPerView:2,slidesPerGroup:2},900:{slidesPerView:3,slidesPerGroup:3},1200:{slidesPerView:4,slidesPerGroup:4}},navigation:{nextEl:'.store-list-content .swiper-button-next',prevEl:'.store-list-content .swiper-button-prev'}})}},error:function(result){}});var successPopupOptions={type:'popup',responsive:true,innerScroll:true,modalClass:'edu-success-popup'}\nvar successPopup=modal(successPopupOptions,$('.edu-addcart'));var options={type:'popup',responsive:true,innerScroll:true,modalClass:'private-edu-dialog edu-result-dialog',buttons:[{text:$t('Go to login or authenticate'),class:'action primary',click:function(){if(!res_store.is_login){location.href=res_store.login_url}\nif(!res_store.is_msa){location.href=res_store.login_url}}}]};var popup=modal(options,$('#private-edu-modal'));$('#private-edu-modal').html($t('Please log in your Microsoft account to verify your qualification'));$(document).on('click','.action.tocart',function(e){e.preventDefault();var emptyArray={};if(res_store.is_login&&res_store.is_hup&&res_store.is_msa){var product_itemId=$(this).closest(\".item-list\").data(\"value\");var dataForm={\"private-select\":product_itemId,\"selected_configurable_option\":product_itemId,\"product\":product_itemId,\"qty\":1,\"uenc\":res_store.uenc,\"form_key\":$.mage.cookies.get('form_key'),\"store\":res_store.store,\"super_attribute\":emptyArray}\nvar add_cartUrl=base_url+'/checkout/cart/add';$.ajax({method:'post',url:add_cartUrl,data:dataForm,showLoader:true,success:function(res){if(res.success===false){alert({title:'',content:res.messages,modalClass:'no-confirm'});}else if(res.messages){alert({title:'',content:res.messages,modalClass:'no-confirm'});}else{$('.edu-addcart').modal(\"openModal\");}},error:function(xhr,status,error){}});}else{if(!res_store.is_login||!res_store.is_msa){$('#private-edu-modal').modal('openModal');return;}\nif(!res_store.is_hup&&res_store.is_login&&res_store.is_msa){window.location.href=res_store.invite_url;}}});function price_switch(price,num){num=num>0&&num<20?num:2;var price_res;if(price.indexOf(\".\")>=0){var price_array=price.split(\".\");var price_float=price_array[1].substr(0,num);var price_int=price_array[0];var price_intPattern='';for(var i=0;(i*3)<=price_int.length;i++){if(i==0){var first_position=price_int.length%3;if(first_position>0){price_intPattern+=price_int.substr(0,first_position)+\",\"}}else{price_intPattern+=price_int.substr(first_position+((i-1)*3),3)+\",\"}}\nprice_res=price_intPattern.replace(/(,$)/g,\"\")+\".\"+price_float;}else{var price_float='';for(var i=0;i<num;i++){price_float+=\"0\";}\nprice_res=price+\".\"+price_float;}\nreturn price_res;}}});","Magento_Customer/js/password-strength-indicator.min.js":"define(['jquery','Magento_Customer/js/zxcvbn','mage/translate','mage/validation'],function($,zxcvbn,$t){'use strict';$.widget('mage.passwordStrengthIndicator',{options:{cache:{},passwordSelector:'[type=password]',passwordStrengthMeterSelector:'[data-role=password-strength-meter]',passwordStrengthMeterLabelSelector:'[data-role=password-strength-meter-label]',formSelector:'form',emailSelector:'input[type=\"email\"]'},_create:function(){this.options.cache.input=$(this.options.passwordSelector,this.element);this.options.cache.meter=$(this.options.passwordStrengthMeterSelector,this.element);this.options.cache.label=$(this.options.passwordStrengthMeterLabelSelector,this.element);this.options.cache.email=$(this.options.formSelector).find(this.options.emailSelector);this._bind();},_bind:function(){this._on(this.options.cache.input,{'change':this._calculateStrength,'keyup':this._calculateStrength,'paste':this._calculateStrength});if(this.options.cache.email.length){this._on(this.options.cache.email,{'change':this._calculateStrength,'keyup':this._calculateStrength,'paste':this._calculateStrength});}},_calculateStrength:function(){var password=this._getPassword(),isEmpty=password.length===0,zxcvbnScore,displayScore,isValid;if(isEmpty){displayScore=0;}else{this.options.cache.input.rules('add',{'password-not-equal-to-user-name':this.options.cache.email.val()});if(this.options.cache.email.length&&password.toLowerCase()===this.options.cache.email.val().toLowerCase()){displayScore=1;}else{isValid=$.validator.validateSingleElement(this.options.cache.input);zxcvbnScore=zxcvbn(password).score;displayScore=isValid&&zxcvbnScore>0?zxcvbnScore:1;}}\nthis._displayStrength(displayScore);},_displayStrength:function(displayScore){var strengthLabel='',className;switch(displayScore){case 0:strengthLabel=$t('No Password');className='password-none';break;case 1:strengthLabel=$t('Weak');className='password-weak';break;case 2:strengthLabel=$t('Medium');className='password-medium';break;case 3:strengthLabel=$t('Strong');className='password-strong';break;case 4:strengthLabel=$t('Very Strong');className='password-very-strong';break;}\nthis.options.cache.meter.removeClass().addClass(className);this.options.cache.label.text(strengthLabel);},_getPassword:function(){return this.options.cache.input.val();}});return $.mage.passwordStrengthIndicator;});","Magento_Customer/js/validation.min.js":"define(['jquery','moment','jquery/validate','mage/translate'],function($,moment){'use strict';$.validator.addMethod('validate-dob',function(value){if(value===''){return true;}\nreturn moment(value).isBefore(moment());},$.mage.__('The Date of Birth should not be greater than today.'));});","Magento_Customer/js/section-config.min.js":"define(['underscore'],function(_){'use strict';var baseUrls=[],sections=[],clientSideSections=[],sectionNames=[],canonize;canonize=function(url){var route=url;_.some(baseUrls,function(baseUrl){route=url.replace(baseUrl,'');return route!==url;});return route.replace(/^\\/?index.php\\/?/,'').toLowerCase();};return{getAffectedSections:function(url){var route=canonize(url),actions=_.find(sections,function(val,section){var matched;if(section.indexOf('*')>=0){section=section.replace(/\\*/g,'[^/]+')+'$';matched=route.match(section);return matched&&matched[0]===route;}\nreturn route.indexOf(section)===0;});return _.union(_.toArray(actions),_.toArray(sections['*']));},filterClientSideSections:function(allSections){return _.difference(_.toArray(allSections),clientSideSections);},isClientSideSection:function(sectionName){return _.contains(clientSideSections,sectionName);},getSectionNames:function(){return sectionNames;},'Magento_Customer/js/section-config':function(options){baseUrls=options.baseUrls;sections=options.sections;clientSideSections=options.clientSideSections;sectionNames=options.sectionNames;}};});","Magento_Customer/js/customer-data.min.js":"define(['jquery','underscore','ko','Magento_Customer/js/section-config','mage/url','mage/storage','jquery/jquery-storageapi'],function($,_,ko,sectionConfig,url){'use strict';var options={},storage,storageInvalidation,invalidateCacheBySessionTimeOut,invalidateCacheByCloseCookieSession,dataProvider,buffer,customerData;url.setBaseUrl(window.BASE_URL);options.sectionLoadUrl=url.build('customer/section/load');$.cookieStorage.setConf({path:'/',expires:1});storage=$.initNamespaceStorage('mage-cache-storage').localStorage;storageInvalidation=$.initNamespaceStorage('mage-cache-storage-section-invalidation').localStorage;invalidateCacheBySessionTimeOut=function(invalidateOptions){var date;if(new Date($.localStorage.get('mage-cache-timeout'))<new Date()){storage.removeAll();date=new Date(Date.now()+parseInt(invalidateOptions.cookieLifeTime,10)*1000);$.localStorage.set('mage-cache-timeout',date);}};invalidateCacheByCloseCookieSession=function(){if(!$.cookieStorage.isSet('mage-cache-sessid')){$.cookieStorage.set('mage-cache-sessid',true);storage.removeAll();}};dataProvider={getFromStorage:function(sectionNames){var result={};_.each(sectionNames,function(sectionName){result[sectionName]=storage.get(sectionName);});return result;},getFromServer:function(sectionNames,forceNewSectionTimestamp){var parameters;sectionNames=sectionConfig.filterClientSideSections(sectionNames);parameters=_.isArray(sectionNames)?{sections:sectionNames.join(',')}:[];parameters['force_new_section_timestamp']=forceNewSectionTimestamp;return $.getJSON(options.sectionLoadUrl,parameters).fail(function(jqXHR){throw new Error(jqXHR);});}};ko.extenders.disposableCustomerData=function(target,sectionName){var sectionDataIds,newSectionDataIds={};target.subscribe(function(){setTimeout(function(){storage.remove(sectionName);sectionDataIds=$.cookieStorage.get('section_data_ids')||{};_.each(sectionDataIds,function(data,name){if(name!=sectionName){newSectionDataIds[name]=data;}});$.cookieStorage.set('section_data_ids',newSectionDataIds);},3000);});return target;};buffer={data:{},bind:function(sectionName){this.data[sectionName]=ko.observable({});},get:function(sectionName){if(!this.data[sectionName]){this.bind(sectionName);}\nreturn this.data[sectionName];},keys:function(){return _.keys(this.data);},notify:function(sectionName,sectionData){if(!this.data[sectionName]){this.bind(sectionName);}\nthis.data[sectionName](sectionData);},update:function(sections){var sectionId=0,sectionDataIds=$.cookieStorage.get('section_data_ids')||{};_.each(sections,function(sectionData,sectionName){sectionId=sectionData['data_id'];sectionDataIds[sectionName]=sectionId;storage.set(sectionName,sectionData);storageInvalidation.remove(sectionName);buffer.notify(sectionName,sectionData);});$.cookieStorage.set('section_data_ids',sectionDataIds);},remove:function(sections){_.each(sections,function(sectionName){storage.remove(sectionName);if(!sectionConfig.isClientSideSection(sectionName)){storageInvalidation.set(sectionName,true);}});}};customerData={init:function(){var expiredSectionNames=this.getExpiredSectionNames();if(expiredSectionNames.length>0){_.each(dataProvider.getFromStorage(storage.keys()),function(sectionData,sectionName){buffer.notify(sectionName,sectionData);});this.reload(expiredSectionNames,false);}else{_.each(dataProvider.getFromStorage(storage.keys()),function(sectionData,sectionName){buffer.notify(sectionName,sectionData);});if(!_.isEmpty(storageInvalidation.keys())){this.reload(storageInvalidation.keys(),false);}}\nif(!_.isEmpty($.cookieStorage.get('section_data_clean'))){this.reload(sectionConfig.getSectionNames(),true);$.cookieStorage.set('section_data_clean','');}},getExpiredSectionNames:function(){var expiredSectionNames=[],cookieSectionTimestamps=$.cookieStorage.get('section_data_ids')||{},sectionLifetime=options.expirableSectionLifetime*60,currentTimestamp=Math.floor(Date.now()/ 1000),sectionData;_.each(options.expirableSectionNames,function(sectionName){sectionData=storage.get(sectionName);if(typeof sectionData==='object'&&sectionData['data_id']+sectionLifetime<=currentTimestamp){expiredSectionNames.push(sectionName);}});_.each(cookieSectionTimestamps,function(cookieSectionTimestamp,sectionName){sectionData=storage.get(sectionName);if(typeof sectionData==='undefined'||typeof sectionData==='object'&&cookieSectionTimestamp!=sectionData['data_id']){expiredSectionNames.push(sectionName);}});return _.uniq(expiredSectionNames);},needReload:function(){var expiredSectionNames=this.getExpiredSectionNames();return expiredSectionNames.length>0;},getExpiredKeys:function(){return this.getExpiredSectionNames();},get:function(sectionName){return buffer.get(sectionName);},set:function(sectionName,sectionData){var data={};data[sectionName]=sectionData;buffer.update(data);},reload:function(sectionNames,forceNewSectionTimestamp){return dataProvider.getFromServer(sectionNames,forceNewSectionTimestamp).done(function(sections){$(document).trigger('customer-data-reload',[sectionNames]);buffer.update(sections);});},invalidate:function(sectionNames){var sectionDataIds,sectionsNamesForInvalidation;sectionsNamesForInvalidation=_.contains(sectionNames,'*')?sectionConfig.getSectionNames():sectionNames;$(document).trigger('customer-data-invalidate',[sectionsNamesForInvalidation]);buffer.remove(sectionsNamesForInvalidation);sectionDataIds=$.cookieStorage.get('section_data_ids')||{};_.each(sectionsNamesForInvalidation,function(sectionName){if(!sectionConfig.isClientSideSection(sectionName)){sectionDataIds[sectionName]+=1000;}});$.cookieStorage.set('section_data_ids',sectionDataIds);},'Magento_Customer/js/customer-data':function(settings){options=settings;invalidateCacheBySessionTimeOut(settings);invalidateCacheByCloseCookieSession();customerData.init();}};$(document).on('ajaxComplete',function(event,xhr,settings){var sections,redirects;if(settings.type.match(/post|put|delete/i)){sections=sectionConfig.getAffectedSections(settings.url);if(sections){customerData.invalidate(sections);redirects=['redirect','backUrl'];if(_.isObject(xhr.responseJSON)&&!_.isEmpty(_.pick(xhr.responseJSON,redirects))){return;}\ncustomerData.reload(sections,true);}}});$(document).on('submit',function(event){var sections;if(event.target.method.match(/post|put|delete/i)){sections=sectionConfig.getAffectedSections(event.target.action);if(sections){customerData.invalidate(sections);}}});return customerData;});","Magento_Customer/js/validation-mixin.min.js":"define(['jquery','mage/translate'],function($){\"use strict\";return function(){$.validator.addMethod('required-entry-radio-invoice',function(v,elm,selector){var name=elm.name.replace(/([\\\\\"])/g,'\\\\$1'),container=this.currentForm;selector=selector===true?'input[name=\"'+name+'\"]:checked':selector;return!!container.querySelectorAll(selector).length;},$.mage.__('This is a required field')),$.validator.addMethod('please-enter-at-least-eighteen-characters',function(value){return /^([0-9A-HJ-NPQRTUWXY]{2}\\d{6}[0-9A-HJ-NPQRTUWXY]{10}|[1-9]\\d{14})$/.test(value);},$.mage.__('Unified social credit code format is wrong, please check and correct')),$.validator.addMethod('required-entry-company',function(value){return!$.mage.isEmpty(value);},$.mage.__('Please enter company name')),$.validator.addMethod('required-entry-credit_code',function(value){return!$.mage.isEmpty(value);},$.mage.__('Please enter the Unified Social credit code')),$.validator.addMethod('required-entry-personal',function(value){return!$.mage.isEmpty(value);},$.mage.__('Please enter invoice title'))}});","Magento_Customer/js/address.min.js":"define(['jquery','Magento_Ui/js/modal/modal','Magento_Ui/js/modal/confirm','mage/storage','mage/translate','jquery-ui-modules/widget'],function($,modal,confirm,storage,$t){'use strict';$.widget('mage.address',{options:{deleteConfirmMessage:$.mage.__('Are you sure you want to delete this address?'),defautConfirmMessage:$.mage.__('Are you sure you want to set this address to default?'),},_create:function(){var options=this.options,addAddress=options.addAddress,deleteAddress=options.deleteAddress,editAddress=options.editAddress,setDefaultAddress=options.setDefaultAddress;if(addAddress){$(document).on('click',addAddress,this._addAddress.bind(this));}\nif(deleteAddress){$(document).on('click',deleteAddress,this._deleteAddress.bind(this));}\nif(editAddress){$(document).on('click',editAddress,this._editAddress.bind(this));}\nif(setDefaultAddress){$(document).on('click',setDefaultAddress,this._setDefaultAddress.bind(this));}},_addAddress:function(){var self=this;var modal_options={type:'popup',responsive:true,innerScroll:false,clickableOverlay:false,title:$t('Add my address'),modalClass:'address-dialog custom-address-dialog',overlayClass:'modals-overlay',opened:function(){$('html').addClass('noscroll');$(\".modal-footer\").hide();},closed:function(){$('html').removeClass('noscroll');window.location.reload();}};var popup=modal(modal_options,$('#custom-address-modal'));$('#custom-address-modal').empty();$('#custom-address-modal').html('<iframe title=\"popup-new-address\" style=\"border: 0px; \" src=\"'+this.options.addAddressLocation+'\" width=\"100%\" height=\"100%\"></iframe>');$('#custom-address-modal').modal('openModal');return false;},_deleteAddress:function(e){var self=this;confirm({content:this.options.deleteConfirmMessage,actions:{confirm:function(){if(typeof $(e.target).parent().data('address')!=='undefined'){var deleteUrl=self.options.deleteUrlPrefix+$(e.target).parent().data('address')+'/form_key/'+$.mage.cookies.get('form_key');}else{var deleteUrl=self.options.deleteUrlPrefix+$(e.target).data('address')+'/form_key/'+$.mage.cookies.get('form_key');}\n$(\"body\").trigger('processStart');storage.post(deleteUrl).done(function(response){window.location.reload();});}}});return false;},_setDefaultAddress:function(e){var self=this;confirm({content:this.options.defautConfirmMessage,actions:{confirm:function(){var url=$(e.target).parent('a').data('address')+'form_key/'+$.mage.cookies.get('form_key');$(\"body\").trigger('processStart');storage.post(url).done(function(response){window.location.reload();});}}});return false;},_editAddress:function(e){var self=this;var modal_options={type:'popup',responsive:true,innerScroll:false,clickableOverlay:false,title:$t('Modify my address'),modalClass:'address-dialog custom-address-dialog',overlayClass:'modals-overlay',opened:function(){$('html').addClass('noscroll');$(\".modal-footer\").hide();},closed:function(){$('html').removeClass('noscroll');window.location.reload();}};var popup=modal(modal_options,$('#custom-address-modal'));$('#custom-address-modal').empty();$('#custom-address-modal').html('<iframe title=\"popup-edit-address\" style=\"border: 0px; \" src=\"'+$(e.target).parent().data('address')+'\" width=\"100%\" height=\"100%\"></iframe>');$('#custom-address-modal').modal('openModal');return false;}});return $.mage.address;});","Magento_Customer/js/invalidation-processor.min.js":"define(['underscore','uiElement','Magento_Customer/js/customer-data'],function(_,Element,customerData){'use strict';return Element.extend({initialize:function(){this._super();this.process(customerData);},process:function(customerDataObject){_.each(this.invalidationRules,function(rule,ruleName){_.each(rule,function(ruleArgs,rulePath){require([rulePath],function(Rule){var currentRule=new Rule(ruleArgs);if(!_.isFunction(currentRule.process)){throw new Error('Rule '+ruleName+' should implement invalidationProcessor interface');}\ncurrentRule.process(customerDataObject);});});});}});});","Magento_Customer/js/change-email-password.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.changeEmailPassword',{options:{changeEmailSelector:'[data-role=change-email]',changePasswordSelector:'[data-role=change-password]',mainContainerSelector:'[data-container=change-email-password]',titleSelector:'[data-title=change-email-password]',emailContainerSelector:'[data-container=change-email]',newPasswordContainerSelector:'[data-container=new-password]',confirmPasswordContainerSelector:'[data-container=confirm-password]',currentPasswordSelector:'[data-input=current-password]',emailSelector:'[data-input=change-email]',newPasswordSelector:'[data-input=new-password]',confirmPasswordSelector:'[data-input=confirm-password]'},_create:function(){this.element.on('change',$.proxy(function(){this._checkChoice();},this));this._checkChoice();this._bind();},_bind:function(){this._on($(this.options.emailSelector),{'change':this._updatePasswordFieldWithEmailValue,'keyup':this._updatePasswordFieldWithEmailValue,'paste':this._updatePasswordFieldWithEmailValue});},_checkChoice:function(){if($(this.options.changeEmailSelector).is(':checked')&&$(this.options.changePasswordSelector).is(':checked')){this._showAll();}else if($(this.options.changeEmailSelector).is(':checked')){this._showEmail();}else if($(this.options.changePasswordSelector).is(':checked')){this._showPassword();}else{this._hideAll();}},_showAll:function(){$(this.options.titleSelector).html(this.options.titleChangeEmailAndPassword);$(this.options.mainContainerSelector).show();$(this.options.emailContainerSelector).show();$(this.options.newPasswordContainerSelector).show();$(this.options.confirmPasswordContainerSelector).show();$(this.options.currentPasswordSelector).attr('data-validate','{required:true}').prop('disabled',false);$(this.options.emailSelector).attr('data-validate','{required:true}').prop('disabled',false);this._updatePasswordFieldWithEmailValue();$(this.options.confirmPasswordSelector).attr('data-validate','{required:true, equalTo:\"'+this.options.newPasswordSelector+'\"}').prop('disabled',false);},_hideAll:function(){$(this.options.mainContainerSelector).hide();$(this.options.emailContainerSelector).hide();$(this.options.newPasswordContainerSelector).hide();$(this.options.confirmPasswordContainerSelector).hide();$(this.options.currentPasswordSelector).removeAttr('data-validate').prop('disabled',true);$(this.options.emailSelector).removeAttr('data-validate').prop('disabled',true);$(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled',true);$(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled',true);},_showEmail:function(){this._showAll();$(this.options.titleSelector).html(this.options.titleChangeEmail);$(this.options.newPasswordContainerSelector).hide();$(this.options.confirmPasswordContainerSelector).hide();$(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled',true);$(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled',true);},_showPassword:function(){this._showAll();$(this.options.titleSelector).html(this.options.titleChangePassword);$(this.options.emailContainerSelector).hide();$(this.options.emailSelector).removeAttr('data-validate').prop('disabled',true);},_updatePasswordFieldWithEmailValue:function(){$(this.options.newPasswordSelector).attr('data-validate','{required:true, '+'\\'validate-customer-password\\':true, '+'\\'password-not-equal-to-user-name\\':\\''+$(this.options.emailSelector).val()+'\\'}').prop('disabled',false);}});return $.mage.changeEmailPassword;});","Magento_Customer/js/checkout-balance.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.checkoutBalance',{_create:function(){this.eventData={price:this.options.balance,totalPrice:0};this.element.on('change',$.proxy(function(e){if($(e.target).is(':checked')){this.eventData.price=-1*this.options.balance;}else{if(this.options.amountSubstracted){this.eventData.price=parseFloat(this.options.usedAmount);this.options.amountSubstracted=false;}else{this.eventData.price=parseFloat(this.options.balance);}}\nthis.element.trigger('updateCheckoutPrice',this.eventData);},this));}});return $.mage.checkoutBalance;});","Magento_Customer/js/login.min.js":"define(['jquery','Magento_Customer/js/customer-data'],function($,customerData){return function(getLoginMethods){var getLoginUrl=JSON.parse(getLoginMethods.getLoginMethods);if(getLoginUrl){customerData.reload(['customer'],false);}\nif(!getLoginUrl.alipay){$(\".block-other-login-more\").hide();}\nif(!getLoginUrl.mobile){$(\".block-login-link-phone\").hide();}\nif(!getLoginUrl.wechat){$(\".block-login-link-wechat\").hide();}\nif(!getLoginUrl.wechat||!getLoginUrl.mobile){$(\".block-login-link a\").addClass(\"link-for-center\");}else if(!getLoginUrl.wechat&&!getLoginUrl.mobile){$(\".block-other-login\").hide();}\n$('.block-to-Micrisoft a').attr('href',getLoginUrl.msa);$('.block-register-account a').attr('href',getLoginUrl.msa_reg);$('.block-login-link-phone').attr('href',getLoginUrl.mobile);$('.block-login-link-wechat').attr('href',getLoginUrl.wechat);$('.block-login-link-alipay').attr('href',getLoginUrl.alipay);$(\".block-other-login-more\").click(function(){$(\".block-login-link-alipay\").toggle();if($(\".block-login-link a\").is(\":hidden\")){$(\".arrowMore\").removeClass(\"moretrans\");}else{$(\".arrowMore\").addClass(\"moretrans\");}});var userAgentInfo=navigator.userAgent;var browser=navigator.userAgent.toLowerCase();var _isAlipay=browser.match(/Alipay/i)==\"alipay\";var mobileAgents=[\"Android\",\"iPhone\",\"SymbianOS\",\"Windows Phone\",\"iPad\",\"iPod\"];var mobile_flag=false;for(var v=0;v<mobileAgents.length;v++){if(userAgentInfo.indexOf(mobileAgents[v])>0){mobile_flag=true;break;}}\nif(document.body.clientWidth<768&&mobile_flag&&!_isAlipay){$('.block-other-login-more').hide();$('.alipay_login').hide();}}})","Magento_Customer/js/logout-redirect.min.js":"define(['jquery','mage/mage'],function($){'use strict';return function(data){$($.mage.redirect(data.url,'assign',5000));};});","Magento_Customer/js/addressValidation.min.js":"define(['jquery','underscore','mageUtils','mage/translate','Magento_Checkout/js/model/postcode-validator','jquery-ui-modules/widget','validation'],function($,__,utils,$t,postCodeValidator){'use strict';$.widget('mage.addressValidation',{options:{selectors:{button:'[data-action=save-address]',zip:'#zip',emailNotify:'#email_notify',telephone:'#telephone',email:'#email',country:'select[name=\"country_id\"]:visible',modalCoseButton:'.modal-popup .action-close'},},zipInput:null,countrySelect:null,_create:function(){var button=$(this.options.selectors.button,this.element);this.zipInput=$(this.options.selectors.zip,this.element);this.countrySelect=$(this.options.selectors.country,this.element);var emailNotify=this.options.selectors.emailNotify;if(emailNotify){$(document).on('change',emailNotify,this._sendSubscribeRequest.bind(this));}\nvar modalCloseButton=this.options.selectors.modalCoseButton;this.element.validation({submitHandler:function(form){button.attr('disabled',true);$(\"#form-validate input[type=text]\").each(function(){var value_this=$(this).val();$(this).val(value_this.trim());})\nform.submit();$(modalCloseButton,parent.document).trigger('click');}});this._addPostCodeValidation();},_sendSubscribeRequest:function(e){var element=$(e.target);if(element.length&&element.prop('checked')){var emailData={\"subscribeData\":{\"email\":\"\",\"device\":\"\",\"user_name\":\"\",\"product_id\":\"\",\"subscribe_type\":\"newsletter\",\"url\":\"\",\"phone\":\"\"}};emailData.subscribeData.phone=$(this.options.selectors.telephone).val();emailData.subscribeData.email=$(this.options.selectors.email).val();emailData.subscribeData.url=window.location.href;$.ajax({headers:{\"content-type\":\"application/json\",},url:\"/rest/V1/msCrm/subscribe/\",type:\"post\",dataType:\"json\",data:JSON.stringify(emailData),success:function(data){},})}},_addPostCodeValidation:function(){var self=this;this.zipInput.on('keyup',__.debounce(function(event){var valid=self._validatePostCode(event.target.value);self._renderValidationResult(valid);},500));this.countrySelect.on('change',function(){var valid=self._validatePostCode(self.zipInput.val());self._renderValidationResult(valid);});},_validatePostCode:function(postCode){var countryId=this.countrySelect.val();if(postCode===null){return true;}},_renderValidationResult:function(valid){var warnMessage,alertDiv=this.zipInput.next();if(!valid){warnMessage=$t('Provided Zip/Postal Code seems to be invalid.');if(postCodeValidator.validatedPostCodeExample.length){warnMessage+=$t(' Example: ')+postCodeValidator.validatedPostCodeExample.join('; ')+'. ';}\nwarnMessage+=$t('If you believe it is the right one you can ignore this notice.');}\nalertDiv.children(':first').text(warnMessage);if(valid){alertDiv.hide();}else{alertDiv.show();}}});return $.mage.addressValidation;});","Magento_Customer/js/action/check-email-availability.min.js":"define(['mage/storage','Magento_Checkout/js/model/url-builder'],function(storage,urlBuilder){'use strict';return function(deferred,email){return storage.post(urlBuilder.createUrl('/customers/isEmailAvailable',{}),JSON.stringify({customerEmail:email}),false).done(function(isEmailAvailable){if(isEmailAvailable){deferred.resolve();}else{deferred.reject();}}).fail(function(){deferred.reject();});};});","Magento_Customer/js/action/login.min.js":"define(['jquery','mage/storage','Magento_Ui/js/model/messageList','Magento_Customer/js/customer-data','mage/translate'],function($,storage,globalMessageList,customerData,$t){'use strict';var callbacks=[],action=function(loginData,redirectUrl,isGlobal,messageContainer){messageContainer=messageContainer||globalMessageList;return storage.post('customer/ajax/login',JSON.stringify(loginData),isGlobal).done(function(response){if(response.errors){messageContainer.addErrorMessage(response);callbacks.forEach(function(callback){callback(loginData);});}else{callbacks.forEach(function(callback){callback(loginData);});customerData.invalidate(['customer']);if(response.redirectUrl){window.location.href=response.redirectUrl;}else if(redirectUrl){window.location.href=redirectUrl;}else{location.reload();}}}).fail(function(){messageContainer.addErrorMessage({'message':$t('Could not authenticate. Please try again later')});callbacks.forEach(function(callback){callback(loginData);});});};action.registerLoginCallback=function(callback){callbacks.push(callback);};return action;});","Magento_Customer/js/view/authentication-popup.min.js":"define(['jquery','ko','Magento_Ui/js/form/form','Magento_Customer/js/action/login','Magento_Customer/js/customer-data','Magento_Customer/js/model/authentication-popup','mage/translate','mage/url','Magento_Ui/js/modal/alert','mage/validation'],function($,ko,Component,loginAction,customerData,authenticationPopup,$t,url,alert){'use strict';return Component.extend({registerUrl:window.authenticationPopup.customerRegisterUrl,forgotPasswordUrl:window.authenticationPopup.customerForgotPasswordUrl,autocomplete:window.authenticationPopup.autocomplete,modalWindow:null,isLoading:ko.observable(false),defaults:{template:'Magento_Customer/authentication-popup'},initialize:function(){var self=this;this._super();url.setBaseUrl(window.authenticationPopup.baseUrl);loginAction.registerLoginCallback(function(){self.isLoading(false);});},setModalElement:function(element){if(authenticationPopup.modalWindow==null){authenticationPopup.createPopUp(element);}},isActive:function(){var customer=customerData.get('customer');return customer()==false;},showModal:function(){if(this.modalWindow){$(this.modalWindow).modal('openModal');}else{alert({content:$t('Guest checkout is disabled.')});}},login:function(formUiElement,event){var loginData={},formElement=$(event.currentTarget),formDataArray=formElement.serializeArray();event.stopPropagation();formDataArray.forEach(function(entry){loginData[entry.name]=entry.value;});if(formElement.validation()&&formElement.validation('isValid')){this.isLoading(true);loginAction(loginData);}\nreturn false;}});});","Magento_Customer/js/view/customer.min.js":"define(['uiComponent','Magento_Customer/js/customer-data'],function(Component,customerData){'use strict';return Component.extend({initialize:function(){this._super();this.customer=customerData.get('customer');}});});","Magento_Customer/js/model/address-list.min.js":"define(['ko','./customer-addresses'],function(ko,defaultProvider){'use strict';return ko.observableArray(defaultProvider.getAddressItems());});","Magento_Customer/js/model/customer-addresses.min.js":"define(['jquery','ko','./customer/address'],function($,ko,Address){'use strict';var isLoggedIn=ko.observable(window.isCustomerLoggedIn);return{getAddressItems:function(){var items=[],defaultShipping=[],customerData=window.customerData;if(isLoggedIn()){if(Object.keys(customerData).length){$.each(customerData.addresses,function(key,item){var address=new Address(item);if(address.isDefaultShipping()){defaultShipping.push(address);}else{items.push(address);}});items=$.merge(defaultShipping,items);}}\nreturn items;}};});","Magento_Customer/js/model/authentication-popup.min.js":"define(['jquery','Magento_Ui/js/modal/modal'],function($,modal){'use strict';return{modalWindow:null,createPopUp:function(element){var options={'type':'popup','modalClass':'popup-authentication','focus':'[name=username]','responsive':true,'innerScroll':true,'trigger':'.proceed-to-checkout','buttons':[]};this.modalWindow=element;modal(options,$(this.modalWindow));},showModal:function(){$(this.modalWindow).modal('openModal').trigger('contentUpdated');}};});","Magento_Customer/js/model/customer.min.js":"define(['jquery','ko','underscore','./address-list'],function($,ko,_,addressList){'use strict';var isLoggedIn=ko.observable(window.isCustomerLoggedIn),customerData={};if(isLoggedIn()){customerData=window.customerData;}else{customerData={};}\nreturn{customerData:customerData,customerDetails:{},isLoggedIn:isLoggedIn,setIsLoggedIn:function(flag){isLoggedIn(flag);},getBillingAddressList:function(){return addressList();},getShippingAddressList:function(){return addressList();},setDetails:function(fieldName,value){if(fieldName){this.customerDetails[fieldName]=value;}},getDetails:function(fieldName){if(fieldName){if(this.customerDetails.hasOwnProperty(fieldName)){return this.customerDetails[fieldName];}\nreturn undefined;}\nreturn this.customerDetails;},addCustomerAddress:function(address){var fields=['customer_id','country_id','street','company','telephone','fax','postcode','city','firstname','lastname','middlename','prefix','suffix','vat_id','default_billing','default_shipping'],customerAddress={},hasAddress=0,existingAddress;if(!this.customerData.addresses){this.customerData.addresses=[];}\ncustomerAddress=_.pick(address,fields);if(address.hasOwnProperty('region_id')){customerAddress.region={'region_id':address['region_id'],region:address.region};}\nfor(existingAddress in this.customerData.addresses){if(this.customerData.addresses.hasOwnProperty(existingAddress)){if(_.isEqual(this.customerData.addresses[existingAddress],customerAddress)){hasAddress=existingAddress;break;}}}\nif(hasAddress===0){return this.customerData.addresses.push(customerAddress)-1;}\nreturn hasAddress;},setAddressAsDefaultBilling:function(addressId){if(this.customerData.addresses[addressId]){this.customerData.addresses[addressId]['default_billing']=1;return true;}\nreturn false;},setAddressAsDefaultShipping:function(addressId){if(this.customerData.addresses[addressId]){this.customerData.addresses[addressId]['default_shipping']=1;return true;}\nreturn false;}};});","Magento_Customer/js/model/customer/address.min.js":"define([],function(){'use strict';return function(addressData){var regionId;if(addressData.region['region_id']&&addressData.region['region_id']!=='0'){regionId=addressData.region['region_id']+'';}\nreturn{customerAddressId:addressData.id,email:addressData.email,countryId:addressData['country_id'],regionId:regionId,regionCode:addressData.region['region_code'],region:addressData.region.region,customerId:addressData['customer_id'],street:addressData.street,company:addressData.company,telephone:addressData.telephone,fax:addressData.fax,postcode:addressData.postcode,city:addressData.city,firstname:addressData.firstname,lastname:addressData.lastname,middlename:addressData.middlename,prefix:addressData.prefix,suffix:addressData.suffix,vatId:addressData['vat_id'],sameAsBilling:addressData['same_as_billing'],saveInAddressBook:addressData['save_in_address_book'],customAttributes:addressData['custom_attributes'],isDefaultShipping:function(){return addressData['default_shipping'];},isDefaultBilling:function(){return addressData['default_billing'];},getAddressInline:function(){return addressData.inline;},getType:function(){return'customer-address';},getKey:function(){return this.getType()+this.customerAddressId;},getCacheKey:function(){return this.getKey();},isEditable:function(){return true;},canUseForBilling:function(){return true;}};};});","Magento_Customer/js/invalidation-rules/website-rule.min.js":"define(['uiClass'],function(Element){'use strict';return Element.extend({defaults:{scopeConfig:{}},process:function(customerData){var customer=customerData.get('customer');if(this.scopeConfig&&customer()&&~~customer().websiteId!==~~this.scopeConfig.websiteId&&~~customer().websiteId!==0){customerData.reload(['customer']);}}});});","Amasty_Checkout/js/autocomplete.min.js":"define(['Magento_Ui/js/lib/view/utils/async','uiRegistry','ko'],function($,registry,ko){'use strict';return{isReady:ko.observable(false),geolocate:function(autocomplete){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var geolocation={lat:position.coords.latitude,lng:position.coords.longitude};var circle=new google.maps.Circle({center:geolocation,radius:position.coords.accuracy});autocomplete.setBounds(circle.getBounds());});}},registerField:function(component){var self=this;if(this.isReady()){return this.init(component);}else{this.isReady.subscribe(function(isReady){if(isReady){return self.init(component);}});}},init:function(component){var self=this;registry.get(component,function(rootComponent){registry.get(component+'.street.0',function(inputComponent){$.async({selector:'#'+inputComponent.uid},function(input){var autocomplete=new google.maps.places.Autocomplete(input,{types:['geocode']});autocomplete.setFields(['address_components','name']);autocomplete.addListener('place_changed',function(){self.fillInAddress(autocomplete,rootComponent);});self.geolocate(autocomplete);});});});},fillInAddress:function(autocomplete,rootComponent){var place=autocomplete.getPlace();if(!place.address_components){return;}\nvar streetComponent=rootComponent.getChild('street').getChild(0);var street=place.name.replace(',','');if(street&&(streetComponent.value()===street)){streetComponent.value.valueHasMutated();}else{streetComponent.value(street);}\nif(rootComponent.hasChild('postcode')){rootComponent.getChild('postcode').value('');}\nif(rootComponent.hasChild('region_id_input')){rootComponent.getChild('region_id_input').value('');}\nif(rootComponent.hasChild('city')){rootComponent.getChild('city').value('');}\nvar isRegionApplied=false,postcode=false,postcode_suffix=false,stateSelect;for(var i=place.address_components.length-1;i>=0;i--){var addressComponent=place.address_components[i];var addressType=addressComponent.types[0];switch(addressType){case'country':if(rootComponent.hasChild('country_id')){rootComponent.getChild('country_id').value(addressComponent.short_name);}\nbreak;case'locality':case'postal_town':if(rootComponent.hasChild('city')){rootComponent.getChild('city').value(addressComponent.long_name);}\nbreak;case'postal_code':if(rootComponent.hasChild('postcode')){postcode=addressComponent.long_name;if(postcode_suffix){postcode=postcode+'-'+postcode_suffix;}\nrootComponent.getChild('postcode').value(postcode);}\nbreak;case'postal_code_suffix':postcode_suffix=addressComponent.long_name;break;case'administrative_area_level_1':if(isRegionApplied){break;}\nstateSelect=rootComponent.getChild('region_id');if(stateSelect&&stateSelect.visible()){var value=addressComponent.short_name;var country=checkoutConfig.defaultCountryId;if(rootComponent.hasChild('country_id')){country=rootComponent.getChild('country_id').value();}\nif(country in window.amasty_checkout_regions&&value in window.amasty_checkout_regions[country]){stateSelect.value(window.amasty_checkout_regions[country][value]);}}else if(rootComponent.hasChild('region_id_input')){rootComponent.getChild('region_id_input').value(addressComponent.long_name);}\nisRegionApplied=true;break;case'administrative_area_level_2':if(isRegionApplied){var stateInput=rootComponent.getChild('region_id_input');if(stateInput&&stateInput.visible()&&stateInput.value()){stateInput.value(stateInput.value()+', '+addressComponent.long_name);}}else{stateSelect=rootComponent.getChild('region_id');if(stateSelect&&stateSelect.visible()){var value=addressComponent.short_name;var country=checkoutConfig.defaultCountryId;if(rootComponent.hasChild('country_id')){country=rootComponent.getChild('country_id').value();}\nif(country in window.amasty_checkout_regions&&value in window.amasty_checkout_regions[country]){stateSelect.value(window.amasty_checkout_regions[country][value]);}}}\nbreak;}}}};});","Amasty_Checkout/js/amastyCheckoutDisabled.min.js":"window.amasty_checkout_disabled=true;","Amasty_Checkout/js/action/update-delivery.min.js":"define(['Amasty_Checkout/js/model/resource-url-manager','Amasty_Checkout/js/model/delivery','Magento_Checkout/js/model/quote','mage/storage','Magento_Checkout/js/model/error-processor'],function(resourceUrlManager,deliveryService,quote,storage,errorProcessor){\"use strict\";return function(payload){if(deliveryService.isLoading()){return;}\nvar serviceUrl=resourceUrlManager.getUrlForDelivery(quote);storage.post(serviceUrl,JSON.stringify(payload),false).done(function(result){}).fail(function(response){errorProcessor.process(response);}).always(function(){deliveryService.isLoading(false);});}});","Amasty_Checkout/js/action/start-place-order.min.js":"define(['jquery','underscore'],function($,_){'use strict';var startPlaceOrder=function(selector){if(selector){$(selector).click();}else{var toolBar=$('.payment-method._active .actions-toolbar');if(toolBar.length>1){_.each(toolBar,function(element){if(element.style.display!=='none'){toolBar=$(element);return;}})}\ntoolBar.find('.action.primary').click();}};return function(selector){startPlaceOrder(selector);};});","Amasty_Checkout/js/action/update-item.min.js":"define(['Amasty_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/quote','mage/storage','Magento_Checkout/js/model/error-processor','Magento_Checkout/js/model/shipping-rate-registry','Magento_Checkout/js/model/shipping-rate-processor/new-address','Magento_Checkout/js/model/shipping-rate-processor/customer-address','Magento_Checkout/js/model/payment-service','Magento_Checkout/js/model/payment/method-converter','Magento_Customer/js/customer-data','Amasty_Checkout/js/action/update-items-content',],function(resourceUrlManager,totals,quote,storage,errorProcessor,rateRegistry,defaultProcessor,customerAddressProcessor,paymentService,methodConverter,customerData,updateItemsContent){\"use strict\";return function(itemId,formData){if(totals.isLoading())\nreturn;totals.isLoading(true);var serviceUrl=resourceUrlManager.getUrlForUpdateItem(quote);storage.post(serviceUrl,JSON.stringify({itemId:itemId,formData:formData}),false).done(function(result){if(!result){window.location.reload();}\nrateRegistry.set(quote.shippingAddress().getCacheKey(),null);var type=quote.shippingAddress().getType();if(type==='customer-address'){customerAddressProcessor.getRates(quote.shippingAddress());}else{defaultProcessor.getRates(quote.shippingAddress());}\npaymentService.setPaymentMethods(methodConverter(result.payment));customerData.reload(['cart']);totals.isLoading(false);updateItemsContent(result.totals);}).fail(function(response){errorProcessor.process(response);totals.isLoading(false);});}});","Amasty_Checkout/js/action/save-additional-fields.min.js":"define(['jquery','Amasty_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/quote','uiRegistry','mage/storage','Magento_Checkout/js/model/error-processor'],function($,resourceUrlManager,quote,registry,storage,errorProcessor){\"use strict\";var request;return function(){var serviceUrl,payload,data;serviceUrl=resourceUrlManager.getUrlForAdditionalFields(quote);data=registry.get('checkoutProvider').get('amcheckout.additional');payload={cartId:quote.getQuoteId(),fields:data};if(request){request.abort();}\nrequest=storage.post(serviceUrl,JSON.stringify(payload),false).fail(function(response){if(response.responseText){errorProcessor.process(response);}});return request;}});","Amasty_Checkout/js/action/get-address-cache-key.min.js":"define(['underscore','Magento_Checkout/js/model/shipping-rates-validation-rules','Magento_Checkout/js/model/address-converter'],function(_,validationRules,addressConverter){'use strict';function getAddressCacheKey(address){var fields,formAddress,cacheKey='';if(address.getType()!=='new-address'||address.getType()!=='new-customer-address'){return address.getCacheKey();}\nfields=validationRules.getObservableFields();formAddress=addressConverter.quoteAddressToFormAddressData(address);_.each(fields,function(name){if(formAddress.hasOwnProperty(name)){cacheKey+='|'+formAddress[name];}else if(formAddress['custom_attributes']){cacheKey+='|'+formAddress['custom_attributes'][name];}});return cacheKey;}\nreturn getAddressCacheKey;});","Amasty_Checkout/js/action/focus-first-error.min.js":"define(['jquery'],function($){'use strict';function toggleErrorCollapsible(errors){$.each(errors,function(index,error){if($(error).css('display')!='none'&&$(error).parents('[data-amcheckout-js=\"step-content\"]').length){var stepContainer=$(error).parents('[data-amcheckout-js=\"step-content\"]').parent(),stepContainerIsActive=stepContainer.data('mageCollapsible')?stepContainer.data('mageCollapsible').options.active:true;if(!stepContainerIsActive){var animate=stepContainer.collapsible(\"option\",\"animate\");stepContainer.collapsible('option','animate',false).collapsible('activate').collapsible('option','animate',animate);}}})}\nreturn function(){var checkoutWindow=window;if(checkoutWindow.checkoutDesign=='modern'&&(checkoutWindow.checkoutLayout=='1column'||checkoutWindow.checkoutLayout=='2columns')){var allErrors=$('.mage-error, .field-error');if(allErrors.length){toggleErrorCollapsible(allErrors);}}\nvar errorField=$('.mage-error:visible, .field-error:visible').first();if(!errorField.length){return;}\nif(errorField.is('div.mage-error')){if(errorField.prop('for')){errorField=$('#'+errorField.prop('for')).length?$('#'+errorField.prop('for')):$('[name=\"'+errorField.prop('for')+'\"]');}else{var input=errorField.prevAll(':input');if(input.length){errorField=input;}}}else if(errorField.is('div.field-error')){errorField=$('#'+errorField.prop('id').replace('error-',''))}\nif(errorField.is('input:not(:visible)')){errorField=$('label[for=\"'+errorField.prop('id')+'\"]')}\nvar offset=errorField.offset().top-(checkoutWindow.innerHeight / 2);if(offset<0){offset=0;}\n$(checkoutWindow).scrollTop(offset);errorField.focus();};});","Amasty_Checkout/js/action/is-equal-ignore-functions.min.js":"define(['underscore'],function(_){'use strict';var isEqualIgnoreFunctions=function(a,b,aStack,bStack){var className,areArrays,key,length,aCtor,bCtor,keys,isFunction;if(a===b){return a!==0||1 / a===1 / b;}\nif(a==null||b==null){return a===b;}\nif(a instanceof _){a=a._wrapped;}\nif(b instanceof _){b=b._wrapped;}\nclassName=Object.prototype.toString.call(a);if(className!==Object.prototype.toString.call(b)){return false;}\nswitch(className){case'[object RegExp]':case'[object String]':return''+a===''+b;case'[object Number]':if(+a!==+a){return+b!==+b;}\nreturn+a===0?1 /+a===1 / b:+a===+b;case'[object Date]':case'[object Boolean]':return+a===+b;default:break;}\nareArrays=className==='[object Array]';if(!areArrays){if(typeof a!='object'||typeof b!='object'){return false;}\naCtor=a.constructor;bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&('constructor'in a&&'constructor'in b)){return false;}}\naStack=aStack||[];bStack=bStack||[];length=aStack.length;while(length--){if(aStack[length]===a){return bStack[length]===b;}}\naStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length){return false;}\nwhile(length--){if(!isEqualIgnoreFunctions(a[length],b[length],aStack,bStack)){return false;}}}else{keys=_.keys(a);length=keys.length;if(_.keys(b).length!==length){return false;}\nwhile(length--){key=keys[length];isFunction=_.isFunction(a[key])||_.isFunction(b[key]);if(!isFunction&&!(_.has(b,key)&&isEqualIgnoreFunctions(a[key],b[key],aStack,bStack))){return false;}}}\naStack.pop();bStack.pop();return true;}\nreturn isEqualIgnoreFunctions;});","Amasty_Checkout/js/action/create-js-bundle.min.js":"define(['underscore','mage/storage','Magento_Checkout/js/model/url-builder'],function(_,storage,urlBuilder){\"use strict\";var API_PATH='/amasty_checkout/js/create-bundle';return function(){var ulr=urlBuilder.createUrl(API_PATH,{}),match=/\\/frontend\\//.exec(Object.keys(require.s.contexts._.urlFetched)[0]),trashStringSize=match.index||0,data=[];_.each(require.s.contexts._.urlFetched,function(val,key){data.push(key.substr(trashStringSize));});_.each(require.s.contexts._.defined,function(val,key){if(key.substr(0,5)===\"text!\"){data.push(require.toUrl(key.substr(5)).substr(trashStringSize));}});storage.post(ulr,JSON.stringify({fileNames:data}),false);};});","Amasty_Checkout/js/action/remove-item.min.js":"define(['Amasty_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/quote','mage/storage','Magento_Checkout/js/model/error-processor','Magento_Checkout/js/model/shipping-service','Magento_Checkout/js/model/shipping-rate-registry','Magento_Checkout/js/model/payment-service','Magento_Checkout/js/model/payment/method-converter','Magento_Customer/js/customer-data','mage/url'],function(resourceUrlManager,totals,quote,storage,errorProcessor,shippingService,rateRegistry,paymentService,methodConverter,customerData,urlBuilder){\"use strict\";return function(itemId){if(totals.isLoading())\nreturn;totals.isLoading(true);shippingService.isLoading(true);var serviceUrl=resourceUrlManager.getUrlForRemoveItem(quote);var shipppingAddress=quote.shippingAddress();if(shipppingAddress.extensionAttributes&&shipppingAddress.extensionAttributes.checkoutFields&&Object.keys(shipppingAddress.extensionAttributes.checkoutFields).length===0){shipppingAddress.extensionAttributes.checkoutFields=[];}\nstorage.post(serviceUrl,JSON.stringify({itemId:itemId,address:shipppingAddress}),false).done(function(result){if(!result){return window.location.reload();}\nvar itemIds=result.totals.items.map(function(value,index){return value.item_id;});customerData.reload(['cart']);if(!itemIds.length){window.location.href=urlBuilder.build(\"checkout/cart/index\");return this;}\nwindow.checkoutConfig.quoteItemData=window.checkoutConfig.quoteItemData.filter(function(item){return itemIds.indexOf(+item.item_id)!==-1;});shippingService.setShippingRates(result.shipping);rateRegistry.set(quote.shippingAddress().getKey(),result.shipping);quote.setTotals(result.totals);paymentService.setPaymentMethods(methodConverter(result.payment));}).fail(function(response){errorProcessor.process(response);}).always(function(){shippingService.isLoading(false);totals.isLoading(false);});}});","Amasty_Checkout/js/action/check-gift-wrap.min.js":"define(['Amasty_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/quote','mage/storage','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/error-processor'],function(resourceUrlManager,quote,storage,totalsService,errorProcessor){\"use strict\";return function(checked){var serviceUrl,payload;totalsService.isLoading(true);serviceUrl=resourceUrlManager.getUrlForGiftWrap(quote);payload={checked:checked};storage.post(serviceUrl,JSON.stringify(payload),false).done(function(result){quote.setTotals(result);}).fail(function(response){errorProcessor.process(response);}).always(function(){totalsService.isLoading(false);});}});","Amasty_Checkout/js/action/set-payment-method-mixin.min.js":"define(['uiRegistry','Magento_Checkout/js/model/quote','mage/utils/wrapper','Magento_CheckoutAgreements/js/model/agreements-assigner'],function(registry,quote,wrapper,agreementsAssigner){'use strict';return function(setPaymentMethodAction){return wrapper.wrap(setPaymentMethodAction,function(originalAction,messageContainer){agreementsAssigner(quote.paymentMethod());return originalAction(messageContainer);});};});","Amasty_Checkout/js/action/set-shipping-information-mixin.min.js":"define(['jquery','mage/utils/wrapper','Amasty_Checkout/js/model/events','Magento_Checkout/js/model/totals'],function($,wrapper,events,totals){'use strict';return function(setShippingInformationAction){return wrapper.wrap(setShippingInformationAction,function(original){events.trigger('before_shipping_save');totals.isLoading(true);return original().always(function(){events.trigger('after_shipping_save');totals.isLoading(false);});});};});","Amasty_Checkout/js/action/get-payment-information-mixin.min.js":"define(['uiRegistry','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/shipping-rate-registry','mage/utils/wrapper'],function(registry,quote,rateRegistry,wrapper){'use strict';return function(getPaymentInformationAction){return wrapper.wrap(getPaymentInformationAction,function(originalAction,deferred,messageContainer){var reload=false;var address=quote.shippingAddress();if(registry&&registry.__proto__.hasOwnProperty('get')){registry.get('checkoutProvider',function(component){if(component.amdiscount){reload=component.amdiscount.isNeedToReloadShipping;}});}\nif(reload&&address){var cacheKey=address.getCacheKey().concat(JSON.stringify(address.extensionAttributes)),cacheData=rateRegistry.get(cacheKey);rateRegistry.set(address.getKey(),null);rateRegistry.set(address.getCacheKey(),null);rateRegistry.set(cacheKey,null);quote.shippingAddress.valueHasMutated();rateRegistry.set(cacheKey,cacheData);}\nreturn originalAction(deferred,messageContainer);});};});","Amasty_Checkout/js/action/update-items-content.min.js":"define(['Magento_Checkout/js/model/totals','Magento_Checkout/js/model/error-processor','uiRegistry','Magento_Checkout/js/model/quote','mage/storage'],function(totals,errorProcessor,registry,quote,storage){\"use strict\";return function(quoteTotals){if(totals.isLoading()){return;}\ntotals.isLoading(true);storage.get('/checkout/ajax/getItemsData').done(function(result){if(!result){window.location.reload();}\nif(result.image_data){registry.get('checkout.sidebar.summary.cart_items.details.thumbnail').imageData=result.image_data;}\nif(result.options_data){var options=result.options_data;quoteTotals.items.forEach(function(item){item.amcheckout=options[item.item_id];});}\nquote.setTotals(quoteTotals);}).fail(function(response){errorProcessor.process(response);}).always(function(){totals.isLoading(false);});}});","Amasty_Checkout/js/action/save-password.min.js":"define(['jquery','Amasty_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/error-processor','mage/storage'],function($,resourceUrlManager,quote,errorProcessor,storage){\"use strict\";return function(){var serviceUrl=resourceUrlManager.getUrlForSavePassword(quote),password=$('form[data-role=email-with-possible-login]').find('#customer-password'),payload={password:password?password.val():''};return storage.post(serviceUrl,JSON.stringify(payload),false).fail(function(response){errorProcessor.process(response);});};});","Amasty_Checkout/js/options/configurable.min.js":"define(['jquery','Magento_ConfigurableProduct/js/configurable','Magento_Ui/js/modal/modal'],function($){'use strict';$.widget('mage.amcheckoutConfigurable',$.mage.configurable,{_initializeOptions:function(){var element=$(this.options.priceHolderSelector);if(!element.data('magePriceBox')){element.priceBox();}\nreturn this._super();},_calculatePrice:function(config){var element=$(this.options.priceHolderSelector);if(!element.data('magePriceBox')){element.priceBox();}\nreturn this._super(config);},configureElement:function(element){return this._configureElement(element);},_getAttributeId:function(element){return+$(element).data('attribute-id');},_fillState:function(){$.each(this.options.settings,$.proxy(function(index,element){var attributeId=this._getAttributeId(element);if(attributeId&&this.options.spConfig.attributes[attributeId]){element.config=this.options.spConfig.attributes[attributeId];element.attributeId=attributeId;this.options.state[attributeId]=false;}},this));},_fillSelect:function(element){var attributeId=this._getAttributeId(element),options=this._getAttributeOptions(attributeId),prevConfig,index=1,allowedProducts,i,j;this._clearSelect(element);element.options[0]=new Option('','');element.options[0].innerHTML=this.options.spConfig.chooseText;prevConfig=false;if(element.prevSetting){prevConfig=element.prevSetting.options[element.prevSetting.selectedIndex];}\nif(options){for(i=0;i<options.length;i++){allowedProducts=[];if(prevConfig){for(j=0;j<options[i].products.length;j++){if(prevConfig.config&&prevConfig.config.allowedProducts&&prevConfig.config.allowedProducts.indexOf(options[i].products[j])>-1){allowedProducts.push(options[i].products[j]);}}}else{allowedProducts=options[i].products.slice(0);}\nif(allowedProducts.length>0){options[i].allowedProducts=allowedProducts;element.options[index]=new Option(this._getOptionLabel(options[i]),options[i].id);if(typeof options[i].price!=='undefined'){element.options[index].setAttribute('price',options[i].prices);}\nelement.options[index].config=options[i];index++;}}}}});return $.mage.amcheckoutConfigurable;});","Amasty_Checkout/js/form/element/autocomplete.min.js":"define(['Magento_Ui/js/form/element/abstract','Amasty_Checkout/js/autocomplete'],function(AbstractField,autocomplete){'use strict';return AbstractField.extend({initialize:function(){this._super();autocomplete.registerField(this.name.split('.').slice(0,-2).join('.'));return this;}});});","Amasty_Checkout/js/form/element/delivery-date.min.js":"define(['ko','jquery','Magento_Ui/js/form/element/date'],function(ko,$,AbstractField){'use strict';return AbstractField.extend({defaults:{amcheckout_days:[]},initConfig:function(){this._super();this.options.minDate=new Date();this.options.showOn='both';if(this.amcheckout_days.length>0){this.options.beforeShowDay=this.restrictDates.bind(this);}\nreturn this;},restrictDates:function(d){return[$.inArray(d.getDay(),this.amcheckout_days)!=-1,\"\"];}});});","Amasty_Checkout/js/form/element/region.min.js":"define(['Magento_Ui/js/form/element/region','uiRegistry'],function(Component,registry){'use strict';return Component.extend({initialize:function(config){this._super();if(window.checkoutConfig.amdefault&&window.checkoutConfig.amdefault.region){registry.get(this.parentName+'.'+'region_id_input',function(region){if(!region.value()){var country=registry.get(this.parentName+'.'+'country_id');if(country.value()==window.checkoutConfig.amdefault.country_id){region.value(window.checkoutConfig.amdefault.region);}}}.bind(this));}\nreturn this;},filter:function(value,field){var country=registry.get(this.parentName+'.'+'country_id');if(country){this._super();}}});});","Amasty_Checkout/js/view/messages-mixin.min.js":"define(['jquery','underscore','Magento_Ui/js/lib/knockout/extender/bound-nodes'],function($,_,boundNodes){'use strict';return function(Component){return Component.extend({defaults:{scrollAllowed:true,scrollOffset:0},initialize:function(){this._super();if(this.scrollAllowed===true&&this.messageContainer.errorMessages){this.messageContainer.errorMessages.subscribe(function(changes){try{_.find(changes,function(change){if(change.status==='added'){this._scrollToMessageBlock();return true;}},this);}catch(e){console.log('Unable to scroll to error message.');console.debug(e);}},this,'arrayChange');}\nreturn this;},_scrollToMessageBlock:function(){var componentNodes=boundNodes.get(this),$element=$(componentNodes),offset=$element.offset().top,scrollTo=false,windowTop=$(window).scrollTop(),windowHeight=$(window).height(),windowBottom=windowTop+windowHeight;if(offset<0||!$element.is(':visible')){return;}\nif(windowTop>offset){scrollTo=offset;}else if(windowBottom<offset){scrollTo=offset-windowHeight*0.7;}\nif(scrollTo!==false){$([document.documentElement,document.body]).animate({scrollTop:scrollTo+this.scrollOffset},250);}}});};});","Amasty_Checkout/js/view/summary-mixin.min.js":"define(['Amasty_Checkout/js/view/utils','ko','Magento_Checkout/js/model/quote'],function(viewUtils,ko,quote){'use strict';return function(Component){return Component.extend({getNameSummary:function(){return viewUtils.getBlockTitle('summary');},getCartUrl:function(){return window.checkout.shoppingCartUrl;}});};});","Amasty_Checkout/js/view/utils.min.js":"define(['underscore'],function(_){'use strict';return{getBlockLayoutConfig:function(blockNames){var resultBlock=null;_.find(window.checkoutConfig.checkoutBlocksConfig,function(column){return _.find(column,function(block){if(blockNames===block.name){resultBlock=block;return true;}});});return resultBlock;},getBlockTitle:function(blockName){var blockConfig=this.getBlockLayoutConfig(blockName);return blockConfig?blockConfig.title:'';}};});","Amasty_Checkout/js/view/onepage.min.js":"define(['jquery','underscore','uiComponent','ko','uiRegistry','Magento_Customer/js/model/customer','Magento_Checkout/js/action/select-billing-address','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/payment/additional-validators','Magento_Checkout/js/model/payment/method-converter','Magento_Checkout/js/model/payment-service','Magento_Checkout/js/model/checkout-data-resolver','Amasty_Checkout/js/action/is-equal-ignore-functions','Amasty_Checkout/js/model/one-step-layout','Amasty_Checkout/js/model/payment-validators/shipping-validator','Amasty_Checkout/js/model/address-form-state','Amasty_Checkout/js/model/statistic','Amasty_Checkout/js/model/shipping-registry','IsobarCommerce_Fapiao/js/view/checkout/get-fapiao-information'],function($,_,Component,ko,registry,customer,selectBillingAddress,quote,paymentValidatorRegistry,paymentMethodConverter,paymentService,checkoutDataResolver,isEqualIgnoreFunctions,oneStepLayout,shippingValidator,addressFormState,statistic,shippingRegistry,fapiaoInformation){'use strict';return Component.extend({initialize:function(){this._super();oneStepLayout.checkoutDesign=window.checkoutDesign;oneStepLayout.checkoutLayout=window.checkoutLayout;oneStepLayout.mainAdditionalClasses=this.additionalClasses;this.initCheckoutLayout();this.replaceEqualityComparer();statistic.initialize();},initObservable:function(){var addressComponentPromise;this._super().observe({isAmazonLoggedIn:null});quote.shippingAddress.subscribe(this.shippingAddressObserver.bind(this));paymentValidatorRegistry.registerValidator(shippingValidator);shippingRegistry.setInitialValues();addressComponentPromise=registry.promise('checkout.steps.shipping-step.shippingAddress');registry.get('checkout.steps.billing-step.payment',function(component){if(addressComponentPromise.state()!=='pending'){this.initializePaymentStep(component);return;}\naddressComponentPromise.done(this.initializePaymentStep.bind(this,component));}.bind(this));return this;},initializePaymentStep:function(component){if(_.isNull(quote.guestEmail)&&!customer.isLoggedIn()){quote.guestEmail='';}\nquote.setTotals(window.checkoutConfig.quoteData.initPaymentMethods.totals);paymentService.setPaymentMethods(paymentMethodConverter(window.checkoutConfig.quoteData.initPaymentMethods.payment_methods));component.isVisible(true);},initCheckoutLayout:function(){oneStepLayout.selectedLayout=window.checkoutConfig.checkoutBlocksConfig;},getOneStepModel:function(){return oneStepLayout;},shippingAddressObserver:function(address){if(!address){return;}\nthis.isAccountLoggedInAmazon();this.setShippingToBilling(address);this.reloadFapiaoInformation();},reloadFapiaoInformation:function(){fapiaoInformation.refreshFapiaoItems();},setShippingToBilling:function(address){if(!address){return;}\nif(!address.canUseForBilling()){checkoutDataResolver.resolveBillingAddress();return;}\nif(_.isNull(address.street)||_.isUndefined(address.street)){address.street=[];}\nif(addressFormState.isBillingSameAsShipping()){selectBillingAddress(address);}},isAccountLoggedInAmazon:function(){if(require.defined('Amazon_Payment/js/model/storage')){if(this.isAmazonLoggedIn()){$('.checkout-billing-address').hide();}else{require(['Amazon_Payment/js/model/storage'],function(amazonStorage){amazonStorage.isAmazonAccountLoggedIn.subscribe(function(isLoggedIn){this.isAmazonLoggedIn(isLoggedIn);},this);this.isAmazonLoggedIn(amazonStorage.isAmazonAccountLoggedIn());}.bind(this));}}},replaceEqualityComparer:function(){quote.shippingAddress.equalityComparer=isEqualIgnoreFunctions;quote.billingAddress.equalityComparer=isEqualIgnoreFunctions;quote.shippingMethod.equalityComparer=isEqualIgnoreFunctions;quote.paymentMethod.equalityComparer=isEqualIgnoreFunctions;}});});","Amasty_Checkout/js/view/delivery-date.min.js":"define(['jquery','underscore','uiComponent','Amasty_Checkout/js/view/utils','Amasty_Checkout/js/action/update-delivery','Amasty_Checkout/js/model/delivery','Magento_Checkout/js/model/payment/additional-validators','Amasty_Checkout/js/view/checkout/datepicker'],function($,_,Component,viewUtils,updateAction,deliveryService,paymentValidatorRegistry){'use strict';return Component.extend({defaults:{template:'Amasty_Checkout/checkout/delivery_date',listens:{'update':'update'}},isLoading:deliveryService.isLoading,_requiredFieldSelector:'.amcheckout-delivery-date .field._required :input:not(:button)',initialize:function(){this._super();var self=this,validator={validate:self.validate.bind(self)};paymentValidatorRegistry.registerValidator(validator);},update:function(){if(this.validate()){var data=this.source.get('amcheckoutDelivery');updateAction(data);}},validate:function(){this.source.set('params.invalid',false);this.source.trigger('amcheckoutDelivery.data.validate');if(this.source.get('params.invalid')){return false;}\nvar validationResult=true;this.elems().forEach(function(item){if(item.validate().valid==false){validationResult=false;return false;}});return validationResult;},getDeliveryDateName:function(){return viewUtils.getBlockTitle('delivery');}});});","Amasty_Checkout/js/view/billing-address-mixin.min.js":"define(['Magento_Checkout/js/model/quote','Amasty_Checkout/js/model/address-form-state'],function(quote,formService){'use strict';return function(billingAddress){return billingAddress.extend({initObservable:function(){this._super();this.isAddressSameAsShipping.subscribe(formService.updateBillingFormStates,formService);this.isAddressDetailsVisible.subscribe(formService.updateBillingFormStates,formService);if(window.checkoutConfig.displayBillingOnPaymentMethod){quote.paymentMethod.subscribe(formService.updateBillingFormStates,formService);}\nformService.updateBillingFormStates();return this;}});};});","Amasty_Checkout/js/view/place-button.min.js":"define(['ko','jquery','uiElement','uiRegistry','Magento_Checkout/js/model/quote','Magento_CheckoutAgreements/js/model/agreement-validator','Amasty_Checkout/js/model/payment/payment-loading','Amasty_Checkout/js/action/start-place-order','Amasty_Checkout/js/model/amalert','Amasty_Checkout/js/action/focus-first-error','Amasty_Checkout/js/model/payment-validators/login-form-validator','Amasty_Checkout/js/model/address-form-state','Magento_Ui/js/lib/knockout/extender/bound-nodes','Magento_Ui/js/lib/view/utils/dom-observer','Magento_Checkout/js/checkout-data','Magento_Ui/js/lib/view/utils/async','mage/translate'],function(ko,$,Component,registry,quote,agreementValidator,paymentLoader,startPlaceOrderAction,alert,focusFirstError,loginFormValidator,addressFormState,boundNodes,domObserver,checkoutData){'use strict';return Component.extend({defaults:{template:'Amasty_Checkout/onepage/place-order',defaultLabel:$.mage.__('Place Order'),onBillingVisibleText:$.mage.__('Please update or cancel Billing Address Form.'),onShippingVisibleText:$.mage.__('Please update or cancel Shipping Address Form.'),visible:true,warn:'',paymentsNamePrefix:'checkout.steps.billing-step.payment.payments-list.',toolbarSelector:'.actions-toolbar',placeButtonSelector:'.action.primary',originalToolbarPayments:['braintree_paypal'],listens:{'visible':'onVisibilityChange'}},checkoutRootNode:null,previousPaymentMethod:null,visibleIsSaa:ko.observable(quote.isSaa()),visibleHotline:ko.observable(quote.hotline()),visibleHololens:ko.observable(quote.hololens()),_asyncCallbackFunction:function(){},_activePaymentDomObserver:null,isPlaceOrderActionAllowed:ko.pureComputed(function(){return!paymentLoader()&&!addressFormState.isBillingFormVisible()&&!addressFormState.isShippingFormVisible();}),initObservable:function(){this._super().observe({label:this.defaultLabel}).observe('visible warn');if(typeof MutationObserver!=='undefined'){this._activePaymentDomObserver=new MutationObserver(this.mutationCallback.bind(this));}\nif(quote.paymentMethod()){this.paymentMethodSubscriber(quote.paymentMethod());}\nquote.paymentMethod.subscribe(this.paymentMethodSubscriber,this);addressFormState.isBillingFormVisible.subscribe(this.updateWarning,this);if(quote.isVirtual()){quote.paymentMethod.subscribe(this.updateWarning,this);}else{addressFormState.isShippingFormVisible.subscribe(this.updateWarning,this);}\nreturn this;},mutationCallback:function(){this.updatePlaceOrderButton(quote.paymentMethod());},onVisibilityChange:function(isVisible){this.toggleOriginalToolbar(isVisible);},toggleOriginalToolbar:function(state){this.getCheckoutRootNode().toggleClass('am-submit-summary',state);},getCheckoutRootNode:function(){var component,componentNodes;if(this.checkoutRootNode===null){component=registry.get('checkout');componentNodes=boundNodes.get(component);this.checkoutRootNode=$(componentNodes).filter('div');}\nreturn this.checkoutRootNode;},paymentMethodSubscriber:function(paymentMethod){var paymentToolbar,paymentComponentName;if(paymentMethod){if(this.previousPaymentMethod===paymentMethod.method){return;}\nthis.previousPaymentMethod=paymentMethod.method;}\nthis.updatePlaceOrderButton(paymentMethod);if(!this._activePaymentDomObserver){return;}\nthis._activePaymentDomObserver.disconnect();if(!paymentMethod||this.originalToolbarPayments.indexOf(paymentMethod.method)!==-1){return;}\npaymentToolbar=this.getPaymentToolbar(paymentMethod);if(paymentToolbar.length){paymentToolbar.each(function(index,element){this.registerPaymentObserver(element);}.bind(this));}else{paymentComponentName=this.paymentsNamePrefix+paymentMethod.method;domObserver.off(this.toolbarSelector,this._asyncCallbackFunction);this._asyncCallbackFunction=function(element){var component=registry.get(paymentComponentName);this._activePaymentDomObserver.disconnect();this.updatePlaceOrderButton(paymentMethod);this.registerPaymentObserver(element);domObserver.off(this.toolbarSelector,this._asyncCallbackFunction);boundNodes.off(component);}.bind(this);$.async({component:paymentComponentName,selector:this.toolbarSelector},this._asyncCallbackFunction);}},registerPaymentObserver:function(element){var button=$(element).find(this.placeButtonSelector).get(0);this._activePaymentDomObserver.observe(element,{attributes:true,attributeFilter:['style','class'],characterData:true});if(button){this._activePaymentDomObserver.observe(button,{subtree:true,characterData:true});}},updatePlaceOrderButton:function(paymentMethod){var paymentToolbar,button;if(!paymentMethod){this.visible(true);return;}\npaymentToolbar=this.getPaymentToolbar(paymentMethod);if(paymentToolbar.length>1){paymentToolbar=paymentToolbar.filter(':not([style*=\"display: none\"])');}\nbutton=paymentToolbar.find(this.placeButtonSelector);},getPaymentToolbar:function(paymentMethod){return $('#'+paymentMethod.method).parents('.payment-method').find(this.toolbarSelector);},updateLabel:function(button){var buttonText=button.text();if(buttonText&&buttonText.trim()!==''){this.label(buttonText);return;}\nif(button.attr('title')){this.label(button.attr('title'));return;}\nthis.label(this.defaultLabel);},updateWarning:function(){var warningMessage='';if(quote.paymentMethod()&&addressFormState.isBillingFormVisible()){warningMessage+=this.onBillingVisibleText+' ';}\nif(addressFormState.isShippingFormVisible()){warningMessage+=this.onShippingVisibleText+' ';}\nthis.warn(warningMessage);},placeOrder:function(){var errorMessage='';var rule_special_character=/[`~\uff5e!@#$%^&*()+=|\uff5c{}':;',\\[\\].<>/?~\uff01@#\uffe5\u00a5%\u2026\u2026&*\uff08\uff09\u2014\u2014+|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c\u2019\u3002\uff0c\u3001\uff1f]|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F]|[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF]|[0-9|*|#]\\uFE0F\\u20E3|[0-9|#]\\u20E3|[\\u203C-\\u3299]\\uFE0F\\u200D|[\\u203C-\\u3299]\\uFE0F|[\\u2122-\\u2B55]|\\u303D|[\\A9|\\AE]\\u3030|\\uA9|\\uAE|\\u3030)/;var rule_special_character_name=/[`~\uff5e!@#$%^&*+=|\uff5c{}':;',\\[\\].<>/?~\uff01@#\uffe5\u00a5%\u2026\u2026&*\u2014\u2014+|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c\u2019\u3002\uff0c\u3001\uff1f]|([\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F]|[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF]|[0-9|*|#]\\uFE0F\\u20E3|[0-9|#]\\u20E3|[\\u203C-\\u3299]\\uFE0F\\u200D|[\\u203C-\\u3299]\\uFE0F|[\\u2122-\\u2B55]|\\u303D|[\\A9|\\AE]\\u3030|\\uA9|\\uAE|\\u3030)/;if(!quote.shippingAddress()||!quote.shippingAddress().telephone){errorMessage=$.mage.__('Please add shipping address');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nvar shippingAddress_name=$(\".shipping-address-items .shipping-address-item.selected-item .adress_name\").text();var shippingAddress_info=$(\".shipping-address-items .shipping-address-item.selected-item .adress_street span\").text();var shippingAddress_name_value=shippingAddress_name.replace(/\\s*/g,\"\");var shippingAddress_info_value=shippingAddress_info.replace(/\\s*/g,\"\");if(rule_special_character.test(shippingAddress_name_value)){errorMessage=$.mage.__('Special characters are not allowed in the name of the consignee');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(rule_special_character.test(shippingAddress_info_value)){errorMessage=$.mage.__('Special characters are not allowed in the address of the consignee');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nvar paymentMethod=quote.paymentMethod();var onlineMethods=window.checkoutConfig.payment;var offlineMethods=window.checkoutConfig.payment.offlineMethods;if(!paymentMethod||($.inArray(paymentMethod.method,offlineMethods)==-1&&!onlineMethods[paymentMethod.method])){errorMessage=$.mage.__('No payment method selected');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(!quote.shippingMethod()&&!quote.isVirtual()){errorMessage=$.mage.__('No shipping method selected');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(!quote.fapiao()){if(window.checkoutConfig.quoteData['col_fapiao_type']){errorMessage=$.mage.__('Please config the fapiao information');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}else{errorMessage=$.mage.__('Please add fapiao');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}}\nvar fapiaoTitleVal=$(\".fapiaolist .fapiao-item.selected-item .fapiao-title\").text();var fapiaoValidateValue=fapiaoTitleVal.replace(/\\s*/g,\"\");if(/\\u5fae\\u8f6f+/.test(fapiaoValidateValue)){errorMessage=$.mage.__('According to the compliance requirements of the company, the invoices of Microsoft enterprises in China cannot be issued');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(rule_special_character_name.test(fapiaoValidateValue)){errorMessage=$.mage.__('Special characters are not allowed in invoice header');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(rule_special_character.test(quote.fapiao().bankName)){errorMessage=$.mage.__('Special characters are not allowed in the name of account opening bank in invoice information');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(rule_special_character.test(quote.fapiao().bankNo)){errorMessage=$.mage.__('Special characters are not allowed in the bank account number of invoice information');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(rule_special_character.test(quote.fapiao().telephone)){errorMessage=$.mage.__('Special characters are not allowed in fixed line telephone in invoice information');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(rule_special_character.test(quote.fapiao().postCode)){errorMessage=$.mage.__('Special characters are not allowed in invoice information');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(rule_special_character.test(quote.fapiao().street)){errorMessage=$.mage.__('Special characters are not allowed in the registered address of the company in the invoice information');alert({title:'',content:errorMessage,modalClass:'no-confirm'});return;}\nif(window.checkoutConfig.quoteData['isCommercialProduct']==true){if(agreementValidator.validate()){startPlaceOrderAction();}else{$('.checkout-agreement .action-show').click();}}else{var aggrementInput=$('.payment-method._active div[data-role=checkout-agreements] input');if(aggrementInput.length&&!aggrementInput.serializeArray().length){aggrementInput.click();}\nstartPlaceOrderAction();}}});});","Amasty_Checkout/js/view/shipping-mixin.min.js":"define(['underscore','ko','jquery','Magento_Ui/js/lib/view/utils/async','Magento_Customer/js/customer-data','Magento_Checkout/js/checkout-data','Magento_Checkout/js/model/shipping-service','Magento_Checkout/js/action/select-shipping-method','Magento_Checkout/js/action/set-shipping-information','Magento_Checkout/js/model/quote','Amasty_Checkout/js/view/utils','Amasty_Checkout/js/model/payment/payment-loading','Amasty_Checkout/js/model/cart/totals-processor/default','Amasty_Checkout/js/model/shipping-registry','Amasty_Checkout/js/model/address-form-state','Amasty_Checkout/js/model/events','uiRegistry','rjsResolver'],function(_,ko,$,async,storage,checkoutData,shippingService,selectShippingMethod,setShippingInformationAction,quote,viewUtils,paymentLoader,totalsProcessor,shippingRegistry,addressFormState,events,registry,onLoad){'use strict';var instance=null;function removeAmazonPayButton(){var amazonPaymentButton=$('#PayWithAmazon_amazon-pay-button img');if(amazonPaymentButton.length>1){amazonPaymentButton.not(':first').remove();}}\nreturn function(Shipping){return Shipping.extend({allowedDynamicalSave:false,allowedDynamicalValidation:true,isUpdateCancelledByBilling:false,isInitialDataSaved:false,previousShippingMethodData:{},initialize:function(){this._super();instance=this;onLoad(shippingRegistry.initObservers.bind(shippingRegistry,this.elems));onLoad(this.registerObserversAfterLoad.bind(this));if(!this.isFormInline){shippingRegistry.excludedCollectionNames.push('shipping-address-fieldset','additional-fieldsets');}\nregistry.get('checkout.steps.shipping-step.shippingAddress.before-form.amazon-widget-address.before-widget-address.amazon-checkout-revert',function(component){component.isAmazonAccountLoggedIn.subscribe(this.amazonLoginStatusObserver);}.bind(this));registry.get('checkout.steps.billing-step.payment.payments-list.amazon_payment',function(component){if(component.isAmazonAccountLoggedIn()){$('button.action-show-popup').hide();}});registry.get('checkout.steps.shipping-step.shippingAddress.customer-email.amazon-button-region.amazon-button',function(component){async.async({selector:'#PayWithAmazon_amazon-pay-button img'},function(){removeAmazonPayButton();});component.isAmazonAccountLoggedIn.subscribe(function(loggedIn){if(!loggedIn){removeAmazonPayButton();}});});quote.shippingAddress.subscribe(function(){this.validateAndSaveIfChanged();},this);quote.billingAddress.subscribe(function(){if(this.isUpdateCancelledByBilling){this.validateAndSaveIfChanged();}},this);},initObservable:function(){this._super();quote.shippingMethod.subscribe(this.shippingMethodObserver.bind(this));if(quote.shippingMethod.getVersion()>1){this.shippingMethodObserver(quote.shippingMethod());}\nthis.allowedDynamicalSave=true;events.onBeforeShippingSave(shippingRegistry.register.bind(shippingRegistry));events.onBeforeShippingSave(paymentLoader.bind(null,true));events.onAfterShippingSave(paymentLoader.bind(null,false));return this;},registerObserversAfterLoad:function(){this.isInitialDataSaved=true;shippingRegistry.isAddressChanged.subscribe(this.additionalFieldsObserver.bind(this));shippingService.isLoading.subscribe(function(isLoading){if(!isLoading){this.validateAndSaveIfChanged();}},this);},saveInitialData:function(){if(!this.isInitialDataSaved){onLoad(function(){if(this.silentValidation()){this.validateAndSaveIfChanged();}}.bind(this));this.isInitialDataSaved=true;}},silentValidation:function(){var invalidElement,result=!_.isEmpty(quote.shippingMethod())&&!_.isEmpty(quote.shippingAddress());if(result&&this.isFormInline){invalidElement=_.find(shippingRegistry.addressComponents,function(module){return ko.isObservable(module.required)&&ko.isObservable(module.value)&&ko.isObservable(module.visible)&&ko.isObservable(module.disabled)&&module.required.peek()&&module.visible.peek()&&!module.disabled.peek()&&_.isEmpty(module.value.peek());});result=_.isUndefined(invalidElement);}\nreturn result;},setShippingInformation:function(){var result;this.allowedDynamicalSave=false;result=this._super();this.allowedDynamicalSave=true;return result;},selectShippingMethod:function(method){window.loaderIsNotAllowed=true;this._super(method);instance.validateAndSaveIfChanged();delete window.loaderIsNotAllowed;return true;},validateShippingInformation:function(){var result;this.allowedDynamicalValidation=false;result=this._super();this.allowedDynamicalValidation=true;return result;},shippingMethodObserver:function(method){this.saveInitialData();if(method&&shippingRegistry.isEstimationHaveError()){totalsProcessor(quote.shippingAddress());}},amazonLoginStatusObserver:function(loggedIn){if(!loggedIn){registry.get('checkout.steps.shipping-step.shippingAddress',function(component){if(component.isSelected()){component.selectShippingMethod(quote.shippingMethod());}});}},additionalFieldsObserver:function(isChanged){var versionBeforeChange;if(!isChanged||shippingRegistry.isEstimationHaveError()){paymentLoader(false);return;}\nif(this.isFormInline){versionBeforeChange=shippingService.isLoading.getVersion();if((this.validateShippingInformation()||!this.source.get('params.invalid'))&&shippingService.isLoading.hasChanged(versionBeforeChange)){return;}}\nthis.validateAndSaveIfChanged();},validateAndSaveIfChanged:function(){var isShippingValid;if(!this.allowedDynamicalSave||this.isBillingAddressFormVisible()||!shippingRegistry.isHaveUnsavedShipping()){paymentLoader(false);return;}\nisShippingValid=!this.allowedDynamicalValidation;if(this.allowedDynamicalValidation){this.allowedDynamicalSave=false;isShippingValid=this.validateShippingInformation();this.allowedDynamicalSave=true;}\nif(isShippingValid||(this.isFormInline&&!this.source.get('params.invalid'))){window.loaderIsNotAllowed=true;setShippingInformationAction();delete window.loaderIsNotAllowed;}else{paymentLoader(false);}},getNameShippingAddress:function(){return viewUtils.getBlockTitle('shipping_address');},getNameShippingMethod:function(){return viewUtils.getBlockTitle('shipping_method');},isPostNlEnable:function(){return window.checkoutConfig.quoteData.posnt_nl_enable;},triggerShippingDataValidateEvent:function(){this.source.trigger('shippingAddress.data.validate');if(this.source.get('shippingAddress.custom_attributes')){this.source.trigger('shippingAddress.custom_attributes.data.validate');}},validatePlaceOrder:function(){var loginFormSelector='form[data-role=email-with-possible-login]',emailValidationResult=this.isCustomerLoggedIn();if(!emailValidationResult){$(loginFormSelector).validation();emailValidationResult=Boolean($(loginFormSelector+' input[name=username]').valid());}\nif(!emailValidationResult){$(loginFormSelector+' input[name=username]').focus();return false;}\nif(this.isFormInline){this.source.set('params.invalid',false);this.triggerShippingDataValidateEvent();if(this.source.get('params.invalid')){return false;}}\nreturn true;},isModernDesign:function(){return window.checkoutDesign==='modern';},getMethodTooltipText:function(method){var comment='';if(this.isModernDesign()&&method.error_message){comment=method.error_message;}\nif(!comment){comment=this.getCommentShippingMethod(method);}\nreturn comment;},getCommentShippingMethod:function(method){if(!method){return'';}\nif(method.comment&&typeof method.comment==='string'){return method.comment;}\nif(method.extension_attributes){if(method.extension_attributes.amstorepick_comment){return method.extension_attributes.amstorepick_comment;}\nif(method.extension_attributes.amstartes_comment){return method.extension_attributes.amstartes_comment;}}\nreturn'';},getAdditionalClassForIcons:function(method){if(this.isModernDesign()&&Object.prototype.hasOwnProperty.call(method,'error_message')&&method.error_message){return'-error';}\nreturn'';},isShippingMethodTooltip:function(method){return this.isModernDesign()&&this.getMethodTooltipText(method);},getColspanCarrier:function(method){if(this.isShippingMethodTooltip(method)){return 1;}\nreturn 2;},focusInvalid:function(){if(!window.silentShippingValidation){this._super();}\nreturn this;},isBillingAddressFormVisible:function(){this.isUpdateCancelledByBilling=!addressFormState.isBillingSameAsShipping()&&addressFormState.isBillingFormVisible();return this.isUpdateCancelledByBilling;},getPopUpOverride:function(){var self=this;return{openModal:function(){self.isFormPopUpVisible(true);},closeModal:function(){self.isFormPopUpVisible(false);}};}});};});","Amasty_Checkout/js/view/payment-mixin.min.js":"define([],function(){'use strict';return function(Component){return Component.extend({hasShippingMethod:function(){return true;}});};});","Amasty_Checkout/js/view/success-page.min.js":"define(['jquery','mage/url','jquery-ui-modules/widget'],function($,urlBuilder){'use strict';$.widget('success.page',{_create:function(){this._successJump();this._failureJump();},_successJump:function(){if($('body').hasClass('grouped-payment-success')){var successSeconds=5;var successTimer=setInterval(function(){successSeconds--;if(successSeconds==0){clearInterval(successTimer);location.href=$('.success-btn .return-order').attr('href');}},1000)}},_failureJump:function(){if($('body').hasClass('checkout-onepage-failure')){var failureSeconds=10;var failureTimer=setInterval(function(){failureSeconds--;if(failureSeconds==0){clearInterval(failureTimer);location.href=$('.failure-btn .return-btn').attr('href');}},1000)}}});return $.success.page;});","Amasty_Checkout/js/view/validators/agreement-validation.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/additional-validators','Amasty_Checkout/js/model/payment-validators/agreement-validator'],function(Component,additionalValidators,agreementValidator){'use strict';additionalValidators.registerValidator(agreementValidator);return Component.extend({});});","Amasty_Checkout/js/view/additional/comment.min.js":"define(['Magento_Ui/js/form/element/textarea'],function(Component){'use strict';return Component.extend({onUpdate:function(newValue){this._super();if(this.isDifferedFromDefault()){this.source.trigger('amcheckout.additional:save');}}});});","Amasty_Checkout/js/view/additional/register.min.js":"define(['jquery','Magento_Ui/js/form/element/single-checkbox'],function($,SingleCheckbox){'use strict';return SingleCheckbox.extend({defaults:{templates:{checkbox:'Amasty_Checkout/form/components/single/checkbox'},modules:{email:'checkout.steps.shipping-step.shippingAddress.customer-email'},listens:{'visible':'onVisibilityChange'},valueMap:{'true':true,'false':false}},initialize:function(){this._super();this.email(this.emailObserver.bind(this));},onUpdate:function(newValue){this._super();this.source.trigger('amcheckout.additional:save');},onVisibilityChange:function(visibility){if(!visibility){this.checked(false);this.checked.valueHasMutated();}else{this.checked(this.initialChecked);}},emailObserver:function(component){this.visible(!component.isPasswordVisible());component.isLoading.subscribe(function(isLoading){if(isLoading===true){$.when(component.isEmailCheckComplete).done(function(){this.visible(true);}.bind(this)).fail(function(){this.visible(false);}.bind(this));}}.bind(this));}});});","Amasty_Checkout/js/view/additional/date-of-birth.min.js":"define(['Magento_Ui/js/form/element/date','jquery','Magento_Checkout/js/model/payment/additional-validators','Amasty_Checkout/js/model/payment-validators/dob-validator','Amasty_Checkout/js/view/additional/register','Amasty_Checkout/js/view/checkout/datepicker'],function(Component,$,paymentValidatorRegistry,dobValidator){'use strict';return Component.extend({defaults:{template:'Amasty_Checkout/form/date',listens:{'${ $.parentName }.register:checked':'visible'},modules:{registerComponent:'${ $.parentName }.register'}},initialize:function(){this._super();paymentValidatorRegistry.registerValidator(dobValidator);this.options.maxDate='-1d';this.options.changeMonth=true;this.options.changeYear=true;this.options.yearRange=\"-120y:c+nn\";this.options.showButtonPanel=true;this.options.showOn='both';this.registerComponent(function(component){this.visible(component.checked()&&component.visible());}.bind(this))},onUpdate:function(newValue){this._super();if(this.hasChanged()){this.source.trigger('amcheckout.additional:save');}}});});","Amasty_Checkout/js/view/additional/subscribe.min.js":"define(['jquery','Magento_Ui/js/form/element/single-checkbox'],function($,SingleCheckbox){'use strict';return SingleCheckbox.extend({defaults:{valueMap:{'true':true,'false':false}},onUpdate:function(newValue){this._super();if(this.initialChecked!==newValue){this.source.trigger('amcheckout.additional:save');this.initialChecked=newValue;}}});});","Amasty_Checkout/js/view/additional/fieldset.min.js":"define(['uiComponent','Amasty_Checkout/js/action/save-additional-fields','Magento_Checkout/js/checkout-data'],function(Component,saveAction){'use strict';return Component.extend({saveAllowed:false,initialize:function(){this._super();this.source.on('amcheckout.additional:save',this.saveForm.bind(this));},saveForm:function(){saveAction();}});});","Amasty_Checkout/js/view/additional/gift-wrap.min.js":"define(['jquery','Magento_Ui/js/form/element/single-checkbox','Amasty_Checkout/js/action/check-gift-wrap'],function($,Component,checkAction){'use strict';return Component.extend({defaults:{listens:{'checked':'check'}},fee:0,check:function(checked){checkAction(checked);}});});","Amasty_Checkout/js/view/additional/gift-messages/message.min.js":"define(['uiElement','Magento_Ui/js/lib/view/utils/async','Magento_Ui/js/form/form'],function(uiElement,$,Component){'use strict';var provider=uiElement();return Component.extend({defaults:{template:'Amasty_Checkout/form/gift_messages/message'},observables:{},initialize:function(){this._super();this.getObservable('recipient')(this.recipient);this.getObservable('sender')(this.sender);this.getObservable('message')(this.message);},getObservable:function(key){this._initObservable(String(this.item_id),key);return provider[this.getUniqueKey(String(this.item_id),key)];},_initObservable:function(node,key){if(node&&!this.observables.hasOwnProperty(node)){this.observables[node]=[];}\nif(key&&this.observables[node].indexOf(key)==-1){this.observables[node].push(key);provider.observe(this.getUniqueKey(node,key));}},getUniqueKey:function(node,key){return node+'-'+key;},getElementId:function(area){var prefix;if(this.item_id){prefix='gift-message-item-'+String(this.item_id)}else{prefix='gift-message-whole'}\nreturn prefix+area;},collectData:function(){return{item_id:this.item_id,recipient:this.getObservable('recipient')(),sender:this.getObservable('sender')(),message:this.getObservable('message')()}}});});","Amasty_Checkout/js/view/additional/gift-messages/container.min.js":"define(['Magento_Ui/js/lib/view/utils/async','uiComponent','uiRegistry','Magento_Ui/js/modal/modal','mage/translate','ko','underscore','mage/storage','Amasty_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/error-processor','Magento_Checkout/js/model/full-screen-loader','Magento_Ui/js/model/messageList'],function($,Component,registry,modal,$t,ko,_,storage,resourceUrlManager,quote,errorProcessor,fullScreenLoader,messagesList){'use strict';var popUp=null;return Component.extend({defaults:{listens:{'isFormPopUpVisible':'popUpVisibleObserver'},template:'Amasty_Checkout/form/gift_messages/container'},checkbox:null,isFormPopUpVisible:ko.observable(false),savedData:null,initConfig:function(config){var self=this;this._super();registry.get(this.name+'.checkbox',function(checkbox){self.checkbox=checkbox;checkbox.checked.subscribe(self.toggleState.bind(self));checkbox.on('edit_link_click',self.showPopup.bind(self));});return this;},toggleState:function(checked){if(checked){this.showPopup();this.submit(true);}else{this.delete();}},popUpVisibleObserver:function(value){if(value){this.getPopUp().openModal();}},showPopup:function(){this.isFormPopUpVisible(true);},delete:function(){var self=this,data=[];['item_messages','quote_message'].forEach(function(containerName){var container=self.getChild(containerName);if(typeof(container)==='undefined')\nreturn;container.elems().forEach(function(messageComponent){data.push({item_id:messageComponent.item_id,recipient:\"\",sender:\"\",message:\"\"});})});this.saveGiftData(data);},submit:function(initial){var self=this,data=[];['item_messages','quote_message'].forEach(function(containerName){var container=self.getChild(containerName);if(typeof(container)==='undefined')\nreturn;container.elems().forEach(function(messageComponent){data.push(messageComponent.collectData());})});var request=this.saveGiftData(data);if(initial!==true){fullScreenLoader.startLoader();request.done(function(response){messagesList.addSuccessMessage({message:$t('Gift messages has been successfully updated')});}).always(function(response){self.getPopUp().closeModal();fullScreenLoader.stopLoader(false);});}},saveGiftData:function(data){var serviceUrl=resourceUrlManager.getUrlForGiftMessage(quote);var payload={gift_message:data};if(request){request.abort();}\nvar request=storage.post(serviceUrl,JSON.stringify(payload),false).fail(function(response){if(response.responseText){errorProcessor.process(response);}});return request;},getPopUp:function(){var self=this,buttons;if(popUp===null){buttons=this.popUpForm.options.buttons;this.popUpForm.options.buttons=[{class:buttons.save.class?buttons.save.class:'action primary action-save-address',text:buttons.save.text?buttons.save.text:$t('Update'),click:self.submit.bind(self)},{class:buttons.cancel.class?buttons.cancel.class:'action secondary action-hide-popup',text:buttons.cancel.text?buttons.cancel.text:$t('Close'),click:function(){this.closeModal();}}];this.popUpForm.options.closed=function(){self.isFormPopUpVisible(false);};popUp=modal(this.popUpForm.options,$(this.popUpForm.element));}\nreturn popUp;}});});","Amasty_Checkout/js/view/additional/gift-messages/checkbox.min.js":"define(['Magento_Ui/js/form/element/single-checkbox'],function(Component){'use strict';return Component.extend({defaults:{templates:{checkbox:'Amasty_Checkout/form/gift_messages/checkbox'}},showPopupHandler:function(component,event){event.stopPropagation();this.trigger('edit_link_click');}});});","Amasty_Checkout/js/view/checkout/datepicker.min.js":"define(['moment','ko','underscore','jquery','mage/translate','mage/calendar'],function(moment,ko,_,$,$t){'use strict';var defaults={dateFormat:'mm\\/dd\\/yyyy',showsTime:false,timeFormat:null,buttonImage:null,buttonImageOnly:null,buttonText:$t('Select Date')};ko.bindingHandlers.amastydatepicker={init:function(el,valueAccessor){var config=valueAccessor(),observable,options={};_.extend(options,defaults);if(typeof config==='object'){observable=config.storage;_.extend(options,config.options);}else{observable=config;}\nvar date=moment(observable(),config.elem.pickerDateTimeFormat);$(el).calendar(options);observable()&&$(el).datepicker('setDate',date.format('YYYY-MM-DD'));$(el).blur();ko.utils.registerEventHandler(el,'change',function(){observable(this.value);});}};});","Amasty_Checkout/js/view/checkout/design/collapsible-steps.min.js":"define(['jquery','mage/collapsible','Magento_Ui/js/modal/modal'],function($){'use strict';$.widget('amasty.checkoutCollapsibleSteps',{_create:function(){this.createCollapsible();},initCollapsible:function(){$(this.element).parent().collapsible({header:'[data-amcheckout-js=\"step-title\"]',content:'[data-amcheckout-js=\"step-content\"]',active:true,openedState:'-collapsible -opened',closedState:'-collapsible -closed',icons:{header:'amcheckout-icon -plus',activeHeader:'amcheckout-icon -minus'},animate:300});},createCollapsible:function(){var checkoutWindow=window;if(!$(this.element).parent().data('mageCollapsible')&&checkoutWindow.checkoutDesign=='modern'&&(checkoutWindow.checkoutLayout=='1column'||checkoutWindow.checkoutLayout=='2columns')){this.initCollapsible();}},destroyCollapsible:function(){var collapsibleElement=$(this.element).parent();if(collapsibleElement.data('mageCollapsible')){collapsibleElement.collapsible(\"forceActivate\").collapsible(\"destroy\");}}});return $.amasty.checkoutCollapsibleSteps;});","Amasty_Checkout/js/view/checkout/summary/cart-items.min.js":"define(['ko','Magento_Checkout/js/model/totals','Magento_Checkout/js/view/summary/cart-items'],function(ko,totals,Component){'use strict';return Component.extend({defaults:{template:'Amasty_Checkout/checkout/summary/cart-items'},itemsQty:ko.observable(),initialize:function(){this._super();this.itemsQty(this.getItemsQty());totals.totals.subscribe(function(){this.itemsQty(this.getItemsQty());},this);return this;},getItemsQty:function(){return parseFloat(totals.totals().items_qty);}});});","Amasty_Checkout/js/view/checkout/summary/gift-wrap.min.js":"define(['Magento_Checkout/js/view/summary/abstract-total','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/totals'],function(Component,quote,totals){\"use strict\";return Component.extend({defaults:{template:'Amasty_Checkout/checkout/summary/gift_wrap'},totals:quote.getTotals(),getValue:function(){var price=0;if(this.totals()){price=totals.getSegment('amasty_checkout').value;}\nreturn this.getFormattedPrice(price);},isDisplayed:function(){return!!(this.totals()&&totals.getSegment('amasty_checkout').value!==null);}});});","Amasty_Checkout/js/view/checkout/summary/item/details.min.js":"define(['jquery','Magento_Checkout/js/view/summary/item/details','Magento_Checkout/js/model/quote','Magento_Ui/js/modal/confirm','Amasty_Checkout/js/action/remove-item','Amasty_Checkout/js/action/update-item','mage/translate','ko','Amasty_Checkout/js/options/configurable','priceOptions','mage/validation'],function($,Component,quote,confirm,removeItemAction,updateItemAction,$t,ko,configurable,priceOptions){\"use strict\";return Component.extend({defaults:{template:'Amasty_Checkout/checkout/summary/item/details'},getItemConfig:function(item){return this.getPropertyDataFromItem(item,'amcheckout');},getPropertyDataFromItem:function(item,propertyName){var property,itemDetails;if(item.hasOwnProperty(propertyName)){property=item[propertyName];}\nvar quoteItem=this.getItemFromQuote(item);if(quoteItem.hasOwnProperty(propertyName)){property=quoteItem[propertyName];}\nif(property){this.storage().set('item_details'+item.item_id+propertyName,property);return property;}\nitemDetails=this.storage().get('item_details'+item.item_id+propertyName);return itemDetails?itemDetails:false;},getStockStatusHtml:function(item){return this.getPropertyDataFromItem(item,'amstockstatus');},getItemFromQuote:function(item){var items=quote.getItems();var quoteItems=items.filter(function(quoteItem){return quoteItem.item_id==item.item_id;});if(quoteItems.length==0){return false;}\nreturn quoteItems[0];},getConfigurableOptions:function(item){var itemConfig=this.getItemConfig(item);if(itemConfig.hasOwnProperty('configurableAttributes')){return itemConfig.configurableAttributes.template;}\nreturn'';},getCustomOptions:function(item){var itemConfig=this.getItemConfig(item);if(itemConfig.hasOwnProperty('customOptions')){return itemConfig.customOptions.template;}\nreturn'';},isEditable:function(item){var itemConfig=this.getItemConfig(item);return itemConfig.isEditable;},initOptions:function(item){var itemConfig=this.getItemConfig(item);var containerSelector='[data-role=\"product-attributes\"][data-item-id='+item.item_id+']';var container=$(containerSelector);if(itemConfig.hasOwnProperty('configurableAttributes')){container.amcheckoutConfigurable({spConfig:JSON.parse(itemConfig.configurableAttributes.spConfig),superSelector:containerSelector+' .super-attribute-select'});}\nif(itemConfig.hasOwnProperty('customOptions')){container.priceOptions({optionConfig:JSON.parse(itemConfig.customOptions.optionConfig)});}\nitem.form=container;item.isUpdated=ko.observable(false);item.validation=container.validation();container.find('input, select, textarea').change(function(){item.isUpdated(true);});},updateItem:function(item){if(item.validation.valid()){updateItemAction(item.item_id,item.form.serialize());}},deleteItem:function(item){confirm({content:$t(\"Are you sure you would like to remove this item from the shopping cart?\"),actions:{confirm:function(){removeItemAction(item.item_id);},always:function(event){event.stopImmediatePropagation();}}});},canShowDeleteButton:function(){return quote.getItems().length>=1;}});});","Amasty_Checkout/js/view/shipping-address/list-mixin.min.js":"define(['ko','underscore','Amasty_Checkout/js/model/address-form-state','Amasty_Checkout/js/model/shipping-registry','Magento_Customer/js/model/address-list','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/shipping-address/form-popup-state','Magento_Checkout/js/action/select-shipping-address','Magento_Checkout/js/checkout-data','mage/translate','jquery'],function(ko,_,addressFormState,shippingRegistry,addressList,quote,formPopUpState,selectShippingAddress,checkoutData,$t){'use strict';var newAddressOption={getAddressInline:function(){return $t('New Address');},customerAddressId:null};function isAddressNew(address){return address&&(address===newAddressOption||address.getType()==='new-customer-address');}\nreturn function(Component){return Component.extend({defaults:{template:'Amasty_Checkout/shipping-address/shipping-address',modules:{shippingInformationComponent:'checkout.sidebar.shipping-information.ship-to',shippingAddressComponent:'${ $.parentName }'}},initialize:function(){_.bindAll(this,'addressOptionsText','changeAddress','onAddressChange','updateAddress','cancelAddressEdit');this._super();if(this.getVisible()){window.isShippingAddressFormOverridden(true);this.shippingAddressComponent(this.overrideNewShippingAddress);shippingRegistry.excludedCollectionNames.push('shipping-address-fieldset');}\nreturn this;},initObservable:function(){this._super().observe({selectedAddress:quote.shippingAddress(),isAddressDetailsVisible:quote.shippingAddress()!=null,isAddressFormVisible:false,isAddressListVisible:!quote.shippingAddress(),});this.initSubscribers();return this;},initSubscribers:function(){if(this.getVisible()){quote.shippingAddress.subscribe(this.onShippingAddressUpdate,this);this.selectedAddress.subscribe(this.onAddressChange,this);this.isAddressFormVisible.subscribe(this.updatePopupState,this);this.isAddressListVisible.subscribe(this.isShippingFormVisibleUpdate,this);}},overrideNewShippingAddress:function(shippingComponent){shippingComponent.getPopUp=shippingComponent.getPopUpOverride;},initChildren:function(){return this;},createRendererComponent:function(){},getVisible:function(){return ko.utils.unwrapObservable(this.visible);},updatePopupState:function(){if(this.getVisible()){formPopUpState.isVisible(this.isAddressListVisible()&&this.isAddressFormVisible());}},onShippingAddressUpdate:function(newAddress){if(newAddress!=null){this.isAddressDetailsVisible(true);this.isAddressListVisible(false);}},isShippingFormVisibleUpdate:function(){this.updatePopupState();if(this.getVisible()){addressFormState.isShippingFormVisible(this.isAddressListVisible());}},addressOptions:ko.pureComputed(function(){var addressOptions=_.clone(addressList()),newAddressAdded;_.find(addressOptions,function(address){if(isAddressNew(address)){newAddressAdded=true;return true;}});if(!newAddressAdded){addressOptions.push(newAddressOption);}\nreturn addressOptions;}),addressOptionsText:function(address){if(address.getAddressInline){return address.getAddressInline();}\nif(isAddressNew(address)){return $t('New Address');}\nreturn this.getCaptionByAddressType(address);},getCaptionByAddressType:function(address){switch(address.getType()){case'gift-registry':return $t('Recipient Address');default:return address.getKey();}},updateAddress:function(){if(this.selectedAddress()==null||this.selectedAddress()===quote.shippingAddress()){this.cancelAddressEdit();return;}\nif(this.isAddressFormVisible()){this.shippingAddressComponent().saveNewAddress();}else{selectShippingAddress(this.selectedAddress());checkoutData.setSelectedShippingAddress(this.selectedAddress().getKey());}},changeAddress:function(){this.selectedAddress(quote.shippingAddress());this.isAddressListVisible(true);this.isAddressDetailsVisible(false);},cancelAddressEdit:function(){this.selectedAddress(quote.shippingAddress());this.isAddressDetailsVisible(true);this.isAddressListVisible(false);},onAddressChange:function(address){this.isAddressFormVisible(isAddressNew(address));}});};});","Amasty_Checkout/js/view/form/element/email.min.js":"define(['jquery','uiRegistry','ko','Magento_Checkout/js/view/form/element/email','Magento_Customer/js/customer-data','Magento_Checkout/js/checkout-data','Amasty_Checkout/js/model/payment-validators/login-form-validator','Amasty_Checkout/js/action/save-password','Magento_Ui/js/lib/view/utils/async'],function($,registry,ko,Component,customerData,checkoutData,loginFormValidator,saveAction){'use strict';var getData=function(){return customerData.get('checkout-data')();};return Component.extend({defaults:{isCreateAccountAction:ko.observable(false),isPassword:ko.observable(false),createAcc:window.checkoutConfig.quoteData.additional_options.create_account,passwordConfirmation:'',passValidationDelay:500,loginFormSelector:'form[data-role=\"email-with-possible-login\"]',modules:{dateOfBirth:'checkout.sidebar.additional.date_of_birth',loginCaptcha:'${ $.name }.additional-login-form-fields.captcha',mspRecaptcha:'${ $.name }.msp_recaptcha',},listens:{passwordConfirmation:'validateAndSaveRegistration'}},passValidationTimeout:0,initialize:function(){this._super();if(this.createAcc==='2'){this.template='Amasty_Checkout/form/element/email';this._renderLoginForm(this._resolveInitialPasswordVisibility());this.isLoading.subscribe(function(isLoading){if(isLoading===false){$.when(this.isEmailCheckComplete).done(function(){this._isNeededCreateAccountFunc(true);}.bind(this)).fail(function(){this._isNeededCreateAccountFunc(false);}.bind(this));}}.bind(this));}},initObservable:function(){this._super().observe('passwordConfirmation');if(this.createAcc==='2'){this.validate=ko.computed(function(){$.async('#customer-password',function(elem){if(this.isPasswordVisible()&&this.isCreateAccountAction()===false){$(elem).rules('add','validate-customer-password');}else if($.data(elem.form,'validator')&&$(elem).rules().hasOwnProperty('validate-customer-password')){$(elem).rules('remove','validate-customer-password');}}.bind(this));loginFormValidator.validate();return this.isPasswordVisible()&&this.isCreateAccountAction()===false;}.bind(this));}\nreturn this;},isPasswordSet:function(element){this.isPassword(!!element.value);this._visibleDateOfBirth();this._visibleLoginCaptcha();this._visibleReCaptcha();},emailHasChanged:function(){this._super();if(this.createAcc==='2'){setTimeout(function(){this._visibleLoginCaptcha();this._visibleReCaptcha();}.bind(this),this.checkDelay);}},getRequiredCharacterClassesNumber:function(){return parseInt(registry.get('checkoutProvider').requiredCharacterClassesNumber,10);},getMinimumPasswordLength:function(){return parseInt(registry.get('checkoutProvider').minimumPasswordLength,10);},validateAndSaveRegistration:function(){if(loginFormValidator.validate()){saveAction();}},login:function(){if(this.createAcc==='2'&&this.isPasswordVisible()&&this.isCreateAccountAction()===false){this.validateAndSaveRegistration();}else{return this._super();}},_isNeededCreateAccountFunc:function(state){if(state===false){this.isCreateAccountAction(true);}else{this.isCreateAccountAction(false);}\nthis.isPasswordVisible(true);this._visibleLoginCaptcha();this._visibleReCaptcha();},_renderLoginForm:function(state){if(state){this.isPasswordVisible(true);this.isCreateAccountAction(true);}else{$.async(this.loginFormSelector,function(){if(this.validateEmail()){this.isPasswordVisible(true);this.isCreateAccountAction(false);}else{this.isPasswordVisible(false);this.isCreateAccountAction(false);}}.bind(this));}},_resolveInitialPasswordVisibility:function(){if(checkoutData.getInputFieldEmailValue()!==''){return checkoutData.getInputFieldEmailValue()===this._getCheckedEmailValue();}\nreturn false;},_getCheckedEmailValue:function(){return getData().checkedEmailValue||'';},_visibleLoginCaptcha:function(){if(this.loginCaptcha()){this.loginCaptcha().currentCaptcha.setIsVisible(this.isPasswordVisible()&&this.isCreateAccountAction());}},_visibleReCaptcha:function(){if(this.mspRecaptcha()){$.async({selector:'#msp-recaptcha-checkout-inline-login-wrapper'},function(loginWrapper){if(this.isPasswordVisible()&&this.isCreateAccountAction()){$(loginWrapper).show();}else{$(loginWrapper).hide();}}.bind(this));}},_visibleDateOfBirth:function(){if(this.dateOfBirth()){this.dateOfBirth().visible(this.isPassword()&&!this.isCreateAccountAction());}},});});","Amasty_Checkout/js/view/summary/sticky-widget.min.js":"define(['jquery'],function($){'use strict';$.widget('amasty.stickyWidget',{options:{parentContainer:'[data-amsticky-js=\"main-container\"]',element:'[data-amsticky-js=\"sticky-element\"]',scrollContentContainer:'[data-amsticky-js=\"scroll-element\"]',stopper:'[data-amsticky-js=\"stopper\"]',stickyOffset:{top:0,left:0},stickyPosition:'right',stickyClass:'-sticky',disableBreakpoint:1024},_create:function(){var toggleSticky=this.stickyToggle.bind(this),windowGlobal=window;if($(windowGlobal).width()>=this.options.disableBreakpoint){if($(this.options.scrollContentContainer).length){this.stickyPosition(this.options.stickyPosition);};$(windowGlobal).off('scroll',toggleSticky).on('scroll',toggleSticky);}\n$(windowGlobal).on('resize',function(){this.stickyToggle();if($(windowGlobal).width()>=this.options.disableBreakpoint){this.stickyPosition(this.options.stickyPosition);$(windowGlobal).off('scroll',toggleSticky).on('scroll',toggleSticky);}else{$(windowGlobal).off('scroll',toggleSticky);}}.bind(this));},stickyToggle:function(){var stickyOptions=this.options,parentIsSet=$(stickyOptions.parentContainer).length,parentContainer=(parentIsSet)?$(stickyOptions.parentContainer):$('body'),parentContainerOffset=parentContainer.offset(),scrollContentIsSet=$(stickyOptions.scrollContentContainer).length,scrollContent=(scrollContentIsSet)?$(stickyOptions.scrollContentContainer):$('body'),stickyElement=$(stickyOptions.element),stickyIsRight=stickyOptions.stickyPosition=='right',stickyOffset=stickyOptions.stickyOffset,stickyOffsetLeft=(scrollContentIsSet)?scrollContent.offset().left+scrollContent.outerWidth()+stickyOffset.left:stickyOffset.left,stopperOffset=($(stickyOptions.stopper).length)?$(stickyOptions.stopper).offset():{top:parentContainerOffset.top+parentContainer.height(),left:parentContainerOffset.left},windowScrollTop=$(window).scrollTop();if($(window).width()<stickyOptions.disableBreakpoint){this.enableMobileLayout();return;}\nif(parentContainer.height()<=stickyElement.height()){this.stickyDisable(stickyElement);return;}\nif(stopperOffset.top-stickyElement[0].scrollHeight<windowScrollTop){if(stickyElement.css('position')!='absolute'){stickyElement.css({position:'absolute',top:'initial',right:stickyIsRight?0:'initial',bottom:parentContainer.height()-(stopperOffset.top-parentContainerOffset.top),left:stickyIsRight?'initial':0});stickyElement.removeClass(stickyOptions.stickyClass);}}else if(parentContainerOffset.top<windowScrollTop+stickyOffset.top){if(stickyElement.css('position')!='fixed'){stickyElement.css({position:'fixed',top:stickyOffset.top,right:'initial',bottom:'initial',left:stickyIsRight?stickyOffsetLeft:(parentContainerOffset.left+stickyOffset.left)});stickyElement.addClass(this.options.stickyClass);}}else{this.stickyDisable(stickyElement);}},stickyPosition:function(position){var stickyElement=$(this.options.element),stickyFloat=(position=='right')?'right':'left',scrollContent=$(this.options.scrollContentContainer),scrollContentFloat=(stickyFloat=='right')?'left':'right';stickyElement.css('float',stickyFloat);scrollContent.css('float',scrollContentFloat);},stickyDisable:function(stickyElement){if(stickyElement.css('position')!='static'){stickyElement.css({position:'static',top:'initial',right:'initial',bottom:'initial',left:'initial'});stickyElement.removeClass(this.options.stickyClass);}},enableMobileLayout:function(){var stickyElement=$(this.options.element),scrollContent=$(this.options.scrollContentContainer);this.stickyDisable(stickyElement);stickyElement.css('float','none');if(scrollContent.length)scrollContent.css('float','none');}});return $.amasty.stickyWidget;});","Amasty_Checkout/js/view/summary/cart-items-mixin.min.js":"define([],function(){'use strict';return function(Component){return Component.extend({isItemsBlockExpanded:function(){return true;}});}});","Amasty_Checkout/js/view/summary/summary-widget.min.js":"define(['jquery','stickyWidget','checkoutCollapsibleSteps'],function($){'use strict';$.widget('amasty.summaryWidget',{options:{desktopBreakpoint:1024,},_create:function(){if($(this.element).parents('[data-amcheckout-js=\"main-container\"]').length){this.summaryByLayout();}},summaryByLayout:function(){switch(window.checkoutLayout){case'1column':$(this.element).checkoutCollapsibleSteps();break;default:break;}},manageCollapsible:function(){if($(window).width()<this.options.desktopBreakpoint){$(this.element).checkoutCollapsibleSteps();}else{$('[data-amcheckout-js=\"step-container\"]').on(\"dimensionsChanged\",function(){$(window).trigger('scroll');});}\n$(window).on('resize',function(){if($(window).width()<this.options.desktopBreakpoint){$(this.element).checkoutCollapsibleSteps().checkoutCollapsibleSteps('createCollapsible');}else{if($(this.element).data('amastyCheckoutCollapsibleSteps')){$(this.element).checkoutCollapsibleSteps('destroyCollapsible');}}}.bind(this));}});return $.amasty.summaryWidget;});","Amasty_Checkout/js/view/summary/abstract-total.min.js":"define([],function(){'use strict';return function(Component){return Component.extend({isFullMode:function(){return this.getTotals();}});}});","Amasty_Checkout/js/view/payment/list.min.js":"define(['Magento_Checkout/js/model/payment-service','Amasty_Checkout/js/view/utils'],function(paymentService,viewUtils){'use strict';return function(Component){return Component.extend({isLoading:paymentService.isLoading,getGroupTitle:function(newValue){var paymentMethodLayoutConfig=viewUtils.getBlockLayoutConfig('payment_method');if(newValue().index==='methodGroup'&&paymentMethodLayoutConfig!==null){return paymentMethodLayoutConfig.title;}\nreturn this._super(newValue);}});};});","Amasty_Checkout/js/view/payment/method-renderer/default-mixin.min.js":"define(['underscore','Magento_Checkout/js/model/quote'],function(_,quote){'use strict';return function(Component){return Component.extend({initialize:function(){this._super().initPaymentSubscriber();},initPaymentSubscriber:_.once(function(){quote.paymentMethod.subscribe(this.updateIsPlaceOrderActionAllowed,this);}),updateIsPlaceOrderActionAllowed:function(){this.isPlaceOrderActionAllowed(quote.billingAddress()!=null);}});};});","Amasty_Checkout/js/view/payment/method-renderer/in-context/checkout-express-mixin.min.js":"define(['ko','underscore','uiRegistry','rjsResolver','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/payment/method-list'],function(ko,_,registry,onJsLoad,quote,paymentMethods){'use strict';return function(Component){return Component.extend({validationTimeout:0,initListeners:function(){this._super();onJsLoad(function(){var fields=registry.filter(function(module){return ko.isObservable(module.required)&&module.required.peek()===true&&ko.isObservable(module.value)&&ko.isObservable(module.visible)&&ko.isObservable(module.disabled);});paymentMethods.subscribe(this.amDeferredValidation,this);_.each(fields,function(element){element.value.subscribe(function(value){if((value||value===0||value===false)&&element.required()&&element.visible()&&!element.disabled()){this.amDeferredValidation();}}.bind(this));}.bind(this));}.bind(this));},validate:function(){this._super();clearTimeout(this.validationTimeout);},amDeferredValidation:function(){clearTimeout(this.validationTimeout);if(quote.paymentMethod()&&quote.paymentMethod().method===this.item.method){this.validationTimeout=setTimeout(function(){window.shippingErrorHideIsNotAllowed=true;this.validate();delete window.shippingErrorHideIsNotAllowed;}.bind(this),200);}}});};});","Amasty_Checkout/js/view/payment/method-renderer/braintree/paypal-mixin.min.js":"define(['underscore','Magento_Checkout/js/model/quote','Amasty_Checkout/js/model/events'],function(_,quote,events){'use strict';return function(Component){return Component.extend({initObservable:function(){var self=this;this._super();events.onAfterShippingSave(_.debounce(function(){var method=quote.paymentMethod();if(method&&method.method===self.code){self.reInitPayPal();}},50));return this;}});};});","Amasty_Checkout/js/view/payment/method-renderer/braintree/cc-form-mixin.min.js":"define([],function(){'use strict';return function(Component){return Component.extend({initFormValidationEvents:function(){this._super();this.updateIsPlaceOrderActionAllowed();}});};});","Amasty_Checkout/js/model/full-screen-loader-mixin.min.js":"define(['mage/utils/wrapper','Amasty_Checkout/js/model/payment/payment-loading'],function(wrapper,paymentLoader){'use strict';return function(target){target.startLoader=wrapper.wrapSuper(target.startLoader,function(){if(window.loaderIsNotAllowed){paymentLoader(true);}else{this._super();}});return target;};});","Amasty_Checkout/js/model/step-navigator-mixin.min.js":"define(['knockout','mage/utils/wrapper'],function(ko,wrapper){'use strict';return function(target){target.registerStep=wrapper.wrapSuper(target.registerStep,function(code,alias,title,isVisible,navigate,sortOrder){var isActive=ko.observable(isVisible());this._super(code,alias,title,isActive,navigate,sortOrder);});target.setHash=wrapper.wrapSuper(target.setHash,function(hash){hash='';this._super(hash);});return target;};});","Amasty_Checkout/js/model/statistic.min.js":"define(['jquery','mage/storage','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/url-builder','Magento_Customer/js/model/customer'],function($,storage,quote,urlBuilder,customer){'use strict';return{canSave:true,paymentMethod:null,quoteId:quote.getQuoteId(),isLoggedIn:customer.isLoggedIn(),saveUrl:'',initialize:function(){quote.paymentMethod.subscribe(function(method){this.paymentMethod=null;if(method){this.paymentMethod=method.method;}},this);if(this.isLoggedIn){this.saveUrl=urlBuilder.createUrl('/checkout/saveInsertedInfo',{});}else{this.saveUrl=urlBuilder.createUrl('/checkout/:cartId/saveInsertedInfo',{cartId:this.quoteId});}\n$(window).on('beforeunload',this.saveStatistic.bind(this));return this;},saveStatistic:function(){var cashStorage=JSON.parse(window.localStorage.getItem('mage-cache-storage')),checkoutData,shippingAddress=quote.shippingAddress(),request={quote_id:this.quoteId},isQuoteActive;if(!this.canSave||!cashStorage||!cashStorage.hasOwnProperty('checkout-data')||!this.quoteId){return;}\ncheckoutData=cashStorage['checkout-data'];isQuoteActive=Object.keys(checkoutData).some(function(value){return checkoutData[value]!=null;});if(!isQuoteActive){return;}\nif(shippingAddress&&shippingAddress.getType()==='new-customer-address'){request.shippingAddressFromData={'street':shippingAddress.street,'city':shippingAddress.city,'region_id':shippingAddress.regionId,'region':shippingAddress.region,'country_id':shippingAddress.countryId,'postcode':shippingAddress.postcode,'email':shippingAddress.email,'customer_id':shippingAddress.customerId,'firstname':shippingAddress.firstname,'lastname':shippingAddress.lastname,'middlename':shippingAddress.middlename,'prefix':shippingAddress.prefix,'suffix':shippingAddress.suffix,'vat_id':shippingAddress.vatId,'company':shippingAddress.company,'telephone':shippingAddress.telephone,'fax':shippingAddress.fax,'custom_attributes':shippingAddress.customAttributes,'save_in_address_book':shippingAddress.saveInAddressBook};}\nif(checkoutData.newCustomerBillingAddress){request.newCustomerBillingAddress=checkoutData.newCustomerBillingAddress;}\nif(checkoutData.selectedPaymentMethod){if(checkoutData.selectedPaymentMethod.includes('braintree_cc_vault_')){checkoutData.selectedPaymentMethod='braintree_cc_vault';}\nrequest.selectedPaymentMethod=checkoutData.selectedPaymentMethod;}\nif(checkoutData.selectedShippingRate){request.selectedShippingRate=checkoutData.selectedShippingRate;}\nif(checkoutData.validatedEmailValue){request.validatedEmailValue=checkoutData.validatedEmailValue;}\nif(!request.selectedPaymentMethod&&this.paymentMethod){request.selectedPaymentMethod=this.paymentMethod;}\nstorage.post(this.saveUrl,JSON.stringify(request),false);}};});","Amasty_Checkout/js/model/address-form-state.min.js":"define(['ko','underscore','uiRegistry','Magento_Checkout/js/model/quote'],function(ko,_,registry,quote){'use strict';return{isBillingFormVisible:ko.observable(false),isBillingSameAsShipping:ko.observable(true),isShippingFormVisible:ko.observable(false),updateBillingFormStates:function(){var billingAddressFormComponent,billingFormCacheKey='billing-address-form',paymentMethod;if(window.checkoutConfig.displayBillingOnPaymentMethod){paymentMethod=quote.paymentMethod();billingFormCacheKey=false;if(paymentMethod){billingFormCacheKey=paymentMethod.method+'-form';}}\nbillingAddressFormComponent=this.getBillingForm(billingFormCacheKey);if(billingAddressFormComponent){this.isBillingSameAsShipping(Boolean(billingAddressFormComponent.isAddressSameAsShipping()));this.isBillingFormVisible(!billingAddressFormComponent.isAddressDetailsVisible());}else{this.isBillingSameAsShipping(true);this.isBillingFormVisible(false);}},_indexedBillingForm:{},getBillingForm:function(index){if(index&&_.isUndefined(this._indexedBillingForm[index])){this._indexedBillingForm[index]=registry.get({index:index});}\nreturn this._indexedBillingForm[index];}};});","Amasty_Checkout/js/model/resource-url-manager.min.js":"define(['Magento_Customer/js/model/customer','Magento_Checkout/js/model/url-builder','mageUtils'],function(customer,urlBuilder,utils){\"use strict\";return{getUrlForGiftWrap:function(quote){var params=(this.getCheckoutMethod()=='guest')?{cartId:quote.getQuoteId()}:{};var urls={'guest':'/amasty_checkout/guest-carts/:cartId/gift-wrap','customer':'/amasty_checkout/carts/mine/gift-wrap'};return this.getUrl(urls,params);},getUrlForGiftMessage:function(quote){var params=(this.getCheckoutMethod()=='guest')?{cartId:quote.getQuoteId()}:{};var urls={'guest':'/amasty_checkout/guest-carts/:cartId/gift-message','customer':'/amasty_checkout/carts/mine/gift-message'};return this.getUrl(urls,params);},getUrlForDelivery:function(quote){var params=(this.getCheckoutMethod()=='guest')?{cartId:quote.getQuoteId()}:{};var urls={'guest':'/amasty_checkout/guest-carts/:cartId/delivery','customer':'/amasty_checkout/carts/mine/delivery'};return this.getUrl(urls,params);},getUrlForRemoveItem:function(quote){var params=(this.getCheckoutMethod()=='guest')?{cartId:quote.getQuoteId()}:{};var urls={'guest':'/amasty_checkout/guest-carts/:cartId/remove-item','customer':'/amasty_checkout/carts/mine/remove-item'};return this.getUrl(urls,params);},getUrlForUpdateItem:function(quote){var params=(this.getCheckoutMethod()=='guest')?{cartId:quote.getQuoteId()}:{};var urls={'guest':'/amasty_checkout/guest-carts/:cartId/update-item','customer':'/amasty_checkout/carts/mine/update-item'};return this.getUrl(urls,params);},getUrlForAdditionalFields:function(quote){var params=(this.getCheckoutMethod()=='guest')?{cartId:quote.getQuoteId()}:{};var urls={'guest':'/amasty_checkout/guest-carts/:cartId/amcheckoutFields','customer':'/amasty_checkout/carts/mine/amcheckoutFields'};return this.getUrl(urls,params);},getUrlForSavePassword:function(quote){var params=(this.getCheckoutMethod()=='guest')?{cartId:quote.getQuoteId()}:{},urls={'guest':'/amasty_checkout/guest-carts/:cartId/save-password'};return this.getUrl(urls,params);},getUrl:function(urls,urlParams){var url;if(utils.isEmpty(urls)){return'Provided service call does not exist.';}\nif(!utils.isEmpty(urls['default'])){url=urls['default'];}else{url=urls[this.getCheckoutMethod()];}\nreturn urlBuilder.createUrl(url,urlParams);},getCheckoutMethod:function(){return customer.isLoggedIn()?'customer':'guest';}};});","Amasty_Checkout/js/model/delivery.min.js":"define(['ko'],function(ko){'use strict';return{isLoading:ko.observable(false)}});","Amasty_Checkout/js/model/payment-service-mixin.min.js":"define(['ko','mage/utils/wrapper','Magento_Checkout/js/model/quote','Amasty_Checkout/js/model/payment/vault-payment-resolver','Amasty_Checkout/js/model/payment/payment-loading'],function(ko,wrapper,quote,vaultResolver,paymentLoader){'use strict';return function(target){target.isLoading=paymentLoader;target.setPaymentMethods=wrapper.wrapSuper(target.setPaymentMethods,function(methods){if(methods&&quote.paymentMethod()){var selectedMethod=quote.paymentMethod().method;if(vaultResolver.isVaultMethodAvailable(selectedMethod,methods)){methods.push({method:selectedMethod});}}\nthis._super(methods);this.isLoading(false);});return target;};});","Amasty_Checkout/js/model/new-customer-address-mixin.min.js":"define(['underscore','mage/utils/wrapper'],function(_,wrapper){'use strict';return function(newAddressFunction){return wrapper.wrap(newAddressFunction,function(origin,addressData){if(window.checkoutConfig.amdefault){_.each(window.checkoutConfig.amdefault,function(defaultValue,name){if(!addressData[name]&&name!=='region_id'&&name!=='region'){addressData[name]=defaultValue;}});if(addressData.country_id===window.checkoutConfig.amdefault.country_id){if(!addressData.region){addressData.region={};}\nif(!addressData.region.region_id){addressData.region.region_id=window.checkoutConfig.amdefault.region_id;}\nif(!addressData.region.region){addressData.region.region=window.checkoutConfig.amdefault.region;}}}\nreturn origin(addressData);});}});","Amasty_Checkout/js/model/default-shipping-rate-processor-mixin.min.js":"define(['mage/utils/wrapper','Magento_Checkout/js/model/shipping-rate-registry','Magento_Checkout/js/model/shipping-service','Amasty_Checkout/js/action/get-address-cache-key'],function(wrapper,rateRegistry,shippingService,getAddressCacheKey){'use strict';return function(target){target.getRates=wrapper.wrapSuper(target.getRates,function(address){var cacheKey,cache;if(address.getType()!=='new-address'||address.getType()!=='new-customer-address'){return this._super();}\ncacheKey=getAddressCacheKey(address);cache=rateRegistry.get(cacheKey);if(cache){rateRegistry.set(address.getCacheKey(),cache);}else if(!rateRegistry.get(address.getCacheKey())){shippingService.getShippingRates().subscribe(function(rates){rateRegistry.set(cacheKey,rates);this.dispose();});}\nreturn this._super();});return target;};});","Amasty_Checkout/js/model/shipping-rates-validator-mixin.min.js":"define(['jquery','mage/utils/wrapper'],function($,wrapper){'use strict';return function(target){var mixin={postcodeValidation:function(original){original();return true;},bindHandler:function(original,element,delay){if(element.component.indexOf('/group')!==-1||(element.name.indexOf('billing')===-1&&element.dataScope.indexOf('billing')===-1)){return original(element,delay);}\nif(element.index==='postcode'){var self=this;delay=typeof delay==='undefined'?1000:delay;element.on('value',function(){clearTimeout(self.validateZipCodeTimeout);self.validateZipCodeTimeout=setTimeout(function(){self.postcodeValidation(element);},delay);});}}};wrapper._extend(target,mixin);return target;};});","Amasty_Checkout/js/model/events.min.js":"define(['underscore','uiEvents'],function(_,uiEvents){'use strict';const eventBeforeShippingSave='before_shipping_save',eventAfterShippingSave='after_shipping_save';return _.extend(uiEvents,{onBeforeShippingSave:function(callback){this.on(eventBeforeShippingSave,callback);},onAfterShippingSave:function(callback){this.on(eventAfterShippingSave,callback);}});});","Amasty_Checkout/js/model/checkout-data-resolver-mixin.min.js":"define(['jquery','Magento_Checkout/js/model/quote','Magento_Checkout/js/checkout-data','Magento_Checkout/js/action/select-shipping-method','Magento_Checkout/js/model/address-converter','Magento_Customer/js/model/address-list','Magento_Checkout/js/model/payment-service','Magento_Checkout/js/action/select-payment-method','Magento_Checkout/js/action/select-shipping-address','Amasty_Checkout/js/model/payment/vault-payment-resolver','uiRegistry','underscore','mage/utils/wrapper'],function($,quote,checkoutData,selectShippingMethodAction,addressConverter,addressList,paymentService,selectPaymentMethodAction,selectShippingAddress,vaultResolver,registry,_,wrapper){'use strict';var defaultShippingMethod=null;function _getDefaultShippingMethod(){var provider;if(defaultShippingMethod===null){provider=registry.get('checkoutProvider');if(provider&&provider.defaultShippingMethod){defaultShippingMethod=provider.defaultShippingMethod;}else{defaultShippingMethod=false;}}\nreturn defaultShippingMethod;}\nreturn function(target){var mixin={resolveShippingRates:function(original,ratesData){if(!ratesData||ratesData.length===0){selectShippingMethodAction(null);return;}\nif(ratesData.length===1){selectShippingMethodAction(ratesData[0]);return;}\nvar selectedShippingRate=checkoutData.getSelectedShippingRate(),availableRate=false;if(quote.shippingMethod()){availableRate=_.find(ratesData,function(rate){return rate['carrier_code']==quote.shippingMethod()['carrier_code']&&rate['method_code']==quote.shippingMethod()['method_code'];});}\nif(!availableRate&&selectedShippingRate){availableRate=_.find(ratesData,function(rate){return rate['carrier_code']+'_'+rate['method_code']===selectedShippingRate;});}\nif(!availableRate&&window.checkoutConfig.selectedShippingMethod){availableRate=_.find(ratesData,function(rate){return rate['carrier_code']+'_'+rate['method_code']===window.checkoutConfig.selectedShippingMethod;});}\nif(!availableRate&&_getDefaultShippingMethod()){availableRate=_.find(ratesData,function(rate){return rate['carrier_code']+'_'+rate['method_code']===_getDefaultShippingMethod();});}\nif(availableRate){selectShippingMethodAction(availableRate);}else{selectShippingMethodAction(null);}},resolvePaymentMethod:function(original){original();if(quote.paymentMethod()){return;}\nvar paymentMethod=checkoutData.getSelectedPaymentMethod();if(vaultResolver.isSavedVaultPayment(paymentMethod)&&vaultResolver.resolve(paymentMethod)){return;}\nvar provider=registry.get('checkoutProvider');if(provider&&provider.defaultPaymentMethod){var availablePaymentMethods=paymentService.getAvailablePaymentMethods();availablePaymentMethods.some(function(payment){if(payment.method===provider.defaultPaymentMethod){selectPaymentMethodAction(payment);return true;}});}},resolveEstimationAddress:function(original){original();var shippingAddressData=checkoutData.getShippingAddressFromData(),checkoutProvider=registry.get('checkoutProvider');if(shippingAddressData){checkoutProvider.set('shippingAddress',$.extend(true,{},checkoutProvider.get('shippingAddress'),shippingAddressData));}},applyShippingAddress:function(original,isEstimatedAddress){var addressData=addressList()[0];original();if(quote.shippingAddress()){return;}\nif(isEstimatedAddress){addressData=addressConverter.addressToEstimationAddress(addressData);}\nif(addressList().length>1){selectShippingAddress(addressData);}}};wrapper._extend(target,mixin);return target;};});","Amasty_Checkout/js/model/amalert.min.js":"define(['jquery','underscore','mage/translate','Magento_Ui/js/modal/confirm'],function($,_,$t){'use strict'\n$.widget('mage.alert',$.mage.confirm,{options:{modalClass:'confirm',title:$.mage.__('Attention'),actions:{always:function(){}},buttons:[{text:$.mage.__('OK'),class:'action-primary action-accept',click:function(){this.closeModal(true);}}]},closeModal:function(){this.options.actions.always();this.element.bind('alertclosed',_.bind(this._remove,this));var textOrder=$.mage.__('Place Order');var placeOrderText=$('button.amasty').find('span');placeOrderText.attr('data-bind',\"i18n: '\"+textOrder+\"'\");placeOrderText.text($t(textOrder));return this._super();}});return function(config){return $('<div></div>').html(config.content).alert(config);};});","Amasty_Checkout/js/model/agreements-assigner-mixin.min.js":"define(['mage/utils/wrapper','jquery'],function(wrapper,$){'use strict';return function(agreementsAssignerAction){return wrapper.wrap(agreementsAssignerAction,function(originalAction,paymentData){originalAction(paymentData);var amcheckoutFormData=$('.additional-options input, .additional-options textarea').serializeArray(),data={},agreements=[],re=/^agreement\\[\\d+?\\]$/;amcheckoutFormData.forEach(function(item){data[item.name]=item.value;if(re.test(item.name)){agreements.push(item.value);}});if(agreements.length){if(paymentData['extension_attributes']===undefined){paymentData['extension_attributes']={};}\npaymentData['extension_attributes']['agreement_ids']=agreements;}\nreturn paymentData;});};});","Amasty_Checkout/js/model/address-converter-mixin.min.js":"define(['underscore','mage/utils/wrapper'],function(_,wrapper){'use strict';return function(target){target.quoteAddressToFormAddressData=wrapper.wrapSuper(target.quoteAddressToFormAddressData,function(modelAddress){var shippingAddress,customAttributes;if(modelAddress.customAttributes){customAttributes={};_.each(modelAddress.customAttributes,function(attribute,key){if(_.isObject(attribute)&&attribute.hasOwnProperty('attribute_code')){customAttributes[attribute.attribute_code]=attribute.value;}else if(!_.isNumber(key)){customAttributes[key]=attribute;}\ndelete modelAddress.customAttributes[key];});delete modelAddress.customAttributes;}\nshippingAddress=this._super(modelAddress);if(customAttributes){shippingAddress['custom_attributes']=customAttributes;}\nreturn shippingAddress;});return target;};});","Amasty_Checkout/js/model/one-step-layout.min.js":"define(['ko','uiRegistry','Amasty_Checkout/js/view/utils'],function(ko,registry,viewUtils){'use strict';const MAPPING_BLOCK_NAME={shipping_address:'checkout.steps.shipping-step.shippingAddress',shipping_method:'checkout.steps.shipping-step.shippingAddress',delivery:'checkout.steps.shipping-step.amcheckout-delivery-date',payment_method:'checkout.steps.billing-step',summary:'checkout.sidebar'},CLASS_NAMES={classic:{main:'opc-wrapper am-opc-wrapper',column:'checkout-column opc',block:'checkout-block'},modern:{main:'amcheckout-main-container',column:'amcheckout-column',block:'amcheckout-block amcheckout-step-container'}},BLOCK_ATTRS={classic:{},modern:{main:{'data-amcheckout-js':'main-container'}}};return{selectedLayout:[],checkoutDesign:'',checkoutLayout:'',checkoutBlocks:{},mainAdditionalClasses:'',getCheckoutBlock:function(blockName){var requestComponent=this.checkoutBlocks[blockName]||this.requestComponent(MAPPING_BLOCK_NAME[blockName]);switch(blockName){case'shipping_address':if(requestComponent()){requestComponent().template='Amasty_Checkout/onepage/shipping/address';}\nbreak;case'shipping_method':if(requestComponent()){requestComponent().template='Amasty_Checkout/onepage/shipping/methods';}\nbreak;default:break;}\nreturn requestComponent;},requestComponent:function(name){var observable=ko.observable();registry.get(name,function(summary){observable(summary);});this.checkoutBlocks[name]=observable;return observable;},getVirtualLayout:function(){return[[viewUtils.getBlockLayoutConfig('payment_method')],[viewUtils.getBlockLayoutConfig('summary')]];},getContainerClassNames:function(){var defaultClassNames=CLASS_NAMES,classNames=defaultClassNames[this.checkoutDesign].main;if(this.checkoutDesign==='modern'){classNames+=' -'+this.checkoutDesign+' -layout-'+this.checkoutLayout;}else{classNames+=' layout-'+this.checkoutLayout;}\nclassNames+=' '+this.mainAdditionalClasses;return classNames;},getContainerAttrs:function(){return BLOCK_ATTRS[this.checkoutDesign].main;},getColumnClassNames:function(columnIndex){var classNames='',defaultClassNames=CLASS_NAMES;classNames=defaultClassNames[this.checkoutDesign].column\n+this.getAdditionalColumnClassNames(columnIndex);return classNames;},getAdditionalColumnClassNames:function(columnIndex){var additionalColumnsClasses='';if(this.checkoutDesign==='modern'&&this.checkoutLayout==='2columns'){if(columnIndex===0){additionalColumnsClasses+=' -main';}else if(columnIndex===1){additionalColumnsClasses+=' -sidebar';}}\nreturn additionalColumnsClasses;},getColumnAttrs:function(columnIndex){var columnAttrs={},checkoutJsPrefix='data-amcheckout-js',defaultAttrs=BLOCK_ATTRS[this.checkoutDesign].column;columnAttrs=defaultAttrs||{};if(this.checkoutDesign==='modern'&&this.checkoutLayout==='2columns'){if(columnIndex===0){columnAttrs[checkoutJsPrefix]='main-column';}else if(columnIndex===1){columnAttrs[checkoutJsPrefix]='sidebar-column';}}\nreturn columnAttrs;},getBlockClassNames:function(blockName){var defaultClassNames=CLASS_NAMES,classNames=defaultClassNames[this.checkoutDesign].block;if(blockName==='summary'){classNames+=' -summary';}\nreturn classNames;},getBlockAttrs:function(){var blockAttrs={},checkoutJsPrefix='data-amcheckout-js',defaultAttrs=BLOCK_ATTRS[this.checkoutDesign].block;blockAttrs=defaultAttrs||{};if(this.checkoutDesign==='modern'&&this.checkoutLayout!=='3columns'){blockAttrs[checkoutJsPrefix]='step-container';}\nreturn blockAttrs;},isModernTwoColumns:function(){return this.checkoutDesign==='modern'&&this.checkoutLayout==='2columns';}};});","Amasty_Checkout/js/model/shipping-registry.min.js":"define(['ko','underscore','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/shipping-rates-validation-rules','Magento_Checkout/js/model/shipping-rate-registry','Magento_Checkout/js/model/shipping-address/form-popup-state','Magento_Checkout/js/model/address-converter','Magento_Customer/js/model/address-list','Amasty_Checkout/js/model/address-form-state','Amasty_Checkout/js/action/get-address-cache-key','Amasty_Checkout/js/model/payment/payment-loading','Magento_Ui/js/lib/validation/validator'],function(ko,_,quote,validationRules,rateRegistry,formPopUpState,addressConverter,addressList,addressFormState,getAddressCacheKey,paymentLoader,validator){'use strict';return{savedAddress:'',shippingMethod:'',shippingCarrier:'',addressComponents:[],observedComponents:[],additionalAddressValues:{},excludedFieldsNames:[],excludedCollectionNames:['billing-address-form'],isEstimationHaveError:ko.observable(false),isAddressChanged:ko.observable(false).extend({notify:'always',rateLimit:20}),validationTimeout:0,checkDelay:1000,initObservers:function(elems){if(_.isEmpty(this.addressComponents)){this.excludedFieldsNames=_.union(this.excludedFieldsNames,validationRules.getObservableFields());this.filterElements(elems());_.each(this.addressComponents,function(element){if(this.excludedFieldsNames.indexOf(element.index)===-1){this.observedComponents.push(element);this.additionalAddressValues[element.index]=this.getInitialValue(element.index);}\nelement.on('value',this.triggerValidation.bind(this,element));},this);}},setInitialValues:function(){var savedAddress=window.checkoutConfig.shippingAddressFromData,savedMethod=window.checkoutConfig.selectedShippingMethod,subscriber,cacheKey;if(savedAddress){this.savedAddress=addressConverter.formAddressDataToQuoteAddress(savedAddress);cacheKey=getAddressCacheKey(this.savedAddress);rateRegistry.set(cacheKey,window.checkoutConfig.quoteData.initRates);}else if(window.checkoutConfig.selectedShippingAddressId){if(addressList.getLength()){this._setCustomerAddress(addressList());}else{subscriber=addressList.subscribe(function(addreses){this._setCustomerAddress(addreses);subscriber.dispose();},this);}}\nif(savedMethod){if(_.isObject(savedMethod)){this.shippingMethod=savedMethod.method_code;this.shippingCarrier=savedMethod.carrier_code;}else if(_.isString(savedMethod)){savedMethod=savedMethod.split('_');this.shippingMethod=savedMethod[0];this.shippingCarrier=savedMethod[1];}}},_setCustomerAddress:function(addresses){var selectedAddress;selectedAddress=_.find(addresses,function(address){return address.customerAddressId*1===window.checkoutConfig.selectedShippingAddressId*1;});if(selectedAddress){this.savedAddress=selectedAddress;rateRegistry.set(selectedAddress.getKey(),window.checkoutConfig.quoteData.initRates);}},getInitialValue:function(index){var savedAddress=window.checkoutConfig.shippingAddressFromData;if(savedAddress){if(savedAddress.custom_attributes&&savedAddress.custom_attributes[index]){return savedAddress.custom_attributes[index];}else if(savedAddress[index]){return savedAddress[index];}}\nreturn null;},filterElements:function(elems){if(!elems||!elems.length){return;}\n_.each(elems,function(element){if(this._isCollection(element)){try{if(this._isCollectionValid(element)){this.filterElements(element.elems());}}catch(e){}\nreturn;}\nif(this._isModuleValid(element)){this.addressComponents.push(element);}}.bind(this));},_isCollection:function(element){return typeof element.initChildCount==='number';},_isCollectionValid:function(element){return this.excludedCollectionNames.indexOf(element.index)===-1;},_isModuleValid:function(module){return ko.isObservable(module.error)&&ko.isObservable(module.value);},triggerValidation:function(){clearTimeout(this.validationTimeout);if(!formPopUpState.isVisible()&&!addressFormState.isShippingFormVisible()){paymentLoader(true);this.validationTimeout=setTimeout(this.validation.bind(this),this.checkDelay);}},validation:function(){var isError=false,valueChanged=false,result;_.find(this.observedComponents,function(element){if(element.visible&&!element.visible()||element.disabled&&element.disabled()){return false;}\nif(element.error()){isError=true;return true;}\nif(_.isObject(element.validation)){result=validator(element.validation,element.value(),element.validationParams);if(!result.passed){isError=true;return true;}}\nif(this.additionalAddressValues[element.index]!==element.value()){valueChanged=true;}\nreturn false;},this);this.isEstimationHaveError(isError);if(!isError){this.isAddressChanged(valueChanged);}else{paymentLoader(false);}},registerAdditionAddressValues:function(){clearTimeout(this.validationTimeout);_.each(this.observedComponents,function(element){this.additionalAddressValues[element.index]=element.value();}.bind(this));},register:function(address){if(!address){address=quote.shippingAddress();}\nthis.savedAddress=address;this.shippingMethod=quote.shippingMethod()?quote.shippingMethod().method_code:'';this.shippingCarrier=quote.shippingMethod()?quote.shippingMethod().carrier_code:'';this.registerAdditionAddressValues();},isHaveUnsavedShipping:function(){var methodData=quote.shippingMethod();if(!methodData){return false;}\nif(!this.savedAddress){return true;}\nreturn this.isAddressChanged()||!this._compareObjectsData(quote.shippingAddress(),this.savedAddress)||this.shippingMethod!==methodData.method_code||this.shippingCarrier!==methodData.carrier_code;},_compareObjectsData:function(quoteAddress,savedAddress){if(quoteAddress.getType&&quoteAddress.getType()==='customer-address'){return quoteAddress.customerAddressId===savedAddress.customerAddressId;}\nquoteAddress=_.pick(quoteAddress,this._cleanupAddressFunction);savedAddress=_.pick(savedAddress,this._cleanupAddressFunction);if(quoteAddress.regionId){quoteAddress.regionId*=1;}\nif(savedAddress.regionId){savedAddress.regionId*=1;}\nreturn _.isEqual(quoteAddress,savedAddress);},_cleanupAddressFunction:function(value,key){return!_.isFunction(value)&&key!=='save_in_address_book'&&value&&(!_.isEmpty(value)||_.isNumber(value));}};});","Amasty_Checkout/js/model/payment-validators/shipping-validator.min.js":"define(['uiRegistry'],function(registry){'use strict';return{validate:function(hideError){var shipping=registry.get('checkout.steps.shipping-step.shippingAddress'),result;shipping.allowedDynamicalSave=false;window.silentShippingValidation=!!hideError;result=shipping.validateShippingInformation();delete window.silentShippingValidation;if(hideError&&!result&&!window.shippingErrorHideIsNotAllowed){if(shipping.isFormInline&&shipping.source.get('params.invalid')){shipping.source.trigger('data.overload');shipping.source.trigger('data.reset');}\nshipping.errorValidationMessage(false);}\nshipping.allowedDynamicalSave=true;return result;}};});","Amasty_Checkout/js/model/payment-validators/dob-validator.min.js":"define(['uiRegistry'],function(registry){'use strict';return{validate:function(){var amastyDob=registry.get('checkout.sidebar.additional.date_of_birth');if(amastyDob&&amastyDob.visible()){var validate=amastyDob.validate();if(validate==false){return false;}\nreturn validate.valid;}\nreturn true;}};});","Amasty_Checkout/js/model/payment-validators/additional-validators-mixin.min.js":"define(['mage/utils/wrapper','Amasty_Checkout/js/action/focus-first-error','Amasty_Checkout/js/model/payment-validators/login-form-validator'],function(wrapper,focusFirstError,loginFormValidator){'use strict';return function(target){target.validate=wrapper.wrapSuper(target.validate,function(hideError){var result;if(!loginFormValidator.validate()){if(!hideError){focusFirstError();}\nreturn false;}\nresult=this._super();if(!result&&!hideError){focusFirstError();}\nreturn result;});return target;};});","Amasty_Checkout/js/model/payment-validators/login-form-validator.min.js":"define(['jquery','Magento_Customer/js/model/customer'],function($,customer){'use strict';return{validate:function(){var loginForm='form[data-role=email-with-possible-login]',password=$(loginForm).find('#customer-password'),createAcc=window.checkoutConfig.quoteData.additional_options.create_account;if(customer.isLoggedIn()||createAcc!=='2'){return true;}\nif(password.val()){return $(loginForm).validation()&&$(loginForm).validation('isValid');}\nreturn true;}};});","Amasty_Checkout/js/model/payment-validators/agreement-validator.min.js":"define(['jquery','mage/validation'],function($){'use strict';var checkoutConfig=window.checkoutConfig,agreementsConfig=checkoutConfig?checkoutConfig.checkoutAgreements:{},agreementsInputPath='.additional-options .checkout-agreements .checkout-agreement.required input',agreementsError='.additional-options .checkout-agreements .checkout-agreement div.mage-error',agreementsInputPathOld='.additional-options .checkout-agreements .checkout-agreement input';return{validate:function(){var isValid=true;if(!agreementsConfig||!agreementsConfig.isEnabled){return true;}\nif($(agreementsInputPath).length===0){return this.validateOld();}\n$(agreementsInputPath).each(function(index,element){if(!$.validator.validateSingleElement(element,{errorElement:'div'})){isValid=false;}});if(isValid){return this.validateOld();}\nreturn isValid;},validateOld:function(){if($(agreementsInputPathOld).length===0){return true;}\nvar isValid=true,element=$(agreementsInputPathOld),validator=$('#checkout').validate({errorClass:'mage-error',errorElement:'div',meta:'validate',errorPlacement:function(error,element){var errorPlacement=element;if(element.is(':checkbox')||element.is(':radio')){errorPlacement=element.siblings('label').last();}\nerrorPlacement.after(error);}});if(element.is(':checked')==false){isValid=false;if(!$(agreementsError).length){validator.showLabel(element,$.mage.__('This is a required field.'));}}\nreturn isValid;}};});","Amasty_Checkout/js/model/cart/totals-processor/default.min.js":"define(['jquery','mage/utils/wrapper','underscore','Magento_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/quote','mage/storage','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/error-processor'],function($,wrapper,_,resourceUrlManager,quote,storage,totalsService,errorProcessor){'use strict';var ajax,sendingPayload;return function(address){var serviceUrl,payload,requiredFields=['countryId','region','regionId','postcode'];serviceUrl=resourceUrlManager.getUrlForTotalsEstimationForNewAddress(quote);address=_.pick(address,requiredFields);payload={addressInformation:{address:address}};if(quote.shippingMethod()&&quote.shippingMethod()['method_code']){payload.addressInformation['shipping_method_code']=quote.shippingMethod()['method_code'];payload.addressInformation['shipping_carrier_code']=quote.shippingMethod()['carrier_code'];}\nif(!_.isEqual(sendingPayload,payload)){sendingPayload=payload;ajax=storage.post(serviceUrl,JSON.stringify(payload),false).done(function(result){quote.setTotals(result);totalsService.isLoading(false);}).fail(function(response){if(response.responseText||response.status){errorProcessor.process(response);}});}};});","Amasty_Checkout/js/model/payment/payment-loading.min.js":"define(['ko'],function(ko){'use strict';return ko.observable(false);});","Amasty_Checkout/js/model/payment/vault-payment-resolver.min.js":"define(['underscore','mageUtils','uiRegistry','Magento_Checkout/js/model/payment/method-list'],function(_,utils,registry,availableMethods){'use strict';return{isSavedVaultPayment:function(method){try{if(method&&utils.nested(window,'checkoutConfig.payment.vault.'+method)){return true;}}catch(e){}\nreturn false;},isVaultMethodAvailable:function(vaultMethod,methodlist){if(!vaultMethod){return false;}\nvar vaultCode=utils.nested(window,'checkoutConfig.payment.vault.'+vaultMethod+'.config.code');if(!vaultCode){return false;}\nif(_.isUndefined(methodlist)){methodlist=availableMethods;}\nreturn!!_.some(methodlist,function(method){return method.method===vaultCode;});},resolve:function(method){if(this.isVaultMethodAvailable(method)){registry.get({index:method},function(vaultView){if(_.isFunction(vaultView.selectPaymentMethod)){vaultView.selectPaymentMethod();}});return true}\nreturn false;}};});","Amasty_Conditions/js/action/recollect-totals.min.js":"define(['jquery','mage/utils/wrapper','underscore','Amasty_Conditions/js/model/resource-url-manager','Magento_Checkout/js/model/quote','mage/storage','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/error-processor','Magento_Customer/js/customer-data','uiRegistry','Amasty_Conditions/js/model/subscriber','Magento_Catalog/js/price-utils','mage/translate'],function($,wrapper,_,resourceUrlManager,quote,storage,totalsService,errorProcessor,customerData,registry,subscriber,priceUtils,$t){'use strict';var ajax,sendTimeout,sendingPayload;return function(force){var serviceUrl,payload,address,paymentMethod,requiredFields=['countryId','region','regionId','postcode','city'],newAddress=quote.shippingAddress()?quote.shippingAddress():quote.billingAddress(),city;serviceUrl=resourceUrlManager.getUrlForTotalsEstimationForNewAddress(quote);address=_.pick(newAddress,requiredFields);paymentMethod=quote.paymentMethod()?quote.paymentMethod().method:null;city='';if(quote.isVirtual()&&quote.billingAddress()){city=quote.billingAddress().city;}else if(quote.shippingAddress()){city=quote.shippingAddress().city;}\naddress.extension_attributes={advanced_conditions:{custom_attributes:quote.shippingAddress()?quote.shippingAddress().custom_attributes:[],payment_method:paymentMethod,city:city,shipping_address_line:quote.shippingAddress()?quote.shippingAddress().street:null,billing_address_country:quote.billingAddress()?quote.billingAddress().countryId:null,currency:totalsService.totals()?totalsService.totals().quote_currency_code:null}};payload={addressInformation:{address:address}};if(quote.shippingMethod()&&quote.shippingMethod()['method_code']){payload.addressInformation['shipping_method_code']=quote.shippingMethod()['method_code'];payload.addressInformation['shipping_carrier_code']=quote.shippingMethod()['carrier_code'];}\nif(!_.isEqual(sendingPayload,payload)||force===true){sendingPayload=payload;clearTimeout(sendTimeout);sendTimeout=setTimeout(function(){clearTimeout(sendTimeout);if(subscriber.isLoading()===true){ajax.abort();}else{totalsService.isLoading(true);subscriber.isLoading(true);}\najax=storage.post(serviceUrl,JSON.stringify(payload),false).done(function(result){var itemLabels='';var supportedPayment='';var bundleSaved='';var methodLabel=$('.cart-config .pay-method .methods-label');if(result['extension_attributes']&&result['extension_attributes']['item_labels']){itemLabels=JSON.parse(result['extension_attributes']['item_labels']);}\nif(result['extension_attributes']&&result['extension_attributes']['supported_payment']){supportedPayment=result['extension_attributes']['supported_payment'];}\nmethodLabel.text(supportedPayment);if(result['extension_attributes']&&result['extension_attributes']['bundle_saved']){bundleSaved=JSON.parse(result['extension_attributes']['bundle_saved']);}\n$.each(result.items,function(index,item){if(bundleSaved){$.each(bundleSaved,function(ci,cartitem){if(item.item_id==cartitem.item_id&&cartitem.product_type==='bundle'){result.items[index]['product_type']=cartitem.product_type;result.items[index]['formatted_totals']=cartitem.formatted_totals;var savedMoney=cartitem.saved;if(savedMoney>0){result.items[index]['saved']=$t(\"saved money:\")+priceUtils.formatPrice(savedMoney);}\nif(cartitem.fixed_bundle_name){result.items[index]['name']+=' '+cartitem.fixed_bundle_name;}}});}\nif(itemLabels&&itemLabels[item.item_id]){result.items[index]['product_label']=itemLabels[item.item_id];}});quote.setTotals(result);totalsService.isLoading(false);subscriber.isLoading(false);}).fail(function(response){if(response.responseText||response.status){errorProcessor.process(response);}});},200);}};});","Amasty_Conditions/js/model/resource-url-manager.min.js":"define(['Magento_Checkout/js/model/resource-url-manager'],function(resourceUrlManager){'use strict';return{getUrlForTotalsEstimationForNewAddress:function(quote){if(window.checkoutConfig.isNegotiableQuote){var params={quoteId:quote.getQuoteId()},urls={'negotiable':'/negotiable-carts/:quoteId/totals-information/?isNegotiableQuote=true'};return resourceUrlManager.getUrl(urls,params);}\nreturn resourceUrlManager.getUrlForTotalsEstimationForNewAddress(quote);},};});","Amasty_Conditions/js/model/shipping-rates-validation-rules-mixin.min.js":"define(['jquery','mage/utils/wrapper','uiRegistry'],function($,wrapper){\"use strict\";return function(shippingRatesValidationRules){shippingRatesValidationRules.getObservableFields=wrapper.wrap(shippingRatesValidationRules.getObservableFields,function(originalAction){var fields=originalAction();fields.push('street');fields.push('city');fields.push('region_id');return fields;});return shippingRatesValidationRules;};});","Amasty_Conditions/js/model/conditions-subscribe.min.js":"define(['jquery','underscore','uiComponent','Magento_Checkout/js/model/quote','Amasty_Conditions/js/action/recollect-totals','Amasty_Conditions/js/model/subscriber','Magento_Checkout/js/model/shipping-service','Magento_Checkout/js/model/shipping-rate-processor/new-address','Magento_Checkout/js/model/totals','Magento_SalesRule/js/view/payment/discount','rjsResolver'],function($,_,Component,quote,recollect,subscriber,shippingService,shippingProcessor,totals,discount,resolver){'use strict';return Component.extend({previousShippingMethodData:{},previousItemsData:[],billingAddressCountry:null,city:null,street:null,isPageLoaded:false,initialize:function(){this._insertPolyfills();this._super();resolver(function(){this.isPageLoaded=true;totals.getItems().subscribe(this.storeOldItems,this,\"beforeChange\");totals.getItems().subscribe(this.recollectOnItems,this);}.bind(this));discount().isApplied.subscribe(function(){recollect(true);});quote.shippingAddress.subscribe(function(newShippingAddress){if(this.isPageLoaded&&this._isNeededRecollectShipping(newShippingAddress,this.city,this.street)){this.city=newShippingAddress.city;this.street=newShippingAddress.street;if(newShippingAddress){recollect();}}}.bind(this));quote.billingAddress.subscribe(function(newBillAddress){if(this._isNeededRecollectBilling(newBillAddress,this.billingAddressCountry,this.billingAddressCity)){this.billingAddressCountry=newBillAddress.countryId;this.billingAddressCity=newBillAddress.city;if(!this._isVirtualQuote()&&(quote.shippingAddress()&&newBillAddress.countryId!==quote.shippingAddress().countryId)){shippingProcessor.getRates(quote.shippingAddress());}\nrecollect();}}.bind(this));shippingService.getShippingRates().subscribe(function(rates){if(!this._isVirtualQuote()){recollect();}}.bind(this));quote.paymentMethod.subscribe(function(newMethodData){recollect();},this);quote.shippingMethod.subscribe(this.storeOldMethod,this,\"beforeChange\");quote.shippingMethod.subscribe(this.recollectOnShippingMethod,this);return this;},storeOldMethod:function(oldMethod){this.previousShippingMethodData=oldMethod;},recollectOnShippingMethod:function(newMethodData){if(!_.isEqual(this.previousShippingMethodData,newMethodData)){recollect();}},storeOldItems:function(oldItems){this.previousItemsData=this._prepareArrayForCompare(oldItems);},recollectOnItems:function(newItems){if(!_.isEqual(this.previousItemsData,this._prepareArrayForCompare(newItems))){subscriber.isLoading.valueHasMutated();}},_prepareArrayForCompare:function(data){var result=[],itemData={};_.each(data,function(item){itemData=_.pick(item,function(value){return!_.isObject(value);});result.push(itemData);}.bind(this));return result;},_isVirtualQuote:function(){return quote.isVirtual()||window.checkoutConfig.activeCarriers&&window.checkoutConfig.activeCarriers.length===0;},_isNeededRecollectShipping:function(newShippingAddress,city,street){return!this._isVirtualQuote()&&(newShippingAddress&&(newShippingAddress.city||newShippingAddress.street)&&(newShippingAddress.city!=city||!_.isEqual(newShippingAddress.street,street)));},_isNeededRecollectBilling:function(newBillAddress,billingAddressCountry,billingAddressCity){var isNeedRecollectByCountry=newBillAddress&&newBillAddress.countryId&&newBillAddress.countryId!==billingAddressCountry,isNeedRecollectByCity=newBillAddress&&newBillAddress.city&&newBillAddress.city!==billingAddressCity;return this.isPageLoaded&&(isNeedRecollectByCountry||isNeedRecollectByCity);},_insertPolyfills:function(){if(typeof Object.assign!='function'){Object.defineProperty(Object,\"assign\",{value:function assign(target,varArgs){'use strict';if(target==null){throw new TypeError('Cannot convert undefined or null to object');}\nvar to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey];}}}}\nreturn to;},writable:true,configurable:true});}}});});","Amasty_Conditions/js/model/subscriber.min.js":"define(['ko'],function(ko){return{isLoading:ko.observable(false)}});","Magento_GiftCardAccount/js/payment-method.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.paymentMethod',{options:{paymentName:'payment[method]',paymentValue:'free'},_create:function(){var options=this.options;$.each(this.element[0].elements,function(){if(this.name===options.paymentName&&this.value===options.paymentValue){$(this).prop({'checked':true,'disabled':false}).parent().show();}else if($(this).closest('div.actions').length===0){$(this).parent().prop('disabled',true);}});}});return $.mage.paymentMethod;});","Magento_GiftCardAccount/js/gift-card.min.js":"define(['jquery','jquery-ui-modules/widget','mage/validation'],function($){'use strict';$.widget('mage.giftCard',{_create:function(){$(this.options.checkStatus).on('click',$.proxy(function(){var giftCardStatusId,giftCardSpinnerId,messages,formElement,formData={},captchaReload;if(this.element.validation().valid()){giftCardStatusId=this.options.giftCardStatusId;giftCardSpinnerId=$(this.options.giftCardSpinnerId);messages=this.options.messages;if(this.options.giftCardFormSelector){formElement=document.querySelector(this.options.giftCardFormSelector);}else{formElement=$(this.options.giftCardCodeSelector).closest('form');}\nif(formElement){$(formElement).find('input').each(function(){formData[$(this).attr('name')]=$(this).val();});}else{formData['giftcard_code']=$(this.options.giftCardCodeSelector).val();}\n$.ajax({url:this.options.giftCardStatusUrl,type:'post',cache:false,data:formData,beforeSend:function(){giftCardSpinnerId.show();},success:function(response){$(messages).hide();captchaReload=$('.captcha-reload');if(captchaReload.length){captchaReload.trigger('click');}\n$(giftCardStatusId).html(response);},complete:function(){giftCardSpinnerId.hide();}});}},this));}});return $.mage.giftCard;});","Magento_GiftCardAccount/js/action/get-gift-card-information.min.js":"define(['ko','Magento_Checkout/js/model/url-builder','mage/storage','../model/payment/gift-card-messages','Magento_GiftCardAccount/js/model/gift-card','Magento_Customer/js/model/customer','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/error-processor'],function(ko,urlBuilder,storage,messageList,giftCardAccount,customer,quote,errorProcessor){'use strict';return{isLoading:ko.observable(false),check:function(giftCardCode){var self=this,serviceUrl;this.isLoading(true);if(!customer.isLoggedIn()){serviceUrl=urlBuilder.createUrl('/carts/guest-carts/:cartId/checkGiftCard/:giftCardCode',{cartId:quote.getQuoteId(),giftCardCode:giftCardCode});}else{serviceUrl=urlBuilder.createUrl('/carts/mine/checkGiftCard/:giftCardCode',{giftCardCode:giftCardCode});}\nmessageList.clear();storage.get(serviceUrl,false).done(function(response){giftCardAccount.isChecked(true);giftCardAccount.code(giftCardCode);giftCardAccount.amount(response);giftCardAccount.isValid(true);}).fail(function(response){giftCardAccount.isValid(false);errorProcessor.process(response,messageList);}).always(function(){self.isLoading(false);});}};});","Magento_GiftCardAccount/js/action/remove-gift-card-from-quote.min.js":"define(['jquery','Magento_Checkout/js/model/url-builder','mage/storage','Magento_Customer/js/model/customer','Magento_Checkout/js/model/quote','Magento_Checkout/js/action/get-payment-information','Magento_Checkout/js/model/full-screen-loader','Magento_Checkout/js/model/error-processor','Magento_GiftCardAccount/js/model/payment/gift-card-messages','mage/translate'],function($,urlBuilder,storage,customer,quote,getPaymentInformationAction,fullScreenLoader,errorProcessor,messageList){'use strict';return function(giftCardCode){var serviceUrl,message=$.mage.__('Gift Card %1 was removed.').replace('%1',giftCardCode);if(!customer.isLoggedIn()){serviceUrl=urlBuilder.createUrl('/carts/guest-carts/:cartId/giftCards/:giftCardCode',{cartId:quote.getQuoteId(),giftCardCode:giftCardCode});}else{serviceUrl=urlBuilder.createUrl('/carts/mine/giftCards/:giftCardCode',{giftCardCode:giftCardCode});}\nmessageList.clear();fullScreenLoader.startLoader();return storage.delete(serviceUrl).done(function(response){if(response){$.when(getPaymentInformationAction()).always(function(){fullScreenLoader.stopLoader();});messageList.addSuccessMessage({'message':message});}}).fail(function(response){errorProcessor.process(response,messageList);fullScreenLoader.stopLoader();});};});","Magento_GiftCardAccount/js/action/set-gift-card-information.min.js":"define(['jquery','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/url-builder','mage/storage','../model/payment/gift-card-messages','Magento_Checkout/js/model/error-processor','Magento_Customer/js/model/customer','Magento_Checkout/js/model/full-screen-loader','Magento_Checkout/js/action/get-payment-information','Magento_Checkout/js/model/totals'],function($,quote,urlBuilder,storage,messageList,errorProcessor,customer,fullScreenLoader,getPaymentInformationAction,totals){'use strict';return function(giftCardCode){var serviceUrl,payload,message=$.mage.__('Gift Card %1 was added.').replace('%1',giftCardCode);if(!customer.isLoggedIn()){serviceUrl=urlBuilder.createUrl('/carts/guest-carts/:cartId/giftCards',{cartId:quote.getQuoteId()});payload={cartId:quote.getQuoteId(),giftCardAccountData:{'gift_cards':giftCardCode}};}else{serviceUrl=urlBuilder.createUrl('/carts/mine/giftCards',{});payload={cartId:quote.getQuoteId(),giftCardAccountData:{'gift_cards':giftCardCode}};}\nmessageList.clear();fullScreenLoader.startLoader();storage.post(serviceUrl,JSON.stringify(payload)).done(function(response){var deferred=$.Deferred();if(response){totals.isLoading(true);getPaymentInformationAction(deferred);$.when(deferred).done(function(){totals.isLoading(false);});messageList.addSuccessMessage({'message':message});}}).fail(function(response){totals.isLoading(false);errorProcessor.process(response,messageList);}).always(function(){fullScreenLoader.stopLoader();});};});","Magento_GiftCardAccount/js/view/cart/totals/gift-card-account.min.js":"define(['jquery','Magento_GiftCardAccount/js/view/summary/gift-card-account','mage/url','Magento_Checkout/js/model/totals'],function($,Component,url,totals){'use strict';return Component.extend({defaults:{template:'Magento_GiftCardAccount/cart/totals/gift-card-account'},getRemoveUrl:function(giftCardCode){return url.build('giftcard/cart/remove/code/'+giftCardCode);},isAvailable:function(){return totals.getSegment('giftcardaccount')&&totals.getSegment('giftcardaccount').value!==0;},removeGiftCard:function(giftCardCode,event){event.preventDefault();if(giftCardCode){$.post(this.getRemoveUrl(giftCardCode)).always(function(){location.reload();});}}});});","Magento_GiftCardAccount/js/view/summary/gift-card-account.min.js":"define(['jquery','ko','Magento_Checkout/js/view/summary/abstract-total','mage/url','Magento_Checkout/js/model/totals','Magento_GiftCardAccount/js/action/remove-gift-card-from-quote'],function($,ko,generic,url,totals,removeAction){'use strict';return generic.extend({defaults:{template:'Magento_GiftCardAccount/summary/gift-card-account'},getAppliedGiftCards:function(){if(totals.getSegment('giftcardaccount')){return JSON.parse(totals.getSegment('giftcardaccount')['extension_attributes']['gift_cards']);}\nreturn[];},isAvailable:function(){return this.isFullMode()&&totals.getSegment('giftcardaccount')&&totals.getSegment('giftcardaccount').value!=0;},getAmount:function(usedBalance){return this.getFormattedPrice(usedBalance);},removeGiftCard:function(giftCardCode,event){event.preventDefault();if(giftCardCode){removeAction(giftCardCode);}}});});","Magento_GiftCardAccount/js/view/payment/gift-card-information.min.js":"define(['ko','uiComponent','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/quote','Magento_Catalog/js/price-utils'],function(ko,Component,totals,quote,priceUtils){'use strict';return Component.extend({defaults:{template:'Magento_GiftCardAccount/payment/gift-card-information'},isVisible:ko.observable(false),amountApplied:ko.observable(null),initialize:function(){this._super();totals.totals.subscribe(function(){var giftCardSegment=totals.getSegment('giftcardaccount');this.isVisible(giftCardSegment!==null);if(giftCardSegment){this.amountApplied(this.getFormattedPrice(giftCardSegment.value*-1));}},this);},getFormattedPrice:function(price){return priceUtils.formatPrice(price,quote.getPriceFormat());}});});","Magento_GiftCardAccount/js/view/payment/gift-card-account.min.js":"define(['jquery','ko','uiComponent','Magento_GiftCardAccount/js/action/set-gift-card-information','Magento_GiftCardAccount/js/action/get-gift-card-information','Magento_Checkout/js/model/totals','Magento_GiftCardAccount/js/model/gift-card','Magento_Checkout/js/model/quote','Magento_Catalog/js/price-utils','mage/validation'],function($,ko,Component,setGiftCardAction,getGiftCardAction,totals,giftCardAccount,quote,priceUtils){'use strict';return Component.extend({defaults:{template:'Magento_GiftCardAccount/payment/gift-card-account',giftCartCode:''},isLoading:getGiftCardAction.isLoading,giftCardAccount:giftCardAccount,initObservable:function(){this._super().observe('giftCartCode');return this;},setGiftCard:function(){if(this.validate()){setGiftCardAction([this.giftCartCode()]);}},checkBalance:function(){if(this.validate()){getGiftCardAction.check(this.giftCartCode());}},getAmount:function(price){return priceUtils.formatPrice(price,quote.getPriceFormat());},validate:function(){var form='#giftcard-form';return $(form).validation()&&$(form).validation('isValid');}});});","Magento_GiftCardAccount/js/view/payment/gift-card-messages.min.js":"define(['Magento_Ui/js/view/messages','../../model/payment/gift-card-messages'],function(Component,messageContainer){'use strict';return Component.extend({initialize:function(config){return this._super(config,messageContainer);}});});","Magento_GiftCardAccount/js/model/gift-card.min.js":"define(['ko'],function(ko){'use strict';return{code:ko.observable(false),amount:ko.observable(false),isValid:ko.observable(false),isChecked:ko.observable(false)};});","Magento_GiftCardAccount/js/model/payment/gift-card-messages.min.js":"define(['ko','Magento_Ui/js/model/messages'],function(ko,Messages){'use strict';return new Messages();});","magnifier/magnifier.min.js":"(function($){$.fn.magnify=function(options){'use strict';var magnify=new Magnify($(this),options);return magnify;};function Magnify(element,options){var customUserOptions=options||{},$box=$(element),$thumb,that=this,largeWrapper=options.largeWrapper||'.magnifier-preview',$magnifierPreview=$(largeWrapper);curThumb=null,magnifierOptions={x:0,y:0,w:0,h:0,lensW:0,lensH:0,lensBgX:0,lensBgY:0,largeW:0,largeH:0,largeL:0,largeT:0,zoom:2,zoomMin:1.1,zoomMax:5,mode:'outside',eventType:'click',status:0,zoomAttached:false,zoomable:customUserOptions.zoomable!==undefined?customUserOptions.zoomable:false,onthumbenter:customUserOptions.onthumbenter!==undefined?customUserOptions.onthumbenter:null,onthumbmove:customUserOptions.onthumbmove!==undefined?customUserOptions.onthumbmove:null,onthumbleave:customUserOptions.onthumbleave!==undefined?customUserOptions.onthumbleave:null,onzoom:customUserOptions.onzoom!==undefined?customUserOptions.onzoom:null},pos={t:0,l:0,x:0,y:0},gId=0,status=0,curIdx='',curLens=null,curLarge=null,lensbg=customUserOptions.bg!==undefined?customUserOptions.lensbg:true,gZoom=customUserOptions.zoom!==undefined?customUserOptions.zoom:magnifierOptions.zoom,gZoomMin=customUserOptions.zoomMin!==undefined?customUserOptions.zoomMin:magnifierOptions.zoomMin,gZoomMax=customUserOptions.zoomMax!==undefined?customUserOptions.zoomMax:magnifierOptions.zoomMax,gMode=customUserOptions.mode||magnifierOptions.mode,gEventType=customUserOptions.eventType||magnifierOptions.eventType,data={},inBounds=false,isOverThumb=false,rate=1,paddingX=0,paddingY=0,enabled=true,showWrapper=true;var MagnifyCls={magnifyHidden:'magnify-hidden',magnifyOpaque:'magnify-opaque',magnifyFull:'magnify-fullimage'};that.update=function(){updateLensOnLoad();};that.init=function(){_init($box,options);};function _toBoolean(str){if(typeof str==='string'){if(str==='true'){return true;}else if(str==='false'||''){return false;}\nconsole.warn('Wrong type: can\\'t be transformed to Boolean');}else if(typeof str==='boolean'){return str;}}\nfunction createLens(thumb){if($(thumb).siblings('.magnify-lens').length){return false;}\nvar lens=$('<div class=\"magnify-lens magnify-hidden\" data-gallery-role=\"magnifier-zoom\"></div>');$(thumb).parent().append(lens);}\nfunction updateLensOnLoad(idSelectorMainImg,thumb,largeImgInMagnifyLens,largeWrapper){var magnifyLensElement=$box.find('.magnify-lens'),textWrapper;if(data[idSelectorMainImg].status===1){textWrapper=$('<div class=\"magnifier-loader-text\"></div>');magnifyLensElement.className='magnifier-loader magnify-hidden';textWrapper.html('Loading...');magnifyLensElement.html('').append(textWrapper);}else if(data[idSelectorMainImg].status===2){magnifyLensElement.addClass(MagnifyCls.magnifyHidden);magnifyLensElement.html('');largeImgInMagnifyLens.id=idSelectorMainImg+'-large';largeImgInMagnifyLens.style.width=data[idSelectorMainImg].largeImgInMagnifyLensWidth+'px';largeImgInMagnifyLens.style.height=data[idSelectorMainImg].largeImgInMagnifyLensHeight+'px';largeImgInMagnifyLens.className='magnifier-large magnify-hidden';if(data[idSelectorMainImg].mode==='inside'){magnifyLensElement.append(largeImgInMagnifyLens);}else{largeWrapper.html('').append(largeImgInMagnifyLens);}}\ndata[idSelectorMainImg].lensH=data[idSelectorMainImg].lensH>$thumb.height()?$thumb.height():data[idSelectorMainImg].lensH;if(Math.round(data[idSelectorMainImg].lensW)===0){magnifyLensElement.css('display','none');}else{magnifyLensElement.css({width:Math.round(data[idSelectorMainImg].lensW)+'px',height:Math.round(data[idSelectorMainImg].lensH)+'px',display:''});}}\nfunction getMousePos(){var xPos=pos.x-magnifierOptions.x,yPos=pos.y-magnifierOptions.y,t,l;inBounds=xPos<0||yPos<0||xPos>magnifierOptions.w||yPos>magnifierOptions.h?false:true;l=xPos-magnifierOptions.lensW / 2;t=yPos-magnifierOptions.lensH / 2;if(xPos<magnifierOptions.lensW / 2){l=0;}\nif(yPos<magnifierOptions.lensH / 2){t=0;}\nif(xPos-magnifierOptions.w+Math.ceil(magnifierOptions.lensW / 2)>0){l=magnifierOptions.w-Math.ceil(magnifierOptions.lensW+2);}\nif(yPos-magnifierOptions.h+Math.ceil(magnifierOptions.lensH / 2)>0){t=magnifierOptions.h-Math.ceil(magnifierOptions.lensH);}\npos.l=l;pos.t=t;magnifierOptions.lensBgX=pos.l;magnifierOptions.lensBgY=pos.t;if(magnifierOptions.mode==='inside'){magnifierOptions.largeL=Math.round(xPos*(magnifierOptions.zoom-magnifierOptions.lensW / magnifierOptions.w));magnifierOptions.largeT=Math.round(yPos*(magnifierOptions.zoom-magnifierOptions.lensH / magnifierOptions.h));}else{magnifierOptions.largeL=Math.round(magnifierOptions.lensBgX*magnifierOptions.zoom*(magnifierOptions.largeWrapperW / magnifierOptions.w));magnifierOptions.largeT=Math.round(magnifierOptions.lensBgY*magnifierOptions.zoom*(magnifierOptions.largeWrapperH / magnifierOptions.h));}}\nfunction onThumbEnter(){if(_toBoolean(enabled)){magnifierOptions=data[curIdx];curLens=$box.find('.magnify-lens');if(magnifierOptions.status===2){curLens.removeClass(MagnifyCls.magnifyOpaque);curLarge=$('#'+curIdx+'-large');curLarge.removeClass(MagnifyCls.magnifyHidden);}else if(magnifierOptions.status===1){curLens.className='magnifier-loader';}}}\nfunction onThumbLeave(){if(magnifierOptions.status>0){var handler=magnifierOptions.onthumbleave;if(handler!==null){handler({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y});}\nif(!curLens.hasClass(MagnifyCls.magnifyHidden)){curLens.addClass(MagnifyCls.magnifyHidden);if(curLarge!==null){curLarge.addClass(MagnifyCls.magnifyHidden);}}}}\nfunction move(){if(_toBoolean(enabled)){if(status!==magnifierOptions.status){onThumbEnter();}\nif(magnifierOptions.status>0){curThumb.className=magnifierOptions.thumbCssClass+' magnify-opaque';if(magnifierOptions.status===1){curLens.className='magnifier-loader';}else if(magnifierOptions.status===2){curLens.removeClass(MagnifyCls.magnifyHidden);curLarge.removeClass(MagnifyCls.magnifyHidden);curLarge.css({left:'-'+magnifierOptions.largeL+'px',top:'-'+magnifierOptions.largeT+'px'});}\nvar borderOffset=2;pos.t=pos.t<=0?0:pos.t-borderOffset;curLens.css({left:pos.l+paddingX+'px',top:pos.t+paddingY+'px'});if(lensbg){curLens.css({'background-color':'rgba(f,f,f,.5)'});}else{curLens.get(0).style.backgroundPosition='-'+\nmagnifierOptions.lensBgX+'px -'+\nmagnifierOptions.lensBgY+'px';}\nvar handler=magnifierOptions.onthumbmove;if(handler!==null){handler({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y});}}\nstatus=magnifierOptions.status;}}\nfunction setThumbData(mainImage,mainImageData){var thumbBounds=mainImage.getBoundingClientRect(),w=0,h=0;mainImageData.x=Math.round(thumbBounds.left);mainImageData.y=Math.round(thumbBounds.top);mainImageData.w=Math.round(thumbBounds.right-mainImageData.x);mainImageData.h=Math.round(thumbBounds.bottom-mainImageData.y);if(mainImageData.mode==='inside'){w=mainImageData.w;h=mainImageData.h;}else{w=mainImageData.largeWrapperW;h=mainImageData.largeWrapperH;}\nmainImageData.largeImgInMagnifyLensWidth=Math.round(mainImageData.zoom*w);mainImageData.largeImgInMagnifyLensHeight=Math.round(mainImageData.zoom*h);mainImageData.lensW=Math.round(mainImageData.w / mainImageData.zoom);mainImageData.lensH=Math.round(mainImageData.h / mainImageData.zoom);}\nfunction _init($box,options){var opts={};if(options.thumb===undefined){return false;}\n$thumb=$box.find(options.thumb);if($thumb.length){for(var key in options){opts[key]=options[key];}\nopts.thumb=$thumb;enabled=opts.enabled;if(_toBoolean(enabled)){$magnifierPreview.show().css('display','');$magnifierPreview.addClass(MagnifyCls.magnifyHidden);set(opts);}else{$magnifierPreview.empty().hide();}}\nreturn that;}\nfunction hoverEvents(thumb){$(thumb).on('mouseover',function(e){if(showWrapper){if(magnifierOptions.status!==0){onThumbLeave();}\nhandleEvents(e);isOverThumb=inBounds;}}).trigger('mouseover');}\nfunction clickEvents(thumb){$(thumb).on('click',function(e){if(showWrapper){if(!isOverThumb){if(magnifierOptions.status!==0){onThumbLeave();}\nhandleEvents(e);isOverThumb=true;}}});}\nfunction bindEvents(eType,thumb){switch(eType){case'hover':hoverEvents(thumb);break;case'click':clickEvents(thumb);break;}}\nfunction handleEvents(e){var src=e.target;curIdx=src.id;curThumb=src;onThumbEnter(src);setThumbData(curThumb,magnifierOptions);pos.x=e.clientX;pos.y=e.clientY;getMousePos();move();var handler=magnifierOptions.onthumbenter;if(handler!==null){handler({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y});}}\nfunction set(options){if(data[options.thumb.id]!==undefined){curThumb=options.thumb;return false;}\nvar thumbObj=new Image(),largeObj=new Image(),$thumb=options.thumb,thumb=$thumb.get(0),idx=thumb.id,largeUrl,largeWrapper=$(options.largeWrapper),zoom=options.zoom||thumb.getAttribute('data-zoom')||gZoom,zoomMin=options.zoomMin||gZoomMin,zoomMax=options.zoomMax||gZoomMax,mode=options.mode||thumb.getAttribute('data-mode')||gMode,eventType=options.eventType||thumb.getAttribute('data-eventType')||gEventType,onthumbenter=options.onthumbenter!==undefined?options.onthumbenter:magnifierOptions.onthumbenter,onthumbleave=options.onthumbleave!==undefined?options.onthumbleave:magnifierOptions.onthumbleave,onthumbmove=options.onthumbmove!==undefined?options.onthumbmove:magnifierOptions.onthumbmove;largeUrl=$thumb.data('original')||customUserOptions.full||$thumb.attr('src');if(thumb.id===''){idx=thumb.id='magnifier-item-'+gId;gId+=1;}\ncreateLens(thumb,idx);if(options.width){largeWrapper.width(options.width);}\nif(options.height){largeWrapper.height(options.height);}\nif(options.top){if(typeof options.top=='function'){var top=options.top()+'px';}else{var top=options.top+'px';}\nif(largeWrapper.length){largeWrapper[0].style.top=top.replace('%px','%');}}\nif(options.left){if(typeof options.left=='function'){var left=options.left()+'px';}else{var left=options.left+'px';}\nif(largeWrapper.length){largeWrapper[0].style.left=left.replace('%px','%');}}\ndata[idx]={zoom:zoom,zoomMin:zoomMin,zoomMax:zoomMax,mode:mode,eventType:eventType,thumbCssClass:thumb.className,zoomAttached:false,status:0,largeUrl:largeUrl,largeWrapperId:mode==='outside'?largeWrapper.attr('id'):null,largeWrapperW:mode==='outside'?largeWrapper.width():null,largeWrapperH:mode==='outside'?largeWrapper.height():null,onthumbenter:onthumbenter,onthumbleave:onthumbleave,onthumbmove:onthumbmove};paddingX=($thumb.parent().width()-$thumb.width())/ 2;paddingY=($thumb.parent().height()-$thumb.height())/ 2;showWrapper=false;$(thumbObj).on('load',function(){data[idx].status=1;$(largeObj).on('load',function(){if(largeObj.width>largeWrapper.width()||largeObj.height>largeWrapper.height()){showWrapper=true;bindEvents(eventType,thumb);data[idx].status=2;if(largeObj.width>largeObj.height){data[idx].zoom=largeObj.width / largeWrapper.width();}else{data[idx].zoom=largeObj.height / largeWrapper.height();}\nsetThumbData(thumb,data[idx]);updateLensOnLoad(idx,thumb,largeObj,largeWrapper);}});largeObj.src=data[idx].largeUrl;});thumbObj.src=thumb.src;}\nfunction onMouseLeave(){onThumbLeave();isOverThumb=false;$magnifierPreview.addClass(MagnifyCls.magnifyHidden);}\nfunction onMousemove(e){pos.x=e.clientX;pos.y=e.clientY;getMousePos();if(gEventType==='hover'){isOverThumb=inBounds;}\nif(inBounds&&isOverThumb&&gMode==='outside'){$magnifierPreview.removeClass(MagnifyCls.magnifyHidden);move();}}\nfunction onScroll(){if(curThumb!==null){setThumbData(curThumb,magnifierOptions);}}\n$(window).on('scroll',onScroll);$(window).resize(function(){_init($box,customUserOptions);});$box.on('mousemove',onMousemove);$box.on('mouseleave',onMouseLeave);_init($box,customUserOptions);}}(jQuery));","magnifier/magnify.min.js":"define(['jquery','underscore','magnifier/magnifier'],function($,_){'use strict';return function(config,element){var isTouchEnabled='ontouchstart'in document.documentElement,gallerySelector='[data-gallery-role=\"gallery\"]',magnifierSelector='[data-gallery-role=\"magnifier\"]',magnifierZoomSelector='[data-gallery-role=\"magnifier-zoom\"]',zoomInButtonSelector='[data-gallery-role=\"fotorama__zoom-in\"]',zoomOutButtonSelector='[data-gallery-role=\"fotorama__zoom-out\"]',fullscreenImageSelector='[data-gallery-role=\"stage-shaft\"] [data-active=\"true\"] .fotorama__img--full',imageDraggableClass='fotorama__img--draggable',imageZoommable='fotorama__img--zoommable',zoomInLoaded='zoom-in-loaded',zoomOutLoaded='zoom-out-loaded',zoomInDisabled='fotorama__zoom-in--disabled',zoomOutDisabled='fotorama__zoom-out--disabled',keyboardNavigation,videoContainerClass='fotorama-video-container',hideMagnifier,dragFlag,endX,transitionEnabled,transitionActive=false,tapFlag=0,allowZoomOut=false,allowZoomIn=true;(function(){var style=document.documentElement.style,transitionEnabled=style.transition!==undefined||style.WebkitTransition!==undefined||style.MozTransition!==undefined||style.MsTransition!==undefined||style.OTransition!==undefined;})();function getImageSize(img){return{rw:img.naturalWidth,rh:img.naturalHeight};}\nfunction calculateMinSize($image){var minHeight,minWidth,height=$image.height(),width=$image.width(),parentHeight=$image.parent().height(),parentWidth=$image.parent().width();if(width>parentWidth||height>parentHeight){if(width / height<parentWidth / parentHeight){minHeight=parentHeight;minWidth=width*(parentHeight / height);}else{minWidth=parentWidth;minHeight=height*parentWidth / width;}\n$image.css({'min-width':minWidth,'min-height':minHeight});}}\nfunction toggleZoomable($image,flag){if(flag){$image.css({'min-width':$image.width(),'min-height':$image.height(),'width':$image.width(),'height':$image.height()}).addClass(imageZoommable);}else{$image.css({width:'',height:'',top:'',left:'',right:'',bottom:''}).removeClass(imageZoommable);calculateMinSize($image);}}\nfunction resetVars($image){allowZoomIn=true;allowZoomOut=dragFlag=transitionActive=false;$image.hasClass(imageDraggableClass)&&$image.removeClass(imageDraggableClass);toggleZoomable($image,false);}\nfunction hideZoomControls(isHide){if(isHide){$(zoomInButtonSelector).addClass(zoomInDisabled);$(zoomOutButtonSelector).addClass(zoomOutDisabled);}else{$(zoomInButtonSelector).removeClass(zoomInDisabled);$(zoomOutButtonSelector).removeClass(zoomOutDisabled);}}\nfunction asyncToggleZoomButtons(path,$image){var img=new Image();img.onload=function(){this.height>$image.parent().height()||this.width>$image.parent().width()?hideZoomControls(false):hideZoomControls(true);};img.src=path;}\nfunction toggleZoomButtons($image,isTouchScreen,isVideoActiveFrame){var path=$image.attr('src');if(path&&!isTouchScreen&&!isVideoActiveFrame){asyncToggleZoomButtons(path,$image);}else{hideZoomControls(true);}}\nfunction resizeHandler(e,$image){var imageSize,parentWidth,parentHeight,isImageSmall,isImageFit;if(!e.data.$image||!e.data.$image.length)\nreturn;imageSize=getImageSize($(fullscreenImageSelector)[0]);parentWidth=e.data.$image.parent().width();parentHeight=e.data.$image.parent().height();isImageSmall=parentWidth>=imageSize.rw&&parentHeight>=imageSize.rh;isImageFit=parentWidth>e.data.$image.width()&&parentHeight>e.data.$image.height();toggleZoomButtons(e.data.$image,isTouchEnabled,checkForVideo(e.data.fotorama.activeFrame.$stageFrame));calculateMinSize(e.data.$image);if(e.data.$image.hasClass(imageZoommable)&&!allowZoomOut||isImageSmall||isImageFit){resetVars(e.data.$image);}\nif(!isImageSmall){toggleStandartNavigation();}}\nfunction getTopValue($image,topProp,step,height,containerHeight){var top;if(parseInt($image.css('marginTop'))||parseInt($image.css('marginLeft'))){top=dragFlag?topProp-step / 4:0;top=top<containerHeight-height?containerHeight-height:top;top=top>height-containerHeight?height-containerHeight:top;}else{top=topProp+step / 2;top=top<containerHeight-height?containerHeight-height:top;top=top>0?0:top;if(!dragFlag&&step<0){top=top<(containerHeight-height)/ 2?(containerHeight-height)/ 2:top;}}\nreturn top;}\nfunction getLeftValue(leftProp,step,width,containerWidth){var left;left=leftProp+step / 2;left=left<containerWidth-width?containerWidth-width:left;left=left>0?0:left;if(!dragFlag&&step<0){left=left<(containerWidth-width)/ 2?(containerWidth-width)/ 2:left;}\nreturn left;}\nfunction checkFullscreenImagePosition($image,dimentions,widthStep,heightStep){var $imageContainer,containerWidth,containerHeight,settings,top,left,right,bottom,ratio;if($(gallerySelector).data('fotorama').fullScreen){transitionActive=true;$imageContainer=$image.parent();containerWidth=$imageContainer.width();containerHeight=$imageContainer.height();top=$image.position().top;left=$image.position().left;ratio=$image.width()/ $image.height();dimentions.height=isNaN(dimentions.height)?dimentions.width / ratio:dimentions.height;dimentions.width=isNaN(dimentions.width)?dimentions.height*ratio:dimentions.width;top=dimentions.height>=containerHeight?getTopValue($image,top,heightStep,dimentions.height,containerHeight):0;left=dimentions.width>=containerWidth?getLeftValue(left,widthStep,dimentions.width,containerWidth):0;right=dragFlag&&left<(containerWidth-dimentions.width)/ 2?0:left;bottom=dragFlag?0:top;settings=$.extend(dimentions,{top:top,left:left,right:right});$image.css(settings);}}\nfunction toggleStandartNavigation(){var $selectable=$('a[href], area[href], input, select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]').not('[tabindex=-1], [disabled], :hidden'),fotorama=$(gallerySelector).data('fotorama'),$focus=$(':focus'),index;if(fotorama.fullScreen){$selectable.each(function(number){if($(this).is($focus)){index=number;}});fotorama.setOptions({swipe:!allowZoomOut,keyboard:!allowZoomOut});if(_.isNumber(index)){$selectable.eq(index).focus();}}}\nfunction zoomIn(e,xStep,yStep){var $image,imgOriginalSize,imageWidth,imageHeight,zoomWidthStep,zoomHeightStep,widthResult,heightResult,ratio,dimentions={};if(allowZoomIn&&(!transitionEnabled||!transitionActive)&&(isTouchEnabled||!$(zoomInButtonSelector).hasClass(zoomInDisabled))){$image=$(fullscreenImageSelector);imgOriginalSize=getImageSize($image[0]);imageWidth=$image.width();imageHeight=$image.height();ratio=imageWidth / imageHeight;allowZoomOut=true;toggleStandartNavigation();if(!$image.hasClass(imageZoommable)){toggleZoomable($image,true);}\ne.preventDefault();if(imageWidth>=imageHeight){zoomWidthStep=xStep||Math.ceil(imageWidth*parseFloat(config.magnifierOpts.fullscreenzoom)/ 100);widthResult=imageWidth+zoomWidthStep;if(widthResult>=imgOriginalSize.rw){widthResult=imgOriginalSize.rw;zoomWidthStep=xStep||widthResult-imageWidth;allowZoomIn=false;}\nheightResult=widthResult / ratio;zoomHeightStep=yStep||heightResult-imageHeight;}else{zoomHeightStep=yStep||Math.ceil(imageHeight*parseFloat(config.magnifierOpts.fullscreenzoom)/ 100);heightResult=imageHeight+zoomHeightStep;if(heightResult>=imgOriginalSize.rh){heightResult=imgOriginalSize.rh;zoomHeightStep=yStep||heightResult-imageHeight;allowZoomIn=false;}\nwidthResult=heightResult*ratio;zoomWidthStep=xStep||widthResult-imageWidth;}\nif(imageWidth>=imageHeight&&imageWidth!==imgOriginalSize.rw){dimentions=$.extend(dimentions,{width:widthResult,height:'auto'});checkFullscreenImagePosition($image,dimentions,-zoomWidthStep,-zoomHeightStep);}else if(imageWidth<imageHeight&&imageHeight!==imgOriginalSize.rh){dimentions=$.extend(dimentions,{width:'auto',height:heightResult});checkFullscreenImagePosition($image,dimentions,-zoomWidthStep,-zoomHeightStep);}}\nreturn false;}\nfunction zoomOut(e,xStep,yStep){var $image,widthResult,heightResult,dimentions,parentWidth,parentHeight,imageWidth,imageHeight,zoomWidthStep,zoomHeightStep,ratio,fitIntoParent;if(allowZoomOut&&(!transitionEnabled||!transitionActive)&&(isTouchEnabled||!$(zoomOutButtonSelector).hasClass(zoomOutDisabled))){allowZoomIn=true;$image=$(fullscreenImageSelector);parentWidth=$image.parent().width();parentHeight=$image.parent().height();imageWidth=$image.width();imageHeight=$image.height();ratio=imageWidth / imageHeight;e.preventDefault();if(imageWidth>=imageHeight){zoomWidthStep=xStep||Math.ceil(imageWidth*parseFloat(config.magnifierOpts.fullscreenzoom)/ 100);widthResult=imageWidth-zoomWidthStep;heightResult=widthResult / ratio;zoomHeightStep=yStep||imageHeight-heightResult;}else{zoomHeightStep=yStep||Math.ceil(imageHeight*parseFloat(config.magnifierOpts.fullscreenzoom)/ 100);heightResult=imageHeight-zoomHeightStep;widthResult=heightResult*ratio;zoomWidthStep=xStep||imageWidth-widthResult;}\nfitIntoParent=function(){if(ratio>parentWidth / parentHeight){widthResult=parentWidth;zoomWidthStep=imageWidth-widthResult;heightResult=widthResult / ratio;zoomHeightStep=imageHeight-heightResult;dimentions={width:widthResult,height:'auto'};}else{heightResult=parentHeight;zoomHeightStep=imageHeight-heightResult;widthResult=heightResult*ratio;zoomWidthStep=imageWidth-widthResult;dimentions={width:'auto',height:heightResult};}\ncheckFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);};if(imageWidth>=imageHeight){if(widthResult>parentWidth){dimentions={width:widthResult,height:'auto'};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else if(heightResult>parentHeight){dimentions={width:widthResult,height:'auto'};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else{allowZoomOut=dragFlag=false;toggleStandartNavigation();fitIntoParent();}}else if(heightResult>parentHeight){dimentions={width:'auto',height:heightResult};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else if(widthResult>parentWidth){dimentions={width:'auto',height:heightResult};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else{allowZoomOut=dragFlag=false;toggleStandartNavigation();fitIntoParent();}}\nreturn false;}\nfunction mousewheel(e,fotorama,element){var $fotoramaStage=fotorama.activeFrame.$stageFrame,fotoramaStage=$fotoramaStage.get(0);function onWheel(e){var delta=e.deltaY||e.wheelDelta,ev=e||window.event;if($(gallerySelector).data('fotorama').fullScreen){if(e.deltaY){if(delta>0){zoomOut(ev);}else{zoomIn(ev);}}else if(delta>0){zoomIn(ev);}else{zoomOut(ev);}\ne.preventDefault?e.preventDefault():e.returnValue=false;}}\nif(!$fotoramaStage.hasClass('magnify-wheel-loaded')){if(fotoramaStage&&fotoramaStage.addEventListener){if('onwheel'in document){fotoramaStage.addEventListener('wheel',onWheel);}else if('onmousewheel'in document){fotoramaStage.addEventListener('mousewheel',onWheel);}else{fotoramaStage.addEventListener('MozMousePixelScroll',onWheel);}\n$fotoramaStage.addClass('magnify-wheel-loaded');}}}\nfunction magnifierFullscreen(fotorama){var isDragActive=false,startX,startY,imagePosX,imagePosY,touch,swipeSlide,$gallery=$(gallerySelector),$image=$(fullscreenImageSelector,$gallery),$imageContainer=$('[data-gallery-role=\"stage-shaft\"] [data-active=\"true\"]'),gallery=$gallery.data('fotorama'),pinchDimention;swipeSlide=_.throttle(function(direction){$(gallerySelector).data('fotorama').show(direction);},500,{trailing:false});function getTop($el){return parseInt($el.get(0).style.top);}\nfunction shiftImage(dx,dy,e){var top=+imagePosY+dy,left=+imagePosX+dx,swipeCondition=$image.width()/ 10+20;dragFlag=true;if($image.offset().left===$imageContainer.offset().left+$imageContainer.width()-$image.width()&&e.keyCode===39||endX-1<$imageContainer.offset().left+$imageContainer.width()-$image.width()&&dx<0&&_.isNumber(endX)&&(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')){endX=null;swipeSlide('>');return;}\nif($image.offset().left===$imageContainer.offset().left&&dx!==0&&e.keyCode===37||endX===$imageContainer.offset().left&&dx>0&&(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')){endX=null;swipeSlide('<');return;}\nif($image.height()>$imageContainer.height()){if($imageContainer.height()>$image.height()+top){$image.css('top',$imageContainer.height()-$image.height());}else{top=$image.height()-getTop($image)-$imageContainer.height();dy=dy<top?dy:top;$image.css('top',getTop($image)+dy);}}\nif($image.width()>$imageContainer.width()){if($imageContainer.offset().left+$imageContainer.width()>left+$image.width()){left=$imageContainer.offset().left+$imageContainer.width()-$image.width();}else{left=$imageContainer.offset().left<left?$imageContainer.offset().left:left;}\n$image.offset({'left':left});$image.css('right','');}else if(Math.abs(dy)<1&&allowZoomOut&&!(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')){dx<0?$(gallerySelector).data('fotorama').show('>'):$(gallerySelector).data('fotorama').show('<');}\nif($image.width()<=$imageContainer.width()&&allowZoomOut&&(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')&&Math.abs(dx)>Math.abs(dy)&&Math.abs(dx)>swipeCondition){dx<0?swipeSlide('>'):swipeSlide('<');}}\nfunction dblClickHandler(e){var imgOriginalSize=getImageSize($image[0]),proportions;if(imgOriginalSize.rh<$image.parent().height()&&imgOriginalSize.rw<$image.parent().width()){return;}\nproportions=imgOriginalSize.rw / imgOriginalSize.rh;if(allowZoomIn){zoomIn(e,imgOriginalSize.rw-$image.width(),imgOriginalSize.rh-$image.height());}else if(proportions>$imageContainer.width()/ $imageContainer.height()){zoomOut(e,imgOriginalSize.rw-$imageContainer.width(),imgOriginalSize.rw / proportions);}else{zoomOut(e,imgOriginalSize.rw*proportions,imgOriginalSize.rh-$imageContainer.height());}}\nfunction detectDoubleTap(e){var now=new Date().getTime(),timesince=now-tapFlag;if(timesince<400&&timesince>0){transitionActive=false;tapFlag=0;dblClickHandler(e);}else{tapFlag=new Date().getTime();}}\nif(isTouchEnabled){$image.off('tap');$image.on('tap',function(e){if(e.originalEvent.originalEvent.touches.length===0){detectDoubleTap(e);}});}else{$image.unbind('dblclick');$image.dblclick(dblClickHandler);}\nif(gallery.fullScreen){toggleZoomButtons($image,isTouchEnabled,checkForVideo(fotorama.activeFrame.$stageFrame));}\nfunction getDimention(event){return Math.sqrt((event.touches[0].clientX-event.touches[1].clientX)*(event.touches[0].clientX-event.touches[1].clientX)+\n(event.touches[0].clientY-event.touches[1].clientY)*(event.touches[0].clientY-event.touches[1].clientY));}\n$image.off(isTouchEnabled?'touchstart':'pointerdown mousedown MSPointerDown');$image.on(isTouchEnabled?'touchstart':'pointerdown mousedown MSPointerDown',function(e){if(e&&e.originalEvent.touches&&e.originalEvent.touches.length>=2){e.preventDefault();pinchDimention=getDimention(e.originalEvent);isDragActive=false;if($image.hasClass(imageDraggableClass)){$image.removeClass(imageDraggableClass);}}else if(gallery.fullScreen&&(!transitionEnabled||!transitionActive)){imagePosY=getTop($image);imagePosX=$image.offset().left;if(isTouchEnabled){touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];e.clientX=touch.pageX;e.clientY=touch.pageY;}\nstartX=e.clientX||e.originalEvent.clientX;startY=e.clientY||e.originalEvent.clientY;isDragActive=true;}\nif($image.offset()&&$image.width()>$imageContainer.width()){endX=$image.offset().left;}});$image.off(isTouchEnabled?'touchmove':'mousemove pointermove MSPointerMove');$image.on(isTouchEnabled?'touchmove':'mousemove pointermove MSPointerMove',function(e){if(e&&e.originalEvent.touches&&e.originalEvent.touches.length>=2){e.preventDefault();var currentDimention=getDimention(e.originalEvent);if($image.hasClass(imageDraggableClass)){$image.removeClass(imageDraggableClass);}\nif(currentDimention<pinchDimention){zoomOut(e);pinchDimention=currentDimention;}else if(currentDimention>pinchDimention){zoomIn(e);pinchDimention=currentDimention;}}else{var clientX,clientY;if(gallery.fullScreen&&isDragActive&&(!transitionEnabled||!transitionActive)){if(allowZoomOut&&!$image.hasClass(imageDraggableClass)){$image.addClass(imageDraggableClass);}\nclientX=e.clientX||e.originalEvent.clientX;clientY=e.clientY||e.originalEvent.clientY;e.preventDefault();if(isTouchEnabled){touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];clientX=touch.pageX;clientY=touch.pageY;}\nif(allowZoomOut){imagePosY=getTop($(fullscreenImageSelector,$gallery));shiftImage(clientX-startX,clientY-startY,e);}}}});$image.off('transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd ');$image.on('transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd',function(){transitionActive=false;});if(keyboardNavigation){$(document).unbind('keydown',keyboardNavigation);}\nkeyboardNavigation=function(e){var step=40,$focus=$(':focus'),isFullScreen=$(gallerySelector).data('fotorama').fullScreen,initVars=function(){imagePosX=$(fullscreenImageSelector,$gallery).offset().left;imagePosY=getTop($(fullscreenImageSelector,$gallery));};if(($focus.attr('data-gallery-role')||!$focus.length)&&allowZoomOut){if(isFullScreen){imagePosX=$(fullscreenImageSelector,$(gallerySelector)).offset().left;imagePosY=getTop($(fullscreenImageSelector,$(gallerySelector)));}\nif(e.keyCode===39){if(isFullScreen){initVars();shiftImage(-step,0,e);}}\nif(e.keyCode===38){if(isFullScreen){initVars();shiftImage(0,step,e);}}\nif(e.keyCode===37){if(isFullScreen){initVars();shiftImage(step,0,e);}}\nif(e.keyCode===40){if(isFullScreen){e.preventDefault();initVars();shiftImage(0,-step,e);}}}\nif(e.keyCode===27&&isFullScreen&&allowZoomOut){$(gallerySelector).data('fotorama').cancelFullScreen();}};$(document).keydown(keyboardNavigation);$(document).on(isTouchEnabled?'touchend':'mouseup pointerup MSPointerUp',function(e){if(gallery.fullScreen){if($image.offset()&&$image.width()>$imageContainer.width()){endX=$image.offset().left;}\nisDragActive=false;$image.removeClass(imageDraggableClass);}});$(window).off('resize',resizeHandler);$(window).on('resize',{$image:$image,fotorama:fotorama},resizeHandler);}\nhideMagnifier=function(){$(magnifierSelector).empty().hide();$(magnifierZoomSelector).remove();};function checkForVideo($stageFrame){return $stageFrame.hasClass(videoContainerClass);}\nfunction behaveOnDrag(e,initPos){var pos=[e.pageX,e.pageY],isArrow=$(e.target).data('gallery-role')==='arrow',isClick=initPos[0]===pos[0]&&initPos[1]===pos[1],isImg=$(e.target).parent().data('active');if(isArrow||isImg&&!isClick){hideMagnifier();}}\nif(config.magnifierOpts.enabled){$(element).on('pointerdown mousedown MSPointerDown',function(e){var pos=[e.pageX,e.pageY];$(element).on('mousemove pointermove MSPointerMove',function(ev){navigator.msPointerEnabled?hideMagnifier():behaveOnDrag(ev,pos);});$(document).on('mouseup pointerup MSPointerUp',function(){$(element).off('mousemove pointermove MSPointerMove');});});}\n$.extend(config.magnifierOpts,{zoomable:false,thumb:'.fotorama__img',largeWrapper:'[data-gallery-role=\"magnifier\"]',height:config.magnifierOpts.height||function(){return $('[data-active=\"true\"]').height();},width:config.magnifierOpts.width||function(){var productMedia=$(gallerySelector).parent().parent();return productMedia.parent().width()-productMedia.width()-20;},left:config.magnifierOpts.left||function(){return $(gallerySelector).offset().left+$(gallerySelector).width()+20;},top:config.magnifierOpts.top||function(){return $(gallerySelector).offset().top;}});$(element).on('fotorama:load fotorama:showend fotorama:fullscreenexit fotorama:ready',function(e,fotorama){var $activeStageFrame=$(gallerySelector).data('fotorama').activeFrame.$stageFrame;if(!$activeStageFrame.find(magnifierZoomSelector).length){hideMagnifier();if(config.magnifierOpts){config.magnifierOpts.large=$(gallerySelector).data('fotorama').activeFrame.img;config.magnifierOpts.full=fotorama.data[fotorama.activeIndex].original;!checkForVideo($activeStageFrame)&&$($activeStageFrame).magnify(config.magnifierOpts);}}});$(element).on('gallery:loaded',function(e){var $prevImage;$(element).find(gallerySelector).on('fotorama:ready',function(e,fotorama){var $zoomIn=$(zoomInButtonSelector),$zoomOut=$(zoomOutButtonSelector);if(!$zoomIn.hasClass(zoomInLoaded)){$zoomIn.on('click touchstart',zoomIn);$zoomIn.on('mousedown',function(e){e.stopPropagation();});$zoomIn.keyup(function(e){if(e.keyCode===13){zoomIn(e);}});$(window).keyup(function(e){if(e.keyCode===107||fotorama.fullscreen){zoomIn(e);}});$zoomIn.addClass(zoomInLoaded);}\nif(!$zoomOut.hasClass(zoomOutLoaded)){$zoomOut.on('click touchstart',zoomOut);$zoomOut.on('mousedown',function(e){e.stopPropagation();});$zoomOut.keyup(function(e){if(e.keyCode===13){zoomOut(e);}});$(window).keyup(function(e){if(e.keyCode===109||fotorama.fullscreen){zoomOut(e);}});$zoomOut.addClass(zoomOutLoaded);}}).on('fotorama:fullscreenenter fotorama:showend',function(e,fotorama){hideMagnifier();if(!$(fullscreenImageSelector).is($prevImage)){resetVars($(fullscreenImageSelector));}\nmagnifierFullscreen(fotorama);mousewheel(e,fotorama,element);if($prevImage){calculateMinSize($prevImage);if(!$(fullscreenImageSelector).is($prevImage)){resetVars($prevImage);}}\ntoggleStandartNavigation();}).on('fotorama:load',function(e,fotorama){if($(gallerySelector).data('fotorama').fullScreen){toggleZoomButtons($(fullscreenImageSelector),isTouchEnabled,checkForVideo(fotorama.activeFrame.$stageFrame));}\nmagnifierFullscreen(fotorama);}).on('fotorama:show',function(e,fotorama){$prevImage=_.clone($(fullscreenImageSelector));hideMagnifier();}).on('fotorama:fullscreenexit',function(e,fotorama){resetVars($(fullscreenImageSelector));hideMagnifier();hideZoomControls(true);});});return config;};});","Magento_Newsletter/js/subscribe.min.js":"define(['jquery','Magento_Ui/js/modal/modal','jquery-ui-modules/widget'],function($,modal){'use strict';$.widget('mage.newsletter',{_create:function(){this.subscribeSubmit();this.showPopup();},showPopup:function(){var modaloption={type:'popup',modalClass:'subscribe_popup',responsive:true,innerScroll:true,clickableOverlay:true,overlayClass:'modals-overlay',buttons:[{text:jQuery.mage.__('confirm'),class:'confirm_btn'}]};var callforoption=modal(modaloption,$('.subscribe-content'));},subscribeSubmit:function(){var self=this;var emailData={\"subscribeData\":{\"email\":\"\",\"device\":\"\",\"user_name\":\"\",\"product_id\":\"\",\"subscribe_type\":\"newsletter\",\"url\":\"\",\"phone\":\"\"}};var system={win:false,mac:false,xll:false,ipad:false};var system_type=navigator.platform;system.win=system_type.indexOf(\"Win\")==0;system.mac=system_type.indexOf(\"Mac\")==0;system.x11=(system_type==\"X11\")||(system_type.indexOf(\"Linux\")==0);system.ipad=(navigator.userAgent.match(/iPad/i)!=null)?true:false;if(system.win||system.mac||system.xll||system.ipad){emailData.subscribeData.device=\"0\"}else{emailData.subscribeData.device=\"1\"}\n$(\"#newsletter-validate-detail\").submit(function(event){event.preventDefault();var regEmail=/^(.+)@([^@]+)$/;emailData.subscribeData.email=$(\"#newsletter\").val();emailData.subscribeData.url=window.location.href;if(emailData.subscribeData.email==\"\"||!regEmail.test(emailData.subscribeData.email)){$(\"#newsletter-error\").show();$(\"#newsletter\").addClass(\"mage-error\");}else{$(\"#newsletter-error\").hide();$(\"#newsletter\").removeClass(\"mage-error\");$.ajax({headers:{\"content-type\":\"application/json\",},url:\"/rest/V1/msCrm/subscribe/\",type:\"post\",dataType:\"json\",data:JSON.stringify(emailData),success:function(data){if(data.sub_id!==\"\"){$('.subscribe-content').modal('openModal');}},error:function(){$(\"#newsletter-error\").show();$(\"#newsletter\").addClass(\"mage-error\");}})}})}});return $.mage.newsletter;});","Magento_Shipping/js/view/checkout/shipping/shipping-policy.min.js":"define(['uiComponent','Magento_Shipping/js/model/config'],function(Component,config){'use strict';return Component.extend({defaults:{template:'Magento_Shipping/checkout/shipping/shipping-policy'},config:config()});});","Magento_Shipping/js/model/config.min.js":"define([],function(){'use strict';return function(){return window.checkoutConfig.shippingPolicy;};});","Magento_CustomerCustomAttributes/validation.min.js":"define(['jquery','mage/mage'],function($){'use strict';return function(config){var dataForm=$('#form-validate');if(config.hasUserDefinedAttributes){dataForm=dataForm.mage('fileElement',{});}\ndataForm.mage('validation',config);if(config.disableAutoComplete){dataForm.find('input:text').attr('autocomplete','off');}};});","Magento_CustomerCustomAttributes/validation-ignore.min.js":"define(['jquery','mageUtils'],function($,utils){'use strict';return function(config){var ignore;if(config.ignore){ignore='input[id$=\"full\"]';}\nif(config.hasUserDefinedAttributes){ignore=ignore?ignore+', '+'input[id$=\\'_value\\']':'input[id$=\\'_value\\']';ignore=':hidden:not('+ignore+')';}else if(config.isDobEnabled){ignore=':hidden:not('+ignore+')';}else{ignore=ignore?':hidden:not('+ignore+')':':hidden';}\nreturn utils.extend(config,{ignore:ignore});};});","Magento_CustomerCustomAttributes/error-placement.min.js":"define(['jquery','mageUtils'],function($,utils){'use strict';return function(config){var dobElement=null,errorClass=null;if(config.hasUserDefinedAttributes||config.isDobEnabled){return utils.extend(config,{errorPlacement:function(error,element){if(element.prop('id').search('full')!==-1){dobElement=$(element).parents('.customer-dob');errorClass=error.prop('class');error.insertAfter(element.parent());dobElement.find('.validate-custom').addClass(errorClass).after('<div class=\"'+errorClass+'\"></div>');}else{error.insertAfter(element);}}});}};});","Magento_CustomerCustomAttributes/file-element.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.fileElement',{options:{hiddenFieldSuffix:'_value',delegationSelector:'.field input[type=\"file\"]'},_create:function(){this.element.on('change',this.options.delegationSelector,$.proxy(function(e){var input=$(e.target);$(this._esc('#'+input.attr('id')+this.options.hiddenFieldSuffix)).val(input.val());},this));},_esc:function(str){return str?str.replace(/([ ;&,.+*~\\':\"!\\^$\\[\\]()=>|\\/@])/g,'\\\\$1'):str;}});return $.mage.fileElement;});","Magento_Cybersource/js/view/payment/cybersource-payments.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/renderer-list'],function(Component,rendererList){'use strict';rendererList.push({type:'cybersource',component:'Magento_Cybersource/js/view/payment/method-renderer/cybersource'});return Component.extend({});});","Magento_Cybersource/js/view/payment/method-renderer/cybersource.min.js":"define(['jquery','Magento_Payment/js/view/payment/iframe'],function($,Component){'use strict';return Component.extend({defaults:{template:'Magento_Cybersource/payment/cybersource-form'},placeOrderHandler:null,validateHandler:null,setPlaceOrderHandler:function(handler){this.placeOrderHandler=handler;},setValidateHandler:function(handler){this.validateHandler=handler;},context:function(){return this;},isShowLegend:function(){return true;},getCode:function(){return'cybersource';},isActive:function(){return true;}});});","Magento_Cybersource/js/view/payment/method-renderer/multishipping/cybersource.min.js":"define(['jquery','Magento_Cybersource/js/view/payment/method-renderer/cybersource','Magento_Checkout/js/action/set-payment-information-extended'],function($,Component,setPaymentInformationExtended){'use strict';return Component.extend({defaults:{template:'Magento_Cybersource/payment/multishipping/cybersource-form'},setPaymentInformation:function(){return setPaymentInformationExtended(this.messageContainer,{method:this.getCode()},true);}});});","IsobarCommerce_GroupProduct/js/cartQtyUpdate.min.js":"define(['jquery','Amasty_Conditions/js/action/recollect-totals','Magento_Checkout/js/action/get-totals','Magento_Customer/js/customer-data','Amasty_Checkout/js/model/amalert','Magento_Theme/js/view/messages','mage/translate'],function($,recollect,getTotalsAction,customerData,alert,messagesFactory,$t){$(document).ready(function(){recollect();$(document).on('change','input[name$=\"[qty]\"], .product-bundle .qty-box input.qty',function(){submitForm();});$(document).on('keypress','input[name$=\"[qty]\"]',function(e){if(e.which===13){e.preventDefault();$(this).trigger('change');}});$(document).on('click','.qty-box .qty .add',function(){var qtyInput=$(this).parent('div').parent('div.qty').find('.input-text.qty');var qty=qtyInput.val()*1;qtyInput.val(qty+1);qtyInput.trigger('change');});$(document).on('click','.qty-box .qty .reduce',function(){var qtyInput=$(this).parent('div').parent('div.qty').find('.input-text.qty');var qty=qtyInput.val()*1;if(qty>1){qtyInput.val(qty-1);qtyInput.trigger('change');}});var tbodyArray=$(\".checkout-cart-index tbody.cart.item\");tbodyArray.each(function(){if($(this).find(\".cart.item.message.error\").length>0){$(this).addClass(\"disabled-cart\");$(this).prepend(\"<tr class='disabled-error'><td><div class='text'>\"+$t(\"The failure of goods\")+\"</div></td></tr>\")}})});function submitForm(){var form=$('form#form-validate');if(form.validation()&&form.valid()&&!form.hasClass('submitted')){form.addClass('submitted');$.ajax({url:form.attr('action'),data:form.serialize(),showLoader:true,success:function(res){var parsedResponse=$.parseHTML(res);var result=$(parsedResponse).find(\"#form-validate\");var sections=['cart'];var window_width=$(window).width();var messagesComponent=messagesFactory();messagesComponent.cookieMessages.forEach(function(message){if(message.type=='error'){alert({title:'',content:message.text,modalClass:'no-confirm'});}});$(\"#form-validate\").replaceWith(result);$.when(customerData.reload(sections,true)).done(function(response){$('#maincontent .cart-quantity .number').text(response.cart.summary_count);if(response.cart.can_show_coupon_price){$('#coupon-after-the-price').show().text(response.cart.coupon_price);if(window_width<768&&$('#coupon-after-the-price').is(\":visible\")&&$('#coupon-after-the-price').text().length>0){$('.cart-bottom-bar .sub-btn button').text('\u63d0\u4ea4 '+$('#coupon-after-the-price').text());}else{$('.cart-bottom-bar .sub-btn button').text('\u63d0\u4ea4');}}else{$('#coupon-after-the-price').hide();}});recollect(true);form.removeClass('submitted');},error:function(xhr,status,error){}});}}});","IsobarCommerce_GroupProduct/js/sms.min.js":"define(['jquery','mage/translate'],function($){var phoneReg=/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\\d{8})$/;var codeVal=$('.input-text-dynamicpassword').val();var isToGetCode=false;var getCodeUrl;var getCheckUrl;var getMobileLoginUrl;var getUrlsAll;var getFormKey;function getCodeFn(url,token,orderId,formkey){$.post(url,{token:token,orderId:orderId,form_key:formkey},function(res){if(res.code==200){settime();}else{if(res.redirect==true){window.location=res.redirect_url;}else{$('.phoneError').html(res.msg);}}});}\nvar countdown=60;function settime(){if(countdown==0){$('.CaptchaFlexRight button').removeClass('unactive').html($.mage.__('Get dynamic password'));isToGetCode=true;countdown=60;}else{$('.CaptchaFlexRight button').html($.mage.__('To obtain')+\" ( \"+countdown+\" ) \").addClass('unactive');isToGetCode=false;countdown--;setTimeout(function(){settime();},1000);}}\nreturn function(getUrls){var getUrlsAll=getUrls;var getFormKey=$('.input-text-dynamicpassword').closest('form').find('input[name=\"form_key\"]').val();$(document).on('click','.CaptchaFlexRight button',function(e){e.preventDefault();var getCodeUrl=getUrlsAll.getUrls.unionpaySmsUrl;var isToGetCode=true;if(isToGetCode){isToGetCode=false;var cardToken=$(this).closest('.installment-form').find('input[name=\"token\"]:checked').val();var orderId=$('input[name=\"orderid\"]').val();getCodeFn(getCodeUrl,cardToken,orderId,getFormKey);}});$(document).on('change','.input-text-dynamicpassword',function(e){codeVal=$(this).val();if(codeVal==\"\"||codeVal.length==6){$('.codeError').html('');}});}})","IsobarCommerce_GroupProduct/js/view/landingPayment.min.js":"define(['jquery','jquery-ui-modules/widget','Magento_Checkout/js/model/full-screen-loader','Magento_Ui/js/modal/alert','Magento_Ui/js/modal/modal','mage/storage','mage/url','mage/translate','jquery/ui'],function($,widget,fullScreenLoader,alert,modal,storage,urlBuilder,$t){'use strict';var contentTabs=$(\"#payment-method-tab-content\");if(contentTabs.find('.list-item').find('li.label').length>1){contentTabs.tabs({active:false,collapsible:true});}else{contentTabs.tabs();contentTabs.find('.list-item').find('li.label').hide();}\nvar BankRestrictedList;$.widget('isobarcommerce.landingpayment',{options:{noPaymentMessage:$.mage.__('Please select a credit card'),noSMScodeMessage:$.mage.__('Please enter sms code'),noInstallmentPeriod:$.mage.__('Please select payment installment period'),errorMessage:$.mage.__('Something went wrong with your request. Please try again later.'),limitBankMessage:$.mage.__('Temporarily do not support %1 credit card installment payment')},_create:function(){var submitButton=this.options.submitButton;var paymentSelector=this.options.paymentSelector;var instalmentSelector=this.options.instalmentSelector;var unionpayInstallment=this.options.unionpayInstallment;var unionpayOpenCardSelector=this.options.unionpayOpenCardSelector;var enrollmentPaymentTab=this.options.enrollmentPaymentTab;var cmbInstallmentPeriodSelector=this.options.cmbInstallmentPeriodSelector;var unionpayInstallmentBankSelector=this.options.unionpayInstallmentBankSelector;var antInstallmentSelector=this.options.antInstallmentSelector;BankRestrictedList=this.options.BankRestrictedList;if(submitButton){$(document).on('click',submitButton,this._submitForm.bind(this));}\nif(paymentSelector){$(document).on('click',paymentSelector,this._displayPaymentMethod.bind(this));}\nif(instalmentSelector){$(document).on('click',instalmentSelector,this._displayInstallmentMethod.bind(this));}\nif(unionpayInstallment){$(document).on('click',unionpayInstallment,this._unionpayInstallment.bind(this));}\nif(unionpayOpenCardSelector){$(document).on('click',unionpayOpenCardSelector,this._unionpayOpenCard.bind(this));}\nif(enrollmentPaymentTab){$(document).on('click',enrollmentPaymentTab,this._enrollmentPaymentTabClick.bind(this));}\nif(cmbInstallmentPeriodSelector){$(document).on('click',cmbInstallmentPeriodSelector,this.cmbPay.bind(this));}\nif(unionpayInstallmentBankSelector){$(document).on('click',unionpayInstallmentBankSelector,this.unionpayRecollectHandlingFee.bind(this));}\nif(antInstallmentSelector){$(document).on('click',antInstallmentSelector,this.antInstallmentPay.bind(this));}\nif($(paymentSelector).length){$(paymentSelector).first().prop('checked',true);$(paymentSelector).first().click();}\nif(!$(paymentSelector).length){$(instalmentSelector).first().prop('checked',true);$(instalmentSelector).first().click();}\nif($(cmbInstallmentPeriodSelector).length){var cmbRadioBox=$(cmbInstallmentPeriodSelector).first();cmbRadioBox.prop('checked',true);cmbRadioBox.click();}\nthis._addCartActiveClass();this._addInstallMethodsActive();this.wechatpayPopupInit();this.wechatAntpayPopupInit();this._cmbBtnClick();this._defaultTabsClick();this._antBtnClick();},wechatpayPopupInit:function(){var modaloption={type:'popup',modalClass:'wechatpay_popup',responsive:true,innerScroll:false,clickableOverlay:true,overlayClass:'modals-overlay',opened:function(){$('html').addClass('noscroll');},closed:function(){$('html').removeClass('noscroll');},buttons:[{text:$.mage.__('Copy the link'),class:'copybtn',click:function(){var copycode=$(\"#copycode\");copycode.select();document.execCommand(\"Copy\");}}]};if($('.cmb-wechect-popup').length){var callforoption=modal(modaloption,$('.cmb-wechect-popup'));}},wechatAntpayPopupInit:function(){var modaloption={type:'popup',modalClass:'wechatpay_popup',responsive:true,innerScroll:false,clickableOverlay:true,overlayClass:'modals-overlay',opened:function(){$('html').addClass('noscroll');},closed:function(){$('html').removeClass('noscroll');},buttons:[{text:$.mage.__('Copy the link'),class:'copybtn',click:function(){var copycode=$(\"#ant_copycode\");copycode.select();document.execCommand(\"Copy\");}}]};if($('.antcredit-wechect-popup').length){var callforoption=modal(modaloption,$('.antcredit-wechect-popup'));}},unionpayRecollectHandlingFee:function(e){var self=this;var targetElement=$(e.target);var bankCode=targetElement.attr('bankcode');var handleFeeRates=this.options.unionpayHandlingRate;if(handleFeeRates&&handleFeeRates[bankCode]){var rates=handleFeeRates[bankCode];$.each(rates,function(key,value){var inputId='#installment-unionpay-period-'+key;if($(inputId).length){var orderTotal=$(inputId).attr('total');var handleFeeElement=$(inputId).siblings('label').find('.total-fee');if(handleFeeElement.length){var handlingFee=(orderTotal*value*1).toFixed(2);handleFeeElement.text(handlingFee);}}});}},_enrollmentPaymentTabClick:function(e){var self=this;if(!$(this.options.instalmentSelector+':checked').length){$(this.options.instalmentSelector).first().click();}\nif($(this.options.instalmentSelector+':checked').length){$(this.options.instalmentSelector+':checked').click();}},_unionpayOpenCard:function(e){e.preventDefault();window.location=this.options.thirdPartyRedirectUrls['unionpayOpenCardUrl'];},_unionpayInstallment:function(e){var self=this;e.preventDefault();var select_binno=$('.installment-content-form .card-box .card-show input').attr(\"binno\");var select_bankname=$('.installment-content-form .card-box .card-show input').attr(\"bankname\");var _arrayLimitBnak=[];var url=this.options.thirdPartyRedirectUrls['unionpayOrderConsumer'];;var smsCode=$(e.target).closest('form').find('#dynamicpassword').val();var orderId=$(e.target).closest('form').find('input[name=\"orderid\"]').val();var token=$(e.target).closest('form').find('input[name=\"token\"]:checked').val();var bankname=$(e.target).closest('form').find('input[name=\"token\"]:checked').attr(\"bankname\");var period=$(e.target).closest('form').find('input[name=\"installment_period\"]:checked').val();if(!period){alert({title:'',content:this.options.noInstallmentPeriod,overlayClass:'modals-overlay'});return false;}\nif(!smsCode){alert({title:'',content:this.options.noSMScodeMessage,overlayClass:'modals-overlay'});return false;}\n$.each(BankRestrictedList,function(k,v){for(var i=0;i<v.length;i++){_arrayLimitBnak.push(v[i]);}});if(_arrayLimitBnak.indexOf(select_binno)!=-1){alert({title:'',content:self.options.limitBankMessage.replace('%1',select_bankname),overlayClass:'modals-overlay'});return false;}\nif(!jQuery('input[name=\"token\"]:checked').length){alert({title:'',content:this.options.noPaymentMessage,overlayClass:'modals-overlay'});return false;}\nfullScreenLoader.startLoader();$.ajax({url:url,type:'POST',data:{token:token,orderId:orderId,smsCode:smsCode,period:period,bankname:bankname},dataType:'json',}).done($.proxy(function(response){if(response.code===200||response.msg=='12'){window.location=self.options.thirdPartyRedirectUrls['checkoutSuccessUrl'];}else{alert({title:'',content:response.msg,overlayClass:'modals-overlay'});}\nfullScreenLoader.stopLoader();}));},queryWechatPayStatus:function(){var self=this;var queryUrl=self.options.thirdPartyRedirectUrls['wechatpayQueryUrl'];$.ajax({url:queryUrl,type:'GET',dataType:'json',}).done($.proxy(function(response){self.queryTimer();if(response.status==='SUCCESS'){window.location=self.options.thirdPartyRedirectUrls['checkoutSuccessUrl'];}}));},queryAlipayPayStatus:function(){var self=this;var queryUrl=self.options.thirdPartyRedirectUrls['alipayQueryUrl'];$.ajax({url:queryUrl,type:'GET',dataType:'text'}).done($.proxy(function(response){self.queryTimer();if(response==='SUCCESS'){window.location=self.options.thirdPartyRedirectUrls['checkoutSuccessUrl'];}}));},queryCmbPayStatus:function(){var self=this;var queryUrl=self.options.thirdPartyRedirectUrls['cmbpayQueryUrl'];$.ajax({url:queryUrl,type:'GET',dataType:'text'}).done($.proxy(function(response){self.queryTimer();var result=$.parseJSON(response);if(result.status==='SUCCESS'){window.location=self.options.thirdPartyRedirectUrls['checkoutSuccessUrl'];}}));},queryAntPayStatus:function(){var self=this;var queryUrl=self.options.thirdPartyRedirectUrls['alipayQueryUrl'];$.ajax({url:queryUrl,type:'GET',dataType:'text'}).done($.proxy(function(response){self.queryTimer();var result=$.parseJSON(response);if(result.status==='SUCCESS'){window.location=self.options.thirdPartyRedirectUrls['checkoutSuccessUrl'];}}));},queryTimer:function(){var form=$('form#co-payment-landing-form');var counter=form.find('input[name=\"countdown\"]');var count=counter.val()-1;counter.val(count);if(counter.val()<=0){var intervalId=counter.attr('intervalId');clearInterval(intervalId);counter.attr('intervalId','');counter.val(200);window.location.reload();}},_displayPaymentMethod:function(e){var self=this;var method=$('.thirdparty-payment-method:checked');var thirdPartyUrls=self.options.thirdPartyRedirectUrls;var useQrCode=thirdPartyUrls['useQrCode'];var canUseAlipayQrcode=thirdPartyUrls['canUseAlipayQrcode'];var paymentSelector=self.options.paymentSelector;var form=$(paymentSelector).closest('form#co-payment-landing-form');var qrcodePanel=form.find('#third-party-payment-qrcode');var counter=form.find('input[name=\"countdown\"]');var textOr=form.find('.text');if(counter.attr('intervalId')){clearInterval(counter.attr('intervalId'));counter.attr('intervalId','');}\nvar formKey=form.find('input[name=\"form_key\"]').val();var orderid=form.find('input[name=\"orderid\"]').val();qrcodePanel.empty();counter.val(200);if(method&&method.val()==='wechatpay'&&useQrCode){$('#third-party-submit-button').hide();textOr.show();$.ajax({url:thirdPartyUrls['wechatpayQrcodeUrl'],type:'POST',dataType:'json',data:{form_key:formKey,orderid:orderid}}).done($.proxy(function(response){if(response.code===200&&response.data==='Paid'){window.location=self.options.thirdPartyRedirectUrls['checkoutSuccessUrl'];}else if(response.code===200){qrcodePanel.html('<img src=\"'+response.data+'\" role=\"none\" /><div class=\"wechect-text\">'+$.mage.__('The mobile phone opens WeChat to scan the code to pay')+'</div>');var intervalId=setInterval(self.queryWechatPayStatus.bind(self),6000);counter.attr('intervalId',intervalId);}else{qrcodePanel.html(response.data);}}));}else if(method&&method.val()==='alipay'&&canUseAlipayQrcode){textOr.show();$('#third-party-submit-button').show();$.ajax({url:thirdPartyUrls['alipayQrcodeUrl'],type:'POST',dataType:'json',data:{form_key:formKey,orderid:orderid}}).done($.proxy(function(response){if(response.code==\"10000\"&&response.msg=='Success'){qrcodePanel.html('<img src=\"'+response.content+'\" role=\"none\" />');var intervalId=setInterval(self.queryAlipayPayStatus.bind(self),6000);counter.attr('intervalId',intervalId);}else{qrcodePanel.html(response.msg);}}));}else{textOr.hide();qrcodePanel.empty();$('#third-party-submit-button').show();}},_displayInstallmentMethod:function(e){var formElement=$(e.target).attr('id')+'-form';$('.installment-form').addClass('hide');if($('#'+formElement).length){$('#'+formElement).removeClass('hide');if($('.installment-payment-method:checked').val()!='cmbpay'){$('#'+formElement).find('.token-item:first').find('input[name=\"token\"]').click();}}},cmbPay:function(e){var period=$(e.target).val();var self=this;var thirdPartyUrls=self.options.thirdPartyRedirectUrls;var form=$(this.options.instalmentSelector).closest('form#co-payment-landing-form');var orderid=form.find('input[name=\"orderid\"]').val();var formKey=form.find('input[name=\"form_key\"]').val();var counter=form.find('input[name=\"countdown\"]');if(counter.attr('intervalId')){clearInterval(counter.attr('intervalId'));counter.attr('intervalId','');}\ncounter.val(200);if(thirdPartyUrls['IsMobile']){var serviceUrl=thirdPartyUrls['cmbpayProtocalUrl'];var serviceUrl=urlBuilder.build(serviceUrl+'form_key/'+formKey+'/orderid/'+orderid+'/period/'+period);fullScreenLoader.startLoader();storage.get(serviceUrl).done(function(response){var redirectUrl=response['payment_redirect'];$(\".installment-btn .cmb-btn\").attr(\"data-url\",redirectUrl);var intervalId=setInterval(self.queryCmbPayStatus.bind(self),6000);counter.attr('intervalId',intervalId);fullScreenLoader.stopLoader();});}else{var qrcodePanel=form.find('.cmb-qrcode');var serviceUrl=thirdPartyUrls['cmbpayQrcodeUrl'];var serviceUrl=urlBuilder.build(serviceUrl+'form_key/'+formKey+'/orderid/'+orderid+'/period/'+period);fullScreenLoader.startLoader();storage.get(serviceUrl).done($.proxy(function(response){if(response.content){qrcodePanel.html('<img width=\"185\" role=\"none\" src=\"'+response.content+'\" /><div class=\"cmbqr-info\">'+$.mage.__('Use the mobile phone to open the handheld life client scan to complete the payment')+'</div>');var intervalId=setInterval(self.queryCmbPayStatus.bind(self),6000);counter.attr('intervalId',intervalId);}else{qrcodePanel.html(self.options.errorMessage);}\nfullScreenLoader.stopLoader();}));}},antInstallmentPay:function(e){var period=$(e.target).val();var self=this;var thirdPartyUrls=self.options.thirdPartyRedirectUrls;var form=$(this.options.instalmentSelector).closest('form#co-payment-landing-form');var orderid=form.find('input[name=\"orderid\"]').val();var formKey=form.find('input[name=\"form_key\"]').val();var counter=form.find('input[name=\"countdown\"]');if(counter.attr('intervalId')){clearInterval(counter.attr('intervalId'));counter.attr('intervalId','');}\ncounter.val(200);if(thirdPartyUrls['IsMobile']){var serviceUrl=thirdPartyUrls['alipay'];var serviceUrl=urlBuilder.build(serviceUrl+'form_key/'+formKey+'/orderid/'+orderid+'/period/'+period);fullScreenLoader.startLoader();storage.get(serviceUrl).done(function(response){$(\".antcredit-installment-btn .antcredit-btn\").attr(\"data-url\",serviceUrl);var intervalId=setInterval(self.queryAntPayStatus.bind(self),6000);counter.attr('intervalId',intervalId);fullScreenLoader.stopLoader();});}else{var skipUrl=thirdPartyUrls['alipay'];skipUrl=urlBuilder.build(skipUrl+'form_key/'+formKey+'/orderid/'+orderid+'/period/'+period);$(\".antcredit-installment-btn .antcredit-btn\").attr(\"data-url\",skipUrl);var qrcodePanel=form.find('.antcredit-qrcode');var serviceUrl=thirdPartyUrls['alipayQrcodeUrl'];var serviceUrl=urlBuilder.build(serviceUrl+'form_key/'+formKey+'/orderid/'+orderid+'/period/'+period);fullScreenLoader.startLoader();storage.get(serviceUrl).done($.proxy(function(response){if(response.content){qrcodePanel.html('<img width=\"185\" role=\"none\" src=\"'+response.content+'\" />');var intervalId=setInterval(self.queryCmbPayStatus.bind(self),6000);counter.attr('intervalId',intervalId);}else{qrcodePanel.html(self.options.errorMessage);}\nfullScreenLoader.stopLoader();}));}},_submitForm:function(e){var thirdPartyUrls=this.options.thirdPartyRedirectUrls;var method=$('.thirdparty-payment-method:checked');if(method.length&&method.val()){window.location=thirdPartyUrls[method.val()];}else{alert({title:$.mage.__('Please select a payment method'),});return false;}},_addCartActiveClass:function(){$(\".card-box .token-item\").click(function(){$(this).addClass(\"card-show\").siblings(\".token-item\").removeClass(\"card-show\");})},_addInstallMethodsActive:function(){$(\".installment-content-container .pay-method-item:first-child\").addClass(\"select-active\");$(document).on(\"click\",\".pay-method-item .installment-payment-method\",function(){$(this).parents(\".pay-method-item\").addClass(\"select-active\").siblings(\".pay-method-item\").removeClass(\"select-active\");var indexSel=$(this).parents(\".pay-method-item\").index();$(this).parents(\".installment-party-container\").find(\".installment-form\").eq(indexSel).find(\".period-item\").eq(0).find(\"input\").trigger(\"click\")})},_cmbBtnClick:function(){$(\".installment-btn .cmb-btn\").click(function(){var ua=navigator.userAgent.toLowerCase();if(ua.match(/MicroMessenger/i)==\"micromessenger\"){$(\"#copycode\").val($(this).attr(\"data-url\"));$('.cmb-wechect-popup').modal('openModal');}else{location.href=$(this).attr(\"data-url\");}})},_antBtnClick:function(){$(\".installment-btn .antcredit-btn\").click(function(){var ua=navigator.userAgent.toLowerCase();if(ua.match(/MicroMessenger/i)==\"micromessenger\"){$(\"#ant_copycode\").val($(this).attr(\"data-url\"));$('.antcredit-wechect-popup').modal('openModal');}else{location.href=$(this).attr(\"data-url\");}})},_defaultTabsClick:function(){$(document).ready(function(){var liLength=$(\".payments li.label\").length;var defaultClickItems=$(\".payments li.label.label-third .third-party-payment-tab\");if(liLength>1){defaultClickItems.trigger(\"click\");}})}});return $.isobarcommerce.landingpayment;});","IsobarCommerce_GroupProduct/js/view/summary/group-messages.min.js":"define(['uiComponent'],function(Component){'use strict';return Component.extend({getPresellDate:function(){return window.checkoutConfig.quoteData['presellDate'];}});});","IsobarCommerce_GroupProduct/js/view/payment/checkmo-method-mixin.min.js":"define(['jquery'],function($){'use strict';return function(Component){return Component.extend({redirectAfterPlaceOrder:false,afterPlaceOrder:function(){$.mage.redirect(window.checkoutConfig.payment.landingPage);}});};});","IsobarCommerce_RemoveCookie/js/storage-manager-mixin.min.js":"define([],function(){'use strict';return function(storageManager){return storageManager.extend({prepareStoragesConfig:function(){if(typeof this.storagesConfiguration==='object'){delete this.storagesConfiguration.recently_viewed_product;delete this.storagesConfiguration.recently_compared_product;}\nreturn this._super();}});};});","IsobarCommerce_SocialLogin/js/mobile_login.min.js":"define(['jquery','mage/translate'],function($){var phoneReg=/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))+\\d{8})$/;var phoneVal=$('.input-text-phone').val();var codeVal=$('.input-text-dynamicpassword').val();var isToGetCode=false;var getCodeUrl;var getCheckUrl;var getMobileLoginUrl;var getUrlsAll;var getFormKey;function getCodeFn(url,mobileNumber,areaCode,formkey){$.post(url,{mobileNumber:parseInt(mobileNumber),areaCode:areaCode,form_key:formkey},function(res){if(res.code==200){$(\"body\").trigger('processStop');settime();}else{$(\"body\").trigger('processStop');isToGetCode=true;$('.phoneError').html(res.msg);}});}\nfunction checkFormFn(url,mobileNumber,code,formkey){$.post(url,{mobileNumber:parseInt(mobileNumber),code:codeVal,form_key:formkey},function(res){if(res.code==200){mobileloginFn(getMobileLoginUrl,phoneVal,codeVal,getFormKey);}else{$(\"body\").trigger('processStop');$('.codeError').html($.mage.__('Dynamic code error'));}});}\nfunction mobileloginFn(url,mobileNumber,code,formkey){$.post(url,{mobileNumber:parseInt(mobileNumber),code:code,form_key:formkey},function(res){if(res.code==200){window.location.href=res.redirectUrl;}else{$(\"body\").trigger('processStop');$('.codeError').html(res.msg);}});}\nvar countdown=60;function settime(){if(countdown==0){$('.CaptchaFlexRight a').removeClass('unactive').html($.mage.__('Get dynamic password'));isToGetCode=true;countdown=60;}else{$('.CaptchaFlexRight a').html(countdown).addClass('unactive');isToGetCode=false;countdown--;setTimeout(function(){settime();},1000);}}\nreturn function(getUrls){getUrlsAll=getUrls;$('.toMSLoginLink').attr('href',getUrlsAll.getUrls.msalogin);getMobileLoginUrl=getUrlsAll.getUrls.mobilelogin;getFormKey=$(\".cclogin > input\").val();$('.input-text-phone').bind('input propertychange',function(){phoneVal=$(this).val();if(!phoneReg.test(phoneVal)){$('.CaptchaFlexRight a').addClass('unactive');$('.codeError').html('');isToGetCode=false;if(phoneVal==\"\"||phoneVal.length<11){$('.phoneError').html('');}}else{$('.phoneError').html('');$('.CaptchaFlexRight a').removeClass('unactive');isToGetCode=true;}});$('.CaptchaFlexRight a').click(function(){getCodeUrl=getUrlsAll.getUrls.sendurl;if(isToGetCode){if(phoneReg.test(phoneVal)){$(\"body\").trigger('processStart');isToGetCode=false;getCodeFn(getCodeUrl,phoneVal,86,getFormKey);}else{$('.codeError').html('');$('.phoneError').html($.mage.__('Please enter the mobile phone number in the correct format'));}}});$('.input-text-dynamicpassword').bind('input propertychange',function(){codeVal=$(this).val();if(codeVal==\"\"||codeVal.length==6){$('.codeError').html('');}});$('.cclogin button.action').click(function(){if(!phoneReg.test(phoneVal)){$('.phoneError').html($.mage.__('Malformed phone number'));}else if(codeVal===''){$('.codeError').html($.mage.__('Please enter dynamic code'));}else if(codeVal.length!=6){$('.codeError').html($.mage.__('Please enter the correct dynamic verification code'));}else{$('.phoneError').html('');$('.codeError').html('');getCheckUrl=getUrlsAll.getUrls.checkurl;$(\"body\").trigger('processStart');checkFormFn(getCheckUrl,phoneVal,codeVal,getFormKey);}});}})","Magento_Checkout/js/cart-code.min.js":"define(['jquery','mage/translate','jquery-ui-modules/widget'],function($,$t){'use strict';$.widget('shopping.cart',{_create:function(){this._removeProductBtn();this._addShoppingCartSutBtn();},_removeProductBtn:function(){$('.remove-product').click(function(e){e.preventDefault();$(this).parents('.cart.item').find('.action-delete').trigger('click')})},_addShoppingCartSutBtn:function(){var $submitBtn=$('.cart-bottom-bar .sub-btn button');$submitBtn.click(function(){$(this).parents('.cart-container').find(\"button.checkout\").trigger('click')})}});return $.shopping.cart;});","Magento_Checkout/js/discount-codes.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.discountCode',{options:{},_create:function(){this.couponCode=$(this.options.couponCodeSelector);this.removeCoupon=$(this.options.removeCouponSelector);$(this.options.applyButton).on('click',$.proxy(function(){this.couponCode.attr('data-validate','{required:true}');this.removeCoupon.attr('value','0');$(this.element).validation().submit();},this));$(this.options.cancelButton).on('click',$.proxy(function(){this.couponCode.removeAttr('data-validate');this.removeCoupon.attr('value','1');this.element.submit();},this));}});return $.mage.discountCode;});","Magento_Checkout/js/empty-cart.min.js":"define(['Magento_Customer/js/customer-data'],function(customerData){'use strict';var cartData=customerData.get('cart');if(cartData().items&&cartData().items.length!==0){customerData.reload(['cart'],false);}});","Magento_Checkout/js/shopping-cart.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.shoppingCart',{_create:function(){var items,i,reload;$(this.options.emptyCartButton).on('click',$.proxy(function(){$(this.options.emptyCartButton).attr('name','update_cart_action_temp');$(this.options.updateCartActionContainer).attr('name','update_cart_action').attr('value','empty_cart');if($(this.options.emptyCartButton).parents('form').length>0){$(this.options.emptyCartButton).parents('form').submit();}},this));items=$.find('[data-role=\"cart-item-qty\"]');for(i=0;i<items.length;i++){$(items[i]).on('keypress',$.proxy(function(event){var keyCode=event.keyCode?event.keyCode:event.which;if(keyCode==13){$(this.options.emptyCartButton).attr('name','update_cart_action_temp');$(this.options.updateCartActionContainer).attr('name','update_cart_action').attr('value','update_qty');}},this));}\n$(this.options.continueShoppingButton).on('click',$.proxy(function(){location.href=this.options.continueShoppingUrl;},this));$(document).on('ajax:removeFromCart',$.proxy(function(){reload=true;$('div.block.block-minicart').on('dropdowndialogclose',$.proxy(function(){if(reload===true){location.reload();reload=false;}\n$('div.block.block-minicart').off('dropdowndialogclose');}));},this));$(document).on('ajax:updateItemQty',$.proxy(function(){reload=true;$('div.block.block-minicart').on('dropdowndialogclose',$.proxy(function(){if(reload===true){location.reload();reload=false;}\n$('div.block.block-minicart').off('dropdowndialogclose');}));},this));}});return $.mage.shoppingCart;});","Magento_Checkout/js/checkout-data.min.js":"define(['jquery','Magento_Customer/js/customer-data','jquery/jquery-storageapi'],function($,storage){'use strict';var cacheKey='checkout-data',saveData=function(data){storage.set(cacheKey,data);},initData=function(){return{'selectedShippingAddress':null,'shippingAddressFromData':null,'newCustomerShippingAddress':null,'selectedShippingRate':null,'selectedPaymentMethod':null,'selectedBillingAddress':null,'billingAddressFromData':null,'newCustomerBillingAddress':null};},getData=function(){var data=storage.get(cacheKey)();if($.isEmptyObject(data)){data=$.initNamespaceStorage('mage-cache-storage').localStorage.get(cacheKey);if($.isEmptyObject(data)){data=initData();saveData(data);}}\nreturn data;};return{setSelectedShippingAddress:function(data){var obj=getData();obj.selectedShippingAddress=data;saveData(obj);},getSelectedShippingAddress:function(){return getData().selectedShippingAddress;},setShippingAddressFromData:function(data){var obj=getData();obj.shippingAddressFromData=data;saveData(obj);},getShippingAddressFromData:function(){return getData().shippingAddressFromData;},setNewCustomerShippingAddress:function(data){var obj=getData();obj.newCustomerShippingAddress=data;saveData(obj);},getNewCustomerShippingAddress:function(){return getData().newCustomerShippingAddress;},setSelectedShippingRate:function(data){var obj=getData();obj.selectedShippingRate=data;saveData(obj);},getSelectedShippingRate:function(){return getData().selectedShippingRate;},setSelectedPaymentMethod:function(data){var obj=getData();obj.selectedPaymentMethod=data;saveData(obj);},getSelectedPaymentMethod:function(){return getData().selectedPaymentMethod;},setSelectedBillingAddress:function(data){var obj=getData();obj.selectedBillingAddress=data;saveData(obj);},getSelectedBillingAddress:function(){return getData().selectedBillingAddress;},setBillingAddressFromData:function(data){var obj=getData();obj.billingAddressFromData=data;saveData(obj);},getBillingAddressFromData:function(){return getData().billingAddressFromData;},setNewCustomerBillingAddress:function(data){var obj=getData();obj.newCustomerBillingAddress=data;saveData(obj);},getNewCustomerBillingAddress:function(){return getData().newCustomerBillingAddress;},getValidatedEmailValue:function(){var obj=getData();return obj.validatedEmailValue?obj.validatedEmailValue:'';},setValidatedEmailValue:function(email){var obj=getData();obj.validatedEmailValue=email;saveData(obj);},getInputFieldEmailValue:function(){var obj=getData();return obj.inputFieldEmailValue?obj.inputFieldEmailValue:'';},setInputFieldEmailValue:function(email){var obj=getData();obj.inputFieldEmailValue=email;saveData(obj);},getCheckedEmailValue:function(){var obj=getData();return obj.checkedEmailValue?obj.checkedEmailValue:'';},setCheckedEmailValue:function(email){var obj=getData();obj.checkedEmailValue=email;saveData(obj);}};});","Magento_Checkout/js/proceed-to-checkout.min.js":"define(['jquery','Magento_Customer/js/model/authentication-popup','Magento_Customer/js/customer-data','Magento_Customer/js/model/customer'],function($,authenticationPopup,customerData,customer){'use strict';return function(config,element){$(element).click(function(event){event.preventDefault();var cart=customerData.get('cart');if(!customer.isLoggedIn()&&cart().isGuestCheckoutAllowed===false){location.href=window.checkout.checkoutLoginUrl;return false;}\n$(element).attr('disabled',true);location.href=config.checkoutUrl;});};});","Magento_Checkout/js/checkout-loader.min.js":"define(['rjsResolver'],function(resolver){'use strict';function hideLoader($loader){$loader.parentNode.removeChild($loader);}\nfunction init(config,$loader){resolver(hideLoader.bind(null,$loader));}\nreturn init;});","Magento_Checkout/js/region-updater.min.js":"define(['jquery','mage/template','underscore','jquery-ui-modules/widget','mage/validation'],function($,mageTemplate,_){'use strict';$.widget('mage.regionUpdater',{options:{regionTemplate:'<option value=\"<%- data.value %>\" <% if (data.isSelected) { %>selected=\"selected\"<% } %>>'+'<%- data.title %>'+'</option>',isRegionRequired:true,isZipRequired:true,isCountryRequired:true,currentRegion:null,isMultipleCountriesAllowed:true},_create:function(){this._initCountryElement();this.currentRegionOption=this.options.currentRegion;this.regionTmpl=mageTemplate(this.options.regionTemplate);this._updateRegion(this.element.find('option:selected').val());$(this.options.regionListId).on('change',$.proxy(function(e){this.setOption=false;this.currentRegionOption=$(e.target).val();},this));$(this.options.regionInputId).on('focusout',$.proxy(function(){this.setOption=true;},this));},_initCountryElement:function(){if(this.options.isMultipleCountriesAllowed){this.element.parents('div.field').show();this.element.on('change',$.proxy(function(e){this._updateRegion($(e.target).val());},this));if(this.options.isCountryRequired){this.element.addClass('required-entry');this.element.parents('div.field').addClass('required');}}else{this.element.parents('div.field').hide();}},_removeSelectOptions:function(selectElement){selectElement.find('option').each(function(index){if(index){$(this).remove();}});},_renderSelectOption:function(selectElement,key,value){selectElement.append($.proxy(function(){var name=value.name.replace(/[!\"#$%&'()*+,.\\/:;<=>?@[\\\\\\]^`{|}~]/g,'\\\\$&'),tmplData,tmpl;if(value.code&&$(name).is('span')){key=value.code;value.name=$(name).text();}\ntmplData={value:key,title:value.name,isSelected:false};if(this.options.defaultRegion===key){tmplData.isSelected=true;}\ntmpl=this.regionTmpl({data:tmplData});return $(tmpl);},this));},_clearError:function(){var args=['clearError',this.options.regionListId,this.options.regionInputId,this.options.postcodeId];if(this.options.clearError&&typeof this.options.clearError==='function'){this.options.clearError.call(this);}else{if(!this.options.form){this.options.form=this.element.closest('form').length?$(this.element.closest('form')[0]):null;}\nthis.options.form=$(this.options.form);this.options.form&&this.options.form.data('validator')&&this.options.form.validation.apply(this.options.form,_.compact(args));$(this.options.regionInputId).removeClass('mage-error').parent().find('[generated]').remove();$(this.options.regionListId).removeClass('mage-error').parent().find('[generated]').remove();$(this.options.postcodeId).removeClass('mage-error').parent().find('[generated]').remove();}},_updateRegion:function(country){var regionList=$(this.options.regionListId),regionInput=$(this.options.regionInputId),postcode=$(this.options.postcodeId),label=regionList.parent().siblings('label'),container=regionList.parents('div.field');this._clearError();this._checkRegionRequired(country);$(regionList).find('option:selected').removeAttr('selected');regionInput.val('');if(this.options.regionJson[country]){this._removeSelectOptions(regionList);$.each(this.options.regionJson[country],$.proxy(function(key,value){this._renderSelectOption(regionList,key,value);},this));if(this.currentRegionOption){regionList.val(this.currentRegionOption);}\nif(this.setOption){regionList.find('option').filter(function(){return this.text===regionInput.val();}).attr('selected',true);}\nif(this.options.isRegionRequired){regionList.addClass('required-entry').removeAttr('disabled');container.addClass('required').show();}else{regionList.removeClass('required-entry validate-select').removeAttr('data-validate');container.removeClass('required');if(!this.options.optionalRegionAllowed){regionList.hide();container.hide();}else{regionList.show();}}\nregionList.show();regionInput.hide();label.attr('for',regionList.attr('id'));}else{this._removeSelectOptions(regionList);if(this.options.isRegionRequired){regionInput.addClass('required-entry').removeAttr('disabled');container.addClass('required').show();}else{if(!this.options.optionalRegionAllowed){regionInput.attr('disabled','disabled');container.hide();}\ncontainer.removeClass('required');regionInput.removeClass('required-entry');}\nregionList.removeClass('required-entry').prop('disabled','disabled').hide();regionInput.show();label.attr('for',regionInput.attr('id'));}\nif(this.options.isZipRequired){$.inArray(country,this.options.countriesWithOptionalZip)>=0?postcode.removeClass('required-entry').closest('.field').removeClass('required'):postcode.addClass('required-entry').closest('.field').addClass('required');}\nregionList.attr('defaultvalue',this.options.defaultRegion);},_checkRegionRequired:function(country){var self=this;this.options.isRegionRequired=false;$.each(this.options.regionJson.config['regions_required'],function(index,elem){if(elem===country){self.options.isRegionRequired=true;}});}});return $.mage.regionUpdater;});","Magento_Checkout/js/sidebar.min.js":"define(['jquery','Magento_Customer/js/model/authentication-popup','Magento_Customer/js/customer-data','Magento_Ui/js/modal/alert','Magento_Ui/js/modal/confirm','underscore','jquery-ui-modules/widget','mage/decorate','mage/collapsible','mage/cookies','jquery-ui-modules/effect-fade'],function($,authenticationPopup,customerData,alert,confirm,_){'use strict';$.widget('mage.sidebar',{options:{isRecursive:true,minicart:{maxItemsVisible:3}},scrollHeight:0,shoppingCartUrl:window.checkout.shoppingCartUrl,_create:function(){this._initContent();},update:function(){$(this.options.targetElement).trigger('contentUpdated');this._calcHeight();this._isOverflowed();},_initContent:function(){var self=this,events={};this.element.decorate('list',this.options.isRecursive);events['click '+this.options.button.close]=function(event){event.stopPropagation();$(self.options.targetElement).dropdownDialog('close');};events['click '+this.options.button.checkout]=$.proxy(function(){var cart=customerData.get('cart'),customer=customerData.get('customer'),element=$(this.options.button.checkout);if(!customer().firstname&&cart().isGuestCheckoutAllowed===false){$.cookie('login_redirect',this.options.url.checkout);if(this.options.url.isRedirectRequired){element.prop('disabled',true);location.href=this.options.url.loginUrl;}else{authenticationPopup.showModal();}\nreturn false;}\nelement.prop('disabled',true);location.href=this.options.url.checkout;},this);events['click '+this.options.button.remove]=function(event){event.stopPropagation();confirm({content:self.options.confirmMessage,actions:{confirm:function(){self._removeItem($(event.currentTarget));},always:function(e){e.stopImmediatePropagation();}}});};events['keyup '+this.options.item.qty]=function(event){self._showItemButton($(event.target));};events['change '+this.options.item.qty]=function(event){self._showItemButton($(event.target));};events['click '+this.options.item.button]=function(event){event.stopPropagation();self._updateItemQty($(event.currentTarget));};events['focusout '+this.options.item.qty]=function(event){self._validateQty($(event.currentTarget));};this._on(this.element,events);this._calcHeight();this._isOverflowed();},_isOverflowed:function(){var list=$(this.options.minicart.list),cssOverflowClass='overflowed';if(this.scrollHeight>list.innerHeight()){list.parent().addClass(cssOverflowClass);}else{list.parent().removeClass(cssOverflowClass);}},_showItemButton:function(elem){var itemId=elem.data('cart-item'),itemQty=elem.data('item-qty');if(this._isValidQty(itemQty,elem.val())){$('#update-cart-item-'+itemId).show('fade',300);}else if(elem.val()==0){this._hideItemButton(elem);}else{this._hideItemButton(elem);}},_isValidQty:function(origin,changed){return origin!=changed&&changed.length>0&&changed-0==changed&&changed-0>0;},_validateQty:function(elem){var itemQty=elem.data('item-qty');if(!this._isValidQty(itemQty,elem.val())){elem.val(itemQty);}},_hideItemButton:function(elem){var itemId=elem.data('cart-item');$('#update-cart-item-'+itemId).hide('fade',300);},_updateItemQty:function(elem){var itemId=elem.data('cart-item');this._ajax(this.options.url.update,{'item_id':itemId,'item_qty':$('#cart-item-'+itemId+'-qty').val()},elem,this._updateItemQtyAfter);},_updateItemQtyAfter:function(elem){var productData=this._getProductById(Number(elem.data('cart-item')));if(!_.isUndefined(productData)){$(document).trigger('ajax:updateCartItemQty');if(window.location.href===this.shoppingCartUrl){window.location.reload(false);}}\nthis._hideItemButton(elem);},_removeItem:function(elem){var itemId=elem.data('cart-item');this._ajax(this.options.url.remove,{'item_id':itemId},elem,this._removeItemAfter);},_removeItemAfter:function(elem){var productData=this._getProductById(Number(elem.data('cart-item')));if(!_.isUndefined(productData)){$(document).trigger('ajax:removeFromCart',{productIds:[productData['product_id']]});if(window.location.href.indexOf(this.shoppingCartUrl)===0){window.location.reload();}}},_getProductById:function(productId){return _.find(customerData.get('cart')().items,function(item){return productId===Number(item['item_id']);});},_ajax:function(url,data,elem,callback){$.extend(data,{'form_key':$.mage.cookies.get('form_key')});$.ajax({url:url,data:data,type:'post',dataType:'json',context:this,beforeSend:function(){elem.attr('disabled','disabled');},complete:function(){elem.attr('disabled',null);}}).done(function(response){var msg;if(response.success){callback.call(this,elem,response);}else{msg=response['error_message'];if(msg){alert({content:msg});}}}).fail(function(error){console.log(JSON.stringify(error));});},_calcHeight:function(){var self=this,height=0,counter=this.options.minicart.maxItemsVisible,target=$(this.options.minicart.list),outerHeight;self.scrollHeight=0;target.children().each(function(){if($(this).find('.options').length>0){$(this).collapsible();}\nouterHeight=$(this).outerHeight(true);if(counter-->0){height+=outerHeight;}\nself.scrollHeight+=outerHeight;});target.parent().height(height);}});return $.mage.sidebar;});","Magento_Checkout/js/action/update-shopping-cart.min.js":"define(['Magento_Ui/js/modal/alert','jquery','jquery-ui-modules/widget','mage/validation'],function(alert,$){'use strict';$.widget('mage.updateShoppingCart',{options:{validationURL:'',eventName:'updateCartItemQty',updateCartActionContainer:''},_create:function(){this._on(this.element,{'submit':this.onSubmit});},onSubmit:function(event){var action=this.element.find(this.options.updateCartActionContainer).val();if(!this.options.validationURL||action==='empty_cart'){return true;}\nif(this.isValid()){event.preventDefault();this.validateItems(this.options.validationURL,this.element.serialize());}\nreturn false;},isValid:function(){return this.element.validation()&&this.element.validation('isValid');},validateItems:function(url,data){$.extend(data,{'form_key':$.mage.cookies.get('form_key')});$.ajax({url:url,data:data,type:'post',dataType:'json',context:this,beforeSend:function(){$(document.body).trigger('processStart');},complete:function(){$(document.body).trigger('processStop');}}).done(function(response){if(response.success){this.onSuccess();}else{this.onError(response);}}).fail(function(){this.submitForm();});},onSuccess:function(){$(document).trigger('ajax:'+this.options.eventName);this.submitForm();},onError:function(response){if(response['error_message']){alert({content:response['error_message']});}else{this.submitForm();}},submitForm:function(){this.element.off('submit',this.onSubmit).submit();}});return $.mage.updateShoppingCart;});","Magento_Checkout/js/action/select-shipping-address.min.js":"define(['Magento_Checkout/js/model/quote'],function(quote){'use strict';return function(shippingAddress){quote.shippingAddress(shippingAddress);};});","Magento_Checkout/js/action/get-totals.min.js":"define(['jquery','../model/quote','Magento_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/error-processor','mage/storage','Magento_Checkout/js/model/totals','Magento_Catalog/js/price-utils','Magento_Customer/js/customer-data','mage/translate'],function($,quote,resourceUrlManager,errorProcessor,storage,totals,priceUtils,customerData,$t){'use strict';return function(callbacks,deferred){deferred=deferred||$.Deferred();totals.isLoading(true);return storage.get(resourceUrlManager.getUrlForCartTotals(quote),false).done(function(response){var proceed=true;totals.isLoading(false);if(callbacks.length>0){$.each(callbacks,function(index,callback){proceed=proceed&&callback();});}\nif(proceed){var cartData=customerData.get('cart');var cartItems=cartData().items;var itemLabels='';var bundleSaved='';if(response['extension_attributes']&&response['extension_attributes']['item_labels']){itemLabels=JSON.parse(response['extension_attributes']['item_labels']);}\nif(response['extension_attributes']&&response['extension_attributes']['bundle_saved']){bundleSaved=JSON.parse(response['extension_attributes']['bundle_saved']);}\n$.each(response.items,function(index,item){if(bundleSaved){$.each(bundleSaved,function(ci,cartitem){if(item.item_id==cartitem.item_id&&cartitem.product_type==='bundle'){response.items[index]['product_type']=cartitem.product_type;response.items[index]['formatted_totals']=cartitem.formatted_totals;var savedMoney=cartitem.saved;if(savedMoney>0){response.items[index]['saved']=$t(\"saved money:\")+priceUtils.formatPrice(savedMoney);}\nif(cartitem.fixed_bundle_name){response.items[index]['name']+=' '+cartitem.fixed_bundle_name;}}});}\nif(itemLabels&&itemLabels[item.item_id]){response.items[index]['product_label']=itemLabels[item.item_id];}});quote.setTotals(response);deferred.resolve();}}).error(function(response){totals.isLoading(false);deferred.reject();errorProcessor.process(response);}).always(function(){totals.isLoading(false);});};});","Magento_Checkout/js/action/select-payment-method.min.js":"define(['Magento_Checkout/js/model/quote'],function(quote){'use strict';return function(paymentMethod){if(paymentMethod){paymentMethod.__disableTmpl={title:true};}\nquote.paymentMethod(paymentMethod);};});","Magento_Checkout/js/action/get-payment-information.min.js":"define(['jquery','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/url-builder','mage/storage','Magento_Checkout/js/model/error-processor','Magento_Customer/js/model/customer','Magento_Checkout/js/model/payment/method-converter','Magento_Checkout/js/model/payment-service','Magento_Customer/js/customer-data','Magento_Catalog/js/price-utils','mage/translate'],function($,quote,urlBuilder,storage,errorProcessor,customer,methodConverter,paymentService,customerData,priceUtils,$t){'use strict';return function(deferred,messageContainer){var serviceUrl;deferred=deferred||$.Deferred();if(!customer.isLoggedIn()){serviceUrl=urlBuilder.createUrl('/guest-carts/:cartId/payment-information',{cartId:quote.getQuoteId()});}else{serviceUrl=urlBuilder.createUrl('/carts/mine/payment-information',{});}\nreturn storage.get(serviceUrl,false).done(function(response){var itemLabels='';var bundleSaved='';var responseTotals=response.totals;if(responseTotals&&responseTotals['extension_attributes']&&responseTotals['extension_attributes']['item_labels']){itemLabels=JSON.parse(responseTotals['extension_attributes']['item_labels']);}\nif(responseTotals&&responseTotals['extension_attributes']&&responseTotals['extension_attributes']['bundle_saved']){bundleSaved=JSON.parse(responseTotals['extension_attributes']['bundle_saved']);}\n$.each(response.totals.items,function(index,item){if(bundleSaved){$.each(bundleSaved,function(ci,cartitem){if(item.item_id==cartitem.item_id&&cartitem.product_type==='bundle'){response.totals.items[index]['product_type']=cartitem.product_type;response.totals.items[index]['formatted_totals']=cartitem.formatted_totals;var savedMoney=cartitem.saved;if(savedMoney>0){response.totals.items[index]['saved']=$t(\"saved money:\")+priceUtils.formatPrice(savedMoney);}\nif(cartitem.fixed_bundle_name){response.totals.items[index]['name']+=' '+cartitem.fixed_bundle_name;}}});}\nif(itemLabels&&itemLabels[item.item_id]){response.totals.items[index]['product_label']=itemLabels[item.item_id];}});quote.setTotals(response.totals);paymentService.setPaymentMethods(methodConverter(response['payment_methods']));deferred.resolve();}).fail(function(response){errorProcessor.process(response,messageContainer);deferred.reject();});};});","Magento_Checkout/js/action/create-shipping-address.min.js":"define(['Magento_Customer/js/model/address-list','Magento_Checkout/js/model/address-converter'],function(addressList,addressConverter){'use strict';return function(addressData){var address=addressConverter.formAddressDataToQuoteAddress(addressData),isAddressUpdated=addressList().some(function(currentAddress,index,addresses){if(currentAddress.getKey()==address.getKey()){addresses[index]=address;return true;}\nreturn false;});if(!isAddressUpdated){addressList.push(address);}else{addressList.valueHasMutated();}\nreturn address;};});","Magento_Checkout/js/action/select-billing-address.min.js":"define(['jquery','../model/quote'],function($,quote){'use strict';return function(billingAddress){var address=null;if(quote.shippingAddress()&&billingAddress.getCacheKey()==quote.shippingAddress().getCacheKey()){address=$.extend({},billingAddress);address.saveInAddressBook=null;}else{address=billingAddress;}\nquote.billingAddress(address);};});","Magento_Checkout/js/action/select-shipping-method.min.js":"define(['../model/quote'],function(quote){'use strict';return function(shippingMethod){quote.shippingMethod(shippingMethod);};});","Magento_Checkout/js/action/set-shipping-information.min.js":"define(['../model/quote','Magento_Checkout/js/model/shipping-save-processor'],function(quote,shippingSaveProcessor){'use strict';return function(){return shippingSaveProcessor.saveShippingInformation(quote.shippingAddress().getType());};});","Magento_Checkout/js/action/redirect-on-success.min.js":"define(['mage/url','Magento_Checkout/js/model/full-screen-loader'],function(url,fullScreenLoader){'use strict';return{redirectUrl:window.checkoutConfig.defaultSuccessPageUrl,execute:function(){fullScreenLoader.startLoader();window.location.replace(url.build(this.redirectUrl));}};});","Magento_Checkout/js/action/recollect-shipping-rates.min.js":"define(['Magento_Checkout/js/model/quote','Magento_Checkout/js/action/select-shipping-address','Magento_Checkout/js/model/shipping-rate-registry'],function(quote,selectShippingAddress,rateRegistry){'use strict';return function(){var shippingAddress=null;if(!quote.isVirtual()){shippingAddress=quote.shippingAddress();rateRegistry.set(shippingAddress.getCacheKey(),null);selectShippingAddress(shippingAddress);}};});","Magento_Checkout/js/action/create-billing-address.min.js":"define(['Magento_Checkout/js/model/address-converter'],function(addressConverter){'use strict';return function(addressData){var address=addressConverter.formAddressDataToQuoteAddress(addressData);address.getType=function(){return'new-customer-billing-address';};return address;};});","Magento_Checkout/js/action/place-order.min.js":"define(['Magento_Checkout/js/model/quote','Magento_Checkout/js/model/url-builder','Magento_Customer/js/model/customer','Magento_Checkout/js/model/place-order'],function(quote,urlBuilder,customer,placeOrderService){'use strict';return function(paymentData,messageContainer){var serviceUrl,payload;payload={cartId:quote.getQuoteId(),billingAddress:quote.billingAddress(),paymentMethod:paymentData};if(customer.isLoggedIn()){serviceUrl=urlBuilder.createUrl('/carts/mine/payment-information',{});}else{serviceUrl=urlBuilder.createUrl('/guest-carts/:quoteId/payment-information',{quoteId:quote.getQuoteId()});payload.email=quote.guestEmail;}\nreturn placeOrderService(serviceUrl,payload,messageContainer);};});","Magento_Checkout/js/action/set-payment-information-extended.min.js":"define(['Magento_Checkout/js/model/quote','Magento_Checkout/js/model/url-builder','mage/storage','Magento_Checkout/js/model/error-processor','Magento_Customer/js/model/customer','Magento_Checkout/js/action/get-totals','Magento_Checkout/js/model/full-screen-loader','underscore'],function(quote,urlBuilder,storage,errorProcessor,customer,getTotalsAction,fullScreenLoader,_){'use strict';var filterTemplateData=function(data){return _.each(data,function(value,key,list){if(_.isArray(value)||_.isObject(value)){list[key]=filterTemplateData(value);}\nif(key==='__disableTmpl'){delete list[key];}});};return function(messageContainer,paymentData,skipBilling){var serviceUrl,payload;paymentData=filterTemplateData(paymentData);skipBilling=skipBilling||false;payload={cartId:quote.getQuoteId(),paymentMethod:paymentData};if(!customer.isLoggedIn()){serviceUrl=urlBuilder.createUrl('/guest-carts/:cartId/set-payment-information',{cartId:quote.getQuoteId()});payload.email=quote.guestEmail;}else{serviceUrl=urlBuilder.createUrl('/carts/mine/set-payment-information',{});}\nif(skipBilling===false){payload.billingAddress=quote.billingAddress();}\nfullScreenLoader.startLoader();return storage.post(serviceUrl,JSON.stringify(payload)).fail(function(response){errorProcessor.process(response,messageContainer);}).always(function(){fullScreenLoader.stopLoader();});};});","Magento_Checkout/js/action/set-payment-information.min.js":"define(['Magento_Checkout/js/action/set-payment-information-extended'],function(setPaymentInformationExtended){'use strict';return function(messageContainer,paymentData){return setPaymentInformationExtended(messageContainer,paymentData,false);};});","Magento_Checkout/js/action/set-billing-address.min.js":"define(['jquery','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/url-builder','mage/storage','Magento_Checkout/js/model/error-processor','Magento_Customer/js/model/customer','Magento_Checkout/js/model/full-screen-loader','Magento_Checkout/js/action/get-payment-information'],function($,quote,urlBuilder,storage,errorProcessor,customer,fullScreenLoader,getPaymentInformationAction){'use strict';return function(messageContainer){var serviceUrl,payload;if(!customer.isLoggedIn()){serviceUrl=urlBuilder.createUrl('/guest-carts/:cartId/billing-address',{cartId:quote.getQuoteId()});payload={cartId:quote.getQuoteId(),address:quote.billingAddress()};}else{serviceUrl=urlBuilder.createUrl('/carts/mine/billing-address',{});payload={cartId:quote.getQuoteId(),address:quote.billingAddress()};}\nfullScreenLoader.startLoader();return storage.post(serviceUrl,JSON.stringify(payload)).done(function(){var deferred=$.Deferred();getPaymentInformationAction(deferred);$.when(deferred).done(function(){fullScreenLoader.stopLoader();});}).fail(function(response){errorProcessor.process(response,messageContainer);fullScreenLoader.stopLoader();});};});","Magento_Checkout/js/view/minicart.min.js":"define(['uiComponent','Magento_Customer/js/customer-data','jquery','ko','underscore','sidebar','mage/translate','mage/dropdown'],function(Component,customerData,$,ko,_){'use strict';var sidebarInitialized=false,addToCartCalls=0,miniCart;miniCart=$('[data-block=\\'minicart\\']');function initSidebar(){if(miniCart.data('mageSidebar')){miniCart.sidebar('update');}\nif(!$('[data-role=product-item]').length){return false;}\nminiCart.trigger('contentUpdated');if(sidebarInitialized){return false;}\nsidebarInitialized=true;miniCart.sidebar({'targetElement':'div.block.block-minicart','url':{'checkout':window.checkout.checkoutUrl,'update':window.checkout.updateItemQtyUrl,'remove':window.checkout.removeItemUrl,'loginUrl':window.checkout.customerLoginUrl,'isRedirectRequired':window.checkout.isRedirectRequired},'button':{'checkout':'#top-cart-btn-checkout','remove':'#mini-cart a.action.delete','close':'#btn-minicart-close'},'showcart':{'parent':'span.counter','qty':'span.counter-number','label':'span.counter-label'},'minicart':{'list':'#mini-cart','content':'#minicart-content-wrapper','qty':'div.items-total','subtotal':'div.subtotal span.price','maxItemsVisible':window.checkout.minicartMaxItemsVisible},'item':{'qty':':input.cart-item-qty','button':':button.update-cart-item'},'confirmMessage':$.mage.__('Are you sure you would like to remove this item from the shopping cart?')});}\nminiCart.on('dropdowndialogopen',function(){initSidebar();});return Component.extend({shoppingCartUrl:window.checkout.shoppingCartUrl,maxItemsToDisplay:window.checkout.maxItemsToDisplay,cart:{},initialize:function(){var self=this,cartData=customerData.get('cart');this.update(cartData());cartData.subscribe(function(updatedCart){addToCartCalls--;this.isLoading(addToCartCalls>0);sidebarInitialized=false;this.update(updatedCart);initSidebar();},this);$('[data-block=\"minicart\"]').on('contentLoading',function(){addToCartCalls++;self.isLoading(true);});if(cartData().website_id!==window.checkout.websiteId&&cartData().website_id!==undefined||cartData().storeId!==window.checkout.storeId&&cartData().storeId!==undefined){customerData.reload(['cart'],false);}\nreturn this._super();},isLoading:ko.observable(false),initSidebar:initSidebar,closeMinicart:function(){$('[data-block=\"minicart\"]').find('[data-role=\"dropdownDialog\"]').dropdownDialog('close');},closeSidebar:function(){var minicart=$('[data-block=\"minicart\"]');minicart.on('click','[data-action=\"close\"]',function(event){event.stopPropagation();minicart.find('[data-role=\"dropdownDialog\"]').dropdownDialog('close');});return true;},getItemRenderer:function(productType){return this.itemRenderer[productType]||'defaultRenderer';},update:function(updatedCart){_.each(updatedCart,function(value,key){if(!this.cart.hasOwnProperty(key)){this.cart[key]=ko.observable();}\nthis.cart[key](value);},this);},getCartParam:function(name){if(!_.isUndefined(name)){if(!this.cart.hasOwnProperty(name)){this.cart[name]=ko.observable();}}\nreturn this.cart[name]();},getCartItems:function(){var items=this.getCartParam('items')||[];items=items.slice(parseInt(-this.maxItemsToDisplay,10));return items;},getCartLineItemsCount:function(){var items=this.getCartParam('items')||[];return parseInt(items.length,10);}});});","Magento_Checkout/js/view/shipping-information.min.js":"define(['jquery','uiComponent','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/step-navigator','Magento_Checkout/js/model/sidebar'],function($,Component,quote,stepNavigator,sidebarModel){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/shipping-information'},isVisible:function(){return!quote.isVirtual()&&stepNavigator.isProcessed('shipping');},getShippingMethodTitle:function(){var shippingMethod=quote.shippingMethod(),shippingMethodTitle='';if(!shippingMethod){return'';}\nshippingMethodTitle=shippingMethod['carrier_title'];if(typeof shippingMethod['method_title']!=='undefined'){shippingMethodTitle+=' - '+shippingMethod['method_title'];}\nreturn shippingMethodTitle;},back:function(){sidebarModel.hide();stepNavigator.navigateTo('shipping');},backToShippingMethod:function(){sidebarModel.hide();stepNavigator.navigateTo('shipping','opc-shipping_method');}});});","Magento_Checkout/js/view/registration.min.js":"define(['jquery','uiComponent','Magento_Ui/js/model/messageList'],function($,Component,messageList){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/registration',accountCreated:false,creationStarted:false,isFormVisible:true},initObservable:function(){this._super().observe('accountCreated').observe('isFormVisible').observe('creationStarted');return this;},getEmailAddress:function(){return this.email;},getUrl:function(){return this.registrationUrl;},createAccount:function(){this.creationStarted(true);$.post(this.registrationUrl).done(function(response){if(response.errors==false){this.accountCreated(true);}else{messageList.addErrorMessage(response);}\nthis.isFormVisible(false);}.bind(this)).fail(function(response){this.accountCreated(false);this.isFormVisible(false);messageList.addErrorMessage(response);}.bind(this));}});});","Magento_Checkout/js/view/summary.min.js":"define(['uiComponent','Magento_Checkout/js/model/totals'],function(Component,totals){'use strict';return Component.extend({isLoading:totals.isLoading});});","Magento_Checkout/js/view/estimation.min.js":"define(['uiComponent','Magento_Checkout/js/model/quote','Magento_Catalog/js/price-utils','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/sidebar'],function(Component,quote,priceUtils,totals,sidebarModel){'use strict';return Component.extend({isLoading:totals.isLoading,getQuantity:function(){if(totals.totals()){return parseFloat(totals.totals()['items_qty']);}\nreturn 0;},getPureValue:function(){if(totals.totals()){return parseFloat(totals.getSegment('grand_total').value);}\nreturn 0;},showSidebar:function(){sidebarModel.show();},getFormattedPrice:function(price){return priceUtils.formatPrice(price,quote.getPriceFormat());},getValue:function(){return this.getFormattedPrice(this.getPureValue());}});});","Magento_Checkout/js/view/shipping.min.js":"define(['jquery','underscore','Magento_Ui/js/form/form','ko','Magento_Customer/js/model/customer','Magento_Customer/js/customer-data','Magento_Customer/js/model/address-list','Magento_Customer/js/model/customer/address','Magento_Checkout/js/model/address-converter','Magento_Checkout/js/model/quote','Magento_Checkout/js/action/create-shipping-address','Magento_Checkout/js/action/select-shipping-address','Magento_Checkout/js/model/shipping-rates-validator','Magento_Checkout/js/model/shipping-address/form-popup-state','Magento_Checkout/js/model/shipping-service','Magento_Checkout/js/action/select-shipping-method','Magento_Checkout/js/model/shipping-rate-registry','Magento_Checkout/js/action/set-shipping-information','Magento_Checkout/js/model/step-navigator','Magento_Ui/js/modal/modal','Magento_Checkout/js/model/checkout-data-resolver','Magento_Checkout/js/checkout-data','uiRegistry','mage/url','mageUtils','uiLayout','mage/translate','Magento_Checkout/js/model/shipping-rate-service'],function($,_,Component,ko,customer,customerData,addressList,Address,addressConverter,quote,createShippingAddress,selectShippingAddress,shippingRatesValidator,formPopUpState,shippingService,selectShippingMethodAction,rateRegistry,setShippingInformationAction,stepNavigator,modal,checkoutDataResolver,checkoutData,registry,urlBuilder,utils,layout,$t){'use strict';var popUp=null;return Component.extend({defaults:{template:'Magento_Checkout/shipping',shippingFormTemplate:'Magento_Checkout/shipping-address/form',shippingMethodListTemplate:'Magento_Checkout/shipping-address/shipping-method-list',shippingMethodItemTemplate:'Magento_Checkout/shipping-address/shipping-method-item'},visible:ko.observable(true),errorValidationMessage:ko.observable(false),isCustomerLoggedIn:customer.isLoggedIn,isFormPopUpVisible:formPopUpState.isVisible,isFormInline:false,isNewAddressAdded:ko.observable(false),saveInAddressBook:1,quoteIsVirtual:quote.isVirtual(),initialize:function(){var self=this,hasNewAddress,fieldsetName='checkout.steps.shipping-step.shippingAddress.shipping-address-fieldset';this._super();stepNavigator.registerStep('shipping','',$t('Shipping'),this.visible,_.bind(this.navigate,this),this.sortOrder);checkoutDataResolver.resolveShippingAddress();hasNewAddress=addressList.some(function(address){return address.getType()=='new-customer-address';});this.isNewAddressAdded(hasNewAddress);this.isFormPopUpVisible.subscribe(function(value){if(value){self.getPopUp();}});quote.shippingMethod.subscribe(function(){self.errorValidationMessage(false);});registry.async('checkoutProvider')(function(checkoutProvider){var shippingAddressData=checkoutData.getShippingAddressFromData();if(shippingAddressData){checkoutProvider.set('shippingAddress',$.extend(true,{},checkoutProvider.get('shippingAddress'),shippingAddressData));}\ncheckoutProvider.on('shippingAddress',function(shippingAddrsData){checkoutData.setShippingAddressFromData(shippingAddrsData);});shippingRatesValidator.initFields(fieldsetName);});return this;},navigate:function(step){step&&step.isVisible(true);},getPopUp:function(){this.showFormPopUp();},onClosePopUp:function(){checkoutData.setShippingAddressFromData($.extend(true,{},this.temporaryAddress));this.getPopUp().closeModal();},showFormPopUp:function(){var self=this;var modal_options={type:'popup',responsive:true,innerScroll:false,clickableOverlay:false,title:$t('New Shipping Address'),modalClass:'address-dialog custom-address-dialog',overlayClass:'modals-overlay',opened:function(){$('html').addClass('noscroll');$(\".modal-footer\").hide();},closed:function(){$(\"body\").trigger('processStart');$('html').removeClass('noscroll');$('#custom-address-modal').empty();self.isFormPopUpVisible(false);var sections=['addresses-data'];$.when(customerData.reload(sections,true)).then(function(){var addressesData=customerData.get('addresses-data');var items=[];if(Object.keys(addressesData()).length){$.each(addressesData(),function(key,item){if($.type(item)==\"object\"){items.push(new Address(item));}});}\naddressList=ko.observableArray(items);var rendererComponents=registry.get('checkout.steps.shipping-step.shippingAddress').getRegion('address-list')()[0]['rendererComponents'];_.each(addressList(),function(address,index){if(index in rendererComponents){rendererComponents[index].address(address);}else{var defaultRendererTemplate={parent:'${ $.$data.parentName }',name:'${ $.$data.name }',component:'Magento_Checkout/js/view/shipping-address/address-renderer/default',provider:'checkoutProvider'};var rendererTemplate=defaultRendererTemplate;var templateData={parentName:'checkout.steps.shipping-step.shippingAddress.address-list',name:index};var rendererComponent=utils.template(rendererTemplate,templateData);utils.extend(rendererComponent,{address:ko.observable(address)});layout([rendererComponent]);rendererComponents[index]=rendererComponent}},this);if(addressList().length){var newAddress=[];$.each(addressList(),function(key,item){newAddress[item.customerAddressId]=item});var address=newAddress.pop();selectShippingAddress(address);checkoutData.setSelectedShippingAddress(address.getKey());}\nself.validateAndSaveIfChanged();$(\"body\").trigger('processStop');});}};if(!customer.isLoggedIn()){window.location.href=urlBuilder.build('customer/account/login');return false;}else{var popUp=modal(modal_options,$('#custom-address-modal'));$('#custom-address-modal').empty();var addUrl=urlBuilder.build('customer/address/new/');$('#custom-address-modal').html('<iframe style=\"border: 0px; \" src=\"'+addUrl+'\" width=\"100%\" height=\"450px\"></iframe>');$('#custom-address-modal').modal('openModal');}},rates:shippingService.getShippingRates(),isLoading:shippingService.isLoading,isSelected:ko.computed(function(){return quote.shippingMethod()?quote.shippingMethod()['carrier_code']+'_'+quote.shippingMethod()['method_code']:null;}),selectShippingMethod:function(shippingMethod){selectShippingMethodAction(shippingMethod);checkoutData.setSelectedShippingRate(shippingMethod['carrier_code']+'_'+shippingMethod['method_code']);return true;},setShippingInformation:function(){if(this.validateShippingInformation()){quote.billingAddress(null);checkoutDataResolver.resolveBillingAddress();registry.async('checkoutProvider')(function(checkoutProvider){var shippingAddressData=checkoutData.getShippingAddressFromData();if(shippingAddressData){checkoutProvider.set('shippingAddress',$.extend(true,{},checkoutProvider.get('shippingAddress'),shippingAddressData));}});setShippingInformationAction().done(function(){stepNavigator.next();});}},validateShippingInformation:function(){var shippingAddress,addressData,loginFormSelector='form[data-role=email-with-possible-login]',emailValidationResult=customer.isLoggedIn(),field,country=registry.get(this.parentName+'.shippingAddress.shipping-address-fieldset.country_id'),countryIndexedOptions=country.indexedOptions,option=countryIndexedOptions[quote.shippingAddress().countryId],messageContainer=registry.get('checkout.errors').messageContainer;if(!quote.shippingMethod()&&!quote.isVirtual()){this.errorValidationMessage($t('The shipping method is missing. Select the shipping method and try again.'));return false;}\nif(!customer.isLoggedIn()){$(loginFormSelector).validation();emailValidationResult=Boolean($(loginFormSelector+' input[name=username]').valid());}\nif(this.isFormInline){this.source.set('params.invalid',false);this.triggerShippingDataValidateEvent();if(emailValidationResult&&this.source.get('params.invalid')||!quote.shippingMethod()['method_code']||!quote.shippingMethod()['carrier_code']){this.focusInvalid();return false;}\nshippingAddress=quote.shippingAddress();addressData=addressConverter.formAddressDataToQuoteAddress(this.source.get('shippingAddress'));for(field in addressData){if(addressData.hasOwnProperty(field)&&shippingAddress.hasOwnProperty(field)&&typeof addressData[field]!='function'&&_.isEqual(shippingAddress[field],addressData[field])){shippingAddress[field]=addressData[field];}else if(typeof addressData[field]!='function'&&!_.isEqual(shippingAddress[field],addressData[field])){shippingAddress=addressData;break;}}\nif(customer.isLoggedIn()){shippingAddress['save_in_address_book']=1;}\nselectShippingAddress(shippingAddress);}else if(customer.isLoggedIn()&&option&&option['is_region_required']&&(quote.shippingAddress().telephone&&!quote.shippingAddress().region)){messageContainer.addErrorMessage({message:$t('Please specify a regionId in shipping address.')});return false;}\nif(!emailValidationResult){$(loginFormSelector+' input[name=username]').focus();return false;}\nreturn true;},triggerShippingDataValidateEvent:function(){this.source.trigger('shippingAddress.data.validate');if(this.source.get('shippingAddress.custom_attributes')){this.source.trigger('shippingAddress.custom_attributes.data.validate');}}});});","Magento_Checkout/js/view/progress-bar.min.js":"define(['jquery','underscore','ko','uiComponent','Magento_Checkout/js/model/step-navigator'],function($,_,ko,Component,stepNavigator){'use strict';var steps=stepNavigator.steps;return Component.extend({defaults:{template:'Magento_Checkout/progress-bar',visible:true},steps:steps,initialize:function(){var stepsValue;this._super();window.addEventListener('hashchange',_.bind(stepNavigator.handleHash,stepNavigator));if(!window.location.hash){stepsValue=stepNavigator.steps();if(stepsValue.length){stepNavigator.setHash(stepsValue.sort(stepNavigator.sortItems)[0].code);}}\nstepNavigator.handleHash();},sortItems:function(itemOne,itemTwo){return stepNavigator.sortItems(itemOne,itemTwo);},navigateTo:function(step){stepNavigator.navigateTo(step.code);},isProcessed:function(item){return stepNavigator.isProcessed(item.code);}});});","Magento_Checkout/js/view/authentication-messages.min.js":"define(['Magento_Ui/js/view/messages','Magento_Checkout/js/model/authentication-messages'],function(Component,messageContainer){'use strict';return Component.extend({initialize:function(config){return this._super(config,messageContainer);}});});","Magento_Checkout/js/view/billing-address.min.js":"define(['ko','underscore','Magento_Ui/js/form/form','Magento_Customer/js/model/customer','Magento_Customer/js/model/address-list','Magento_Checkout/js/model/quote','Magento_Checkout/js/action/create-billing-address','Magento_Checkout/js/action/select-billing-address','Magento_Checkout/js/checkout-data','Magento_Checkout/js/model/checkout-data-resolver','Magento_Customer/js/customer-data','Magento_Checkout/js/action/set-billing-address','Magento_Ui/js/model/messageList','mage/translate','Magento_Checkout/js/model/billing-address-postcode-validator'],function(ko,_,Component,customer,addressList,quote,createBillingAddress,selectBillingAddress,checkoutData,checkoutDataResolver,customerData,setBillingAddressAction,globalMessageList,$t,billingAddressPostcodeValidator){'use strict';var lastSelectedBillingAddress=null,countryData=customerData.get('directory-data'),addressOptions=addressList().filter(function(address){return address.getType()==='customer-address';});return Component.extend({defaults:{template:'Magento_Checkout/billing-address',actionsTemplate:'Magento_Checkout/billing-address/actions',formTemplate:'Magento_Checkout/billing-address/form',detailsTemplate:'Magento_Checkout/billing-address/details',links:{isAddressFormVisible:'${$.billingAddressListProvider}:isNewAddressSelected'}},currentBillingAddress:quote.billingAddress,customerHasAddresses:addressOptions.length>0,initialize:function(){this._super();quote.paymentMethod.subscribe(function(){checkoutDataResolver.resolveBillingAddress();},this);billingAddressPostcodeValidator.initFields(this.get('name')+'.form-fields');},initObservable:function(){this._super().observe({selectedAddress:null,isAddressDetailsVisible:quote.billingAddress()!=null,isAddressFormVisible:!customer.isLoggedIn()||!addressOptions.length,isAddressSameAsShipping:true,saveInAddressBook:1});quote.billingAddress.subscribe(function(newAddress){if(quote.isVirtual()){this.isAddressSameAsShipping(true);}else{this.isAddressSameAsShipping(newAddress!=null&&newAddress.getCacheKey()==quote.shippingAddress().getCacheKey());}\nif(newAddress!=null&&newAddress.saveInAddressBook!==undefined){this.saveInAddressBook(newAddress.saveInAddressBook);}else{this.saveInAddressBook(1);}\nthis.isAddressDetailsVisible(true);},this);return this;},canUseShippingAddress:ko.computed(function(){return!quote.isVirtual()&&quote.shippingAddress()&&quote.shippingAddress().canUseForBilling();}),addressOptionsText:function(address){return address.getAddressInline();},useShippingAddress:function(){if(this.isAddressSameAsShipping()){selectBillingAddress(quote.shippingAddress());this.updateAddresses();this.isAddressDetailsVisible(true);}else{lastSelectedBillingAddress=quote.billingAddress();quote.billingAddress(null);this.isAddressDetailsVisible(false);}\ncheckoutData.setSelectedBillingAddress(null);return true;},updateAddress:function(){var addressData,newBillingAddress;if(this.selectedAddress()&&!this.isAddressFormVisible()){selectBillingAddress(this.selectedAddress());checkoutData.setSelectedBillingAddress(this.selectedAddress().getKey());}else{this.source.set('params.invalid',false);this.source.trigger(this.dataScopePrefix+'.data.validate');if(this.source.get(this.dataScopePrefix+'.custom_attributes')){this.source.trigger(this.dataScopePrefix+'.custom_attributes.data.validate');}\nif(!this.source.get('params.invalid')){addressData=this.source.get(this.dataScopePrefix);if(customer.isLoggedIn()&&!this.customerHasAddresses){this.saveInAddressBook(1);}\naddressData['save_in_address_book']=this.saveInAddressBook()?1:0;newBillingAddress=createBillingAddress(addressData);selectBillingAddress(newBillingAddress);checkoutData.setSelectedBillingAddress(newBillingAddress.getKey());checkoutData.setNewCustomerBillingAddress(addressData);}}\nthis.updateAddresses();},editAddress:function(){lastSelectedBillingAddress=quote.billingAddress();quote.billingAddress(null);this.isAddressDetailsVisible(false);},cancelAddressEdit:function(){this.restoreBillingAddress();if(quote.billingAddress()){this.isAddressSameAsShipping(quote.billingAddress()!=null&&quote.billingAddress().getCacheKey()==quote.shippingAddress().getCacheKey()&&!quote.isVirtual());this.isAddressDetailsVisible(true);}},canUseCancelBillingAddress:ko.computed(function(){return quote.billingAddress()||lastSelectedBillingAddress;}),restoreBillingAddress:function(){if(lastSelectedBillingAddress!=null){selectBillingAddress(lastSelectedBillingAddress);}},getCountryName:function(countryId){return countryData()[countryId]!=undefined?countryData()[countryId].name:'';},updateAddresses:function(){if(window.checkoutConfig.reloadOnBillingAddress||!window.checkoutConfig.displayBillingOnPaymentMethod){setBillingAddressAction(globalMessageList);}},getCode:function(parent){return _.isFunction(parent.getCode)?parent.getCode():'shared';},getCustomAttributeLabel:function(attribute){var resultAttribute;if(typeof attribute==='string'){return attribute;}\nif(attribute.label){return attribute.label;}\nif(typeof this.source.get('customAttributes')!=='undefined'){resultAttribute=_.findWhere(this.source.get('customAttributes')[attribute['attribute_code']],{value:attribute.value});}\nreturn resultAttribute&&resultAttribute.label||attribute.value;}});});","Magento_Checkout/js/view/beforePlaceOrder.min.js":"define(['uiComponent'],function(Component){'use strict';return Component.extend({defaults:{displayArea:'beforePlaceOrder'}});});","Magento_Checkout/js/view/authentication.min.js":"define(['jquery','Magento_Ui/js/form/form','Magento_Customer/js/action/login','Magento_Customer/js/model/customer','mage/validation','Magento_Checkout/js/model/authentication-messages','Magento_Checkout/js/model/full-screen-loader'],function($,Component,loginAction,customer,validation,messageContainer,fullScreenLoader){'use strict';var checkoutConfig=window.checkoutConfig;return Component.extend({isGuestCheckoutAllowed:checkoutConfig.isGuestCheckoutAllowed,isCustomerLoginRequired:checkoutConfig.isCustomerLoginRequired,registerUrl:checkoutConfig.registerUrl,forgotPasswordUrl:checkoutConfig.forgotPasswordUrl,autocomplete:checkoutConfig.autocomplete,defaults:{template:'Magento_Checkout/authentication'},isActive:function(){return!customer.isLoggedIn();},login:function(loginForm){var loginData={},formDataArray=$(loginForm).serializeArray();formDataArray.forEach(function(entry){loginData[entry.name]=entry.value;});if($(loginForm).validation()&&$(loginForm).validation('isValid')){fullScreenLoader.startLoader();loginAction(loginData,checkoutConfig.checkoutUrl,undefined,messageContainer).always(function(){fullScreenLoader.stopLoader();});}}});});","Magento_Checkout/js/view/payment.min.js":"define(['jquery','underscore','uiComponent','ko','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/step-navigator','Magento_Checkout/js/model/payment-service','Magento_Checkout/js/model/payment/method-converter','Magento_Checkout/js/action/get-payment-information','Magento_Checkout/js/model/checkout-data-resolver','mage/translate'],function($,_,Component,ko,quote,stepNavigator,paymentService,methodConverter,getPaymentInformation,checkoutDataResolver,$t){'use strict';paymentService.setPaymentMethods(methodConverter(window.checkoutConfig.paymentMethods));return Component.extend({defaults:{template:'Magento_Checkout/payment',activeMethod:''},isVisible:ko.observable(quote.isVirtual()),quoteIsVirtual:quote.isVirtual(),isPaymentMethodsAvailable:ko.computed(function(){return paymentService.getAvailablePaymentMethods().length>0;}),initialize:function(){this._super();checkoutDataResolver.resolvePaymentMethod();stepNavigator.registerStep('payment',null,$t('Review & Payments'),this.isVisible,_.bind(this.navigate,this),this.sortOrder);return this;},navigate:function(){var self=this;if(!self.hasShippingMethod()){this.isVisible(false);stepNavigator.setHash('shipping');}else{getPaymentInformation().done(function(){self.isVisible(true);});}},hasShippingMethod:function(){return window.checkoutConfig.selectedShippingMethod!==null;},getFormKey:function(){return window.checkoutConfig.formKey;}});});","Magento_Checkout/js/view/sidebar.min.js":"define(['uiComponent','ko','jquery','Magento_Checkout/js/model/sidebar'],function(Component,ko,$,sidebarModel){'use strict';return Component.extend({setModalElement:function(element){sidebarModel.setPopup($(element));}});});","Magento_Checkout/js/view/shipping-information/list.min.js":"define(['jquery','ko','mageUtils','uiComponent','uiLayout','Magento_Checkout/js/model/quote'],function($,ko,utils,Component,layout,quote){'use strict';var defaultRendererTemplate={parent:'${ $.$data.parentName }',name:'${ $.$data.name }',component:'Magento_Checkout/js/view/shipping-information/address-renderer/default',provider:'checkoutProvider'};return Component.extend({defaults:{template:'Magento_Checkout/shipping-information/list',rendererTemplates:{}},initialize:function(){var self=this;this._super().initChildren();quote.shippingAddress.subscribe(function(address){self.createRendererComponent(address);});return this;},initConfig:function(){this._super();this.rendererComponents={};return this;},initChildren:function(){return this;},createRendererComponent:function(address){var rendererTemplate,templateData,rendererComponent;$.each(this.rendererComponents,function(index,component){component.visible(false);});if(this.rendererComponents[address.getType()]){this.rendererComponents[address.getType()].address(address);this.rendererComponents[address.getType()].visible(true);}else{rendererTemplate=address.getType()!=undefined&&this.rendererTemplates[address.getType()]!=undefined?utils.extend({},defaultRendererTemplate,this.rendererTemplates[address.getType()]):defaultRendererTemplate;templateData={parentName:this.name,name:address.getType()};rendererComponent=utils.template(rendererTemplate,templateData);utils.extend(rendererComponent,{address:ko.observable(address),visible:ko.observable(true)});layout([rendererComponent]);this.rendererComponents[address.getType()]=rendererComponent;}}});});","Magento_Checkout/js/view/shipping-information/address-renderer/default.min.js":"define(['uiComponent','underscore','Magento_Customer/js/customer-data'],function(Component,_,customerData){'use strict';var countryData=customerData.get('directory-data');return Component.extend({defaults:{template:'Magento_Checkout/shipping-information/address-renderer/default'},getCountryName:function(countryId){return countryData()[countryId]!=undefined?countryData()[countryId].name:'';},getCustomAttributeLabel:function(attribute){var resultAttribute;if(typeof attribute==='string'){return attribute;}\nif(attribute.label){return attribute.label;}\nif(typeof this.source.get('customAttributes')!=='undefined'){resultAttribute=_.findWhere(this.source.get('customAttributes')[attribute['attribute_code']],{value:attribute.value});}\nreturn resultAttribute&&resultAttribute.label||attribute.value;}});});","Magento_Checkout/js/view/review/actions.min.js":"define(['uiComponent','Magento_Checkout/js/model/quote','underscore'],function(Component,quote,_){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/review/actions',displayArea:'actions'},getActiveView:function(){var view=this.getViewByCode(quote.paymentMethod());return view?view:this.getDefaultView();},getViewByCode:function(code){return _.find(this.elems(),function(elem){return elem.index==code&&!elem.isDefault;});},getDefaultView:function(){return _.find(this.elems(),function(elem){return elem.isDefault;});}});});","Magento_Checkout/js/view/review/actions/default.min.js":"define(['uiComponent'],function(Component){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/review/actions/default'},placeOrder:function(parent){return parent.placeOrder.bind(parent);}});});","Magento_Checkout/js/view/cart/totals.min.js":"define(['jquery','uiComponent','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/shipping-service'],function($,Component,totalsService,shippingService){'use strict';return Component.extend({isLoading:totalsService.isLoading,initialize:function(){this._super();totalsService.totals.subscribe(function(){$(window).trigger('resize');});shippingService.getShippingRates().subscribe(function(){$(window).trigger('resize');});},addShoppingCartSutBtn:function(){var $submitBtn=$('.cart-bottom-bar .sub-btn button');$submitBtn.parents('.cart-container').find(\"button.checkout\").trigger('click');},addShoppingCartDisabledBtn:function(){if($(\".checkout-methods-items\").hasClass(\"disabled-submit\")){$('.cart-bottom-bar .sub-btn').addClass(\"disabled-submit\");}}});});","Magento_Checkout/js/view/cart/shipping-estimation.min.js":"define(['jquery','Magento_Ui/js/form/form','Magento_Checkout/js/action/select-shipping-address','Magento_Checkout/js/model/address-converter','Magento_Checkout/js/model/cart/estimate-service','Magento_Checkout/js/checkout-data','Magento_Checkout/js/model/shipping-rates-validator','uiRegistry','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/checkout-data-resolver','Magento_Checkout/js/model/shipping-service','mage/validation'],function($,Component,selectShippingAddress,addressConverter,estimateService,checkoutData,shippingRatesValidator,registry,quote,checkoutDataResolver,shippingService){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/cart/shipping-estimation'},isVirtual:quote.isVirtual(),initialize:function(){this._super();shippingService.isLoading(true);registry.async('checkoutProvider')(function(checkoutProvider){var address,estimatedAddress;shippingService.isLoading(false);checkoutDataResolver.resolveEstimationAddress();address=quote.isVirtual()?quote.billingAddress():quote.shippingAddress();if(!address&&quote.isVirtual()){address=addressConverter.formAddressDataToQuoteAddress(checkoutData.getSelectedBillingAddress());}\nif(address){estimatedAddress=address.isEditable()?addressConverter.quoteAddressToFormAddressData(address):{'country_id':address.countryId,region:address.region,'region_id':address.regionId,postcode:address.postcode};checkoutProvider.set('shippingAddress',$.extend({},checkoutProvider.get('shippingAddress'),estimatedAddress));}\nif(!quote.isVirtual()){checkoutProvider.on('shippingAddress',function(shippingAddressData){checkoutData.setShippingAddressFromData(shippingAddressData);});}else{checkoutProvider.on('shippingAddress',function(shippingAddressData){checkoutData.setBillingAddressFromData(shippingAddressData);});}});return this;},initElement:function(element){this._super();if(element.index==='address-fieldsets'){shippingRatesValidator.bindChangeHandlers(element.elems(),true,500);element.elems.subscribe(function(elems){shippingRatesValidator.doElementBinding(elems[elems.length-1],true,500);});}\nreturn this;},getEstimationInfo:function(){var addressData=null;this.source.set('params.invalid',false);this.source.trigger('shippingAddress.data.validate');if(!this.source.get('params.invalid')){addressData=this.source.get('shippingAddress');selectShippingAddress(addressConverter.formAddressDataToQuoteAddress(addressData));}}});});","Magento_Checkout/js/view/cart/shipping-rates.min.js":"define(['ko','underscore','uiComponent','Magento_Checkout/js/model/shipping-service','Magento_Catalog/js/price-utils','Magento_Checkout/js/model/quote','Magento_Checkout/js/action/select-shipping-method','Magento_Checkout/js/checkout-data'],function(ko,_,Component,shippingService,priceUtils,quote,selectShippingMethodAction,checkoutData){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/cart/shipping-rates'},isVisible:ko.observable(!quote.isVirtual()),isLoading:shippingService.isLoading,shippingRates:shippingService.getShippingRates(),shippingRateGroups:ko.observableArray([]),selectedShippingMethod:ko.computed(function(){return quote.shippingMethod()?quote.shippingMethod()['carrier_code']+'_'+quote.shippingMethod()['method_code']:null;}),initObservable:function(){var self=this;this._super();this.shippingRates.subscribe(function(rates){self.shippingRateGroups([]);_.each(rates,function(rate){var carrierTitle=rate['carrier_title'];if(self.shippingRateGroups.indexOf(carrierTitle)===-1){self.shippingRateGroups.push(carrierTitle);}});});return this;},getRatesForGroup:function(shippingRateGroupTitle){return _.filter(this.shippingRates(),function(rate){return shippingRateGroupTitle===rate['carrier_title'];});},getFormattedPrice:function(price){return priceUtils.formatPrice(price,quote.getPriceFormat());},selectShippingMethod:function(methodData){selectShippingMethodAction(methodData);checkoutData.setSelectedShippingRate(methodData['carrier_code']+'_'+methodData['method_code']);return true;}});});","Magento_Checkout/js/view/cart/totals/shipping.min.js":"define(['Magento_Checkout/js/view/summary/shipping','Magento_Checkout/js/model/quote'],function(Component,quote){'use strict';return Component.extend({isCalculated:function(){return!!quote.shippingMethod();}});});","Magento_Checkout/js/view/checkout/minicart/subtotal/totals.min.js":"define(['ko','uiComponent','Magento_Customer/js/customer-data'],function(ko,Component,customerData){'use strict';return Component.extend({displaySubtotal:ko.observable(true),initialize:function(){this._super();this.cart=customerData.get('cart');}});});","Magento_Checkout/js/view/shipping-address/list.min.js":"define(['underscore','ko','mageUtils','uiComponent','uiLayout','Magento_Customer/js/model/address-list','Magento_Checkout/js/model/shipping-address/form-popup-state'],function(_,ko,utils,Component,layout,addressList,formPopUpState){'use strict';var defaultRendererTemplate={parent:'${ $.$data.parentName }',name:'${ $.$data.name }',component:'Magento_Checkout/js/view/shipping-address/address-renderer/default',provider:'checkoutProvider'};return Component.extend({defaults:{template:'Magento_Checkout/shipping-address/list',visible:addressList().length>0,rendererTemplates:[]},isFormPopUpVisible:formPopUpState.isVisible,initialize:function(){this._super().initChildren();addressList.subscribe(function(changes){var self=this;changes.forEach(function(change){if(change.status==='added'){self.createRendererComponent(change.value,change.index);}});},this,'arrayChange');return this;},initConfig:function(){this._super();this.rendererComponents=[];return this;},initChildren:function(){_.each(addressList(),this.createRendererComponent,this);return this;},addAddress:function(){this.isFormPopUpVisible(true);},createRendererComponent:function(address,index){var rendererTemplate,templateData,rendererComponent;if(index in this.rendererComponents){this.rendererComponents[index].address(address);}else{rendererTemplate=address.getType()!=undefined&&this.rendererTemplates[address.getType()]!=undefined?utils.extend({},defaultRendererTemplate,this.rendererTemplates[address.getType()]):defaultRendererTemplate;templateData={parentName:this.name,name:index};rendererComponent=utils.template(rendererTemplate,templateData);utils.extend(rendererComponent,{address:ko.observable(address)});layout([rendererComponent]);this.rendererComponents[index]=rendererComponent;}}});});","Magento_Checkout/js/view/shipping-address/address-renderer/default.min.js":"define(['jquery','ko','uiComponent','underscore','Magento_Checkout/js/action/select-shipping-address','Magento_Checkout/js/action/set-shipping-information','Amasty_Checkout/js/model/shipping-registry','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/shipping-address/form-popup-state','Magento_Checkout/js/checkout-data','Magento_Customer/js/customer-data','Magento_Customer/js/model/address-list','Magento_Customer/js/model/customer','Magento_Customer/js/model/customer/address','Magento_Ui/js/modal/modal','Magento_Ui/js/modal/confirm','Magento_Ui/js/model/messageList','uiRegistry','mage/url','mageUtils','uiLayout','mage/translate'],function($,ko,Component,_,selectShippingAddressAction,setShippingInformationAction,shippingRegistry,quote,formPopUpState,checkoutData,customerData,addressList,customer,Address,modal,confirm,messageList,registry,urlBuilder,utils,layout,$t){'use strict';var countryData=customerData.get('directory-data');return Component.extend({defaults:{template:'Magento_Checkout/shipping-address/address-renderer/default'},initObservable:function(){this._super();this.isSelected=ko.computed(function(){var isSelected=false,shippingAddress=quote.shippingAddress();if(shippingAddress){isSelected=shippingAddress.getKey()==this.address().getKey();}\nreturn isSelected;},this);return this;},getCountryName:function(countryId){return countryData()[countryId]!=undefined?countryData()[countryId].name:'';},getCustomAttributeLabel:function(attribute){var resultAttribute;if(typeof attribute==='string'){return attribute;}\nif(attribute.label){return attribute.label;}\nif(typeof this.source.get('customAttributes')!=='undefined'){resultAttribute=_.findWhere(this.source.get('customAttributes')[attribute['attribute_code']],{value:attribute.value});}\nreturn resultAttribute&&resultAttribute.label||attribute.value;},selectAddress:function(){selectShippingAddressAction(this.address());checkoutData.setSelectedShippingAddress(this.address().getKey());},editAddress:function(){var self=this;var modal_options={type:'popup',responsive:true,innerScroll:false,clickableOverlay:false,title:$t('Edit Shipping Address'),modalClass:'address-dialog custom-address-dialog',overlayClass:'modals-overlay',opened:function(){$(\".modal-footer\").hide();$('html').addClass('noscroll');},closed:function(){self.updateAddressList();$('html').removeClass('noscroll');$('#custom-address-modal').empty();}};if(!customer.isLoggedIn()){window.location.href=urlBuilder.build('customer/account/login');return false;}else{var popUp=modal(modal_options,$('#custom-address-modal'));$('#custom-address-modal').empty();var editUrl=urlBuilder.build('customer/address/edit/id/'+this.address().customerAddressId);$('#custom-address-modal').html('<iframe style=\"border: 0px; \" src=\"'+editUrl+'\" width=\"100%\" height=\"450px\"></iframe>');$('#custom-address-modal').modal('openModal');}},setDefaultShipping:function(){var self=this;if(!customer.isLoggedIn()){window.location.href=urlBuilder.build('customer/account/login');return false;}else{confirm({content:$t('Are you sure you want to set this address to default?'),actions:{confirm:function(){var editUrl=urlBuilder.build('custom/address/setdefault/id/'+self.address().customerAddressId);$(\"body\").trigger('processStart');$.ajax({url:editUrl+'/form_key/'+$.mage.cookies.get('form_key'),type:'POST'}).done(function(response){var message=response.message;if(response.success==true){self.updateAddressList();}else{messageList.addErrorMessage({'message':message});}\n$(\"body\").trigger('processStop');});}}});}},deleteAddress:function(){var self=this;if(!customer.isLoggedIn()){window.location.href=urlBuilder.build('customer/account/login');return false;}else{confirm({content:$t('Are you sure you want to delete this address?'),actions:{confirm:function(){var editUrl=urlBuilder.build('customer/address/delete/id/'+self.address().customerAddressId);$.ajax({url:editUrl+'/form_key/'+$.mage.cookies.get('form_key'),type:'POST'}).done(function(response){self.updateAddressList();});}}});}},updateAddressList:function(){self=this;var sections=['addresses-data'];$(\"body\").trigger('processStart');$.when(customerData.reload(sections,true)).then(function(){var addressesData=customerData.get('addresses-data');var items=[];if(Object.keys(addressesData()).length){$.each(addressesData(),function(key,item){if($.type(item)==\"object\"){items.push(new Address(item));}});}\naddressList=ko.observableArray(items);var rendererComponents=registry.get('checkout.steps.shipping-step.shippingAddress').getRegion('address-list')()[0]['rendererComponents'];_.each(addressList(),function(address,index){if(index in rendererComponents){rendererComponents[index].address(address);}else{var defaultRendererTemplate={parent:'${ $.$data.parentName }',name:'${ $.$data.name }',component:'Magento_Checkout/js/view/shipping-address/address-renderer/default',provider:'checkoutProvider'};var rendererTemplate=defaultRendererTemplate;var templateData={parentName:'checkout.steps.shipping-step.shippingAddress.address-list',name:index};var rendererComponent=utils.template(rendererTemplate,templateData);utils.extend(rendererComponent,{address:ko.observable(address)});layout([rendererComponent]);rendererComponents[index]=rendererComponent}},this);if(self.isSelected()){setShippingInformationAction();}\n$(\"body\").trigger('processStop');});},});});","Magento_Checkout/js/view/form/element/email.min.js":"define(['jquery','uiComponent','ko','Magento_Customer/js/model/customer','Magento_Customer/js/action/check-email-availability','Magento_Customer/js/action/login','Magento_Checkout/js/model/quote','Magento_Checkout/js/checkout-data','Magento_Checkout/js/model/full-screen-loader','mage/validation'],function($,Component,ko,customer,checkEmailAvailability,loginAction,quote,checkoutData,fullScreenLoader){'use strict';var validatedEmail;if(!checkoutData.getValidatedEmailValue()&&window.checkoutConfig.validatedEmailValue){checkoutData.setInputFieldEmailValue(window.checkoutConfig.validatedEmailValue);checkoutData.setValidatedEmailValue(window.checkoutConfig.validatedEmailValue);}\nvalidatedEmail=checkoutData.getValidatedEmailValue();if(validatedEmail&&!customer.isLoggedIn()){quote.guestEmail=validatedEmail;}\nreturn Component.extend({defaults:{template:'Magento_Checkout/form/element/email',email:checkoutData.getInputFieldEmailValue(),emailFocused:false,isLoading:false,isPasswordVisible:false,listens:{email:'emailHasChanged',emailFocused:'validateEmail'},ignoreTmpls:{email:true}},checkDelay:2000,checkRequest:null,isEmailCheckComplete:null,isCustomerLoggedIn:customer.isLoggedIn,forgotPasswordUrl:window.checkoutConfig.forgotPasswordUrl,emailCheckTimeout:0,initConfig:function(){this._super();this.isPasswordVisible=this.resolveInitialPasswordVisibility();return this;},initObservable:function(){this._super().observe(['email','emailFocused','isLoading','isPasswordVisible']);return this;},emailHasChanged:function(){var self=this;clearTimeout(this.emailCheckTimeout);if(self.validateEmail()){quote.guestEmail=self.email();checkoutData.setValidatedEmailValue(self.email());}\nthis.emailCheckTimeout=setTimeout(function(){if(self.validateEmail()){self.checkEmailAvailability();}else{self.isPasswordVisible(false);}},self.checkDelay);checkoutData.setInputFieldEmailValue(self.email());},checkEmailAvailability:function(){this.validateRequest();this.isEmailCheckComplete=$.Deferred();this.isLoading(true);this.checkRequest=checkEmailAvailability(this.isEmailCheckComplete,this.email());$.when(this.isEmailCheckComplete).done(function(){this.isPasswordVisible(false);}.bind(this)).fail(function(){this.isPasswordVisible(true);checkoutData.setCheckedEmailValue(this.email());}.bind(this)).always(function(){this.isLoading(false);}.bind(this));},validateRequest:function(){if(this.checkRequest!=null&&$.inArray(this.checkRequest.readyState,[1,2,3])){this.checkRequest.abort();this.checkRequest=null;}},validateEmail:function(focused){var loginFormSelector='form[data-role=email-with-possible-login]',usernameSelector=loginFormSelector+' input[name=username]',loginForm=$(loginFormSelector),validator,valid;loginForm.validation();if(focused===false&&!!this.email()){valid=!!$(usernameSelector).valid();if(valid){$(usernameSelector).removeAttr('aria-invalid aria-describedby');}\nreturn valid;}\nvalidator=loginForm.validate();return validator.check(usernameSelector);},login:function(loginForm){var loginData={},formDataArray=$(loginForm).serializeArray();formDataArray.forEach(function(entry){loginData[entry.name]=entry.value;});if(this.isPasswordVisible()&&$(loginForm).validation()&&$(loginForm).validation('isValid')){fullScreenLoader.startLoader();loginAction(loginData).always(function(){fullScreenLoader.stopLoader();});}},resolveInitialPasswordVisibility:function(){if(checkoutData.getInputFieldEmailValue()!==''&&checkoutData.getCheckedEmailValue()===''){return true;}\nif(checkoutData.getInputFieldEmailValue()!==''){return checkoutData.getInputFieldEmailValue()===checkoutData.getCheckedEmailValue();}\nreturn false;}});});","Magento_Checkout/js/view/summary/cart-items.min.js":"define(['ko','Magento_Checkout/js/model/totals','uiComponent','Magento_Checkout/js/model/step-navigator','Magento_Checkout/js/model/quote'],function(ko,totals,Component,stepNavigator,quote){'use strict';var useQty=window.checkoutConfig.useQty;return Component.extend({defaults:{template:'Magento_Checkout/summary/cart-items'},totals:totals.totals(),items:ko.observable([]),maxCartItemsToDisplay:window.checkoutConfig.maxCartItemsToDisplay,cartUrl:window.checkoutConfig.cartUrl,getItems:totals.getItems(),getItemsQty:function(){return parseFloat(this.totals['items_qty']);},getCartLineItemsCount:function(){return parseInt(totals.getItems()().length,10);},getCartSummaryItemsCount:function(){return useQty?this.getItemsQty():this.getCartLineItemsCount();},initialize:function(){this._super();this.setItems(totals.getItems()());totals.getItems().subscribe(function(items){this.setItems(items);}.bind(this));},setItems:function(items){if(items&&items.length>0){items=items.slice(parseInt(-this.maxCartItemsToDisplay,10));}\nthis.items(items);},isItemsBlockExpanded:function(){return quote.isVirtual()||stepNavigator.isProcessed('shipping');}});});","Magento_Checkout/js/view/summary/totals.min.js":"define(['jquery','Magento_Checkout/js/view/summary/abstract-total'],function($,Component){'use strict';return Component.extend({isDisplayed:function(){return this.isFullMode();},initSubmit:function(){var $submitBtn=$('.checkout-bottom-bar .sub-btn button');$submitBtn.parents('.checkout-container').find(\"button.amasty\").trigger('click');}});});","Magento_Checkout/js/view/summary/subtotal.min.js":"define(['Magento_Checkout/js/view/summary/abstract-total','Magento_Checkout/js/model/quote'],function(Component,quote){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/summary/subtotal'},getPureValue:function(){var totals=quote.getTotals()();if(totals){return totals.subtotal;}\nreturn quote.subtotal;},getValue:function(){return this.getFormattedPrice(this.getPureValue());}});});","Magento_Checkout/js/view/summary/shipping.min.js":"define(['jquery','underscore','Magento_Checkout/js/view/summary/abstract-total','Magento_Checkout/js/model/quote','Magento_SalesRule/js/view/summary/discount'],function($,_,Component,quote,discountView){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/summary/shipping'},quoteIsVirtual:quote.isVirtual(),totals:quote.getTotals(),getShippingMethodTitle:function(){var shippingMethod,shippingMethodTitle='';if(!this.isCalculated()){return'';}\nshippingMethod=quote.shippingMethod();if(!_.isArray(shippingMethod)&&!_.isObject(shippingMethod)){return'';}\nif(typeof shippingMethod['method_title']!=='undefined'){shippingMethodTitle=' - '+shippingMethod['method_title'];}\nreturn shippingMethodTitle?shippingMethod['carrier_title']+shippingMethodTitle:shippingMethod['carrier_title'];},isCalculated:function(){return this.totals()&&this.isFullMode()&&quote.shippingMethod()!=null;},getValue:function(){var price;if(!this.isCalculated()){return this.notCalculatedMessage;}\nprice=this.totals()['shipping_amount'];return this.getFormattedPrice(price);},haveToShowCoupon:function(){var couponCode=this.totals()['coupon_code'];if(typeof couponCode==='undefined'){couponCode=false;}\nreturn couponCode&&!discountView().isDisplayed();},getCouponDescription:function(){if(!this.haveToShowCoupon()){return'';}\nreturn'('+this.totals()['coupon_code']+')';}});});","Magento_Checkout/js/view/summary/grand-total.min.js":"define(['Magento_Checkout/js/view/summary/abstract-total','Magento_Checkout/js/model/quote'],function(Component,quote){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/summary/grand-total'},isDisplayed:function(){return this.isFullMode();},getPureValue:function(){var totals=quote.getTotals()();if(totals){return totals['grand_total'];}\nreturn quote['grand_total'];},getValue:function(){return this.getFormattedPrice(this.getPureValue());}});});","Magento_Checkout/js/view/summary/abstract-total.min.js":"define(['uiComponent','Magento_Checkout/js/model/quote','Magento_Catalog/js/price-utils','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/step-navigator'],function(Component,quote,priceUtils,totals,stepNavigator){'use strict';return Component.extend({getFormattedPrice:function(price){return priceUtils.formatPrice(price,quote.getPriceFormat());},getTotals:function(){return totals.totals();},isFullMode:function(){if(!this.getTotals()){return false;}\nreturn stepNavigator.isProcessed('shipping');}});});","Magento_Checkout/js/view/summary/item/details.min.js":"define(['uiComponent','jquery'],function(Component,$){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/summary/item/details'},getValue:function(quoteItem){return quoteItem.name;}});});","Magento_Checkout/js/view/summary/item/details/message.min.js":"define(['uiComponent'],function(Component){'use strict';var quoteMessages=window.checkoutConfig.quoteMessages;return Component.extend({defaults:{template:'Magento_Checkout/summary/item/details/message'},displayArea:'item_message',quoteMessages:quoteMessages,getMessage:function(item){if(this.quoteMessages[item['item_id']]){return this.quoteMessages[item['item_id']];}\nreturn null;}});});","Magento_Checkout/js/view/summary/item/details/subtotal.min.js":"define(['Magento_Checkout/js/view/summary/abstract-total'],function(viewModel){'use strict';return viewModel.extend({defaults:{displayArea:'after_details',template:'Magento_Checkout/summary/item/details/subtotal'},getValue:function(quoteItem){return this.getFormattedPrice(quoteItem['row_total']);}});});","Magento_Checkout/js/view/summary/item/details/thumbnail.min.js":"define(['uiComponent'],function(Component){'use strict';var imageData=window.checkoutConfig.imageData;return Component.extend({defaults:{template:'Magento_Checkout/summary/item/details/thumbnail'},displayArea:'before_details',imageData:imageData,getImageItem:function(item){if(this.imageData[item['item_id']]){return this.imageData[item['item_id']];}\nreturn[];},getSrc:function(item){if(this.imageData[item['item_id']]){return this.imageData[item['item_id']].src;}\nreturn null;},getWidth:function(item){if(this.imageData[item['item_id']]){return this.imageData[item['item_id']].width;}\nreturn null;},getHeight:function(item){if(this.imageData[item['item_id']]){return this.imageData[item['item_id']].height;}\nreturn null;},getAlt:function(item){if(this.imageData[item['item_id']]){return this.imageData[item['item_id']].alt;}\nreturn null;}});});","Magento_Checkout/js/view/billing-address/list.min.js":"define(['uiComponent','Magento_Customer/js/model/address-list','mage/translate','Magento_Customer/js/model/customer'],function(Component,addressList,$t,customer){'use strict';var newAddressOption={getAddressInline:function(){return $t('New Address');},customerAddressId:null},addressOptions=addressList().filter(function(address){return address.getType()==='customer-address';});return Component.extend({defaults:{template:'Magento_Checkout/billing-address',selectedAddress:null,isNewAddressSelected:false,addressOptions:addressOptions,exports:{selectedAddress:'${ $.parentName }:selectedAddress'}},initConfig:function(){this._super();this.addressOptions.push(newAddressOption);return this;},initObservable:function(){this._super().observe('selectedAddress isNewAddressSelected').observe({isNewAddressSelected:!customer.isLoggedIn()||!addressOptions.length});return this;},addressOptionsText:function(address){return address.getAddressInline();},onAddressChange:function(address){this.isNewAddressSelected(address===newAddressOption);}});});","Magento_Checkout/js/view/payment/default.min.js":"define(['ko','jquery','uiComponent','Magento_Checkout/js/action/place-order','Magento_Checkout/js/action/select-payment-method','Magento_Checkout/js/model/quote','Magento_Customer/js/model/customer','Magento_Checkout/js/model/payment-service','Magento_Checkout/js/checkout-data','Magento_Checkout/js/model/checkout-data-resolver','uiRegistry','Magento_Checkout/js/model/payment/additional-validators','Magento_Ui/js/model/messages','uiLayout','Magento_Checkout/js/action/redirect-on-success'],function(ko,$,Component,placeOrderAction,selectPaymentMethodAction,quote,customer,paymentService,checkoutData,checkoutDataResolver,registry,additionalValidators,Messages,layout,redirectOnSuccessAction){'use strict';return Component.extend({redirectAfterPlaceOrder:true,isPlaceOrderActionAllowed:ko.observable(quote.billingAddress()!=null),afterPlaceOrder:function(){},initialize:function(){var billingAddressCode,billingAddressData,defaultAddressData;this._super().initChildren();quote.billingAddress.subscribe(function(address){this.isPlaceOrderActionAllowed(address!==null);},this);checkoutDataResolver.resolveBillingAddress();billingAddressCode='billingAddress'+this.getCode();registry.async('checkoutProvider')(function(checkoutProvider){defaultAddressData=checkoutProvider.get(billingAddressCode);if(defaultAddressData===undefined){return;}\nbillingAddressData=checkoutData.getBillingAddressFromData();if(billingAddressData){checkoutProvider.set(billingAddressCode,$.extend(true,{},defaultAddressData,billingAddressData));}\ncheckoutProvider.on(billingAddressCode,function(providerBillingAddressData){checkoutData.setBillingAddressFromData(providerBillingAddressData);},billingAddressCode);});return this;},initChildren:function(){this.messageContainer=new Messages();this.createMessagesComponent();return this;},createMessagesComponent:function(){var messagesComponent={parent:this.name,name:this.name+'.messages',displayArea:'messages',component:'Magento_Ui/js/view/messages',config:{messageContainer:this.messageContainer}};layout([messagesComponent]);return this;},placeOrder:function(data,event){var self=this;if(event){event.preventDefault();}\nif(this.validate()&&additionalValidators.validate()&&this.isPlaceOrderActionAllowed()===true){this.isPlaceOrderActionAllowed(false);this.getPlaceOrderDeferredObject().done(function(){self.afterPlaceOrder();if(self.redirectAfterPlaceOrder){redirectOnSuccessAction.execute();}}).always(function(){self.isPlaceOrderActionAllowed(true);});return true;}\nreturn false;},getPlaceOrderDeferredObject:function(){return $.when(placeOrderAction(this.getData(),this.messageContainer));},selectPaymentMethod:function(){selectPaymentMethodAction(this.getData());checkoutData.setSelectedPaymentMethod(this.item.method);console.log($(this));return true;},isChecked:ko.computed(function(){if(window.checkoutConfig.quoteData['col_payment_method']){return quote.paymentMethod()?\"banktransfer\":null;}else{return quote.paymentMethod()?quote.paymentMethod().method:null;}}),isRadioButtonVisible:ko.computed(function(){return paymentService.getAvailablePaymentMethods().length!==1;}),getData:function(){return{'method':this.item.method,'po_number':null,'additional_data':null};},getTitle:function(){return this.item.title;},getCode:function(){return this.item.method;},validate:function(){return true;},getBillingAddressFormName:function(){return'billing-address-form-'+this.item.method;},disposeSubscriptions:function(){var billingAddressCode='billingAddress'+this.getCode();registry.async('checkoutProvider')(function(checkoutProvider){checkoutProvider.off(billingAddressCode);});}});});","Magento_Checkout/js/view/payment/email-validator.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/additional-validators','Magento_Checkout/js/model/customer-email-validator'],function(Component,additionalValidators,agreementValidator){'use strict';additionalValidators.registerValidator(agreementValidator);return Component.extend({});});","Magento_Checkout/js/view/payment/list.min.js":"define(['underscore','ko','mageUtils','uiComponent','Magento_Checkout/js/model/payment/method-list','Magento_Checkout/js/model/payment/renderer-list','uiLayout','Magento_Checkout/js/model/checkout-data-resolver','mage/translate','uiRegistry'],function(_,ko,utils,Component,paymentMethods,rendererList,layout,checkoutDataResolver,$t,registry){'use strict';return Component.extend({defaults:{template:'Magento_Checkout/payment-methods/list',visible:paymentMethods().length>0,configDefaultGroup:{name:'methodGroup',component:'Magento_Checkout/js/model/payment/method-group'},paymentGroupsList:[],defaultGroupTitle:$t('Select a new payment method')},initialize:function(){this._super().initDefaulGroup().initChildren();paymentMethods.subscribe(function(changes){checkoutDataResolver.resolvePaymentMethod();_.each(changes,function(change){if(change.status==='deleted'){this.removeRenderer(change.value.method);}},this);_.each(changes,function(change){if(change.status==='added'){this.createRenderer(change.value);}},this);},this,'arrayChange');return this;},initObservable:function(){this._super().observe(['paymentGroupsList']);return this;},initDefaulGroup:function(){layout([this.configDefaultGroup]);return this;},initChildren:function(){var self=this;_.each(paymentMethods(),function(paymentMethodData){self.createRenderer(paymentMethodData);});return this;},createComponent:function(payment){var rendererTemplate,rendererComponent,templateData;templateData={parentName:this.name,name:payment.name};rendererTemplate={parent:'${ $.$data.parentName }',name:'${ $.$data.name }',displayArea:payment.displayArea,component:payment.component};rendererComponent=utils.template(rendererTemplate,templateData);utils.extend(rendererComponent,{item:payment.item,config:payment.config});return rendererComponent;},createRenderer:function(paymentMethodData){var isRendererForMethod=false,currentGroup;registry.get(this.configDefaultGroup.name,function(defaultGroup){_.each(rendererList(),function(renderer){if(renderer.hasOwnProperty('typeComparatorCallback')&&typeof renderer.typeComparatorCallback=='function'){isRendererForMethod=renderer.typeComparatorCallback(renderer.type,paymentMethodData.method);}else{isRendererForMethod=renderer.type===paymentMethodData.method;}\nif(isRendererForMethod){currentGroup=renderer.group?renderer.group:defaultGroup;this.collectPaymentGroups(currentGroup);layout([this.createComponent({config:renderer.config,component:renderer.component,name:renderer.type,method:paymentMethodData.method,item:paymentMethodData,displayArea:currentGroup.displayArea})]);}}.bind(this));}.bind(this));},collectPaymentGroups:function(group){var groupsList=this.paymentGroupsList(),isGroupExists=_.some(groupsList,function(existsGroup){return existsGroup.alias===group.alias;});if(!isGroupExists){groupsList.push(group);groupsList=_.sortBy(groupsList,function(existsGroup){return existsGroup.sortOrder;});this.paymentGroupsList(groupsList);}},getGroupTitle:function(group){var title=group().title;if(group().isDefault()&&this.paymentGroupsList().length>1){title=this.defaultGroupTitle;}\nreturn title;},isPaymentMethodsAvailable:function(){return _.some(this.paymentGroupsList(),function(group){return this.getRegion(group.displayArea)().length;},this);},removeRenderer:function(paymentMethodCode){var items;_.each(this.paymentGroupsList(),function(group){items=this.getRegion(group.displayArea);_.find(items(),function(value){if(value.item.method.indexOf(paymentMethodCode)===0){value.disposeSubscriptions();value.destroy();}});},this);}});});","Magento_Checkout/js/view/configure/product-customer-data.min.js":"require(['jquery','Magento_Customer/js/customer-data','underscore','domReady!'],function($,customerData,_){'use strict';var selectors={qtySelector:'#product_addtocart_form [name=\"qty\"]',productIdSelector:'#product_addtocart_form [name=\"product\"]',itemIdSelector:'#product_addtocart_form [name=\"item\"]'},cartData=customerData.get('cart'),productId=$(selectors.productIdSelector).val(),itemId=$(selectors.itemIdSelector).val(),productQty,productQtyInput,updateQty=function(){if(productQty||productQty===0){productQtyInput=productQtyInput||$(selectors.qtySelector);if(productQtyInput&&productQty.toString()!==productQtyInput.val()){productQtyInput.val(productQty);}}},setProductQty=function(data){var product;if(!(data&&data.items&&data.items.length&&productId)){return;}\nproduct=_.find(data.items,function(item){if(item['item_id']===itemId){return item['product_id']===productId||item['item_id']===productId;}});if(!product){return;}\nproductQty=product.qty;};cartData.subscribe(function(updateCartData){setProductQty(updateCartData);updateQty();});setProductQty(cartData());updateQty();});","Magento_Checkout/js/model/shipping-rate-service.min.js":"define(['Magento_Checkout/js/model/quote','Magento_Checkout/js/model/shipping-rate-processor/new-address','Magento_Checkout/js/model/shipping-rate-processor/customer-address'],function(quote,defaultProcessor,customerAddressProcessor){'use strict';var processors={};processors.default=defaultProcessor;processors['customer-address']=customerAddressProcessor;quote.shippingAddress.subscribe(function(){var type=quote.shippingAddress().getType();if(processors[type]){processors[type].getRates(quote.shippingAddress());}else{processors.default.getRates(quote.shippingAddress());}});return{registerProcessor:function(type,processor){processors[type]=processor;}};});","Magento_Checkout/js/model/shipping-rate-registry.min.js":"define([],function(){'use strict';var cache=[];return{get:function(addressKey){if(cache[addressKey]){return cache[addressKey];}\nreturn false;},set:function(addressKey,data){cache[addressKey]=data;}};});","Magento_Checkout/js/model/default-post-code-resolver.min.js":"define([],function(){'use strict';var useDefaultPostCode;return{resolve:function(){return useDefaultPostCode?window.checkoutConfig.defaultPostcode:null;},setUseDefaultPostCode:function(shouldUseDefaultPostCode){useDefaultPostCode=shouldUseDefaultPostCode;return this;}};});","Magento_Checkout/js/model/checkout-data-resolver.min.js":"define(['Magento_Customer/js/model/address-list','Magento_Checkout/js/model/quote','Magento_Checkout/js/checkout-data','Magento_Checkout/js/action/create-shipping-address','Magento_Checkout/js/action/select-shipping-address','Magento_Checkout/js/action/select-shipping-method','Magento_Checkout/js/model/payment-service','Magento_Checkout/js/action/select-payment-method','Magento_Checkout/js/model/address-converter','Magento_Checkout/js/action/select-billing-address','Magento_Checkout/js/action/create-billing-address','underscore'],function(addressList,quote,checkoutData,createShippingAddress,selectShippingAddress,selectShippingMethodAction,paymentService,selectPaymentMethodAction,addressConverter,selectBillingAddress,createBillingAddress,_){'use strict';return{resolveEstimationAddress:function(){var address;if(checkoutData.getShippingAddressFromData()){address=addressConverter.formAddressDataToQuoteAddress(checkoutData.getShippingAddressFromData());selectShippingAddress(address);}else{this.resolveShippingAddress();}\nif(quote.isVirtual()){if(checkoutData.getBillingAddressFromData()){address=addressConverter.formAddressDataToQuoteAddress(checkoutData.getBillingAddressFromData());selectBillingAddress(address);}else{this.resolveBillingAddress();}}},resolveShippingAddress:function(){var newCustomerShippingAddress;if(!checkoutData.getShippingAddressFromData()&&window.checkoutConfig.shippingAddressFromData){checkoutData.setShippingAddressFromData(window.checkoutConfig.shippingAddressFromData);}\nnewCustomerShippingAddress=checkoutData.getNewCustomerShippingAddress();if(newCustomerShippingAddress){createShippingAddress(newCustomerShippingAddress);}\nthis.applyShippingAddress();},applyShippingAddress:function(isEstimatedAddress){var address,shippingAddress,isConvertAddress,addressData,isShippingAddressInitialized;if(addressList().length===0){address=addressConverter.formAddressDataToQuoteAddress(checkoutData.getShippingAddressFromData());selectShippingAddress(address);}\nshippingAddress=quote.shippingAddress();isConvertAddress=isEstimatedAddress||false;if(!shippingAddress){isShippingAddressInitialized=addressList.some(function(addressFromList){if(checkoutData.getSelectedShippingAddress()==addressFromList.getKey()){addressData=isConvertAddress?addressConverter.addressToEstimationAddress(addressFromList):addressFromList;selectShippingAddress(addressData);return true;}\nreturn false;});if(!isShippingAddressInitialized){isShippingAddressInitialized=addressList.some(function(addrs){if(addrs.isDefaultShipping()){addressData=isConvertAddress?addressConverter.addressToEstimationAddress(addrs):addrs;selectShippingAddress(addressData);return true;}\nreturn false;});}\nif(!isShippingAddressInitialized&&addressList().length===1){addressData=isConvertAddress?addressConverter.addressToEstimationAddress(addressList()[0]):addressList()[0];selectShippingAddress(addressData);}}},resolveShippingRates:function(ratesData){var selectedShippingRate=checkoutData.getSelectedShippingRate(),availableRate=false;if(ratesData.length===1&&!quote.shippingMethod()){selectShippingMethodAction(ratesData[0]);return;}\nif(quote.shippingMethod()){availableRate=_.find(ratesData,function(rate){return rate['carrier_code']==quote.shippingMethod()['carrier_code']&&rate['method_code']==quote.shippingMethod()['method_code'];});}\nif(!availableRate&&selectedShippingRate){availableRate=_.find(ratesData,function(rate){return rate['carrier_code']+'_'+rate['method_code']===selectedShippingRate;});}\nif(!availableRate&&window.checkoutConfig.selectedShippingMethod){availableRate=_.find(ratesData,function(rate){var selectedShippingMethod=window.checkoutConfig.selectedShippingMethod;return rate['carrier_code']==selectedShippingMethod['carrier_code']&&rate['method_code']==selectedShippingMethod['method_code'];});}\nif(!availableRate){selectShippingMethodAction(null);}else{selectShippingMethodAction(availableRate);}},resolvePaymentMethod:function(){var availablePaymentMethods=paymentService.getAvailablePaymentMethods(),selectedPaymentMethod=checkoutData.getSelectedPaymentMethod();if(selectedPaymentMethod){availablePaymentMethods.some(function(payment){if(payment.method==selectedPaymentMethod){selectPaymentMethodAction(payment);}});}},resolveBillingAddress:function(){var selectedBillingAddress,newCustomerBillingAddressData;if(!checkoutData.getBillingAddressFromData()&&window.checkoutConfig.billingAddressFromData){checkoutData.setBillingAddressFromData(window.checkoutConfig.billingAddressFromData);}\nselectedBillingAddress=checkoutData.getSelectedBillingAddress();newCustomerBillingAddressData=checkoutData.getNewCustomerBillingAddress();if(selectedBillingAddress){if(selectedBillingAddress==='new-customer-billing-address'&&newCustomerBillingAddressData){selectBillingAddress(createBillingAddress(newCustomerBillingAddressData));}else{addressList.some(function(address){if(selectedBillingAddress===address.getKey()){selectBillingAddress(address);}});}}else{this.applyBillingAddress();}},applyBillingAddress:function(){var shippingAddress,isBillingAddressInitialized;if(quote.billingAddress()){selectBillingAddress(quote.billingAddress());return;}\nif(quote.isVirtual()||!quote.billingAddress()){isBillingAddressInitialized=addressList.some(function(addrs){if(addrs.isDefaultBilling()){selectBillingAddress(addrs);return true;}\nreturn false;});}\nshippingAddress=quote.shippingAddress();if(!isBillingAddressInitialized&&shippingAddress&&shippingAddress.canUseForBilling()&&(shippingAddress.isDefaultShipping()||!quote.isVirtual())){selectBillingAddress(quote.shippingAddress());}}};});","Magento_Checkout/js/model/totals.min.js":"define(['ko','Magento_Checkout/js/model/quote','Magento_Customer/js/customer-data'],function(ko,quote,customerData){'use strict';var quoteItems=ko.observable(quote.totals().items),cartData=customerData.get('cart'),quoteSubtotal=parseFloat(quote.totals().subtotal),subtotalAmount=parseFloat(cartData().subtotalAmount);quote.totals.subscribe(function(newValue){quoteItems(newValue.items);});if(quoteSubtotal!==subtotalAmount){customerData.reload(['cart'],false);}\nreturn{totals:quote.totals,isLoading:ko.observable(false),getItems:function(){return quoteItems;},getSegment:function(code){var i,total;if(!this.totals()){return null;}\nfor(i in this.totals()['total_segments']){total=this.totals()['total_segments'][i];if(total.code==code){return total;}}\nreturn null;}};});","Magento_Checkout/js/model/url-builder.min.js":"define(['jquery'],function($){'use strict';return{method:'rest',storeCode:window.checkoutConfig.storeCode,version:'V1',serviceUrl:':method/:storeCode/:version',createUrl:function(url,params){var completeUrl=this.serviceUrl+url;return this.bindParams(completeUrl,params);},bindParams:function(url,params){var urlParts;params.method=this.method;params.storeCode=this.storeCode;params.version=this.version;urlParts=url.split('/');urlParts=urlParts.filter(Boolean);$.each(urlParts,function(key,part){part=part.replace(':','');if(params[part]!=undefined){urlParts[key]=params[part];}});return urlParts.join('/');}};});","Magento_Checkout/js/model/shipping-service.min.js":"define(['ko','Magento_Checkout/js/model/checkout-data-resolver'],function(ko,checkoutDataResolver){'use strict';var shippingRates=ko.observableArray([]);return{isLoading:ko.observable(false),setShippingRates:function(ratesData){shippingRates(ratesData);shippingRates.valueHasMutated();checkoutDataResolver.resolveShippingRates(ratesData);},getShippingRates:function(){return shippingRates;}};});","Magento_Checkout/js/model/resource-url-manager.min.js":"define(['Magento_Customer/js/model/customer','Magento_Checkout/js/model/url-builder','mageUtils'],function(customer,urlBuilder,utils){'use strict';return{getUrlForTotalsEstimationForNewAddress:function(quote){var params=this.getCheckoutMethod()=='guest'?{cartId:quote.getQuoteId()}:{},urls={'guest':'/guest-carts/:cartId/totals-information','customer':'/carts/mine/totals-information'};return this.getUrl(urls,params);},getUrlForEstimationShippingMethodsForNewAddress:function(quote){var params=this.getCheckoutMethod()=='guest'?{quoteId:quote.getQuoteId()}:{},urls={'guest':'/guest-carts/:quoteId/estimate-shipping-methods','customer':'/carts/mine/estimate-shipping-methods'};return this.getUrl(urls,params);},getUrlForEstimationShippingMethodsByAddressId:function(quote){var params=this.getCheckoutMethod()=='guest'?{quoteId:quote.getQuoteId()}:{},urls={'default':'/carts/mine/estimate-shipping-methods-by-address-id'};return this.getUrl(urls,params);},getApplyCouponUrl:function(couponCode,quoteId){var params=this.getCheckoutMethod()=='guest'?{quoteId:quoteId}:{},urls={'guest':'/guest-carts/'+quoteId+'/coupons/'+encodeURIComponent(couponCode),'customer':'/carts/mine/coupons/'+encodeURIComponent(couponCode)};return this.getUrl(urls,params);},getCancelCouponUrl:function(quoteId){var params=this.getCheckoutMethod()=='guest'?{quoteId:quoteId}:{},urls={'guest':'/guest-carts/'+quoteId+'/coupons/','customer':'/carts/mine/coupons/'};return this.getUrl(urls,params);},getUrlForCartTotals:function(quote){var params=this.getCheckoutMethod()=='guest'?{quoteId:quote.getQuoteId()}:{},urls={'guest':'/guest-carts/:quoteId/totals','customer':'/carts/mine/totals'};return this.getUrl(urls,params);},getUrlForSetShippingInformation:function(quote){var params=this.getCheckoutMethod()=='guest'?{cartId:quote.getQuoteId()}:{},urls={'guest':'/guest-carts/:cartId/shipping-information','customer':'/carts/mine/shipping-information'};return this.getUrl(urls,params);},getUrl:function(urls,urlParams){var url;if(utils.isEmpty(urls)){return'Provided service call does not exist.';}\nif(!utils.isEmpty(urls['default'])){url=urls['default'];}else{url=urls[this.getCheckoutMethod()];}\nreturn urlBuilder.createUrl(url,urlParams);},getCheckoutMethod:function(){return customer.isLoggedIn()?'customer':'guest';}};});","Magento_Checkout/js/model/customer-email-validator.min.js":"define(['jquery','Magento_Customer/js/model/customer','mage/validation'],function($,customer){'use strict';return{validate:function(){var emailValidationResult=customer.isLoggedIn(),loginFormSelector='form[data-role=email-with-possible-login]';if(!customer.isLoggedIn()){$(loginFormSelector).validation();emailValidationResult=Boolean($(loginFormSelector+' input[name=username]').valid());}\nreturn emailValidationResult;}};});","Magento_Checkout/js/model/payment-service.min.js":"define(['underscore','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/payment/method-list','Magento_Checkout/js/action/select-payment-method'],function(_,quote,methodList,selectPaymentMethod){'use strict';var isFreePaymentMethod=function(paymentMethod){return paymentMethod.method==='free';},getGrandTotal=function(){return quote.totals()['grand_total'];};return{isFreeAvailable:false,setPaymentMethods:function(methods){var freeMethod,filteredMethods,methodIsAvailable,methodNames;freeMethod=_.find(methods,isFreePaymentMethod);this.isFreeAvailable=!!freeMethod;if(freeMethod&&getGrandTotal()<=0){methods.splice(0,methods.length,freeMethod);selectPaymentMethod(freeMethod);}\nfilteredMethods=_.without(methods,freeMethod);if(filteredMethods.length===1){selectPaymentMethod(filteredMethods[0]);}else if(quote.paymentMethod()){methodIsAvailable=methods.some(function(item){return item.method===quote.paymentMethod().method;});if(!methodIsAvailable){selectPaymentMethod(null);}}\nmethodNames=_.pluck(methods,'method');_.map(methodList(),function(existingMethod){var existingMethodIndex=methodNames.indexOf(existingMethod.method);if(existingMethodIndex!==-1){methods[existingMethodIndex]=existingMethod;}});methodList(methods);},getAvailablePaymentMethods:function(){var allMethods=methodList().slice(),grandTotalOverZero=getGrandTotal()>0;if(!this.isFreeAvailable){return allMethods;}\nif(grandTotalOverZero){return _.reject(allMethods,isFreePaymentMethod);}\nreturn _.filter(allMethods,isFreePaymentMethod);}};});","Magento_Checkout/js/model/shipping-rates-validator.min.js":"define(['jquery','ko','./shipping-rates-validation-rules','../model/address-converter','../action/select-shipping-address','./postcode-validator','./default-validator','mage/translate','uiRegistry','Magento_Checkout/js/model/shipping-address/form-popup-state','Magento_Checkout/js/model/quote'],function($,ko,shippingRatesValidationRules,addressConverter,selectShippingAddress,postcodeValidator,defaultValidator,$t,uiRegistry,formPopUpState){'use strict';var checkoutConfig=window.checkoutConfig,validators=[],observedElements=[],postcodeElements=[],postcodeElementName='postcode';validators.push(defaultValidator);return{validateAddressTimeout:0,validateZipCodeTimeout:0,validateDelay:2000,registerValidator:function(carrier,validator){if(checkoutConfig.activeCarriers.indexOf(carrier)!==-1){validators.push(validator);}},validateAddressData:function(address){return validators.some(function(validator){return validator.validate(address);});},initFields:function(formPath){var self=this,elements=shippingRatesValidationRules.getObservableFields();if($.inArray(postcodeElementName,elements)===-1){elements.push(postcodeElementName);}\n$.each(elements,function(index,field){uiRegistry.async(formPath+'.'+field)(self.doElementBinding.bind(self));});},doElementBinding:function(element,force,delay){var observableFields=shippingRatesValidationRules.getObservableFields();if(element&&(observableFields.indexOf(element.index)!==-1||force)){if(element.index!==postcodeElementName){this.bindHandler(element,delay);}}\nif(element.index===postcodeElementName){this.bindHandler(element,delay);postcodeElements.push(element);}},bindChangeHandlers:function(elements,force,delay){var self=this;$.each(elements,function(index,elem){self.doElementBinding(elem,force,delay);});},bindHandler:function(element,delay){var self=this;delay=typeof delay==='undefined'?self.validateDelay:delay;if(element.component.indexOf('/group')!==-1){$.each(element.elems(),function(index,elem){self.bindHandler(elem);});}else{element.on('value',function(){clearTimeout(self.validateZipCodeTimeout);self.validateZipCodeTimeout=setTimeout(function(){if(element.index===postcodeElementName){self.postcodeValidation(element);}else{$.each(postcodeElements,function(index,elem){self.postcodeValidation(elem);});}},delay);if(!formPopUpState.isVisible()){clearTimeout(self.validateAddressTimeout);self.validateAddressTimeout=setTimeout(function(){self.validateFields();},delay);}});observedElements.push(element);}},postcodeValidation:function(postcodeElement){var countryId=$('select[name=\"country_id\"]:visible').val(),validationResult,warnMessage;if(postcodeElement==null||postcodeElement.value()==null){return true;}\npostcodeElement.warn(null);validationResult=postcodeValidator.validate(postcodeElement.value(),countryId);if(!validationResult){warnMessage=$t('Provided Zip/Postal Code seems to be invalid.');if(postcodeValidator.validatedPostCodeExample.length){warnMessage+=$t(' Example: ')+postcodeValidator.validatedPostCodeExample.join('; ')+'. ';}\nwarnMessage+=$t('If you believe it is the right one you can ignore this notice.');postcodeElement.warn(warnMessage);}\nreturn validationResult;},validateFields:function(){var addressFlat=addressConverter.formDataProviderToFlatData(this.collectObservedData(),'shippingAddress'),address;if(this.validateAddressData(addressFlat)){addressFlat=uiRegistry.get('checkoutProvider').shippingAddress;address=addressConverter.formAddressDataToQuoteAddress(addressFlat);selectShippingAddress(address);}},collectObservedData:function(){var observedValues={};$.each(observedElements,function(index,field){observedValues[field.dataScope]=field.value();});return observedValues;}};});","Magento_Checkout/js/model/address-converter.min.js":"define(['jquery','Magento_Checkout/js/model/new-customer-address','Magento_Customer/js/customer-data','mage/utils/objects','underscore'],function($,address,customerData,mageUtils,_){'use strict';var countryData=customerData.get('directory-data');return{formAddressDataToQuoteAddress:function(formData){var addressData=$.extend(true,{},formData),region,regionName=addressData.region;if(mageUtils.isObject(addressData.street)){addressData.street=this.objectToArray(addressData.street);}\naddressData.region={'region_id':addressData['region_id'],'region_code':addressData['region_code'],region:regionName};if(addressData['region_id']&&countryData()[addressData['country_id']]&&countryData()[addressData['country_id']].regions){region=countryData()[addressData['country_id']].regions[addressData['region_id']];if(region){addressData.region['region_id']=addressData['region_id'];addressData.region['region_code']=region.code;addressData.region.region=region.name;}}else if(!addressData['region_id']&&countryData()[addressData['country_id']]&&countryData()[addressData['country_id']].regions){addressData.region['region_code']='';addressData.region.region='';}\ndelete addressData['region_id'];if(addressData['custom_attributes']){addressData['custom_attributes']=_.map(addressData['custom_attributes'],function(value,key){return{'attribute_code':key,'value':value};});}\nreturn address(addressData);},quoteAddressToFormAddressData:function(addrs){var self=this,output={},streetObject;$.each(addrs,function(key){if(addrs.hasOwnProperty(key)&&!$.isFunction(addrs[key])){output[self.toUnderscore(key)]=addrs[key];}});if($.isArray(addrs.street)){streetObject={};addrs.street.forEach(function(value,index){streetObject[index]=value;});output.street=streetObject;}\nreturn output;},toUnderscore:function(string){return string.replace(/([A-Z])/g,function($1){return'_'+$1.toLowerCase();});},formDataProviderToFlatData:function(formProviderData,formIndex){var addressData={};$.each(formProviderData,function(path,value){var pathComponents=path.split('.'),dataObject={};pathComponents.splice(pathComponents.indexOf(formIndex),1);pathComponents.reverse();$.each(pathComponents,function(index,pathPart){var parent={};if(index==0){dataObject[pathPart]=value;}else{parent[pathPart]=dataObject;dataObject=parent;}});$.extend(true,addressData,dataObject);});return addressData;},objectToArray:function(object){var convertedArray=[];$.each(object,function(key){return typeof object[key]==='string'?convertedArray.push(object[key]):false;});return convertedArray.slice(0);},addressToEstimationAddress:function(addrs){var self=this,estimatedAddressData={};$.each(addrs,function(key){estimatedAddressData[self.toUnderscore(key)]=addrs[key];});return this.formAddressDataToQuoteAddress(estimatedAddressData);}};});","Magento_Checkout/js/model/postcode-validator.min.js":"define(['mageUtils'],function(utils){'use strict';return{validatedPostCodeExample:[],validate:function(postCode,countryId,postCodesPatterns){var pattern,regex,patterns=postCodesPatterns?postCodesPatterns[countryId]:window.checkoutConfig.postCodes[countryId];this.validatedPostCodeExample=[];if(!utils.isEmpty(postCode)&&!utils.isEmpty(patterns)){for(pattern in patterns){if(patterns.hasOwnProperty(pattern)){this.validatedPostCodeExample.push(patterns[pattern].example);regex=new RegExp(patterns[pattern].pattern);if(regex.test(postCode)){return true;}}}\nreturn false;}\nreturn true;}};});","Magento_Checkout/js/model/full-screen-loader.min.js":"define(['jquery','rjsResolver'],function($,resolver){'use strict';var containerId='#checkout';return{startLoader:function(){$(containerId).trigger('processStart');},stopLoader:function(forceStop){var $elem=$(containerId),stop=$elem.trigger.bind($elem,'processStop');forceStop?stop():resolver(stop);}};});","Magento_Checkout/js/model/error-processor.min.js":"define(['mage/url','Magento_Ui/js/model/messageList','mage/translate'],function(url,globalMessageList,$t){'use strict';return{process:function(response,messageContainer){var error;messageContainer=messageContainer||globalMessageList;if(response.status==401){window.location.replace(url.build('customer/account/login/'));}else{try{error=JSON.parse(response.responseText);}catch(exception){error={message:$t('Something went wrong with your request. Please try again later.')};}\nmessageContainer.addErrorMessage(error);}}};});","Magento_Checkout/js/model/quote.min.js":"define(['ko','underscore','domReady!'],function(ko,_){'use strict';var proceedTotalsData=function(data){if(_.isObject(data)&&_.isObject(data['extension_attributes'])){_.each(data['extension_attributes'],function(element,index){data[index]=element;});}\nreturn data;},billingAddress=ko.observable(null),shippingAddress=ko.observable(null),shippingMethod=ko.observable(null),paymentMethod=ko.observable(null),quoteData=window.checkoutConfig.quoteData,basePriceFormat=window.checkoutConfig.basePriceFormat,priceFormat=window.checkoutConfig.priceFormat,storeCode=window.checkoutConfig.storeCode,totalsData=proceedTotalsData(window.checkoutConfig.totalsData),totals=ko.observable(totalsData),collectedTotals=ko.observable({});return{totals:totals,shippingAddress:shippingAddress,shippingMethod:shippingMethod,billingAddress:billingAddress,paymentMethod:paymentMethod,guestEmail:null,getQuoteId:function(){return quoteData['entity_id'];},isVirtual:function(){return!!Number(quoteData['is_virtual']);},getPriceFormat:function(){return priceFormat;},getBasePriceFormat:function(){return basePriceFormat;},getItems:function(){return window.checkoutConfig.quoteItemData;},getTotals:function(){return totals;},setTotals:function(data){data=proceedTotalsData(data);totals(data);this.setCollectedTotals('subtotal_with_discount',parseFloat(data['subtotal_with_discount']));},setPaymentMethod:function(paymentMethodCode){paymentMethod(paymentMethodCode);},getPaymentMethod:function(){return paymentMethod;},getStoreCode:function(){return storeCode;},setCollectedTotals:function(code,value){var colTotals=collectedTotals();colTotals[code]=value;collectedTotals(colTotals);},getCalculatedTotal:function(){var total=0.;_.each(collectedTotals(),function(value){total+=value;});return total;}};});","Magento_Checkout/js/model/shipping-rates-validation-rules.min.js":"define(['jquery'],function($){'use strict';var ratesRules={},checkoutConfig=window.checkoutConfig;return{registerRules:function(carrier,rules){if(checkoutConfig.activeCarriers.indexOf(carrier)!==-1){ratesRules[carrier]=rules.getRules();}},getRules:function(){return ratesRules;},getObservableFields:function(){var self=this,observableFields=[];$.each(self.getRules(),function(carrier,fields){$.each(fields,function(field){if(observableFields.indexOf(field)===-1){observableFields.push(field);}});});return observableFields;}};});","Magento_Checkout/js/model/step-navigator.min.js":"define(['jquery','ko'],function($,ko){'use strict';var steps=ko.observableArray();return{steps:steps,stepCodes:[],validCodes:[],handleHash:function(){var hashString=window.location.hash.replace('#',''),isRequestedStepVisible;if(hashString===''){return false;}\nif($.inArray(hashString,this.validCodes)===-1){window.location.href=window.checkoutConfig.pageNotFoundUrl;return false;}\nisRequestedStepVisible=steps.sort(this.sortItems).some(function(element){return(element.code==hashString||element.alias==hashString)&&element.isVisible();});if(isRequestedStepVisible){return false;}\nsteps().sort(this.sortItems).forEach(function(element){if(element.code==hashString||element.alias==hashString){element.navigate(element);}else{element.isVisible(false);}});return false;},registerStep:function(code,alias,title,isVisible,navigate,sortOrder){var hash,active;if($.inArray(code,this.validCodes)!==-1){throw new DOMException('Step code ['+code+'] already registered in step navigator');}\nif(alias!=null){if($.inArray(alias,this.validCodes)!==-1){throw new DOMException('Step code ['+alias+'] already registered in step navigator');}\nthis.validCodes.push(alias);}\nthis.validCodes.push(code);steps.push({code:code,alias:alias!=null?alias:code,title:title,isVisible:isVisible,navigate:navigate,sortOrder:sortOrder});active=this.getActiveItemIndex();steps.each(function(elem,index){if(active!==index){elem.isVisible(false);}});this.stepCodes.push(code);hash=window.location.hash.replace('#','');if(hash!=''&&hash!=code){isVisible(false);}},sortItems:function(itemOne,itemTwo){return itemOne.sortOrder>itemTwo.sortOrder?1:-1;},getActiveItemIndex:function(){var activeIndex=0;steps().sort(this.sortItems).some(function(element,index){if(element.isVisible()){activeIndex=index;return true;}\nreturn false;});return activeIndex;},isProcessed:function(code){var activeItemIndex=this.getActiveItemIndex(),sortedItems=steps().sort(this.sortItems),requestedItemIndex=-1;sortedItems.forEach(function(element,index){if(element.code==code){requestedItemIndex=index;}});return activeItemIndex>requestedItemIndex;},navigateTo:function(code,scrollToElementId){var sortedItems=steps().sort(this.sortItems),bodyElem=$('body');scrollToElementId=scrollToElementId||null;if(!this.isProcessed(code)){return;}\nsortedItems.forEach(function(element){if(element.code==code){element.isVisible(true);bodyElem.animate({scrollTop:$('#'+code).offset().top},0,function(){window.location=window.checkoutConfig.checkoutUrl+'#'+code;});if(scrollToElementId&&$('#'+scrollToElementId).length){bodyElem.animate({scrollTop:$('#'+scrollToElementId).offset().top},0);}}else{element.isVisible(false);}});},setHash:function(hash){window.location.hash=hash;},next:function(){var activeIndex=0,code;steps().sort(this.sortItems).forEach(function(element,index){if(element.isVisible()){element.isVisible(false);activeIndex=index;}});if(steps().length>activeIndex+1){code=steps()[activeIndex+1].code;steps()[activeIndex+1].isVisible(true);this.setHash(code);document.body.scrollTop=document.documentElement.scrollTop=0;}}};});","Magento_Checkout/js/model/authentication-messages.min.js":"define(['ko','Magento_Ui/js/model/messages'],function(ko,Messages){'use strict';return new Messages();});","Magento_Checkout/js/model/billing-address-postcode-validator.min.js":"define(['jquery','Magento_Checkout/js/model/postcode-validator','mage/translate','uiRegistry'],function($,postcodeValidator,$t,uiRegistry){'use strict';var postcodeElementName='postcode';return{validateZipCodeTimeout:0,validateDelay:2000,initFields:function(formPath){var self=this;uiRegistry.async(formPath+'.'+postcodeElementName)(self.bindHandler.bind(self));},bindHandler:function(element,delay){var self=this;delay=typeof delay==='undefined'?self.validateDelay:delay;element.on('value',function(){clearTimeout(self.validateZipCodeTimeout);self.validateZipCodeTimeout=setTimeout(function(){self.postcodeValidation(element);},delay);});},postcodeValidation:function(postcodeElement){var countryId=$('select[name=\"country_id\"]:visible').val(),validationResult,warnMessage;if(postcodeElement==null||postcodeElement.value()==null){return true;}\npostcodeElement.warn(null);validationResult=postcodeValidator.validate(postcodeElement.value(),countryId);if(!validationResult){warnMessage=$t('Provided Zip/Postal Code seems to be invalid.');if(postcodeValidator.validatedPostCodeExample.length){warnMessage+=$t(' Example: ')+postcodeValidator.validatedPostCodeExample.join('; ')+'. ';}\nwarnMessage+=$t('If you believe it is the right one you can ignore this notice.');postcodeElement.warn(warnMessage);}\nreturn validationResult;}};});","Magento_Checkout/js/model/shipping-save-processor.min.js":"define(['Magento_Checkout/js/model/shipping-save-processor/default'],function(defaultProcessor){'use strict';var processors={};processors['default']=defaultProcessor;return{registerProcessor:function(type,processor){processors[type]=processor;},saveShippingInformation:function(type){var rates=[];if(processors[type]){rates=processors[type].saveShippingInformation();}else{rates=processors['default'].saveShippingInformation();}\nreturn rates;}};});","Magento_Checkout/js/model/place-order.min.js":"define(['mage/storage','Magento_Checkout/js/model/error-processor','Magento_Checkout/js/model/full-screen-loader','Magento_Customer/js/customer-data'],function(storage,errorProcessor,fullScreenLoader,customerData){'use strict';return function(serviceUrl,payload,messageContainer){fullScreenLoader.startLoader();return storage.post(serviceUrl,JSON.stringify(payload)).fail(function(response){errorProcessor.process(response,messageContainer);}).success(function(response){var clearData={'selectedShippingAddress':null,'shippingAddressFromData':null,'newCustomerShippingAddress':null,'selectedShippingRate':null,'selectedPaymentMethod':null,'selectedBillingAddress':null,'billingAddressFromData':null,'newCustomerBillingAddress':null};if(response.responseType!=='error'){customerData.set('checkout-data',clearData);}}).always(function(){fullScreenLoader.stopLoader();});};});","Magento_Checkout/js/model/default-validation-rules.min.js":"define([],function(){'use strict';return{getRules:function(){return{'country_id':{'required':true}};}};});","Magento_Checkout/js/model/new-customer-address.min.js":"define(['underscore','Magento_Checkout/js/model/default-post-code-resolver'],function(_,DefaultPostCodeResolver){'use strict';return function(addressData){var identifier=Date.now(),countryId=addressData['country_id']||addressData.countryId||window.checkoutConfig.defaultCountryId,regionId;if(addressData.region&&addressData.region['region_id']){regionId=addressData.region['region_id'];}else if(!addressData['region_id']){regionId=undefined;}else if(addressData['country_id']&&addressData['country_id']==window.checkoutConfig.defaultCountryId||!addressData['country_id']&&countryId==window.checkoutConfig.defaultCountryId){regionId=window.checkoutConfig.defaultRegionId||undefined;}\nreturn{email:addressData.email,countryId:countryId,regionId:regionId||addressData.regionId,regionCode:addressData.region?addressData.region['region_code']:null,region:addressData.region?addressData.region.region:null,customerId:addressData['customer_id']||addressData.customerId,street:addressData.street?_.compact(addressData.street):addressData.street,company:addressData.company,telephone:addressData.telephone,fax:addressData.fax,postcode:addressData.postcode?addressData.postcode:DefaultPostCodeResolver.resolve(),city:addressData.city,firstname:addressData.firstname,lastname:addressData.lastname,middlename:addressData.middlename,prefix:addressData.prefix,suffix:addressData.suffix,vatId:addressData['vat_id'],saveInAddressBook:addressData['save_in_address_book'],customAttributes:addressData['custom_attributes'],isDefaultShipping:function(){return addressData['default_shipping'];},isDefaultBilling:function(){return addressData['default_billing'];},getType:function(){return'new-customer-address';},getKey:function(){return this.getType();},getCacheKey:function(){return this.getType()+identifier;},isEditable:function(){return true;},canUseForBilling:function(){return true;}};};});","Magento_Checkout/js/model/default-validator.min.js":"define(['jquery','mageUtils','./default-validation-rules','mage/translate'],function($,utils,validationRules,$t){'use strict';return{validationErrors:[],validate:function(address){var self=this;this.validationErrors=[];$.each(validationRules.getRules(),function(field,rule){var message;if(rule.required&&utils.isEmpty(address[field])){message=$t('Field ')+field+$t(' is required.');self.validationErrors.push(message);}});return!this.validationErrors.length;}};});","Magento_Checkout/js/model/sidebar.min.js":"define([],function(){'use strict';return{popUp:false,setPopup:function(popUp){this.popUp=popUp;},show:function(){if(this.popUp){this.popUp.modal('openModal');}},hide:function(){if(this.popUp){this.popUp.modal('closeModal');}}};});","Magento_Checkout/js/model/shipping-save-processor/default.min.js":"define(['jquery','ko','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/resource-url-manager','mage/storage','Magento_Checkout/js/model/payment-service','Magento_Checkout/js/model/payment/method-converter','Magento_Checkout/js/model/error-processor','Magento_Checkout/js/model/full-screen-loader','Magento_Checkout/js/action/select-billing-address','Magento_Checkout/js/model/shipping-save-processor/payload-extender','Magento_Checkout/js/action/get-totals'],function($,ko,quote,resourceUrlManager,storage,paymentService,methodConverter,errorProcessor,fullScreenLoader,selectBillingAddressAction,payloadExtender,getTotalsAction){'use strict';return{saveShippingInformation:function(){var payload;if(!quote.billingAddress()&&quote.shippingAddress().canUseForBilling()){selectBillingAddressAction(quote.shippingAddress());}\npayload={addressInformation:{'shipping_address':quote.shippingAddress(),'billing_address':quote.billingAddress(),'shipping_method_code':quote.shippingMethod()?quote.shippingMethod()['method_code']:'','shipping_carrier_code':quote.shippingMethod()?quote.shippingMethod()['carrier_code']:''}};payloadExtender(payload);$(\"body\").trigger('processStart');return storage.post(resourceUrlManager.getUrlForSetShippingInformation(quote),JSON.stringify(payload)).done(function(response){var deferred=$.Deferred();getTotalsAction([],deferred);paymentService.setPaymentMethods(methodConverter(response['payment_methods']));if(response['extension_attributes']&&response['extension_attributes']['checkout_restriction']){var restrictions=JSON.parse(response['extension_attributes']['checkout_restriction']);if(restrictions.exclusiveForbidden==true){window.checkoutConfig.exclusiveForbidden=true;window.checkoutConfig.exclusiveForbiddenMsg=restrictions.exclusiveForbiddenMsg;}else{window.checkoutConfig.exclusiveForbidden=false;window.checkoutConfig.exclusiveForbiddenMsg='';}\nif(restrictions.blackListForbidden==true){window.checkoutConfig.blackListForbidden=true;window.checkoutConfig.blackListForbiddenMsg=restrictions.blackListForbiddenMsg;}else{window.checkoutConfig.blackListForbidden=false;window.checkoutConfig.blackListForbiddenMsg='';}\nif(restrictions.mutipleOrderForbidden==true){window.checkoutConfig.mutipleOrderForbidden=true;window.checkoutConfig.mutipleOrderForbiddenMsg=restrictions.mutipleOrderForbiddenMsg;}else{window.checkoutConfig.mutipleOrderForbidden=false;window.checkoutConfig.mutipleOrderForbiddenMsg='';}\nif(restrictions.antiResellerForbidden==true){window.checkoutConfig.antiResellerForbidden=true;window.checkoutConfig.antiResellerForbiddenMsg=restrictions.antiResellerForbiddenMsg;}else{window.checkoutConfig.antiResellerForbidden=false;window.checkoutConfig.antiResellerForbiddenMsg='';}}\n$(\"body\").trigger('processStop');}).fail(function(response){errorProcessor.process(response);$(\"body\").trigger('processStop');});}};});","Magento_Checkout/js/model/shipping-save-processor/payload-extender.min.js":"define([],function(){'use strict';return function(payload){payload.addressInformation['extension_attributes']={};return payload;};});","Magento_Checkout/js/model/shipping-rate-processor/new-address.min.js":"define(['Magento_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/quote','mage/storage','Magento_Checkout/js/model/shipping-service','Magento_Checkout/js/model/shipping-rate-registry','Magento_Checkout/js/model/error-processor'],function(resourceUrlManager,quote,storage,shippingService,rateRegistry,errorProcessor){'use strict';return{getRates:function(address){var cache,serviceUrl,payload;shippingService.isLoading(true);cache=rateRegistry.get(address.getCacheKey());serviceUrl=resourceUrlManager.getUrlForEstimationShippingMethodsForNewAddress(quote);payload=JSON.stringify({address:{'street':address.street,'city':address.city,'region_id':address.regionId,'region':address.region,'country_id':address.countryId,'postcode':address.postcode,'email':address.email,'customer_id':address.customerId,'firstname':address.firstname,'lastname':address.lastname,'middlename':address.middlename,'prefix':address.prefix,'suffix':address.suffix,'vat_id':address.vatId,'company':address.company,'telephone':address.telephone,'fax':address.fax,'custom_attributes':address.customAttributes,'save_in_address_book':address.saveInAddressBook}});if(cache){shippingService.setShippingRates(cache);shippingService.isLoading(false);}else{storage.post(serviceUrl,payload,false).done(function(result){rateRegistry.set(address.getCacheKey(),result);shippingService.setShippingRates(result);}).fail(function(response){shippingService.setShippingRates([]);errorProcessor.process(response);}).always(function(){shippingService.isLoading(false);});}}};});","Magento_Checkout/js/model/shipping-rate-processor/customer-address.min.js":"define(['Magento_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/quote','mage/storage','Magento_Checkout/js/model/shipping-service','Magento_Checkout/js/model/shipping-rate-registry','Magento_Checkout/js/model/error-processor'],function(resourceUrlManager,quote,storage,shippingService,rateRegistry,errorProcessor){'use strict';return{getRates:function(address){var cache;shippingService.isLoading(true);cache=rateRegistry.get(address.getKey());if(cache){shippingService.setShippingRates(cache);shippingService.isLoading(false);}else{storage.post(resourceUrlManager.getUrlForEstimationShippingMethodsByAddressId(),JSON.stringify({addressId:address.customerAddressId}),false).done(function(result){rateRegistry.set(address.getKey(),result);shippingService.setShippingRates(result);}).fail(function(response){shippingService.setShippingRates([]);errorProcessor.process(response);}).always(function(){shippingService.isLoading(false);});}}};});","Magento_Checkout/js/model/cart/cache.min.js":"define(['underscore','Magento_Customer/js/customer-data','mageUtils'],function(_,storage,utils){'use strict';var cacheKey='cart-data',cartData={totals:null,address:null,cartVersion:null,shippingMethodCode:null,shippingCarrierCode:null,rates:null},setData=function(checkoutData){storage.set(cacheKey,checkoutData);},getData=function(key){var data=key?storage.get(cacheKey)()[key]:storage.get(cacheKey)();if(_.isEmpty(storage.get(cacheKey)())){setData(utils.copy(cartData));}\nreturn data;},getMethodName=function(name,prefix,suffix){prefix=prefix||'';suffix=suffix||'';return prefix+name.charAt(0).toUpperCase()+name.slice(1)+suffix;};return{cartData:cartData,requiredFields:['countryId','region','regionId','postcode'],get:function(key){var methodName=getMethodName(key,'_get');if(key===cacheKey){return getData();}\nif(this[methodName]){return this[methodName]();}\nreturn getData(key);},set:function(key,value){var methodName=getMethodName(key,'_set'),obj;if(key===cacheKey){_.each(value,function(val,k){this.set(k,val);},this);return;}\nif(this[methodName]){this[methodName](value);}else{obj=getData();obj[key]=value;setData(obj);}},clear:function(key){var methodName=getMethodName(key,'_clear');if(key===cacheKey){setData(this.cartData);return;}\nif(this[methodName]){this[methodName]();}else{this.set(key,null);}},isChanged:function(key,value){var methodName=getMethodName(key,'_is','Changed');if(this[methodName]){return this[methodName](value);}\nreturn this.get(key)!==value;},_isAddressChanged:function(address){return JSON.stringify(_.pick(this.get('address'),this.requiredFields))!==JSON.stringify(_.pick(address,this.requiredFields));},_isSubtotalChanged:function(subtotal){var cached=parseFloat(this.get('totals').subtotal);return subtotal!==cached;}};});","Magento_Checkout/js/model/cart/estimate-service.min.js":"define(['Magento_Checkout/js/model/quote','Magento_Checkout/js/model/shipping-rate-processor/new-address','Magento_Checkout/js/model/cart/totals-processor/default','Magento_Checkout/js/model/shipping-service','Magento_Checkout/js/model/cart/cache','Magento_Customer/js/customer-data'],function(quote,defaultProcessor,totalsDefaultProvider,shippingService,cartCache,customerData){'use strict';var rateProcessors={},totalsProcessors={},estimateTotalsAndUpdateRates=function(){var type=quote.shippingAddress().getType();if(quote.isVirtual()||window.checkoutConfig.activeCarriers&&window.checkoutConfig.activeCarriers.length===0){totalsProcessors['default']=totalsDefaultProvider;totalsProcessors[type]?totalsProcessors[type].estimateTotals(quote.shippingAddress()):totalsProcessors['default'].estimateTotals(quote.shippingAddress());}else{if(!cartCache.isChanged('address',quote.shippingAddress())&&!cartCache.isChanged('cartVersion',customerData.get('cart')()['data_id'])&&cartCache.get('rates')){shippingService.setShippingRates(cartCache.get('rates'));return;}\nrateProcessors['default']=defaultProcessor;rateProcessors[type]?rateProcessors[type].getRates(quote.shippingAddress()):rateProcessors['default'].getRates(quote.shippingAddress());shippingService.getShippingRates().subscribe(function(rates){cartCache.set('rates',rates);});}},estimateTotalsShipping=function(){totalsDefaultProvider.estimateTotals(quote.shippingAddress());},estimateTotalsBilling=function(){var type=quote.billingAddress().getType();if(quote.isVirtual()){totalsProcessors['default']=totalsDefaultProvider;totalsProcessors[type]?totalsProcessors[type].estimateTotals(quote.billingAddress()):totalsProcessors['default'].estimateTotals(quote.billingAddress());}};quote.shippingAddress.subscribe(estimateTotalsAndUpdateRates);quote.shippingMethod.subscribe(estimateTotalsShipping);quote.billingAddress.subscribe(estimateTotalsBilling);customerData.get('cart').subscribe(estimateTotalsShipping);});","Magento_Checkout/js/model/cart/totals-processor/default.min.js":"define(['underscore','Magento_Checkout/js/model/resource-url-manager','Magento_Checkout/js/model/quote','mage/storage','Magento_Checkout/js/model/totals','Magento_Checkout/js/model/error-processor','Magento_Checkout/js/model/cart/cache','Magento_Customer/js/customer-data'],function(_,resourceUrlManager,quote,storage,totalsService,errorProcessor,cartCache,customerData){'use strict';var loadFromServer=function(address){var serviceUrl,payload;totalsService.isLoading(true);serviceUrl=resourceUrlManager.getUrlForTotalsEstimationForNewAddress(quote);payload={addressInformation:{address:_.pick(address,cartCache.requiredFields)}};if(quote.shippingMethod()&&quote.shippingMethod()['method_code']){payload.addressInformation['shipping_method_code']=quote.shippingMethod()['method_code'];payload.addressInformation['shipping_carrier_code']=quote.shippingMethod()['carrier_code'];}\nreturn storage.post(serviceUrl,JSON.stringify(payload),false).done(function(result){var data={totals:result,address:address,cartVersion:customerData.get('cart')()['data_id'],shippingMethodCode:null,shippingCarrierCode:null};if(quote.shippingMethod()&&quote.shippingMethod()['method_code']){data.shippingMethodCode=quote.shippingMethod()['method_code'];data.shippingCarrierCode=quote.shippingMethod()['carrier_code'];}\nquote.setTotals(result);cartCache.set('cart-data',data);}).fail(function(response){errorProcessor.process(response);}).always(function(){totalsService.isLoading(false);});};return{requiredFields:cartCache.requiredFields,estimateTotals:function(address){var data={shippingMethodCode:null,shippingCarrierCode:null};if(quote.shippingMethod()&&quote.shippingMethod()['method_code']){data.shippingMethodCode=quote.shippingMethod()['method_code'];data.shippingCarrierCode=quote.shippingMethod()['carrier_code'];}\nreturn loadFromServer(address);}};});","Magento_Checkout/js/model/shipping-address/form-popup-state.min.js":"define(['ko'],function(ko){'use strict';return{isVisible:ko.observable(false)};});","Magento_Checkout/js/model/payment/additional-validators.min.js":"define([],function(){'use strict';var validators=[];return{registerValidator:function(validator){validators.push(validator);},getValidators:function(){return validators;},validate:function(hideError){var validationResult=true;hideError=hideError||false;if(validators.length<=0){return validationResult;}\nvalidators.forEach(function(item){if(item.validate(hideError)==false){validationResult=false;return false;}});return validationResult;}};});","Magento_Checkout/js/model/payment/method-converter.min.js":"define(['underscore'],function(_){'use strict';return function(methods){_.each(methods,function(method){if(method.hasOwnProperty('code')){method.method=method.code;delete method.code;}});return methods;};});","Magento_Checkout/js/model/payment/method-group.min.js":"define(['uiElement','mage/translate'],function(Element,$t){'use strict';var DEFAULT_GROUP_ALIAS='default';return Element.extend({defaults:{alias:DEFAULT_GROUP_ALIAS,title:$t('Payment Method'),sortOrder:100,displayArea:'payment-methods-items-${ $.alias }'},isDefault:function(){return this.alias===DEFAULT_GROUP_ALIAS;}});});","Magento_Checkout/js/model/payment/renderer-list.min.js":"define(['ko'],function(ko){'use strict';return ko.observableArray([]);});","Magento_Checkout/js/model/payment/method-list.min.js":"define(['ko'],function(ko){'use strict';return ko.observableArray([]);});","Magento_AdvancedCheckout/js/file-chooser.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.fileChooser',{options:{fileNameSelector:null,fileNameIndicatorSelector:null},_bind:function(){var handlers={};handlers['change '+this.options.fileNameSelector]='_onFileNameChanged';this._on(handlers);},_create:function(){this._bind();},_onFileNameChanged:function(){var fileSet='0',fileName=this.element.find(this.options.fileNameSelector),fileNameIndicator;if(typeof fileName!='undefined'&&fileName.val().length>0){fileSet='1';}\nfileNameIndicator=this.element.find(this.options.fileNameIndicatorSelector);if(fileNameIndicator.length>0){fileNameIndicator.val(fileSet);}}});return $.mage.fileChooser;});","Magento_AdvancedCheckout/js/order-by-sku-failure.min.js":"define(['jquery','jquery-ui-modules/widget','jquery/validate'],function($){'use strict';$.widget('mage.orderBySkuFailure',{options:{qtyInputSelector:'[data-role=\"input-qty\"]',skuFailedQtySelector:'[data-role=\"sku-failed-qty\"]'},_bind:function(){var handlers={};handlers['keyup '+this.options.qtyInputSelector]='_qtyChange';handlers['input '+this.options.qtyInputSelector]='_qtyChange';this._on(handlers);},_create:function(){this._bind();this._getQtyInput().valid();},_qtyChange:function(){var qtyInput=this._getQtyInput();qtyInput.valid();this._updateItemQty(qtyInput);},_updateItemQty:function(qtyInput){this.element.find(this.options.skuFailedQtySelector).val(qtyInput.val());},_getQtyInput:function(){return this.element.find(this.options.qtyInputSelector);}});$.extend($.validator.messages,{'required':'','validate-greater-than-zero':''});return $.mage.orderBySkuFailure;});","js/navigation-menu.min.js":"define(['jquery','matchMedia','mage/template','mage/dropdowns','mage/terms'],function($,mediaCheck,mageTemplate){'use strict';$.widget('mage.navigationMenu',{options:{itemsContainer:'> ul',topLevel:'li.level0',topLevelSubmenu:'> .submenu',topLevelHoverClass:'hover',expandedTopLevel:'.more',hoverInTimeout:300,hoverOutTimeout:500,submenuAnimationSpeed:200,collapsable:true,collapsableDropdownTemplate:'<script type=\"text/x-magento-template\">'+'<li class=\"level0 level-top more parent\">'+'<div class=\"submenu\">'+'<ul><%= elems %></ul>'+'</div>'+'</li>'+'</script>'},_create:function(){this.itemsContainer=$(this.options.itemsContainer,this.element);this.topLevel=$(this.options.topLevel,this.element);this.topLevelSubmenu=$(this.options.topLevelSubmenu,this.topLevel);this._bind();},_init:function(){if(this.options.collapsable){setTimeout($.proxy(function(){this._checkToCollapseOrExpand();},this),100);}},_bind:function(){this._on({'mouseenter > ul > li.level0':function(e){if(!this.entered){this.timeoutId&&clearTimeout(this.timeoutId);this.timeoutId=setTimeout($.proxy(function(){this._openSubmenu(e);},this),this.options.hoverInTimeout);this.entered=true;}},'mouseleave > ul > li.level0':function(e){this.entered=null;this.timeoutId&&clearTimeout(this.timeoutId);this.timeoutId=setTimeout($.proxy(function(){this._closeSubmenu(e.currentTarget);},this),this.options.hoverOutTimeout);},'click':function(e){e.stopPropagation();}});$(document).on('click.hideMenu',$.proxy(function(){var isOpened=this.topLevel.filter(function(){return $(this).data('opened');});if(isOpened){this._closeSubmenu(null,false);}},this));$(window).on('resize',$.proxy(function(){this.timeoutOnResize&&clearTimeout(this.timeoutOnResize);this.timeoutOnResize=setTimeout($.proxy(function(){if(this.options.collapsable){if($(this.options.expandedTopLevel,this.element).length){this._expandMenu();}\nthis._checkToCollapseOrExpand();}},this),300);},this));},_openSubmenu:function(e){var menuItem=e.currentTarget;if(!$(menuItem).data('opened')){this._closeSubmenu(menuItem,true,true);$(this.options.topLevelSubmenu,menuItem).slideDown(this.options.submenuAnimationSpeed,$.proxy(function(){$(menuItem).addClass(this.options.topLevelHoverClass);$(menuItem).data('opened',true);},this));}else if($(e.target).closest(this.options.topLevel)){$(e.target).addClass(this.options.topLevelHoverClass).siblings(this.options.topLevel).removeClass(this.options.topLevelHoverClass);}},_closeSubmenu:function(menuItem,excludeCurrent,fast){var topLevel=$(this.options.topLevel,this.element),activeSubmenu=$(this.options.topLevelSubmenu,menuItem||null);$(this.options.topLevelSubmenu,topLevel).filter(function(){return excludeCurrent?$(this).not(activeSubmenu):true;}).slideUp(fast?0:this.options.submenuAnimationSpeed);topLevel.removeClass(this.options.topLevelHoverClass).data('opened',false);},_checkToCollapseOrExpand:function(){var navWidth,totalWidth,startCollapseIndex;if($('html').hasClass('lt-640')||$('html').hasClass('w-640')){return;}\nnavWidth=this.itemsContainer.width();totalWidth=0;startCollapseIndex=0;$.each($(this.options.topLevel,this.element),function(index,item){totalWidth+=$(item).outerWidth(true);if(totalWidth>navWidth&&!startCollapseIndex){startCollapseIndex=index-2;}});this[startCollapseIndex?'_collapseMenu':'_expandMenu'](startCollapseIndex);},_collapseMenu:function(startCollapseIndex){this.elemsToCollapse=this.topLevel.filter(function(index){return index>startCollapseIndex;});this.elemsToCollapseClone=$('<div></div>').append(this.elemsToCollapse.clone()).html();this.collapsableDropdown=$(mageTemplate(this.options.collapsableDropdownTemplate,{elems:this.elemsToCollapseClone}));this.itemsContainer.append(this.collapsableDropdown);this.elemsToCollapse.detach();},_expandMenu:function(){this.elemsToCollapse&&this.elemsToCollapse.appendTo(this.itemsContainer);this.collapsableDropdown&&this.collapsableDropdown.remove();},_destroy:function(){this._expandMenu();}});$.widget('mage.navigationMenu',$.mage.navigationMenu,{options:{parentLevel:'> ul > li.level0',submenuAnimationSpeed:150,submenuContiniumEffect:false},_init:function(){this._super();this._applySubmenuStyles();},_applySubmenuStyles:function(){$(this.options.topLevelSubmenu,$(this.options.topLevel,this.element)).removeAttr('style');$(this.options.topLevelSubmenu,$(this.options.parentLevel,this.element)).css({display:'block',height:0,overflow:'hidden'});},_openSubmenu:function(e){var menuItem=e.currentTarget,submenu=$(this.options.topLevelSubmenu,menuItem),openedItems=$(this.options.topLevel,this.element).filter(function(){return $(this).data('opened');});if(submenu.length){this.heightToAnimate=$(this.options.itemsContainer,submenu).outerHeight(true);if(openedItems.length){this._closeSubmenu(menuItem,true,this.heightToAnimate,$.proxy(function(){submenu.css({height:'auto'});$(menuItem).addClass(this.options.topLevelHoverClass);},this),e);}else{submenu.animate({height:this.heightToAnimate},this.options.submenuAnimationSpeed,$.proxy(function(){$(menuItem).addClass(this.options.topLevelHoverClass);},this));}\n$(menuItem).data('opened',true);}else{this._closeSubmenu(menuItem);}},_closeSubmenu:function(menuItem,excludeCurrent,heightToAnimate,callback){var topLevel=$(this.options.topLevel,this.itemsContainer),prevOpenedItem,prevOpenedSubmenu;if(!excludeCurrent){$(this.options.topLevelSubmenu,$(this.options.parentLevel,this.element)).animate({height:0});topLevel.data('opened',false).removeClass(this.options.topLevelHoverClass);}else{prevOpenedItem=topLevel.filter(function(){return $(this).data('opened');});prevOpenedSubmenu=$(this.options.topLevelSubmenu,prevOpenedItem);prevOpenedSubmenu.animate({height:heightToAnimate},this.options.submenuAnimationSpeed,'linear',function(){$(this).css({height:0});callback&&callback();});prevOpenedItem.data('opened',false).removeClass(this.options.topLevelHoverClass);}},_collapseMenu:function(){this._superApply(arguments);this._applySubmenuStyles();}});$.widget('mage.navigationMenu',$.mage.navigationMenu,{options:{responsive:false,origNavPlaceholder:'.page-header',mainContainer:'body',pageWrapper:'.page-wrapper',openedMenuClass:'opened',toggleActionPlaceholder:'.block-search',itemWithSubmenu:'li.parent',titleWithSubmenu:'li.parent > a',submenu:'li.parent > .submenu',toggleActionTemplate:'<script type=\"text/x-magento-template\">'+'<span data-action=\"toggle-nav\" class=\"action toggle nav\">Toggle Nav</span>'+'</script>',submenuActionsTemplate:'<script type=\"text/x-magento-template\">'+'<li class=\"action all\">'+'<a href=\"<%= categoryURL %>\"><span>All <%= category %></span></a>'+'</li>'+'</script>',navigationSectionsWrapperTemplate:'<script type=\"text/x-magento-template\">'+'<dl class=\"navigation-tabs\" data-sections=\"tabs\">'+'</dl>'+'</script>',navigationItemWrapperTemplate:'<script type=\"text/x-magento-template\">'+'<dt class=\"item title <% if (active) { %>active<% } %>\" data-section=\"title\">'+'<a class=\"switch\" data-toggle=\"switch\" href=\"#TODO\"><%= title %></a>'+'</dt>'+'<dd class=\"item content <% if (active) { %>active<%}%>\" data-section=\"content\">'+'</dd>'+'</script>'},_init:function(){this._super();this.mainContainer=$(this.options.mainContainer);this.pageWrapper=$(this.options.pageWrapper);this.toggleAction=$(mageTemplate(this.options.toggleActionTemplate,{}));if(this.options.responsive){mediaCheck({media:'(min-width: 768px)',entry:$.proxy(function(){this._toggleDesktopMode();},this),exit:$.proxy(function(){this._toggleMobileMode();},this)});}},_bind:function(){this._super();this._bindDocumentEvents();},_bindDocumentEvents:function(){if(!this.eventsBound){$(document).on('click.toggleMenu','.action.toggle.nav',$.proxy(function(e){if($(this.element).data('opened')){this._hideMenu();}else{this._showMenu();}\ne.stopPropagation();this.mobileNav.scrollTop(0);this._fixedBackLink();},this)).on('click.hideMenu',this.options.pageWrapper,$.proxy(function(){if($(this.element).data('opened')){this._hideMenu();this.mobileNav.scrollTop(0);this._fixedBackLink();}},this)).on('click.showSubmenu',this.options.titleWithSubmenu,$.proxy(function(e){this._showSubmenu(e);e.preventDefault();this.mobileNav.scrollTop(0);this._fixedBackLink();},this)).on('click.hideSubmenu','.action.back',$.proxy(function(e){this._hideSubmenu(e);this.mobileNav.scrollTop(0);this._fixedBackLink();},this));this.eventsBound=true;}},_showMenu:function(){$(this.element).data('opened',true);this.mainContainer.add('html').addClass(this.options.openedMenuClass);},_hideMenu:function(){$(this.element).data('opened',false);this.mainContainer.add('html').removeClass(this.options.openedMenuClass);},_showSubmenu:function(e){var submenu;$(e.currentTarget).addClass('action back');submenu=$(e.currentTarget).siblings('.submenu');submenu.addClass('opened');},_hideSubmenu:function(e){var submenuSelector='.submenu',submenu=$(e.currentTarget).next(submenuSelector);$(e.currentTarget).removeClass('action back');submenu.removeClass('opened');},_renderSubmenuActions:function(){$.each($(this.options.itemWithSubmenu),$.proxy(function(index,item){var actions=$(mageTemplate(this.options.submenuActionsTemplate,{category:$('> a > span',item).text(),categoryURL:$('> a',item).attr('href')})),submenu=$('> .submenu',item),items=$('> ul',submenu);items.prepend(actions);},this));},_toggleMobileMode:function(){this._expandMenu();$(this.options.topLevelSubmenu,$(this.options.topLevel,this.element)).removeAttr('style');this.toggleAction.insertBefore(this.options.toggleActionPlaceholder);this.mobileNav=$(this.element).detach().clone();this.mainContainer.prepend(this.mobileNav);this.mobileNav.find('> ul').addClass('nav');this._insertExtraItems();this._wrapItemsInSections();this.mobileNav.scroll($.proxy(function(){this._fixedBackLink();},this));this._renderSubmenuActions();this._bindDocumentEvents();},_toggleDesktopMode:function(){this.mobileNav&&this.mobileNav.remove();this.toggleAction.detach();$(this.element).insertAfter(this.options.origNavPlaceholder);$(document).off('click.toggleMenu','.action.toggle.nav').off('click.hideMenu',this.options.pageWrapper).off('click.showSubmenu',this.options.titleWithSubmenu).off('click.hideSubmenu','.action.back');this.eventsBound=false;this._applySubmenuStyles();},_insertExtraItems:function(){var settings,footerSettings,account;if($('.header.panel .switcher').length){settings=$('.header.panel .switcher').clone().addClass('settings');this.mobileNav.prepend(settings);}\nif($('.footer .switcher').length){footerSettings=$('.footer .switcher').clone().addClass('settings');this.mobileNav.prepend(footerSettings);}\nif($('.header.panel .header.links li').length){account=$('.header.panel > .header.links').clone().addClass('account');this.mobileNav.prepend(account);}},_wrapItemsInSections:function(){var account=$('> .account',this.mobileNav),settings=$('> .settings',this.mobileNav),nav=$('> .nav',this.mobileNav),navigationSectionsWrapper=$(mageTemplate(this.options.navigationSectionsWrapperTemplate,{})),navigationItemWrapper;this.mobileNav.append(navigationSectionsWrapper);if(nav.length){navigationItemWrapper=$(mageTemplate(this.options.navigationItemWrapperTemplate,{title:'Menu'}));navigationSectionsWrapper.append(navigationItemWrapper);navigationItemWrapper.eq(1).append(nav);}\nif(account.length){navigationItemWrapper=$(mageTemplate(this.options.navigationItemWrapperTemplate,{title:'Account'}));navigationSectionsWrapper.append(navigationItemWrapper);navigationItemWrapper.eq(1).append(account);}\nif(settings.length){navigationItemWrapper=$(mageTemplate(this.options.navigationItemWrapperTemplate,{title:'Settings'}));navigationSectionsWrapper.append(navigationItemWrapper);navigationItemWrapper.eq(1).append(settings);}\nnavigationSectionsWrapper.addClass('navigation-tabs-'+navigationSectionsWrapper.find('[data-section=\"title\"]').length);navigationSectionsWrapper.terms();},_fixedBackLink:function(){var linksBack=this.mobileNav.find('.submenu .action.back'),linkBack=this.mobileNav.find('.submenu.opened > ul > .action.back').last(),subMenu,navOffset,linkBackHeight;linksBack.removeClass('fixed');if(linkBack.length){subMenu=linkBack.parent();navOffset=this.mobileNav.find('.nav').position().top;linkBackHeight=linkBack.height();if(navOffset<=0){linkBack.addClass('fixed');subMenu.css({paddingTop:linkBackHeight});}else{linkBack.removeClass('fixed');subMenu.css({paddingTop:0});}}}});return $.mage.navigationMenu;});","js/oneplayer.min.js":"(function(){var requirejs,require,define,__extends;(function(n){var i=Object.defineProperty&&function(){var n,t;try{n={};Object.defineProperty(n,\"x\",{enumerable:!1,value:n});for(t in n)if(n.hasOwnProperty(t))return!1;return n.x===n}catch(i){return!1}}(),t;i||n.definePropertyShamSet||(n.definePropertyShamSet=!0,t=Object.defineProperty,Object.defineProperty=function(n,i,r){n instanceof Element?t(n,i,r):n[i]=r?r.value:!0})})(window);(function(n){function r(n,t){return w.call(n,t)}function s(n,t){var o,s,f,e,h,p,c,b,r,l,w,k,u=t&&t.split(\"/\"),a=i.map,y=a&&a[\"*\"]||{};if(n){for(n=n.split(\"/\"),h=n.length-1,i.nodeIdCompat&&v.test(n[h])&&(n[h]=n[h].replace(v,\"\")),n[0].charAt(0)===\".\"&&u&&(k=u.slice(0,u.length-1),n=k.concat(n)),r=0;r<n.length;r++)if(w=n[r],w===\".\")n.splice(r,1),r-=1;else if(w===\"..\")if(r===0||r===1&&n[2]===\"..\"||n[r-1]===\"..\")continue;else r>0&&(n.splice(r-1,2),r-=2);n=n.join(\"/\")}if((u||y)&&a){for(o=n.split(\"/\"),r=o.length;r>0;r-=1){if(s=o.slice(0,r).join(\"/\"),u)for(l=u.length;l>0;l-=1)if(f=a[u.slice(0,l).join(\"/\")],f&&(f=f[s],f)){e=f;p=r;break}if(e)break;!c&&y&&y[s]&&(c=y[s],b=r)}!e&&c&&(e=c,p=b);e&&(o.splice(0,p,e),n=o.join(\"/\"))}return n}function y(t,i){return function(){var r=b.call(arguments,0);return typeof r[0]!=\"string\"&&r.length===1&&r.push(null),u.apply(n,r.concat([t,i]))}}function k(n){return function(t){return s(t,n)}}function d(n){return function(i){t[n]=i}}function h(i){if(r(e,i)){var u=e[i];delete e[i];l[i]=!0;o.apply(n,u)}if(!r(t,i)&&!r(l,i))throw new Error(\"No \"+i);return t[i]}function a(n){var i,t=n?n.indexOf(\"!\"):-1;return t>-1&&(i=n.substring(0,t),n=n.substring(t+1,n.length)),[i,n]}function p(n){return n?a(n):[]}function g(n){return function(){return i&&i.config&&i.config[n]||{}}}var o,u,c,f,t={},e={},i={},l={},w=Object.prototype.hasOwnProperty,b=[].slice,v=/\\.js$/;c=function(n,t){var r,u=a(n),i=u[0],f=t[1];return n=u[1],i&&(i=s(i,f),r=h(i)),i?n=r&&r.normalize?r.normalize(n,k(f)):s(n,f):(n=s(n,f),u=a(n),i=u[0],n=u[1],i&&(r=h(i))),{f:i?i+\"!\"+n:n,n:n,pr:i,p:r}};f={require:function(n){return y(n)},exports:function(n){var i=t[n];return typeof i!=\"undefined\"?i:t[n]={}},module:function(n){return{id:n,uri:\"\",exports:t[n],config:g(n)}}};o=function(i,u,o,s){var b,a,g,k,v,nt,w=[],tt=typeof o,it;if(s=s||i,nt=p(s),tt===\"undefined\"||tt===\"function\"){for(u=!u.length&&o.length?[\"require\",\"exports\",\"module\"]:u,v=0;v<u.length;v+=1)if(k=c(u[v],nt),a=k.f,a===\"require\")w[v]=f.require(i);else if(a===\"exports\")w[v]=f.exports(i),it=!0;else if(a===\"module\")b=w[v]=f.module(i);else if(r(t,a)||r(e,a)||r(l,a))w[v]=h(a);else if(k.p)k.p.load(k.n,y(s,!0),d(a),{}),w[v]=t[a];else throw new Error(i+\" missing \"+a);g=o?o.apply(t[i],w):undefined;i&&(b&&b.exports!==n&&b.exports!==t[i]?t[i]=b.exports:g===n&&it||(t[i]=g))}else i&&(t[i]=o)};requirejs=require=u=function(t,r,e,s,l){if(typeof t==\"string\")return f[t]?f[t](r):h(c(t,p(r)).f);if(!t.splice){if(i=t,i.deps&&u(i.deps,i.callback),!r)return;r.splice?(t=r,r=e,e=null):t=n}return r=r||function(){},typeof e==\"function\"&&(e=s,s=l),s?o(n,t,r,e):setTimeout(function(){o(n,t,r,e)},4),u};u.config=function(n){return u(n)};requirejs._defined=t;define=function(n,i,u){if(typeof n!=\"string\")throw new Error(\"See almond README: incorrect module build, no module name\");i.splice||(u=i,i=[]);r(t,n)||r(e,n)||(e[n]=[n,i,u])};define.amd={jQuery:!0}})();define(\"oneplayer-css-loader\",[\"require\",\"exports\"],function(n,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function n(){}return n.loadCss=function(t,i){var r,e,u,o,f,s;if(i&&typeof i==\"function\"&&(n.cssLoaded?i():n.onLoadedCallbacks.push(i)),!n.cssLoadTriggered){if(n.cssLoadTriggered=!0,t=t||\"en-us\",n.playerCssHost[0]===\"%\"&&(n.playerCssHost=n.defaultPlayerCssHost),r=document.createElement(\"link\"),r.setAttribute(\"rel\",\"stylesheet\"),r.setAttribute(\"type\",\"text/css\"),n.url.indexOf(\"cached\")>=0)r.setAttribute(\"href\",n.playerCssHost+\"/\"+t+n.playerCachedCssRoute);else if(n.url.indexOf(\"cache\")>=0){if(e=n.url.split(\"?\"),e.length>0)for(u=\"0\",o=e[1].split(\"&\"),f=0;f<o.length;f++)s=o[f].split(\"=\"),s[0]===\"v\"&&(u=s[1]);u!==\"0\"?r.setAttribute(\"href\",n.playerCssHost+\"/\"+t+n.playerCacheCssRoute+\"?v=\"+u):r.setAttribute(\"href\",n.playerCssHost+\"/\"+t+n.playerCachedCssRoute)}else r.setAttribute(\"href\",n.playerCssHost+\"/\"+t+n.playerCssRoute);r.onload=function(){var t,i,r;for(n.cssLoaded=!0,t=0,i=n.onLoadedCallbacks;t<i.length;t++)r=i[t],r&&r()};document.getElementsByTagName(\"head\")[0].appendChild(r)}},n.playerCssHost=\"https://www.microsoft.com\",n.url=\"https://www.microsoft.com/videoplayer/js/oneplayer.js\",n.defaultPlayerCssHost=\"https://www.microsoft.com\",n.playerCssRoute=\"/videoplayer/css/oneplayer.css\",n.playerCachedCssRoute=\"/videoplayer/css/cached/oneplayer.css\",n.playerCacheCssRoute=\"/videoplayer/css/cache/oneplayer.css\",n.cssLoadTriggered=!1,n.cssLoaded=!1,n.onLoadedCallbacks=[],n}();t.OnePlayerCssLoader=i});define(\"oneplayer-inline\",[\"require\",\"exports\",\"video-player\",\"oneplayer-css-loader\",\"htmlExtensions\",\"componentFactory\"],function(n,t,i,r,u,f){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var e=function(){function n(){}return n.prototype.render=function(n,t,e){var o=this,s=t&&t.options&&t.options.market;r.OnePlayerCssLoader.loadCss(s,function(){var s=document.getElementById(n),h,r;s&&(o.playerData=t,h={options:{autoload:!1,adsEnabled:!1}},r=document.createElement(\"div\"),u.addClass(r,\"c-video-player\"),r.setAttribute(\"data-player-data\",JSON.stringify(h)),s.appendChild(r),f.ComponentFactory.create([{component:i.VideoPlayer,elements:[r],callback:function(n){if(!!n&&!!n.length&&n.length===1){o.playerObject=n[0];o.playerObject.load(t);o.onPlayerCreated(o.playerObject,e)}}}]))})},n.prototype.onPlayerCreated=function(n,t){var i=this;if(!n.currentPlayer){setTimeout(function(){i.onPlayerCreated(n,t)},50);return}t&&t(n)},n.prototype.updatePlayerSource=function(n){this.playerData=n;this.playerObject.updatePlayerSource(this.playerData)},n}();t.OnePlayerInline=e}),function(n){function t(t){require([\"oneplayer-inline\"],function(i){i&&i.OnePlayerInline&&(n.player||(n.player=new i.OnePlayerInline),n.updatePlayerSource||(n.updatePlayerSource=r),t())})}function i(i,r,u){require([\"oneplayer-inline\"],function(f){f&&f.OnePlayerInline&&t(function(){n.player.render(i,r,u)})})}function r(t){require([\"oneplayer-inline\"],function(i){i&&i.OnePlayerInline&&n.player.updatePlayerSource(t)})}n.render||(n.render=i)}(window.MsOnePlayer||(window.MsOnePlayer={}));define(\"video-player\",[\"require\",\"exports\",\"player-factory\",\"utility\",\"htmlExtensions\",\"player-options\",\"player-utility\",\"player-constants\",\"video-shim-data-fetcher\"],function(n,t,i,r,u,f,e,o,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var h=function(){function n(t,i){var s=this,h,c;(this.videoComponent=t,this.playerData={},this.resizePlayer=function(){var n,t,i,r;s.videoComponent&&s.playerData&&s.playerData.options&&!s.playerData.options.flexSize?(n=s.videoComponent.getBoundingClientRect().width,n&&s.playerData.options.aspectRatio&&(t=n/s.playerData.options.aspectRatio,i=s.videoComponent.parentElement.closest(\".c-dialog.f-lightbox\"),i&&(t>window.innerHeight?(t=window.innerHeight,n=t*s.playerData.options.aspectRatio,u.css(s.videoComponent,\"width\",n+\"px\")):(u.css(s.videoComponent,\"width\",\"\"),r=Math.round(window.devicePixelRatio*100)>100,r||(n=s.videoComponent.getBoundingClientRect().width,t=n/s.playerData.options.aspectRatio))),u.css(s.videoComponent,\"height\",t+\"px\"))):s.videoComponent.style.removeProperty(\"height\")},t)&&(n.playerInstanceCount++,this.playerId=t.getAttribute(\"id\"),this.playerId||(this.playerId=\"vid-\"+n.playerInstanceCount,this.videoComponent.setAttribute(\"id\",this.playerId)),e.PlayerUtility.createVideoPerfMarker(this.playerId,o.videoPerfMarkers.playerInit),h=typeof i==\"object\"?i:{},i&&i.options||(c=this.videoComponent.getAttribute(n.playerDataAttribute),!c||(h=r.parseJson(c))),this.playerData.options=new f.PlayerOptions(h.options),this.playerData.metadata=h.metadata,this.playerData.metadata&&this.playerData.options.autoload?this.load():this.resizePlayer(),u.addThrottledEvent(window,u.eventTypes.resize,this.resizePlayer),this.getCurrentTime=function(){var n=s.getPlayPosition();return n&&n.currentTime},this.getDuration=this.getVideoDuration=function(){var n=s.getPlayPosition();return n&&n.endTime-n.startTime})}return n.prototype.updateContainerVisibility=function(n,t){if(!!n){var i=t?\"true\":\"false\";n.setAttribute(\"aria-hidden\",i)}},n.prototype.load=function(n){n&&(r.extend(this.playerData.options,n.options),this.playerData.metadata=n.metadata);!this.currentPlayer||this.dispose();this.playerData.options&&this.playerData.options.debug&&this.videoComponent.setAttribute(\"data-debug\",\"true\");this.resizePlayer();!this.playerData.metadata||!this.playerData.metadata.videoId||this.playerData.metadata.videoFiles&&this.playerData.metadata.videoFiles.length||this.playerData.metadata.playerName?this.loadPlayer():this.fetchDataAndLoad()},n.prototype.updatePlayerSource=function(n){this.currentPlayer.updatePlayerSource(n)},n.prototype.fetchDataAndLoad=function(){var n=this,t;e.PlayerUtility.createVideoPerfMarker(this.playerId,o.videoPerfMarkers.metadataFetchStart);t=new s.VideoShimDataFetcher(this.playerData.options.shimServiceEnv,this.playerData.options.shimServiceUrl);t.getMetadata(this.playerData.metadata.videoId,function(t){e.PlayerUtility.createVideoPerfMarker(n.playerId,o.videoPerfMarkers.metadataFetchEnd);n.playerData.metadata=t;n.loadPlayer()},function(){e.PlayerUtility.createVideoPerfMarker(n.playerId,o.videoPerfMarkers.metadataFetchEnd);n.loadPlayer()})},n.prototype.getCurrentPlayState=function(){if(this.currentPlayer)return this.currentPlayer.getCurrentPlayState()},n.prototype.loadPlayer=function(){e.PlayerUtility.createVideoPerfMarker(this.playerId,o.videoPerfMarkers.playerLoadStart);var r=this.playerData.metadata&&this.playerData.metadata.playerName||n.defaultPlayerName,t=i.PlayerFactory.createPlayer(r,this.videoComponent,this.playerData);this.currentPlayer=t&&t.playerInstance;n.videoPlayerList[this.playerId]=this.currentPlayer},n.prototype.dispose=function(){!this.currentPlayer||(this.currentPlayer.dispose(),this.currentPlayer=null,delete n.videoPlayerList[this.playerId]);u.removeInnerHtml(this.videoComponent)},n.prototype.play=function(){!this.currentPlayer||this.currentPlayer.play()},n.prototype.displayImage=function(n){!this.currentPlayer||this.currentPlayer.displayImage(n)},n.prototype.pause=function(n){!this.currentPlayer||this.currentPlayer.pause(n)},n.prototype.mute=function(n){!this.currentPlayer||(n!==undefined&&!n?this.currentPlayer.unmute():this.currentPlayer.mute())},n.prototype.unmute=function(){!this.currentPlayer||this.currentPlayer.unmute()},n.prototype.seek=function(n){!this.currentPlayer||this.currentPlayer.seek(n)},n.prototype.enterFullScreen=function(){!this.currentPlayer||this.currentPlayer.enterFullScreen()},n.prototype.exitFullScreen=function(){!this.currentPlayer||this.currentPlayer.exitFullScreen()},n.prototype.getPlayPosition=function(){return!this.currentPlayer?{currentTime:0,startTime:0,endTime:0}:this.currentPlayer.getPlayPosition()},n.prototype.isLive=function(){return this.currentPlayer?this.currentPlayer.isLive():!1},n.prototype.addPlayerEventListener=function(n){!this.currentPlayer||this.currentPlayer.addPlayerEventListener(n)},n.prototype.removePlayerEventListener=function(n){!this.currentPlayer||this.currentPlayer.removePlayerEventListener(n)},n.prototype.setAutoPlay=function(){!this.currentPlayer||this.currentPlayer.setAutoPlay()},n.prototype.addPlayerEventsListener=function(n){!this.currentPlayer||this.currentPlayer.addPlayerEventListener(n)},n.prototype.removePlayerEventsListener=function(n){!this.currentPlayer||this.currentPlayer.removePlayerEventListener(n)},n.prototype.getPlayerId=function(){return this.playerId},n.prototype.getPlayer=function(t){for(var i in n.videoPlayerList)if(t===i&&n.videoPlayerList.hasOwnProperty(i))return n.videoPlayerList[i];return console.log(\"player not found in player list, id = \"+t),null},n.prototype.resize=function(){!this.currentPlayer||this.currentPlayer.resize()},n.videoPlayerList={},n.selector=\".c-video-player\",n.typeName=\"VideoPlayer\",n.corePlayerContainer=\".f-core-player\",n.externalPlayerContainer=\".f-external-player\",n.playerDataAttribute=\"data-player-data\",n.defaultPlayerName=\"coreplayer\",n.playerInstanceCount=0,n}();t.VideoPlayer=h;r.getPerfMarkerValue(o.videoPerfMarkers.scriptLoaded)||r.createPerfMarker(o.videoPerfMarkers.scriptLoaded,!0)});require([\"video-player\",\"componentFactory\"],function(n,t){t.ComponentFactory&&t.ComponentFactory.create&&t.ComponentFactory.create([{component:n.VideoPlayer}])});define(\"player-factory\",[\"require\",\"exports\",\"core-player\"],function(n,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function n(){}return n.createPlayer=function(n,t,r){var u,f;if(!n)f=\"coreplayer\",u=new i.CorePlayer(t,r);else switch(n.toLowerCase()){case\"youtube\":f=\"youtube\";u=null;break;default:f=\"coreplayer\";u=new i.CorePlayer(t,r)}return{playerInstance:u,playerName:f}},n}();t.PlayerFactory=r});define(\"ttml-context\",[\"require\",\"exports\",\"ttml-parser\",\"ttml-settings\",\"htmlExtensions\",\"stringExtensions\",\"utility\"],function(n,t,i,r,u,f,e){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function n(){var t=this;this.translateToHtml=function(e,o,s){var c,h,v=t.getTagNameEquivalent(e),l=\"\",y=\"\",a,p,w,b;switch(v){case\"ttml:region\":y=\"cue \";case\"ttml:rootcontainerregion\":case\"ttml:body\":case\"ttml:div\":l=\"div\";break;case\"ttml:p\":l=\"p\";break;case\"ttml:span\":l=\"span\";break;case\"ttml:br\":l=\"br\"}return a=i.TtmlParser.getAttributeNS(e,\"role\",t.settings.ttmlMetaNamespace),a&&(y+=\" \"+a),p=i.TtmlParser.getAttributeNS(e,\"agent\",t.settings.ttmlMetaNamespace),p&&(y+=\" \"+p),a===\"x-ruby\"?l=\"ruby\":a===\"x-rubybase\"?l=\"rb\":a===\"x-rubytext\"&&(l=\"rt\"),f.isNullOrWhiteSpace(l)||(c=n.defaultStyle(t.ownerDocument.createElement(l)),u.addClass(c,f.trim(y)),w=i.TtmlParser.getAttributeNS(e,\"title\",t.settings.ttmlMetaNamespace),w&&c.setAttribute(\"title\",w),b=i.TtmlParser.getAttributeNS(e,\"id\",r.xmlNS),b&&t.settings.idPrefix&&c.setAttribute(\"id\",t.settings.idPrefix+b),v===\"ttml:region\"&&(h=c.appendChild(n.defaultStyle(t.ownerDocument.createElement(\"div\"))),u.css(h,\"display\",\"table\"),u.css(h,\"border-spacing\",\"0\"),u.css(h,\"cell-spacing\",\"0\"),u.css(h,\"cell-padding\",\"0\"),u.css(h,\"width\",\"100%\"),u.css(h,\"height\",\"100%\"),h=h.appendChild(n.defaultStyle(t.ownerDocument.createElement(\"div\"))),u.css(h,\"display\",\"table-cell\"),o.displayAlign&&(t.translateStyle(v,h,{displayAlign:o.displayAlign}),o.displayAlign=null)),s&&v===\"ttml:span\"&&(h=c.appendChild(n.defaultStyle(t.ownerDocument.createElement(\"span\"))),u.css(h,\"white-space\",\"pre\")),u.css(c,\"position\",\"static\"),u.css(c,\"width\",\"100%\"),t.translateStyle(v,c,o)),{outerNode:c,innerNode:h?h:c}}}return n.prototype.setOwnerDocument=function(n){this.ownerDocument=n},n.prototype.updateRelatedMediaObjectRegion=function(n){return!this.settings.relatedMediaObjectRegion||n.width!==this.settings.relatedMediaObjectRegion.width||n.height!==this.settings.relatedMediaObjectRegion.height?(this.settings.relatedMediaObjectRegion={width:n.width,height:n.height},!0):!1},n.prototype.hasEvents=function(){return this.events&&!!this.events.length},n.prototype.resetCurrentEvents=function(){this.currentEvents=[]},n.prototype.updateCurrentEvents=function(n){var t=this.getTemporallyActiveEvents(n),r=this.currentEvents?this.currentEvents.length:0,u=t?t.length:0,i;if(r!==u)return this.currentEventsTime=n,this.currentEvents=t,!0;if(this.currentEvents)for(i=0;i<r;i++)if(this.currentEvents[i].time!==t[i].time)return this.currentEventsTime=n,this.currentEvents=t,!0;return!1},n.prototype.getTemporallyActiveEvents=function(n){var t=this;return this.events.filter(function(i){return i.element?t.isTemporallyActive(i.element,n):!0})},n.prototype.isTemporallyActive=function(n,t){return(parseInt(n.getAttribute(\"data-time-start\"),10)||0)<=t&&t<(parseInt(n.getAttribute(\"data-time-end\"),10)||0)},n.prototype.getCues=function(n){var t=[],v,tt,s,y,o,w,h,c,b,l,k,e,d,g,a,nt,ut;for(this.currentEventsTime!==n&&this.updateCurrentEvents(n),v=i.TtmlParser.getAttributeNS(this.root,\"space\",r.xmlNS)===\"preserve\",tt=this.layout?this.layout.getElementsByTagNameNS(this.settings.ttmlNamespace,\"region\"):[],s=0,y=tt;s<y.length;s++){var p=y[s],it=i.TtmlParser.getAttributeNS(p,\"id\",r.xmlNS),rt=p.getAttribute(\"data-isanonymous\");if((rt||it)&&(o=this.translate(p,this.settings.defaultRegionStyle,v,n,this.translateToHtml),o.outerNode)){for(w=o.innerNode,h=o.outerNode,c=0,b=this.events;c<b.length;c++)l=b[c],l.element&&this.isInRegion(l.element,rt?null:it)&&(k=this.prune(l.element,o.inheritableStyleSet,v,n,this.translateToHtml),e=k.prunedElement,k.hasPreservedContent||!e||f.trim(u.getText(e)).length||(e=null),e&&w.appendChild(e));d=h.getAttribute(\"data-showBackground\")===\"always\";(d||w.children.length)&&(d&&h.removeAttribute(\"data-showBackground\"),t.push(h))}}if(t.length){for(g=this.translate(this.rootContainerRegion,{overflow:\"hidden\",padding:\"0\"},!1,n,this.translateToHtml),a=0,nt=t;a<nt.length;a++)ut=nt[a],g.innerNode.appendChild(ut);t=[];t.push(g.outerNode)}return t},n.prototype.translate=function(n,t,i,r,u){var f,e,o,s;return(this.isTemporallyActive(n,r)&&(o=this.getTagNameEquivalent(n),e=this.getComputedStyleSet(n,t,o,r),e.display!==\"none\"&&(s=this.getApplicableStyleSet(e,o),f=u(n,s,i))),!f)?{outerNode:null,innerNode:null,inheritableStyleSet:null}:{outerNode:f.outerNode,innerNode:f.innerNode,inheritableStyleSet:this.getInheritableStyleSet(e)}},n.prototype.translateStyle=function(n,t,i){for(var r in i)i[r]&&this.applyStyle(t,n,r,i[r])},n.prototype.prune=function(n,t,f,e,o,s){var y,a,h,g,v,p,b,l,k,d,w,c;if(s===void 0&&(s=!1),a=!1,h=this.translate(n,t,f,e,o),h.outerNode!==null){for(g=this.getTagNameEquivalent(n),y=h.outerNode,v=h.innerNode,p=0,b=u.nodeListToArray(n.childNodes);p<b.length;p++)l=b[p],l.nodeType===Node.COMMENT_NODE||(l.nodeType===Node.TEXT_NODE?(v.appendChild(document.createTextNode(l.data)),f&&g===\"ttml:span\"&&(a=!0)):(k=f,d=i.TtmlParser.getAttributeNS(l,\"space\",r.xmlNS),d&&(k=d===\"preserve\"),w=this.prune(l,h.inheritableStyleSet,k,e,o,!0),a=a||w.hasPreservedContent,w.prunedElement&&v.appendChild(w.prunedElement)));if(!s)for(c=n.parentNode;c!==null&&c.nodeType===Node.ELEMENT_NODE&&c!==this.body;){if(h=this.translate(c,t,f,e,o),h.outerNode)v=h.innerNode,v.appendChild(y),y=h.outerNode;else break;c=c.parentNode}}return{prunedElement:y,hasPreservedContent:a}},n.prototype.getComputedStyleSet=function(n,t,r,f){var o=e.extend({},t),a,s,h,c,l;for(e.extend(o,this.styleSetCache[parseInt(n.getAttribute(\"data-styleSet\"),10)]),a=n.getElementsByTagNameNS(this.settings.ttmlNamespace,\"set\"),s=0,h=u.nodeListToArray(a);s<h.length;s++)c=h[s],this.isTemporallyActive(c,f)&&i.TtmlParser.applyInlineStyles(this.settings,o,c);return r===\"ttml:p\"&&o.lineHeight===\"normal\"&&(l=this.appendSpanFontSizes(n,this.getInheritableStyleSet(o),f,\"\"),l&&(o[\"computed-lineHeight\"]=l)),o},n.prototype.getApplicableStyleSet=function(n,t){var i={},r;n.extent&&this.isStyleApplicable(t,\"extent\")&&(i.extent=n.extent);n.color&&this.isStyleApplicable(t,\"color\")&&(i.color=n.color);for(r in n)this.isStyleApplicable(t,r)&&(i[r]=n[r]);return i},n.prototype.isStyleApplicable=function(n,t){switch(t){case\"backgroundColor\":case\"display\":case\"visibility\":return\"ttml:body ttml:div ttml:p ttml:region ttml:rootcontainerregion ttml:span ttml:br\".indexOf(n)>=0;case\"fontFamily\":case\"fontSize\":case\"fontStyle\":case\"fontWeight\":return\"ttml:p ttml:span ttml:br\".indexOf(n)>=0;case\"color\":case\"textDecoration\":case\"textOutline\":case\"wrapOption\":return\"ttml:span ttml:br\".indexOf(n)>=0;case\"direction\":case\"unicodeBidi\":return\"ttml:p ttml:span ttml:br\".indexOf(n)>=0;case\"displayAlign\":case\"opacity\":case\"origin\":case\"overflow\":case\"padding\":case\"showBackground\":case\"writingMode\":case\"zIndex\":return\"ttml:region ttml:rootcontainerregion\".indexOf(n)>=0;case\"extent\":return\"ttml:tt ttml:region ttml:rootcontainerregion\".indexOf(n)>=0;case\"computed-lineHeight\":case\"lineHeight\":case\"textAlign\":return\"ttml:p\".indexOf(n)>=0;default:return!1}},n.prototype.getInheritableStyleSet=function(n){var i={};for(var t in n)if(n.hasOwnProperty(t))switch(t){case\"backgroundColor\":case\"computed-lineHeight\":case\"display\":case\"displayAlign\":case\"extent\":case\"opacity\":case\"origin\":case\"overflow\":case\"padding\":case\"showBackground\":case\"unicodeBidi\":case\"writingMode\":case\"zIndex\":break;default:i[t]=n[t]}return i},n.prototype.appendSpanFontSizes=function(n,t,i,r){for(var f,c,s,h,e=0,o=u.nodeListToArray(n.childNodes);e<o.length;e++)f=o[e],f.nodeType===Node.ELEMENT_NODE&&(c=this.getTagNameEquivalent(f),c===\"ttml:span\"&&(s=this.getComputedStyleSet(f,t,\"ttml:span\",i),h=s.fontSize,h&&(r+=(r?\",\":\"\")+h),r=this.appendSpanFontSizes(f,this.getInheritableStyleSet(s),i,r)));return r},n.prototype.isInRegion=function(n,t){var e,r,o,f,s,h;if(!t||(e=i.TtmlParser.getAttributeNS(n,\"region\",this.settings.ttmlNamespace),e===t))return!0;if(!e){for(r=n.parentNode;r!==null&&r.nodeType===Node.ELEMENT_NODE;){if(o=this.getRegionId(r),o)return o===t;r=r.parentNode}for(f=0,s=u.nodeListToArray(n.getElementsByTagName(\"*\"));f<s.length;f++)if(h=s[f],this.getRegionId(h)===t)return!0}return!1},n.prototype.getRegionId=function(n){var t;return n.nodeType===Node.ELEMENT_NODE&&n.namespaceURI===this.settings.ttmlNamespace&&(t=i.TtmlParser.getLocalTagName(n)===\"region\"?i.TtmlParser.getAttributeNS(n,\"id\",r.xmlNS):i.TtmlParser.getAttributeNS(n,\"region\",this.settings.ttmlNamespace)),t},n.prototype.getTagNameEquivalent=function(n){var t=i.TtmlParser.getLocalTagName(n),r=n.namespaceURI;return r===this.settings.ttmlNamespace?\"ttml:\"+t:r===\"http://www.w3.org/1999/xhtml\"?t:\"\"},n.prototype.applyStyle=function(t,i,r,o){var s=o,p,h,g,nt,tt,w,b,d,it,l,a,ut;switch(r){case\"color\":case\"backgroundColor\":s=n.ttmlToCssColor(o);u.css(t,r,s);return;case\"direction\":case\"display\":u.css(t,r,s);return;case\"displayAlign\":switch(o){case\"before\":s=\"top\";break;case\"center\":s=\"middle\";break;case\"after\":s=\"bottom\"}u.css(t,\"vertical-align\",s);return;case\"extent\":p=void 0;l=void 0;o!==\"auto\"&&(a=o.split(/\\s+/),a.length===2&&(p=this.ttmlToCssUnits(a[0],!0),l=this.ttmlToCssUnits(a[1],!1)));p||(p=(this.settings.rootContainerRegionDimensions?this.settings.rootContainerRegionDimensions.width:this.settings.relatedMediaObjectRegion.width).toString()+\"px\",l=(this.settings.rootContainerRegionDimensions?this.settings.rootContainerRegionDimensions.height:this.settings.relatedMediaObjectRegion.height).toString()+\"px\");u.css(t,\"position\",\"absolute\");u.css(t,\"width\",p);u.css(t,\"min-width\",p);u.css(t,\"max-width\",p);u.css(t,\"height\",l);u.css(t,\"min-height\",l);u.css(t,\"max-height\",l);return;case\"fontFamily\":this.settings.fontMap&&this.settings.fontMap[o]&&(s=this.settings.fontMap[o]);o===\"smallCaps\"&&u.css(t,\"fontVariant\",\"small-caps\");u.css(t,r,s);return;case\"fontSize\":h=o.split(/\\s+/);g=h.length>1?h[1]:h[0];s=this.ttmlToCssFontSize(g,!1,.75,i===\"ttml:region\");u.css(t,r,s);return;case\"fontStyle\":case\"fontWeight\":u.css(t,r,s);return;case\"lineHeight\":nt=o===\"normal\"?o:this.ttmlToCssFontSize(o,!1);u.css(t,\"line-height\",nt);return;case\"computed-lineHeight\":for(tt=o.split(\",\"),w=-1,b=0,d=tt;b<d.length;b++)it=d[b],s=this.ttmlToCssFontSize(it,!1),s&&s.indexOf(\"px\")===s.length-2&&(l=parseFloat(s.substr(0,s.length-2)),!isNaN(l)&&l>w&&(w=l));w>=0&&u.css(t,\"line-height\",w+\"px\");return;case\"origin\":o!==\"auto\"&&(a=o.split(/\\s+/),a.length===2&&(u.css(t,\"position\",\"absolute\"),u.css(t,\"left\",this.ttmlToCssUnits(a[0],!0)),u.css(t,\"top\",this.ttmlToCssUnits(a[1],!1))));return;case\"opacity\":u.css(t,r,s);return;case\"padding\":var c=e.getDimensions(t),h=o.split(/\\s+/),v=void 0,y=void 0,k=void 0,rt=void 0;switch(h.length){case 1:v=this.ttmlToCssUnits(h[0],!1,c);y=this.ttmlToCssUnits(h[0],!0,c);s=f.format(\"{0} {1} {0} {1}\",v,y);break;case 2:v=this.ttmlToCssUnits(h[0],!1,c);y=this.ttmlToCssUnits(h[1],!0,c);s=f.format(\"{0} {1} {0} {1}\",v,y);break;case 3:v=this.ttmlToCssUnits(h[0],!1,c);y=this.ttmlToCssUnits(h[1],!0,c);k=this.ttmlToCssUnits(h[2],!1,c);s=f.format(\"{0} {1} {2} {1}\",v,y,k);break;case 4:v=this.ttmlToCssUnits(h[0],!1,c);y=this.ttmlToCssUnits(h[1],!0,c);k=this.ttmlToCssUnits(h[2],!1,c);rt=this.ttmlToCssUnits(h[3],!0,c);s=f.format(\"{0} {1} {2} {3}\",v,y,k,rt)}u.css(t,\"box-sizing\",\"border-box\");u.css(t,\"border-style\",\"solid\");u.css(t,\"border-color\",\"transparent\");u.css(t,\"border-width\",s);return;case\"textAlign\":switch(o){case\"start\":s=\"left\";break;case\"end\":s=\"right\"}u.css(t,\"text-align\",s);return;case\"textDecoration\":s=n.ttmlToCssTextDecoration(o);u.css(t,\"text-decoration\",s);return;case\"textOutline\":ut=u.css(t,\"color\");u.css(t,\"text-shadow\",this.ttmlToCssTextOutline(s,ut));return;case\"unicodeBidi\":switch(o){case\"bidiOverride\":s=\"bidi-override\"}u.css(t,\"unicode-bidi\",s);return;case\"visibility\":u.css(t,r,s);return;case\"writingMode\":switch(o){case\"lr\":case\"lrtb\":u.css(t,\"writing-mode\",\"horizontal-tb\");u.css(t,\"-webkit-writing-mode\",\"horizontal-tb\");u.css(t,\"writing-mode\",\"lr-tb\");return;case\"rl\":case\"rltb\":u.css(t,\"writing-mode\",\"horizontal-tb\");u.css(t,\"-webkit-writing-mode\",\"horizontal-tb\");u.css(t,\"writing-mode\",\"rl-tb\");return;case\"tblr\":u.css(t,\"text-orientation\",\"upright\");u.css(t,\"writing-mode\",\"vertical-lr\");u.css(t,\"-webkit-text-orientation\",\"upright\");u.css(t,\"-webkit-writing-mode\",\"vertical-lr\");u.css(t,\"writing-mode\",\"tb-lr\");return;case\"tb\":case\"tbrl\":u.css(t,\"text-orientation\",\"upright\");u.css(t,\"writing-mode\",\"vertical-rl\");u.css(t,\"-webkit-text-orientation\",\"upright\");u.css(t,\"-webkit-writing-mode\",\"vertical-rl\");u.css(t,\"writing-mode\",\"tb-rl\");return}return;case\"wrapOption\":u.css(t,\"white-space\",o===\"noWrap\"?\"nowrap\":o===\"pre\"?\"pre\":\"normal\");return;case\"zIndex\":u.css(t,r,s);return;default:u.css(t,r,s);return}},n.defaultStyle=function(t){return u.css(t,\"background-color\",n.TtmlNamedColorMap.transparent),u.css(t,\"offset\",\"0\"),u.css(t,\"margin\",\"0\"),u.css(t,\"padding\",\"0\"),u.css(t,\"border\",\"0\"),t},n.prototype.ttmlToCssUnits=function(n,t,i){var e=n,r,h;if(n&&(r=n.charAt(n.length-1),r===\"c\"||r===\"%\")){var o=this.settings.rootContainerRegionDimensions?this.settings.rootContainerRegionDimensions:this.settings.relatedMediaObjectRegion,s=parseFloat(n.substr(0,n.length-1)),f=t?o.width:o.height,u=void 0;r===\"c\"?(h=t?this.settings.cellResolution.columns:this.settings.cellResolution.rows,u=s*f/h):r===\"%\"&&(i&&(f=t?i.width:i.height),u=f*s/100);u=Math.round(u*10)/10;e=u+\"px\"}return e},n.prototype.ttmlToCssFontSize=function(n,t,i,r){var e,u;if(i===void 0&&(i=1),r===void 0&&(r=!1),e=n,n&&(u=n.charAt(n.length-1),u===\"c\"||r&&u===\"%\")){var o=this.settings.rootContainerRegionDimensions?this.settings.rootContainerRegionDimensions:this.settings.relatedMediaObjectRegion,s=parseFloat(n.substr(0,n.length-1)),h=t?o.width:o.height,c=t?this.settings.cellResolution.columns:this.settings.cellResolution.rows,f=s*h/c;u===\"%\"&&(f/=100);f=Math.floor(f*i*10)/10;e=f+\"px\"}return e},n.prototype.ttmlToCssTextOutline=function(t,i){var u=\"none\",a,h,v,c,l;if(!f.isNullOrWhiteSpace(t)&&t!==\"none\"){var r=t.split(/\\s+/),s=void 0,e=void 0,o;if(r.length===1?(s=i,e=r[0],o=\"\"):r.length===3?(s=r[0],e=r[1],o=r[2]):r.length===2&&(a=r[0].charAt(0),a>=\"0\"&&a<=\"9\"?(s=i,e=r[0],o=r[1]):(s=r[0],e=r[1],o=\"\")),o=this.ttmlToCssFontSize(o,!1,.75),e=this.ttmlToCssFontSize(e,!1,.75),r=n.lengthRegEx.exec(e),r&&r.length===3){for(h=Math.round(parseFloat(r[1])),v=r[2],u=\"\",c=-h;c<=h;c++)for(l=-h;l<=h;l++)(c!==0||l!==0)&&(u+=f.format(\"{0}{4} {1}{4} {2} {3}, \",c,l,o,n.ttmlToCssColor(s),v));u&&(u=u.substr(0,u.length-2))}}return u},n.ttmlToCssTextDecoration=function(n){for(var r,e,t,i=\"\",o=n.split(/\\s+/),u=0,s=o;u<s.length;u++){t=s[u];switch(t){case\"none\":case\"noUnderline\":case\"noLineThrough\":case\"noOverline\":i=\"none\"}}for(r=0,e=o;r<e.length;r++){t=e[r];switch(t){case\"none\":case\"noUnderline\":case\"noLineThrough\":case\"noOverline\":break;case\"lineThrough\":i+=\" line-through\";break;default:i+=\" \"+t}}return f.trim(i)},n.ttmlToCssColor=function(t){var r=t,i;if(t=t.toLowerCase(),t.indexOf(\"rgba\")===0){if(i=n.rgbaRegEx.exec(t),i&&i.length===5){var u=i[1],e=i[2],o=i[3],s=parseInt(i[4],10);r=f.format(\"rgba({0},{1},{2},{3})\",u,e,o,Math.round(s*100/255)/100)}}else if(t.charAt(0)===\"#\"&&t.length===9){var u=parseInt(t.substr(1,2),16),e=parseInt(t.substr(3,2),16),o=parseInt(t.substr(5,2),16),s=parseInt(t.substr(7,2),16);r=f.format(\"rgba({0},{1},{2},{3})\",u,e,o,Math.round(s*100/255)/100)}else n.TtmlNamedColorMap[t]&&(r=n.TtmlNamedColorMap[t]);return r},n.lengthRegEx=/\\s*(\\d+\\.*\\d*)(.*)\\s*/,n.rgbaRegEx=/\\s*rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)\\s*/,n.TtmlNamedColorMap={transparent:\"rgba(0,0,0,0)\",black:\"rgba(0,0,0,1)\",silver:\"rgba(192,192,192,1)\",gray:\"rgba(128,128,128,1)\",white:\"rgba(255,255,255,1)\",maroon:\"rgba(128,0,0,1)\",red:\"rgba(255,0,0,1)\",purple:\"rgba(128,0,128,1)\",fuchsia:\"rgba(255,0,255,1)\",magenta:\"rgba(255,0,255,1)\",green:\"rgba(0,128,0,1)\",lime:\"rgba(0,255,0,1)\",olive:\"rgba(128,128,0,1)\",yellow:\"rgba(255,255,0,1)\",navy:\"rgba(0,0,128,1)\",blue:\"rgba(0,0,255,1)\",teal:\"rgba(0,128,128,1)\",aqua:\"rgba(0,255,255,1)\",cyan:\"rgba(0,255,255,1)\"},n}();t.TtmlContext=o});define(\"ttml-parser\",[\"require\",\"exports\",\"ttml-context\",\"ttml-time-parser\",\"ttml-settings\",\"htmlExtensions\",\"stringExtensions\"],function(n,t,i,r,u,f,e){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function n(){}return n.parse=function(t,f){var e,o,s,h;return t=typeof t==\"string\"?n.parseXml(t):t,e=new i.TtmlContext,e.settings=new u.TtmlSettings(f),e.root=n.verifyRoot(t,e),e.body=n.getFirstElementByTagNameNS(e.root,\"body\",e.settings.ttmlNamespace),e.events=[],e.styleSetCache=[],e.body&&(n.parseTtAttrs(e),o=n.ensureRegions(e),s=n.getAttributeNS(e.root,\"timeBase\",e.settings.ttmlParameterNamespace)||\"media\",e.settings.supportedTimeBase.indexOf(s)!==-1&&(n.processAnonymousSpans(e,e.body),h=new r.TtmlTimeParser(e.settings.mediaFrameRate,e.settings.mediaTickRate),n.applyTiming(e,e.root,{start:n.mediaStart,end:n.mediaEnd},!0,h),n.applyStyling(e,o)),e.events.push({time:n.mediaEnd,element:null}),e.events.sort(function(n,t){return n.time-t.time})),e},n.parseXml=function(n){var i=null,t;return window.DOMParser?(t=new window.DOMParser,i=t.parseFromString(n,\"application/xml\")):(t=new window.ActiveXObject(\"Microsoft.XMLDOM\"),t.async=!1,t.loadXML(n),i=t),i},n.verifyRoot=function(t,i){var u,r=t.documentElement;return n.getLocalTagName(r)===\"tt\"&&(r.namespaceURI!==\"http://www.w3.org/ns/ttml\"&&(i.settings.ttmlNamespace=r.namespaceURI,i.settings.ttmlStyleNamespace=i.settings.ttmlNamespace+\"#styling\",i.settings.ttmlParameterNamespace=i.settings.ttmlNamespace+\"#parameter\",i.settings.ttmlMetaNamespace=i.settings.ttmlNamespace+\"#metadata\"),u=r),u},n.parseTtAttrs=function(t){var h=n.getAttributeNS(t.root,\"cellResolution\",t.settings.ttmlParameterNamespace),u=n.getAttributeNS(t.root,\"extent\",t.settings.ttmlStyleNamespace),f=null,r,o,s,i,c,l;h&&(r=e.trim(h).split(/\\s+/),r.length===2&&(o=Math.round(parseFloat(r[0])),s=Math.round(parseFloat(r[1])),s>0&&o>0&&(f={rows:s,columns:o})));f&&(t.settings.cellResolution=f);u&&u!==\"auto\"&&(i=u.split(/\\s+/),i.length===2&&i[0].substr(i[0].length-2)===\"px\"&&i[1].substr(i[1].length-2)===\"px\"&&(c=parseFloat(i[0].substr(0,i[0].length-2)),l=parseFloat(i[1].substr(0,i[1].length-2)),t.settings.rootContainerRegionDimensions={width:Math.round(c),height:Math.round(l)}))},n.ensureRegions=function(t){var f,i,o,r;return t.rootContainerRegion=t.root.ownerDocument.createElementNS(t.settings.ttmlNamespace,\"rootcontainerregion\"),t.root.appendChild(t.rootContainerRegion),f=t.settings.rootContainerRegionDimensions?e.format(\"{0}px {1}px\",t.settings.rootContainerRegionDimensions.width,t.settings.rootContainerRegionDimensions.height):\"auto\",t.rootContainerRegion.setAttributeNS(t.settings.ttmlStyleNamespace,\"extent\",f),i=n.getFirstElementByTagNameNS(t.root,\"head\",t.settings.ttmlNamespace),i||(i=t.root.ownerDocument.createElementNS(t.settings.ttmlNamespace,\"head\"),t.root.appendChild(i)),t.layout=n.getFirstElementByTagNameNS(i,\"layout\",t.settings.ttmlNamespace),t.layout||(t.layout=t.root.ownerDocument.createElementNS(t.settings.ttmlNamespace,\"layout\"),t.root.appendChild(t.layout)),o=t.layout.getElementsByTagNameNS(t.settings.ttmlNamespace,\"region\"),o.length||(r=t.root.ownerDocument.createElementNS(t.settings.ttmlNamespace,\"region\"),r.setAttributeNS(u.xmlNS,\"id\",\"anonymous\"),r.setAttribute(\"data-isanonymous\",\"1\"),t.layout.appendChild(r),t.body.setAttributeNS(t.settings.ttmlNamespace,\"region\",\"anonymous\")),i},n.processAnonymousSpans=function(t,i){var u,a,o,v,s,y,e,h,c,l,p,r;if(n.isTagNS(i,\"p\",t.settings.ttmlNamespace)){for(u=[],a=void 0,o=0,v=f.nodeListToArray(i.childNodes);o<v.length;o++)r=v[o],r.nodeType===Node.TEXT_NODE&&(a!==Node.TEXT_NODE&&u.push([]),u[u.length-1].push(r)),a=r.nodeType;for(s=0,y=u;s<y.length;s++)for(e=y[s],h=t.root.ownerDocument.createElementNS(t.settings.ttmlNamespace,\"span\"),h.appendChild(e[0].parentNode.replaceChild(h,e[0])),c=1;c<e.length;c++)h.appendChild(e[c])}for(l=0,p=f.nodeListToArray(i.childNodes);l<p.length;l++)r=p[l],this.processAnonymousSpans(t,r)},n.applyTiming=function(t,i,r,u,e){var b=n.getAttributeNS(i,\"begin\",t.settings.ttmlNamespace),o=b?e.parse(b):r.start,s=0,d=0,l=0,a=0,v=n.getAttributeNS(i,\"dur\",t.settings.ttmlNamespace),h=n.getAttributeNS(i,\"end\",t.settings.ttmlNamespace),k,p,y,w,c;for(v||h?v&&h?(l=e.parse(v),a=e.parse(h),k=Math.min(o+l,r.start+a),s=Math.min(k,r.end)):h?(a=e.parse(h),s=Math.min(r.start+a,r.end)):(l=e.parse(v),s=Math.min(o+l,r.end)):u&&(o<=r.end?(d=Math.max(0,r.end-o),s=r.end):s=0),s<o&&(s=o),o=Math.floor(o),s=Math.floor(s),i.setAttribute(\"data-time-start\",o.toString()),i.setAttribute(\"data-time-end\",s.toString()),o>=0&&t.events.filter(function(n){return n.time===o}).length<=0&&t.events.push({time:o,element:i}),p=o,y=0,w=f.nodeListToArray(i.childNodes);y<w.length;y++)c=w[y],c.nodeType===Node.ELEMENT_NODE&&(n.getAttributeNS(i,\"timeContainer\",t.settings.ttmlNamespace)!==\"seq\"?this.applyTiming(t,c,{start:o,end:s},!0,e):(this.applyTiming(t,c,{start:p,end:s},!1,e),p=parseInt(c.getAttribute(\"data-time-end\"),10)))},n.applyStyling=function(t,i){for(var o,u=n.getFirstElementByTagNameNS(i,\"styling\",t.settings.ttmlNamespace),s=u?f.nodeListToArray(u.getElementsByTagNameNS(t.settings.ttmlNamespace,\"style\")):[],r=0,e=f.nodeListToArray(t.root.querySelectorAll(\"*\"));r<e.length;r++)o=e[r],this.applyStyle(t,o,s)},n.applyStyle=function(t,i,r){var u={},f,e;this.applyStylesheet(t.settings,u,i,r);n.applyInlineStyles(t.settings,u,i);f=!0;for(e in u)if(u.hasOwnProperty(e)){f=!1;break}f||(i.setAttribute(\"data-styleSet\",t.styleSetCache.length.toString()),t.styleSetCache.push(u))},n.applyStylesheet=function(t,i,r,e){for(var p,s,l,h,a,o,v=n.getAttributeNS(r,\"style\",t.ttmlNamespace),w=v?v.split(/\\s+/):[],c=0,y=w;c<y.length;c++)for(p=y[c],s=0,l=e;s<l.length;s++)o=l[s],n.getAttributeNS(o,\"id\",u.xmlNS)===p&&(this.applyStylesheet(t,i,o,e),n.applyInlineStyles(t,i,o));if(n.isTagNS(r,\"region\",t.ttmlNamespace))for(h=0,a=f.nodeListToArray(r.getElementsByTagNameNS(t.ttmlNamespace,\"style\"));h<a.length;h++)o=a[h],n.applyInlineStyles(t,i,o)},n.applyInlineStyles=function(t,i,r){for(var o,u=0,s=f.nodeListToArray(r.attributes);u<s.length;u++)o=s[u],o.namespaceURI===t.ttmlStyleNamespace&&(i[n.getLocalTagName(o)]=e.trim(o.nodeValue))},n.getLocalTagName=function(n){return n.localName||n.baseName},n.isTagNS=function(n,t,i){return n.namespaceURI===i&&this.getLocalTagName(n)===t},n.getAttributeNS=function(n,t,i){var e=n.getAttributeNS(i,t),u,o,r;if(!e)for(u=0,o=f.nodeListToArray(n.attributes);u<o.length;u++)if(r=o[u],r.localName===t&&r.lookupNamespaceURI(r.prefix)===i){e=r.value;break}return e},n.getFirstElementByTagNameNS=function(n,t,i){if(n){var r=n.getElementsByTagNameNS(i,t);if(r&&r.length)return r[0]}return null},n.mediaStart=-1,n.mediaEnd=99999999,n}();t.TtmlParser=o});define(\"ttml-settings\",[\"require\",\"exports\",\"utility\"],function(n,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.xmlNS=\"http://www.w3.org/XML/1998/namespace\";var r=function(){function n(n){this.ttmlNamespace=\"http://www.w3.org/ns/ttml\";this.ttmlStyleNamespace=\"http://www.w3.org/ns/ttml#styling\";this.ttmlParameterNamespace=\"http://www.w3.org/ns/ttml#parameter\";this.ttmlMetaNamespace=\"http://www.w3.org/ns/ttml#metadata\";this.idPrefix=\"\";this.mediaFrameRate=30;this.mediaFrameRateMultiplier=1;this.mediaSubFrameRate=1;this.mediaTickRate=1e3;this.supportedTimeBase=\"media\";this.cellResolution={rows:15,columns:32};this.defaultRegionStyle={backgroundColor:\"transparent\",color:\"#E8E9EA\",direction:\"ltr\",display:\"auto\",displayAlign:\"before\",extent:\"auto\",fontFamily:\"default\",fontSize:\"1c\",fontStyle:\"normal\",fontWeight:\"normal\",lineHeight:\"normal\",opacity:\"1\",origin:\"auto\",overflow:\"hidden\",padding:\"0\",showBackground:\"always\",textAlign:\"start\",textDecoration:\"none\",textOutline:\"none\",unicodeBidi:\"normal\",visibility:\"visible\",wrapOption:\"normal\",writingMode:\"lrtb\"};this.fontMap={};this.fontMap[\"default\"]=\"Lucida sans typewriter, Lucida console, Consolas\";this.fontMap.monospaceSerif=\"Courier\";this.fontMap.proportionalSerif=\"Times New Roman, Serif\";this.fontMap.monospaceSansSerif=\"Lucida sans typewriter, Lucida console, Consolas\";this.fontMap.proportionalSansSerif=\"Arial, Sans-serif\";this.fontMap.casual=\"Verdana\";this.fontMap.cursive=\"Zapf-Chancery, Segoe script, Cursive\";this.fontMap.smallCaps=\"Arial, Helvetica\";this.fontMap.monospace=\"Lucida sans typewriter, Lucida console, Consolas\";this.fontMap.sansSerif=\"Arial, Sans-serif\";this.fontMap.serif=\"Times New Roman, Serif\";n&&i.extend(this,n)}return n}();t.TtmlSettings=r});define(\"ttml-time-parser\",[\"require\",\"exports\"],function(n,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function n(n,t){this.mediaFrameRate=n;this.mediaTickRate=t}return n.prototype.parse=function(t){var i,r;if(!t)return 0;if(i=n.absoluteTimeRegex.exec(t),i&&i.length>3){var f=parseInt(i[1],10)*3600,e=parseInt(i[2],10)*60,o=parseInt(i[3],10),u=0;return i[5]&&(u=parseFloat(i[4])*1e3),i[6]&&(u=Math.round(parseFloat(i[6])*this.getTimeUnitMultiplier(\"f\"))),1e3*(f+e+o)+u}return(r=n.relativeTimeRegex.exec(t),r&&r.length>3)?Math.round(parseFloat(r[1])*this.getTimeUnitMultiplier(r[3])):0},n.prototype.getTimeUnitMultiplier=function(n){switch(n){case\"h\":return 36e5;case\"ms\":return 1;case\"m\":return 6e4;case\"s\":return 1e3;case\"f\":return 1e3/this.mediaFrameRate;case\"t\":return 1e3/this.mediaTickRate;default:return 0}},n.absoluteTimeRegex=/^(\\d{1,}):(\\d{2}):(\\d{2})((\\.\\d{1,})|:(\\d{2,}(\\.\\d{1,})?))?$/,n.relativeTimeRegex=/^(\\d+(\\.\\d+)?)(ms|[hmsft])$/,n}();t.TtmlTimeParser=i});define(\"video-closed-captions\",[\"require\",\"exports\",\"ttml-parser\",\"htmlExtensions\",\"utility\",\"player-utility\"],function(n,t,i,r,u,f){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var e=function(){function n(n,t){this.element=n;this.errorCallback=t;this.lastPlayPosition=0;this.ccLanguageId=null;this.resetCaptions()}return n.prototype.setCcLanguage=function(n,t){if(this.element&&n!==this.ccLanguageId){if(this.ttmlContext=null,this.resetCaptions(),!t){this.ccLanguageId=null;return}this.ccLanguageId=n;this.loadClosedCaptions(t)}},n.prototype.getCurrentCcLanguage=function(){return this.ccLanguageId},n.prototype.loadClosedCaptions=function(n){var t=this;f.PlayerUtility.ajax(n,function(n){return t.onClosedCaptionsLoaded(n)},function(){t.errorCallback&&t.errorCallback({errorType:\"oneplayer.error.loadClosedCaptions.ajax\",errorDesc:\"Ajax call failed: \"+n})})},n.prototype.onClosedCaptionsLoaded=function(t){if(!t){this.errorCallback&&this.errorCallback({errorType:\"oneplayer.error.onClosedCaptionsLoaded.ttmlDoc\",errorDesc:\"No ttmlDocument found\"});return}this.element.setAttribute(n.ariaHidden,\"false\");var r=this.element.id?this.element.id+\"-\":\"\",f={idPrefix:r,fontMap:{\"default\":\"Segoe ui, Arial\"},relatedMediaObjectRegion:u.getDimensions(this.element)};try{this.ttmlContext=i.TtmlParser.parse(t,f);this.ttmlContext&&(this.ttmlContext.setOwnerDocument(this.element.ownerDocument),this.ttmlContext.hasEvents()?this.updateCaptions(this.lastPlayPosition):this.element.setAttribute(n.ariaHidden,\"true\"))}catch(e){this.errorCallback&&this.errorCallback({errorType:\"oneplayer.error.onClosedCaptionsLoaded.ttmlParser\",errorDesc:\"TtmlDocument parser error: \"+e.message})}},n.prototype.showSampleCaptions=function(){var t=(new DOMParser).parseFromString(\"<?xml version='1.0' encoding='utf-8'?>\\n<tt xml:lang='en-us' xmlns='http://www.w3.org/ns/ttml' xmlns:tts='http://www.w3.org/ns/ttml#styling' \\nxmlns:ttm='http://www.w3.org/ns/ttml#metadata'>\\n    <head>\\n    <metadata>\\n        <ttm:title>Media.wvx.aib<\\/ttm:title>\\n        <ttm:copyright>Copyright (c) 2013 Microsoft Corporation.  All rights reserved.<\\/ttm:copyright>\\n    <\\/metadata>\\n    <styling>\\n        <style xml:id='Style1' tts:fontFamily='proportionalSansSerif' tts:fontSize='0.8c' tts:textAlign='center' \\n        tts:color='white' />\\n    <\\/styling>\\n    <layout>\\n        <region style='Style1' xml:id='CaptionArea' tts:origin='0c 12.6c' tts:extent='32c 2.4c' \\n        tts:backgroundColor='rgba(0,0,0,160)' tts:displayAlign='center' tts:padding='0.3c 0.5c' />\\n    <\\/layout>\\n    <\\/head>\\n    <body region='CaptionArea'>\\n    <div>\\n        <p begin='00:00:01.140' end='99:99:99.999'>EXAMPLE CAPTIONS!<\\/p>\\n    <\\/div>\\n    <\\/body>\\n<\\/tt>\",\"text/xml\"),n;this.onClosedCaptionsLoaded(t);n=u.getDimensions(this.element);this.ttmlContext.updateRelatedMediaObjectRegion(n);this.element.style.bottom=\"44px\"},n.prototype.updateCaptions=function(t){var e,s,i,o,f;if(this.lastPlayPosition=t,this.ttmlContext&&this.ttmlContext.hasEvents()&&(e=Math.floor(t*1e3),this.element.setAttribute(n.ariaHidden,\"false\"),s=u.getDimensions(this.element),this.ttmlContext.updateRelatedMediaObjectRegion(s)&&this.resetCaptions(),this.ttmlContext.updateCurrentEvents(e))){for(this.element.setAttribute(n.ariaHidden,\"true\"),r.removeInnerHtml(this.element),i=0,o=this.ttmlContext.getCues(e);i<o.length;i++)f=o[i],this.applyUserPreferencesOverrides(f),r.css(f,\"background-color\",\"\"),this.element.appendChild(f);this.element.setAttribute(n.ariaHidden,\"false\")}},n.prototype.resetCaptions=function(){this.ttmlContext&&this.ttmlContext.resetCurrentEvents();this.element&&(this.element.setAttribute(n.ariaHidden,\"true\"),r.removeInnerHtml(this.element))},n.prototype.getCcLanguage=function(){return this.ccLanguageId},n.prototype.applyUserPreferencesOverrides=function(t){var u,f,o,e,i;if(n.userPreferences){if(n.userPreferences.text)for(u=0,f=r.selectElements(\"span, br\",t);u<f.length;u++){o=f[u];for(i in n.userPreferences.text)n.userPreferences.text.hasOwnProperty(i)&&r.css(o,i,n.userPreferences.text[i])}if(n.userPreferences.window&&(e=r.selectFirstElement(\"p\",t),e))for(i in n.userPreferences.window)n.userPreferences.window.hasOwnProperty(i)&&r.css(e,i,n.userPreferences.window[i])}},n.ariaHidden=\"aria-hidden\",n.userPreferences={text:{},window:{}},n}();t.VideoClosedCaptions=e});define(\"video-closed-captions-settings\",[\"require\",\"exports\",\"video-closed-captions\",\"stringExtensions\",\"utility\"],function(n,t,i,r,u){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.closedCaptionsSettingsOptions={font:{pre:\"cc_font_name_\",map:{casual:\"Verdana;font-variant:normal\",cursive:\"Zapf-Chancery,Segoe script,Cursive;font-variant:normal\",monospacedsansserif:\"Lucida sans typewriter,Lucida console,Consolas;font-variant:normal\",monospacedserif:\"Courier;font-variant:normal\",proportionalsansserif:\"Arial,Sans-serif;font-variant:normal\",proportionalserif:\"Times New Roman,Serif;font-variant:normal\",smallcapitals:\"Arial,Helvetica,Sans-serif;font-variant:small-caps\"}},percent:{pre:\"cc_percent_\",map:{\"0\":\"0\",\"50\":\"0.5\",\"75\":\"0.75\",\"100\":\"1\"}},text_size:{pre:\"cc_text_size_\",map:{small:\"75%\",\"default\":\"100%\",large:\"125%\",extralarge:\"150%\",maximum:\"200%\"}},color:{pre:\"cc_color_\",map:{white:\"#FFFFFF\",black:\"#000000\",blue:\"#0000FF\",cyan:\"#00FFFF\",green:\"#00FF00\",grey:\"#BCBCBC\",magenta:\"#FF00FF\",red:\"#FF0000\",yellow:\"#FFFF00\"}},text_edge_style:{pre:\"cc_text_edge_style_\",map:{none:\"none\",depressed:\"1px 1px 0 #FFF,-1px -1px 0 #000\",dropshadow:\"1px 1px 0 #000\",raised:\"1px 1px 0 #000,-1px -1px 0x #FFF\",uniform:\"1px 1px 0 #000,-1px 1px 0 #000,1px -1px 0 #000,-1px -1px 0 #000\"}}};t.closedCaptionsSettingsMap={text_font:{value:\"font-family:\",option:\"font\"},text_color:{value:\"color:\",option:\"color\"},text_size:{value:\"font-size:\",option:\"text_size\"},text_edge_style:{value:\"text-shadow:\",option:\"text_edge_style\"},text_opacity:{value:\"color:\",option:\"percent\"},text_background_color:{value:\"background:\",option:\"color\"},text_background_opacity:{value:\"background:\",option:\"percent\"},window_color:{value:\"background:\",option:\"color\"},window_opacity:{value:\"background:\",option:\"percent\"}};t.closedCaptionsPresetMap={preset1:{text_font:\"proportionalsansserif\",text_color:\"white\",text_opacity:\"100\",text_background_color:\"black\",text_background_opacity:\"100\"},preset2:{text_font:\"monospacedserif\",text_color:\"white\",text_opacity:\"100\",text_background_color:\"black\",text_background_opacity:\"100\"},preset3:{text_font:\"proportionalsansserif\",text_color:\"yellow\",text_opacity:\"100\",text_background_color:\"black\",text_background_opacity:\"100\"},preset4:{text_font:\"proportionalsansserif\",text_color:\"blue\",text_opacity:\"100\",text_background_color:\"grey\",text_background_opacity:\"100\"},preset5:{text_font:\"casual\",text_color:\"white\",text_opacity:\"100\",text_background_color:\"black\",text_background_opacity:\"100\"}};t.closedCaptionsSettinsDefaults={preset:\"preset1\",text_font:\"proportionalsansserif\",text_color:\"white\",text_opacity:\"100\",text_size:\"default\",text_edge_style:\"none\",text_background_color:\"black\",text_background_opacity:\"100\",window_color:\"black\",window_opacity:\"0\"};var f=function(){function n(t){this.onErrorCallback=t;n.tempSettings={};n.tempSettings[n.presetKey]=\"none\";this.loadUserPreferences();this.applySettings()}return n.prototype.saveUserPreferences=function(){u.saveToLocalStorage(n.storageKeyName,JSON.stringify(n.userPreferences))},n.prototype.loadUserPreferences=function(){var r=u.getValueFromLocalStorage(n.storageKeyName),t,i;if(r)try{t=JSON.parse(r);for(i in t)t.hasOwnProperty(i)&&this.setPreferences(i,t[i])}catch(f){if(this.onErrorCallback)this.onErrorCallback({errorType:\"oneplayer.error.VideoClosedCaptionsSettings.loadUserPreferences\",errorDesc:\"UserPrefs parsing error: \"+f.message})}},n.prototype.reset=function(t){(typeof t==\"undefined\"||t==null||t)&&(n.userPreferences={},n.currentSettings={},this.saveUserPreferences());n.tempSettings={};n.tempSettings[n.presetKey]=\"none\";this.applySettings()},n.prototype.setSetting=function(i,r,f){if(i&&r){if(typeof f==\"undefined\"||f==null||f)this.setPreferences(i,r),this.saveUserPreferences(),n.tempSettings={},n.tempSettings[n.presetKey]=\"none\";else{var e=t.closedCaptionsPresetMap[r];e&&(n.tempSettings[i]=r,u.extend(n.tempSettings,e))}this.applySettings()}},n.prototype.getCurrentSettings=function(i){return i===void 0&&(i=n.currentSettings),u.extend({},t.closedCaptionsSettinsDefaults,i)},n.prototype.setPreferences=function(i,r){if(i&&r)if(i===n.presetKey){var f=t.closedCaptionsPresetMap[r];f&&(n.userPreferences={},n.currentSettings={},n.userPreferences[i]=r,n.currentSettings[i]=r,u.extend(n.currentSettings,f))}else this.getOptionValue(i,r)&&(n.userPreferences=u.extend({},n.currentSettings),delete n.userPreferences[n.presetKey],n.currentSettings[n.presetKey]=\"none\",n.userPreferences[i]=r,n.currentSettings[i]=r)},n.prototype.applySettings=function(){var u={},f=n.tempSettings[n.presetKey]===\"none\"?this.getCurrentSettings():this.getCurrentSettings(n.tempSettings),r,e;for(r in f)f.hasOwnProperty(r)&&(e=this.getOptionValue(r,f[r]),e&&(u[r]=t.closedCaptionsSettingsMap[r].value+e));i.VideoClosedCaptions.userPreferences.text=this.getPrefsCss(u,\"text\");i.VideoClosedCaptions.userPreferences.window=this.getPrefsCss(u,\"window\")},n.prototype.getOptionValue=function(n,i){var u=t.closedCaptionsSettingsMap[n],r;if(u)return r=t.closedCaptionsSettingsOptions[u.option],r&&r.map[i]},n.prototype.getPrefsCss=function(n,t){var f={},s,e,o,h,i,u,r,c,l;for(i in n)if(n.hasOwnProperty(i)&&(u=n[i],i.indexOf(t)===0&&i.indexOf(\"opacity\")<0&&u&&u.length>0))for(s=u.split(\";\"),e=0,o=s;e<o.length;e++)h=o[e],r=h.split(\":\"),r.length>1&&(f[r[0].trim()]=r[1].trim());for(i in n)n.hasOwnProperty(i)&&(u=n[i],i.indexOf(t)===0&&i.indexOf(\"opacity\")>0&&(r=u.split(\":\"),r.length>1&&(c=f[r[0].trim()],l=r[1].trim(),f[r[0].trim()]=this.formatAsRgba(c,l))));return f},n.prototype.formatAsRgba=function(n,t){var f=r.format(\"rgba(0,0,0,{0})\",t),e=n?n.indexOf(\"#\"):-1,u,i;if(e>=0&&(u=n.substr(e+1),i=u.length/3,i>0)){var o=parseInt(u.substr(0,i),16),s=parseInt(u.substr(i,i),16),h=parseInt(u.substr(i*2,i),16);f=r.format(\"rgba({0},{1},{2},{3})\",o,s,h,t)}return f},n.userPreferences={},n.currentSettings={},n.tempSettings={},n.storageKeyName=\"mwf-video-player-cc-settings\",n.presetKey=\"preset\",n}();t.VideoClosedCaptionsSettings=f});define(\"player-constants\",[\"require\",\"exports\"],function(n,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.MediaEvents=[\"abort\",\"canplay\",\"canplaythrough\",\"emptied\",\"ended\",\"error\",\"loadeddata\",\"loadedmetadata\",\"loadstart\",\"pause\",\"play\",\"playing\",\"progress\",\"ratechange\",\"readystatechange\",\"seeked\",\"seeking\",\"stalled\",\"suspend\",\"timeupdate\",\"volumechange\",\"waiting\"];t.PlayerEvents={CommonPlayerImpression:\"CommonPlayerImpression\",PlaybackStatusChanged:\"PlaybackStatusChanged\",Replay:\"Replay\",BufferComplete:\"BufferComplete\",ContentStart:\"ContentStart\",ContentError:\"ContentError\",ContentContinue:\"ContentContinue\",ContentComplete:\"ContentComplete\",ContentCheckpoint:\"ContentCheckpoint\",ContentLoaded3PP:\"ContentLoaded3PP\",Ready:\"Ready\",Play:\"Play\",Pause:\"Pause\",Resume:\"Resume\",Seek:\"Seek\",VideoQualityChanged:\"VideoQualityChanged\",Mute:\"Mute\",Unmute:\"Unmute\",Volume:\"Volume\",InfoPaneOpened:\"InfoPaneOpened\",VideoTimedout:\"VideoTimedout\",VideoTimeUpdate:\"VideoTimeUpdate\",FullScreenEnter:\"FullScreenEnter\",FullScreenExit:\"FullScreenExit\",UserInteracted:\"VideoUserInteracted\",InteractiveOverlayClick:\"InteractiveOverlayClick\",InteractiveBackButtonClick:\"InteractiveBackButtonClick\",InteractiveOverlayShow:\"InteractiveOverlayShow\",InteractiveOverlayHide:\"InteractiveOverlayHide\",InteractiveOverlayMaximize:\"InteractiveOverlayMaximize\",InteractiveOverlayMinimize:\"InteractiveOverlayMaximize\",InviewEnter:\"InviewEnter\",InviewExit:\"InviewExit\",TimeRemainingCheckpoint:\"TimeRemainingCheckpoint\",PlayerError:\"PlayerError\",VideoShared:\"VideoShared\",ClosedCaptionsChanged:\"ClosedCaptionsChanged\",ClosedCaptionSettingsChanged:\"ClosedCaptionSettingsChanged\",PlaybackRateChanged:\"PlaybackRateChanged\",MediaDownloaded:\"MediaDownloaded\",AudioTrackChanged:\"AudioTrackChanged\",AgeGateSubmitClick:\"AgeGateSubmitClick\",SourceErrorAttemptRecovery:\"SourceErrorAttemptRecovery\"};t.PlaybackStatus={Ready:\"Ready\",Loading:\"Loading\",Loaded:\"Loaded\",LoadFailed:\"LoadFailed\",PlaybackCompleted:\"PlaybackCompleted\",Playbackerrored:\"PlaybackErrored\",VideoOpening:\"VideoOpening\",VideoPlaying:\"VideoPlaying\",VideoBuffering:\"VideoBuffering\",VideoPaused:\"VideoPaused\",VideoPlayCompleted:\"VideoPlayCompleted\",VideoPlayFailed:\"VideoPlayFailed\",VideoClosed:\"VideoClosed\"};t.shareTypes={facebook:\"facebook\",twitter:\"twitter\",linkedin:\"linkedin\",skype:\"skype\",mail:\"mail\",copy:\"copy\"};t.videoPerfMarkers={scriptLoaded:\"scriptLoaded\",playerInit:\"playerInit\",metadataFetchStart:\"metadataFetchStart\",metadataFetchEnd:\"metadataFetchEnd\",playerLoadStart:\"playerLoadStart\",playerReady:\"playerReady\",wrapperLoadStart:\"wrapperLoadStart\",wrapperReady:\"wrapperReady\",locLoadStart:\"locLoadStart\",locReady:\"locReady\",playTriggered:\"playTriggered\",ttvs:\"ttvs\"};t.videoAdsPerfMarkers={adsScriptLoaded:\"adsScriptLoaded\",adsPlayerInit:\"adsPlayerInit\",adsFetchStart:\"adsFetchStart\",adsPlayerLoadStart:\"adsPlayerLoadStart\",adsPlayerReady:\"adsPlayerReady\",adsPlayTriggered:\"adsPlayTriggered\"}});define(\"video-controls\",[\"require\",\"exports\",\"componentFactory\",\"slider\",\"utility\",\"htmlExtensions\",\"localization-helper\",\"stringExtensions\",\"environment\"],function(n,t,i,r,u,f,e,o,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var h=function(){function n(t,o,h,c){var l=this;if(this.videoControls=t,this.localizationHelper=h,this.contextMenu=c,this.closeMenuRequested=!1,this.isEscapeButtonPressed=!1,this.isWindowZoomedIn=!1,this.defaultMenuRight=\"90px\",this.focusedMenuItemIndex=0,this.currentVolume=0,this.tooltipElements=[],this.reactiveControls=[],this.preventKeyUpOnLastButton=!1,this.reactiveWidths=[100,430,540,650,768,926,1084],this.userInteractionCallbacks=[],this.activeMenuButton=null,this.xboxControlsEnabled=!1,this.onControlKeyboardEvent=function(t){var e=u.getKeyCode(t),i,o,r,s;l.triggerUserInteractionCallback();switch(e){case 36:f.stopPropagation(t);f.preventDefault(t);l.videoPlayer.seek(l.toAbsoluteTime(0));break;case 35:f.stopPropagation(t);f.preventDefault(t);l.videoPlayer.seek(l.videoPlayer.getPlayPosition().endTime);break;case 27:l.videoPlayer.isFullScreen()&&f.stopPropagation(t);l.closeMenuRequested||window.parent.postMessage(JSON.stringify({eventName:\"escape\",playerId:u.getQSPValue(\"pid\",!1)}),\"*\");l.hideAllMenus();l.hideVolumeContainer();l.closeMenuRequested=!1;break;case 37:case 39:f.stopPropagation(t);f.preventDefault(t);i=l.videoPlayer.getPlayPosition();i?(o=i.currentTime,r=e===37?o-n.seekSteps:o+n.seekSteps,r=Math.min(Math.max(i.startTime,r),i.endTime),l.videoPlayer.seek(r)):l.videoPlayer.seek(0);break;case 38:case 40:f.stopPropagation(t);f.preventDefault(t);l.showVolumeContainer(!0);s=l.videoPlayer.getVolume()*100;e===38?l.setVolume(Math.min((s+n.volumeSteps)/100,1),!0):l.setVolume(Math.max((s-n.volumeSteps)/100,0),!0)}},this.focusTrapHandler=function(n){n=f.getEvent(n);var t=f.getEventTargetOrSrcElement(n),i=u.getKeyCode(n);i===9&&(t===l.focusTrapStart&&n.shiftKey?(n.preventDefault(),l.contextMenu&&l.contextMenu.checkContextMenuIsVisible()?l.contextMenu.setFocusOnFirstElement():l.setFocus(l.fullScreenButton)):t!==l.fullScreenButton||n.shiftKey||(n.preventDefault(),l.contextMenu&&l.contextMenu.checkContextMenuIsVisible()?l.contextMenu.setFocusOnFirstElement():l.setFocus(l.focusTrapStart)))},this.onPlayPauseEvents=function(t){switch(t.type){case\"click\":l.videoPlayer.setUserInteracted(!0);l.videoPlayer.isPaused()?(l.videoPlayer.setUserIntiatedPause(!1),l.play()):(l.videoPlayer.setUserIntiatedPause(!0),l.pause());break;case\"mouseover\":case\"focus\":s.Environment.isChrome&&(l.videoPlayer.isPaused()?l.setAriaLabelForPlayButton():l.playButton.setAttribute(n.ariaLabel,l.locPause));l.showElement(l.playTooltip);break;case\"mouseout\":case\"blur\":l.hideElement(l.playTooltip)}},this.onLiveButtonEvents=function(n){switch(n.type){case\"click\":l.videoPlayer&&l.videoPlayer.seek(l.videoPlayer.getPlayPosition().endTime);break;case\"mouseover\":case\"focus\":l.showElement(l.liveTooltip);break;case\"mouseout\":case\"blur\":l.hideElement(l.liveTooltip)}},this.onVolumeEvents=function(n){switch(n.type){case\"click\":f.getEventTargetOrSrcElement(n)===l.volumeButton&&(l.videoPlayer.isMuted()?(l.currentVolume=l.currentVolume===0?100:l.currentVolume,l.setMuted(!1,!0),l.setVolume(Math.min(l.currentVolume/100,1),!1),l.videoPlayer.updateScreenReaderElement(l.locUnmute)):(l.currentVolume=l.videoPlayer.getVolume()*100,l.setMuted(!0,!0),l.setVolume(0,!1),l.videoPlayer.updateScreenReaderElement(l.locMute)));break;case\"mouseover\":case\"focus\":l.isEscapeButtonPressed?l.isEscapeButtonPressed=!1:l.showVolumeContainer();break;case\"mouseout\":case\"blur\":l.hideVolumeContainer()}},this.onVolumeSliderEvents=function(n){switch(n.type){case\"focus\":l.showVolumeContainer();break;case\"blur\":l.hideVolumeContainer();break;case\"keydown\":var t=u.getKeyCode(n);l.showVolumeContainer(!0);t===27&&(f.stopPropagation(n),l.isEscapeButtonPressed=!0,l.closeMenuRequested=!0,l.hideVolumeContainer(),l.setFocus(l.volumeButton))}},this.onSliderKeyboardEvents=function(n){var t=u.getKeyCode(n);switch(t){case 40:case 38:case 37:case 39:case 34:case 33:case 36:case 35:f.stopPropagation(n);f.preventDefault(n)}l.triggerUserInteractionCallback()},this.onMoreOptionsEvents=function(n){switch(n.type){case\"click\":l.toggleOptionsDialog(!1);break;case\"keyup\":case\"keydown\":var t=u.getKeyCode(f.getEvent(n));(t===32||t===13)&&(f.preventDefault(n),n.type===\"keyup\"&&l.toggleOptionsDialog(!0));break;case\"mouseover\":case\"focus\":l.activeMenu||l.showElement(l.moreOptionsTooltip);break;case\"mouseout\":case\"blur\":l.hideElement(l.moreOptionsTooltip)}},this.onFullScreenEvents=function(n){switch(n.type){case\"click\":!l.videoPlayer||l.videoPlayer.toggleFullScreen();break;case\"mouseover\":case\"focus\":l.showElement(l.fullScreenTooltip);break;case\"mouseout\":case\"blur\":l.hideElement(l.fullScreenTooltip)}},this.onMenuButtonClick=function(n){var t=f.getEventTargetOrSrcElement(n),r=t.getAttribute(\"data-menu-id\"),i;switch(n.type){case\"click\":l.toggleMenuById(t,!1,r);break;case\"keyup\":case\"keydown\":l.videoControls.getAttribute(\"aria-hidden\")===\"true\"&&l.videoControls.setAttribute(\"aria-hidden\",\"false\");i=u.getKeyCode(f.getEvent(n));(i===32||i===13)&&(f.preventDefault(n),n.type!==\"keyup\"||l.preventKeyUpOnLastButton?l.preventKeyUpOnLastButton=!1:l.toggleMenuById(t,!0,r));break;case\"mouseover\":case\"focus\":l.activeMenu||l.showElement(f.selectFirstElement(\"span\",t));break;case\"mouseout\":case\"blur\":l.hideElement(f.selectFirstElement(\"span\",t))}},this.onMenuEvents=function(n,t){switch(n.type){case\"click\":l.onMenuItemClick(n,t);break;case\"keyup\":var i=u.getKeyCode(n);i===32&&f.preventDefault(n);break;case\"keydown\":l.onMenuKeyPressed(n)}},this.onMenuItemClick=function(n,t){var i,r,o,s,h;if(n=f.getEvent(n),i=f.getEventTargetOrSrcElement(n),r=i.getAttribute(\"data-next-menu\"),f.preventDefault(n),r===\"back\"){if(o=i.getAttribute(\"aria-label\"),s=l.localizationHelper.getLocalizedValue(e.playerLocKeys.reactive_menu_aria_label).replace(\"{0}\",\"\"),f.hasClass(i,\"closed-caption\")&&(s=l.localizationHelper.getLocalizedValue(e.playerLocKeys.reactive_menu_aria_label_closedcaption).replace(\"{0}\",\"\")),!!o&&o.indexOf(s)>=0){l.focusOnLastButton();l.preventKeyUpOnLastButton=!0;return}h=l.menuBackStack.pop();h&&l.showMenu(h,t);return}if(r){l.activeMenu&&l.pushToMenuBackStack(l.activeMenu.id);l.showMenu(r,t);return}if(l.activeMenu){var u=i.parentElement,c=u.id||u.parentElement&&u.parentElement.id,a=i.getAttribute(\"data-info\")||u.getAttribute(\"data-info\");if(l.updateMenuSelection(l.activeMenu.id,c),!!l.videoPlayer)l.videoPlayer.onPlayerMenuItemClick({category:l.activeMenu.getAttribute(\"data-category\"),id:c,data:a})}i.getAttribute(\"data-persist\")||l.hideAllMenus()},this.hideAllMenus=function(t){for(var u,e=f.selectElements(n.menuSelector,l.menuContainer),i=0,r=e;i<r.length;i++)u=r[i],l.hideElement(u);l.activeMenu=null;l.clearMenuBackStack();l.updateReactiveControlDisplay();l.optionsButton.setAttribute(\"aria-expanded\",\"false\");!l.activeMenuButton||(l.activeMenuButton.setAttribute(\"aria-expanded\",\"false\"),t&&l.activeMenuButton.focus(),l.activeMenuButton=null);l.menuContainer.setAttribute(\"aria-hidden\",\"true\")},t&&o){if(this.videoPlayer=o,this.videoTitle=this.videoPlayer.getVideoTitle(),this.initializeLocalization(),this.initializeComponents(),!this.playButton||!this.playTooltip||!this.fullScreenButton||!this.fullScreenTooltip||!this.liveButton||!this.liveTooltip||!this.progressSliderElement||!this.volumeButton||!this.volumeContainer||!this.volumeSliderElement||!this.timeElement||!this.timeCurrent||!this.timeDuration||!this.optionsButton||!this.menuContainer||!!this.xboxControlsEnabled)return null;this.focusTrapStart=this.playButton;this.updatePlayPauseState();this.isWindowZoomedIn=Math.round(window.devicePixelRatio*100)>100;f.addEvent(window,f.eventTypes.resize,function(){l.isWindowZoomedIn=Math.round(window.devicePixelRatio*100)>100;l.hideAllMenus()});f.addEvent(window,f.eventTypes.scroll,function(){l.isWindowZoomedIn||l.hideAllMenus()});f.addEvent(this.videoControls,f.eventTypes.keydown,this.onControlKeyboardEvent);f.addEvents(this.playButton,\"click mouseover mouseout focus blur\",this.onPlayPauseEvents);f.addEvents(this.liveButton,\"click mouseover mouseout focus blur\",this.onLiveButtonEvents);f.addEvents(this.fullScreenButton,\"click mouseover mouseout focus blur\",this.onFullScreenEvents);f.addEvents([this.volumeButton,this.volumeContainer],\"click mouseover mouseout focus blur\",this.onVolumeEvents);f.addEvents(this.optionsButton,\"click mouseover mouseout focus blur keydown keyup\",this.onMoreOptionsEvents);i.ComponentFactory.create([{component:r.Slider,eventToBind:\"DOMContentLoaded\",elements:[this.progressSliderElement,this.volumeSliderElement],callback:function(n){!n||!n.length||n.length!==2||(l.progressSlider=n[0],l.volumeSlider=n[1],l.progressSlider.subscribe({onValueChanged:function(n){return l.onProgressChanged(n)}}),l.volumeSlider.subscribe({onValueChanged:function(n){return l.onVolumeChanged(n)}}),f.addEvents(f.selectFirstElement(\"button\",l.volumeSliderElement),\"focus blur keydown\",l.onVolumeSliderEvents),f.addEvents([l.progressSliderElement,l.volumeSliderElement],\"keydown\",l.onSliderKeyboardEvents))}}])}}return n.prototype.getSeekSteps=function(){return n.seekSteps},n.prototype.getAriaLabel=function(){return n.ariaLabel},n.prototype.getLocalizationHelper=function(){return this.localizationHelper},n.prototype.getVideoPlayer=function(){return this.videoPlayer},n.prototype.setVideoControls=function(n){this.videoControls=n},n.prototype.getVideoControls=function(){return this.videoControls},n.prototype.setPlayButton=function(n){this.playButton=n},n.prototype.getPlayButton=function(){return this.playButton},n.prototype.setLiveButton=function(n){this.liveButton=n},n.prototype.getLiveButton=function(){return this.liveButton},n.prototype.setTimeElement=function(n){this.timeElement=n},n.prototype.getTimeElement=function(){return this.timeElement},n.prototype.setTimeCurrent=function(n){this.timeCurrent=n},n.prototype.getTimeCurrent=function(){return this.timeCurrent},n.prototype.setTimeDuration=function(n){this.timeDuration=n},n.prototype.getTimeDuration=function(){return this.timeDuration},n.prototype.setProgressSliderElement=function(n){this.progressSliderElement=n},n.prototype.getProgressSliderElement=function(){return this.progressSliderElement},n.prototype.setOptionsButton=function(n){this.optionsButton=n},n.prototype.getOptionsButton=function(){return this.optionsButton},n.prototype.setMenuContainer=function(n){this.menuContainer=n},n.prototype.getMenuContainer=function(){return this.menuContainer},n.prototype.setVolumeButton=function(n){this.volumeButton=n},n.prototype.getVolumeButton=function(){return this.volumeButton},n.prototype.setFullScreenButton=function(n){this.fullScreenButton=n},n.prototype.getFullScreenButton=function(){return this.fullScreenButton},n.prototype.setXboxControlsEnabled=function(n){this.xboxControlsEnabled=n},n.prototype.initializeComponents=function(){var r;if(this.videoControls){var i=this.localizationHelper.getLocalizedValue(e.playerLocKeys.live_caption),u=this.localizationHelper.getLocalizedValue(e.playerLocKeys.live_label),o=this.localizationHelper.getLocalizedValue(e.playerLocKeys.seek),t=this.localizationHelper.getLocalizedValue(e.playerLocKeys.more_caption),s=this.localizationHelper.getLocalizedValue(e.playerLocKeys.volume);this.videoControls.children.length||(r=\"<button type='button' class='f-play-pause c-glyph glyph-play' aria-label='\"+this.locPlay+\"' role='button'>\\n    <span aria-hidden='true'>\"+this.locPlay+\"<\\/span>\\n<\\/button>\\n<button type='button' class='f-live f-live-current c-glyph glyph-view' aria-label='\"+i+\"' aria-hidden='true'>\\n    <span aria-hidden='true'>\"+i+\"<\\/span>\\n    \"+u+\"\\n<\\/button>\\n<span class='f-time'>\\n    <span class='f-current-time'>00:00<\\/span>\\n    /\\n    <span class='f-duration'>00:00<\\/span>\\n<\\/span>\\n<div class='c-slider f-progress'>\\n    <input type='range' class='f-seek-bar' aria-label='\"+o+\"' value='0' min='0' tabindex='-1' step=\"+n.seekSteps+\">\\n<\\/div>\\n<button type='button' class='f-options c-glyph glyph-more' aria-label='\"+t+\"' aria-expanded='false'>\\n    <span aria-hidden='true'>\"+t+\"<\\/span>\\n<\\/button>\\n<div class='f-menu-container'><\\/div>\\n<button type='button' class='f-volume-button c-glyph glyph-volume' aria-label='\"+this.locMute+\"'><\\/button>\\n<div class='f-volume-slider' data-show='false' role='presentation'>\\n    <div class='c-slider f-vertical' role='presentation'>\\n        <input type='range' class='f-volume-bar f-vertical' aria-label='\"+s+\"' \\n            min='0' max='100' step='\"+n.volumeSteps+\"' value='100' tabindex='-1'>\\n    <\\/div>\\n<\\/div>\\n<button type='button' class='f-full-screen c-glyph glyph-full-screen' aria-label='\"+this.locFullScreen+\"'>\\n    <span aria-hidden='true'>\"+this.locFullScreen+\"<\\/span>\\n<\\/button>\",this.videoControls.innerHTML=r);this.playButton=f.selectFirstElementT(\".f-play-pause\",this.videoControls);this.setAriaLabelForPlayButton();this.playTooltip=f.selectFirstElement(\"span\",this.playButton);f.setText(this.playTooltip,this.locPlay);this.tooltipElements.push(this.playTooltip);this.liveButton=f.selectFirstElementT(\".f-live\",this.videoControls);this.liveTooltip=f.selectFirstElement(\"span\",this.liveButton);this.tooltipElements.push(this.liveTooltip);this.timeElement=f.selectFirstElement(\".f-time\",this.videoControls);this.timeCurrent=f.selectFirstElement(\".f-current-time\",this.timeElement);this.timeDuration=f.selectFirstElement(\".f-duration\",this.timeElement);this.progressSliderElement=f.selectFirstElement(\".c-slider.f-progress\",this.videoControls);this.optionsButton=f.selectFirstElementT(\".f-options\",this.videoControls);this.optionsButton.setAttribute(n.ariaLabel,this.localizationHelper.getLocalizedValue(e.playerLocKeys.more_caption));this.moreOptionsTooltip=f.selectFirstElement(\"span\",this.optionsButton);f.setText(this.moreOptionsTooltip,t);this.tooltipElements.push(this.moreOptionsTooltip);this.menuContainer=f.selectFirstElement(\".f-menu-container\",this.videoControls);this.volumeButton=f.selectFirstElementT(\".f-volume-button\",this.videoControls);this.volumeButton.setAttribute(n.ariaLabel,this.locMute);this.volumeContainer=f.selectFirstElement(\".f-volume-slider\",this.videoControls);this.volumeSliderElement=f.selectFirstElement(\".c-slider\",this.volumeContainer);this.fullScreenButton=f.selectFirstElementT(\".f-full-screen\",this.videoControls);this.fullScreenButton.setAttribute(n.ariaLabel,this.locFullScreen);this.fullScreenTooltip=f.selectFirstElement(\"span\",this.fullScreenButton);f.setText(this.fullScreenTooltip,this.locFullScreen);this.tooltipElements.push(this.fullScreenTooltip)}},n.prototype.setAriaLabelForPlayButton=function(){this.videoTitle!==\"\"?this.playButton.setAttribute(n.ariaLabel,this.locPlay+\" \"+this.videoTitle):this.playButton.setAttribute(n.ariaLabel,this.locPlayVideo)},n.prototype.initializeLocalization=function(){this.locPlay=this.localizationHelper.getLocalizedValue(e.playerLocKeys.play);this.locPlayVideo=this.localizationHelper.getLocalizedValue(e.playerLocKeys.play_video);this.locPlaying=this.localizationHelper.getLocalizedValue(e.playerLocKeys.playing);this.locPaused=this.localizationHelper.getLocalizedValue(e.playerLocKeys.paused);this.locPause=this.localizationHelper.getLocalizedValue(e.playerLocKeys.pause);this.locMute=this.localizationHelper.getLocalizedValue(e.playerLocKeys.mute);this.locUnmute=this.localizationHelper.getLocalizedValue(e.playerLocKeys.unmute);this.locFullScreen=this.localizationHelper.getLocalizedValue(e.playerLocKeys.expand);this.locExitFullScreen=this.localizationHelper.getLocalizedValue(e.playerLocKeys.unexpand)},n.prototype.setPlayPosition=function(t){var r,s,h;if(!this.videoPlayer||!t){this.playPosition=undefined;return}var i=t.endTime-t.startTime,e=this.playPosition?this.playPosition.endTime-this.playPosition.startTime:0,o=this.videoPlayer.isLive();o&&(r=Math.abs(t.currentTime-t.endTime),s=r/(t.endTime-t.startTime),r<20||s<.01?f.addClass(this.liveButton,\"f-live-current\"):f.removeClass(this.liveButton,\"f-live-current\"));isNaN(i)||isNaN(e)||Math.abs(i-e)>1||!this.playPosition?(this.progressSlider&&this.progressSlider.resetSlider(0,i,t.currentTime-t.startTime,n.seekSteps),this.timeDuration&&f.setText(this.timeDuration,u.toElapsedTimeString(i,!1))):this.progressSlider&&this.progressSlider.setValue(t.currentTime-t.startTime);this.timeCurrent&&(h=o?t.currentTime-t.endTime:t.currentTime,f.setText(this.timeCurrent,u.toElapsedTimeString(h,!1)));this.playPosition=u.extend({},t)},n.prototype.addUserInteractionListener=function(n){n&&this.userInteractionCallbacks.push(n)},n.prototype.triggerUserInteractionCallback=function(){var n,t,i;if(this.userInteractionCallbacks&&this.userInteractionCallbacks.length)for(n=0,t=this.userInteractionCallbacks;n<t.length;n++)i=t[n],i()},n.prototype.setVolume=function(n,t){u.isNumber(n)&&!!this.videoPlayer&&this.videoPlayer.setVolume(n,t)},n.prototype.setMuted=function(n,t){!this.videoPlayer||(n?this.videoPlayer.mute(t):this.videoPlayer.unmute(t))},n.prototype.updateVolumeState=function(){var n,t;this.updateMuteGlyph();!this.videoPlayer||!this.volumeSlider||(n=this.videoPlayer.isMuted()||this.videoPlayer.getVolume()===0,n?this.volumeSlider.setValue(0):(t=this.videoPlayer.getVolume(),this.volumeSlider.setValue(Math.round(t*100))))},n.prototype.updateMuteGlyph=function(){if(!!this.videoPlayer&&!!this.volumeButton){f.removeClasses(this.volumeButton,[\"glyph-volume\",\"glyph-mute\"]);var t=this.videoPlayer.isMuted()||this.videoPlayer.getVolume()===0;f.addClass(this.volumeButton,t?\"glyph-mute\":\"glyph-volume\");this.volumeButton.setAttribute(n.ariaLabel,t?this.locUnmute:this.locMute)}},n.prototype.prepareToHide=function(){this.hideAllMenus(!0);this.hideVolumeContainer()},n.prototype.hideControls=function(){var n=this;setTimeout(function(){for(var r,t=0,i=n.tooltipElements;t<i.length;t++)r=i[t],n.hideElement(r)},0)},n.prototype.onProgressChanged=function(n){var t,i,r;return!n||!this.videoPlayer?null:(i=this.videoPlayer.isLive(),i?(r=this.videoPlayer.getPlayPosition(),t=n.value+r.startTime-r.endTime):(t=n.value,this.timeCurrent&&f.setText(this.timeCurrent,u.toElapsedTimeString(t,!1))),this.videoPlayer&&n.userInitiated&&this.videoPlayer.seek(this.toAbsoluteTime(n.value)),u.toElapsedTimeString(t,!i))},n.prototype.toAbsoluteTime=function(n){return this.videoPlayer&&this.videoPlayer.isLive()?n+this.videoPlayer.getPlayPosition().startTime:n},n.prototype.onVolumeChanged=function(n){if(!n)return null;!!this.videoPlayer&&n.value>0&&this.setMuted(!1);!this.videoPlayer||n.value!==0||this.setMuted(!0);var t=Math.round(n.value);return n.userInitiated&&this.setVolume(t/100,!0),t.toString()},n.prototype.play=function(){!this.videoPlayer||(this.videoPlayer.play(),this.videoPlayer.updateScreenReaderElement(this.locPlaying))},n.prototype.pause=function(){!this.videoPlayer||(this.videoPlayer.pause(!0),this.videoPlayer.updateScreenReaderElement(this.locPaused))},n.prototype.updatePlayPauseState=function(){!this.videoPlayer||!this.playButton||(this.videoPlayer.isPlayable()?(this.playButton.removeAttribute(\"disabled\"),this.videoPlayer.isPaused()?(!this.playTooltip||f.setText(this.playTooltip,this.locPlay),f.removeClass(this.playButton,\"glyph-pause\"),f.addClass(this.playButton,\"glyph-play\"),s.Environment.isChrome?this.playButton.setAttribute(n.ariaLabel,this.locPaused):this.setAriaLabelForPlayButton()):(!this.playTooltip||f.setText(this.playTooltip,this.locPause),f.removeClass(this.playButton,\"glyph-play\"),f.addClass(this.playButton,\"glyph-pause\"),s.Environment.isChrome?this.playButton.setAttribute(n.ariaLabel,this.locPlaying):this.playButton.setAttribute(n.ariaLabel,this.locPause),this.prepareToHide())):(!this.playTooltip||f.setText(this.playTooltip,this.locPlay),f.removeClass(this.playButton,\"glyph-pause\"),f.addClass(this.playButton,\"glyph-play\"),this.setAriaLabelForPlayButton(),this.playButton.setAttribute(\"disabled\",\"disabled\")))},n.prototype.setLive=function(t){this.liveButton&&this.timeElement&&(this.liveButton.setAttribute(n.ariaHidden,t?\"false\":\"true\"),this.timeElement.setAttribute(n.ariaHidden,t?\"true\":\"false\"))},n.prototype.updateFullScreenState=function(){var t,n;this.videoPlayer&&this.fullScreenButton&&(t=this.videoPlayer.isFullScreen(),t?(f.removeClass(this.fullScreenButton,\"glyph-full-screen\"),f.addClass(this.fullScreenButton,\"glyph-back-to-window\"),this.setFocus(this.fullScreenButton)):(f.removeClass(this.fullScreenButton,\"glyph-back-to-window\"),f.addClass(this.fullScreenButton,\"glyph-full-screen\")),n=t?this.locExitFullScreen:this.locFullScreen,this.fullScreenButton.setAttribute(\"aria-label\",n),!this.fullScreenTooltip||(f.setText(this.fullScreenTooltip,n),this.videoPlayer.updateScreenReaderElement(n)))},n.prototype.setFocusOnControlBar=function(){this.setFocus(this.playButton)},n.prototype.setFocusTrap=function(n){n===null&&(n=this.playButton);this.focusTrapStart=n;f.addEvent([n,this.fullScreenButton],f.eventTypes.keydown,this.focusTrapHandler)},n.prototype.removeFocusTrap=function(){f.removeEvents([this.focusTrapStart,this.fullScreenButton],\"keydown\",this.focusTrapHandler)},n.prototype.showVolumeContainer=function(t){var i=this;if(!!this.volumeContainer){this.volumeContainer.setAttribute(\"data-show\",\"true\");this.onlyOneDialog(this.volumeContainer);clearTimeout(this.volumeAutoHideTimer);t&&document.activeElement!==this.volumeButton&&(this.volumeAutoHideTimer=setTimeout(function(){i.hideVolumeContainer()},n.volumeAutoHideTimeout))}},n.prototype.hideVolumeContainer=function(){this.volumeContainer.setAttribute(\"data-show\",\"false\");clearTimeout(this.volumeAutoHideTimer)},n.prototype.showElement=function(t){t&&t.setAttribute(n.ariaHidden,\"false\")},n.prototype.hideElement=function(t){t&&t.setAttribute(n.ariaHidden,\"true\")},n.prototype.toggleMenuById=function(n,t,i){if(this.activeMenu&&this.activeMenu.id===i)this.hideAllMenus();else{n.setAttribute(\"aria-expanded\",\"true\");this.showMenu(i,t,n);var r=f.selectFirstElement(\"button\",this.activeMenu);!r||f.removeClass(r,\"glyph-chevron-left\")}},n.prototype.resetMenuPosition=function(n,t){var i=f.selectElements(\".f-player-menu\",this.videoControls),r,u;if(!!i&&i.length>0)for(r=0;r<i.length;r++)u=f.selectFirstElement(\"button\",i[r]),!!u&&u.hasAttribute(\"data-next-menu\")&&f.addClass(u,\"glyph-chevron-left\");!t||(this.menuRight=f.css(t,\"right\"));f.css(n,\"right\",this.menuRight)},n.prototype.createReactiveButton=function(n,t,i,r,u){var s=this.hasReactiveClass(n),e;if(!s){var h=\"<span aria-hidden='true'>\"+r+\"<\\/span>\",c=\"\\n            <button class='f-reactive c-glyph \"+n+\" \"+u+\"' aria-label='\"+r+\"' aria-hidden='true' \\n            data-menu-id='\"+i+\"' aria-expanded='false'>\\n                \"+h+\"\\n            <\\/button>\",o=document.createElement(\"div\");o.innerHTML=c;e=f.selectFirstElementT(\"button\",o);this.videoControls.insertBefore(e,this.optionsButton);f.setText(e.firstElementChild,r);this.tooltipElements.push(e.firstElementChild);f.addEvents(e,\"click mouseover mouseout focus blur keydown keyup\",this.onMenuButtonClick);this.reactiveControls.push({button:e,priority:t});this.sortReactiveControls()}},n.prototype.sortReactiveControls=function(){this.reactiveControls.sort(function(n,t){return n.priority<t.priority?-1:n.priority>t.priority?1:0})},n.prototype.hasReactiveClass=function(n){for(var t=0;t<this.reactiveControls.length;t++)if(f.hasClass(this.reactiveControls[t].button,n))return!0;return!1},n.prototype.toggleReactiveButtonLabelAndHandlers=function(n,t){var c=n.button.getAttribute(\"data-menu-id\"),h=document.getElementById(c),i,s,u,r;if(!!h&&(i=h.getElementsByTagName(\"button\")[0],!!i&&i.hasAttribute(\"data-next-menu\"))){if(s=this.localizationHelper.getLocalizedValue(e.playerLocKeys.previous_menu_aria_label).replace(\"{0}\",\"\"),u=this.localizationHelper.getLocalizedValue(e.playerLocKeys.reactive_menu_aria_label).replace(\"{0}\",\"\"),f.hasClass(i,\"closed-caption\")&&(u=this.localizationHelper.getLocalizedValue(e.playerLocKeys.reactive_menu_aria_label_closedcaption).replace(\"{0}\",\"\")),r=i.getAttribute(\"aria-label\"),!r||r.indexOf(s)!==-1&&r.indexOf(u)!==-1)return;r=r.replace(s,\"\").replace(u,\"\");t?i.setAttribute(\"aria-label\",o.format(this.localizationHelper.getLocalizedValue(e.playerLocKeys.previous_menu_aria_label),r)):f.hasClass(i,\"closed-caption\")?i.setAttribute(\"aria-label\",o.format(this.localizationHelper.getLocalizedValue(e.playerLocKeys.reactive_menu_aria_label_closedcaption),r)):i.setAttribute(\"aria-label\",o.format(this.localizationHelper.getLocalizedValue(e.playerLocKeys.reactive_menu_aria_label),r))}},n.prototype.toggleMoreOptionsItemVisibility=function(t,i){var a=t.button.getAttribute(\"data-menu-id\"),r,c,u,s,h,v,l,o,e;if(!!a&&(r=document.getElementById(a+\"_item\"),!!r&&!!r.parentElement&&!!r.parentElement.parentElement)){for(c=r.parentElement.parentElement,i?(r.setAttribute(n.ariaHidden,\"false\"),f.addClass(r.firstElementChild,\"active\")):(r.setAttribute(n.ariaHidden,\"true\"),f.removeClass(r.firstElementChild,\"active\")),u=c.querySelectorAll(\"li\"),s=0,h=0;h<u.length;h++)e=u[h].getAttribute(n.ariaHidden),e&&e!==\"false\"||(s+=40);if(s!==0)for(this.optionsButton.setAttribute(n.ariaHidden,\"false\"),f.css(c,\"height\",s+4+\"px\"),v=s/40,l=1,o=0;o<u.length;o++)e=u[o].getAttribute(n.ariaHidden),e&&e!==\"false\"||(u[o].firstElementChild.setAttribute(\"aria-setsize\",v.toString()),u[o].firstElementChild.setAttribute(\"aria-posinset\",l.toString()),l++);else this.optionsButton.setAttribute(n.ariaHidden,\"true\")}},n.prototype.updateReactiveControlDisplay=function(){var h=parseInt(f.css(this.optionsButton,\"padding-right\"),10),o=u.getDimensions(this.optionsButton).width+h,r,i,s,e,t;if(this.reactiveControls.length>0&&(r=u.getDimensions(this.videoControls).width,r!==0)){for(i=o*3,s=!0,e=this.reactiveControls.length-1;e>=0;e--)t=this.reactiveControls[e],r<this.reactiveWidths[t.priority]?(this.toggleReactiveButtonLabelAndHandlers(t,!0),this.toggleMoreOptionsItemVisibility(t,!0),t.button.setAttribute(n.ariaHidden,\"true\")):r>this.reactiveWidths[t.priority]&&(this.toggleReactiveButtonLabelAndHandlers(t,!1),this.toggleMoreOptionsItemVisibility(t,!1),this.optionsButton.getAttribute(n.ariaHidden)===\"true\"&&s&&(i=o*2,s=!1),t.button.setAttribute(n.ariaHidden,\"false\"),f.css(t.button,\"right\",2+i+\"px\"),f.hasClass(t.button,\"f-volume-button\")&&f.css(this.volumeContainer,\"right\",2+i+\"px\"),i+=o);f.css(this.progressSliderElement,\"width\",\"calc(100% - \"+(i+140)+\"px)\")}},n.prototype.initializePlayerMenus=function(){var t=f.selectElements(n.menuSelector+\" ul\",this.menuContainer);t&&t.length&&f.addEvents(t,\"click keydown keyup\",this.onMenuEvents)},n.prototype.disposeReactiveControls=function(){for(var i,n=0,t=this.reactiveControls;n<t.length;n++)i=t[n],f.removeElement(i.button);this.reactiveControls=[]},n.prototype.disposePlayerMenus=function(){var t=f.selectElements(n.menuSelector+\" ul\",this.menuContainer);t&&t.length&&f.removeEvents(t,\"click keydown keyup\",this.onMenuEvents);f.removeInnerHtml(this.menuContainer);this.disposeReactiveControls()},n.prototype.toggleOptionsDialog=function(n){this.activeMenu&&f.css(this.activeMenu,\"right\")===this.defaultMenuRight?this.hideAllMenus():(this.showMenu(this.optionsButton.getAttribute(\"data-menu-id\"),n,this.optionsButton),this.optionsButton.setAttribute(\"aria-expanded\",\"true\"))},n.prototype.onlyOneDialog=function(t){!this.activeMenu||!this.volumeContainer||this.activeMenu.getAttribute(n.ariaHidden)!==\"false\"||this.volumeContainer.getAttribute(\"data-show\")!==\"true\"||(t===this.activeMenu?this.hideVolumeContainer():this.hideAllMenus())},n.prototype.onMenuKeyPressed=function(n){var h=u.getKeyCode(n),o=f.getEventTargetOrSrcElement(n),l=o&&o.parentElement,c,t,s,i,r,e;if(this.activeMenu&&l){c=this.activeMenu.id;this.triggerUserInteractionCallback();switch(h){case 37:case 39:if(f.stopPropagation(n),f.preventDefault(n),o.getAttribute(\"data-next-menu\"))this.onMenuItemClick(n,!0);break;case 13:case 32:f.preventDefault(n);this.onMenuItemClick(n,!0);if(!!this.activeMenu&&(t=this.activeMenu.getElementsByTagName(\"button\"),s=0,!!t&&t.length>0))for(i=0;i<t.length;i++)t[i].getAttribute(\"data-next-menu\")===c?(this.setFocus(t[i]),this.focusedMenuItemIndex=s):f.hasClass(t[i],\"active\")&&s++;break;case 38:case 40:f.stopPropagation(n);f.preventDefault(n);r=f.selectElements(\".active\",this.activeMenu);r&&r.length&&(h===38?(this.focusedMenuItemIndex-=1,this.focusedMenuItemIndex<0&&(this.focusedMenuItemIndex=r.length-1)):this.focusedMenuItemIndex=(this.focusedMenuItemIndex+1)%r.length,this.setFocus(r[this.focusedMenuItemIndex]));break;case 33:case 36:f.stopPropagation(n);f.preventDefault(n);this.setFocus(f.selectFirstElement(\".active\",this.activeMenu));break;case 35:case 34:f.stopPropagation(n);f.preventDefault(n);e=f.selectElements(\".active\",this.activeMenu);e&&e.length&&this.setFocus(e[e.length-1]);break;case 27:this.activeMenu&&f.stopPropagation(n);this.closeMenuRequested=!0;this.focusOnLastButton();break;case 9:this.focusedMenuItemIndex+=n.shiftKey?-1:1;this.focusOnNextButton(n)}}},n.prototype.focusOnLastButton=function(){var t,n;if(!!this.activeMenu){for(t=0;t<this.reactiveControls.length;t++)if(n=this.reactiveControls[t].button,!this.activeMenuButton||this.activeMenuButton.getAttribute(\"data-menu-id\")!==n.getAttribute(\"data-menu-id\")){if(this.activeMenu.id===n.getAttribute(\"data-menu-id\")){this.hideAllMenus();this.setFocus(n);f.removeClass(n,\"x-hidden-focus\");return}}else{this.hideAllMenus();this.setFocus(n);f.removeClass(n,\"x-hidden-focus\");return}!this.activeMenu||(this.hideAllMenus(),this.setFocus(this.optionsButton))}},n.prototype.focusOnNextButton=function(t){var r,i;if(!!this.activeMenu&&!!this.activeMenuButton)if(r=f.selectElements(\".active\",this.activeMenu),this.focusedMenuItemIndex>=r.length){for(f.stopPropagation(t),f.preventDefault(t),i=this.activeMenuButton.nextElementSibling;!!i;){if(i.nodeName.toLowerCase()===\"button\"&&i.getAttribute(n.ariaHidden)!==\"true\"){this.setFocus(i);break}i=i.nextElementSibling}i||this.setFocus(this.playButton);this.hideAllMenus()}else this.focusedMenuItemIndex<0&&(f.stopPropagation(t),f.preventDefault(t),this.setFocus(this.activeMenuButton),this.hideAllMenus())},n.prototype.calcHeight=function(n){if(!n||!this.videoControls)return 0;var t=f.getClientRect(n).height,r=f.getClientRect(this.videoControls.parentElement),u=f.getClientRect(this.videoControls),i=r.height-u.height-10;return t>i&&(t=i),t},n.prototype.createMenu=function(n){var h,u,c,t,i,a,l;if(this.menuContainer&&n&&n.category&&n.id&&n.items&&n.items.length){var f=\"\",r=n.items.length,s=1;for(n.label&&this.localizationHelper&&!n.hideBackButton&&(h=o.format(this.localizationHelper.getLocalizedValue(e.playerLocKeys.previous_menu_aria_label),n.label),r+=1,f+=n.cssClass===\"closed-caption\"?\"<li role='presentation'>\\n    <button class='c-action-trigger c-glyph glyph-chevron-left active closed-caption' data-next-menu='back'\\n    aria-label='\"+h+\"'aria-setsize='\"+r+\"' aria-posinset='\"+s+++\"' role='menuitem'>\\n    \"+n.label+\"<\\/button>\\n<\\/li>\":\"<li role='presentation'>\\n    <button class='c-action-trigger c-glyph glyph-chevron-left active' data-next-menu='back' aria-label='\"+h+\"'\\n    aria-setsize='\"+r+\"' aria-posinset='\"+s+++\"' role='menuitem'>\\n    \"+n.label+\"<\\/button>\\n<\\/li>\"),u=0,c=n.items;u<c.length;u++)t=c[u],t.subMenu&&(t.subMenuId=t.subMenu.id,this.createMenu(t.subMenu)),i=\"c-action-trigger active\",i+=t.subMenuId||t.glyph||t.selectable?\" c-glyph\":\"\",i+=t.selectable&&t.selected?\" glyph-check-mark\":\"\",i+=t.subMenuId?\" glyph-chevron-right\":\"\",i+=t.glyph?\" \"+t.glyph:\"\",f+=\"<li id='\"+t.id+\"' role='presentation'>\\n    <button class='\"+i+\"' \"+(t.data?\"data-info='\"+t.data+\"'\":\"\")+\"\\n        role=\"+(t.selectable?\"'menuitemradio'\":\"'menuitem'\")+\"\\n        aria-setsize='\"+r+\"' aria-posinset='\"+s+++\"'\\n        \"+(t.selectable&&t.selected?\" aria-checked='true'\":\"\")+\" \\n        \"+(t.selectable?\"data-video-selectable='true'\":\"\")+\"\\n        \"+(t.subMenuId?\"data-next-menu=\"+t.subMenuId+\" aria-expanded='false' aria-haspopup='true'\":\"\")+\"\\n        \"+(t.persistOnClick?\"data-persist='true'\":\"\")+\" \"+(t.ariaLabel?\"aria-label='\"+t.ariaLabel+\"'\":\"\")+\"\\n        \"+(t.language?\"lang=\"+t.language:\"\")+\">\\n            \"+(t.image?\"<img src='\"+t.image+\"' alt='\"+(t.imageAlt||\"\")+\"' class='c-image'/>\":\"\")+\"\\n            \"+t.label+\"\\n    <\\/button>\\n<\\/li>\";a=\"<div id='\"+n.id+\"' class='f-player-menu' aria-hidden='true' data-category='\"+n.category+\"'>\\n    <ul role='menu' class='c-list f-bare'>\\n        \"+f+\"\\n    <\\/ul>\\n<\\/div>\";l=document.createElement(\"div\");l.innerHTML=a;this.menuContainer.appendChild(l.firstChild)}},n.prototype.showMenu=function(n,t,i){var r,e,u;if(n&&(!i||(this.activeMenuButton=i),this.hideControls(),this.focusedMenuItemIndex=0,this.hideActiveMenu(),this.menuContainer.setAttribute(\"aria-hidden\",\"false\"),r=f.selectFirstElement(\"#\"+n,this.menuContainer),this.resetMenuPosition(r,i),r)){e=f.css(r,\"height\");this.showElement(r);u=this.calcHeight(r);e===\"auto\"&&(u+=2);f.css(r,\"height\",u+\"px\");f.css(r,\"right\",this.menuRight);this.activeMenu=r;this.onlyOneDialog(r);t=!0;t&&this.setFocus(f.selectFirstElement(\"li:not([aria-hidden]) button\",r))}},n.prototype.setFocusonPlayButton=function(){this.setFocus(this.playButton)},n.prototype.setFocus=function(n){!n||setTimeout(function(){n.focus()},0)},n.prototype.hideActiveMenu=function(){this.activeMenu&&(this.hideElement(this.activeMenu),this.activeMenu=null)},n.prototype.pushToMenuBackStack=function(n){this.menuBackStack&&n&&this.menuBackStack.push(n)},n.prototype.popFromMenuBackStack=function(){return this.menuBackStack&&this.menuBackStack.length?this.menuBackStack.pop():null},n.prototype.clearMenuBackStack=function(){this.menuBackStack=[]},n.prototype.setupPlayerMenus=function(n){var r,i,u,t,f,e;if(this.videoControls&&n&&n.length){for(this.disposePlayerMenus(),r=[],i=0,u=n;i<u.length;i++)t=u[i],r.push({id:t.id+\"_item\",label:t.label,subMenu:t}),!t.glyph||!t.priority||this.createReactiveButton(t.glyph,t.priority,t.id,t.label,t.cssClass!==undefined?t.cssClass:\"\");f=this.videoPlayer.getPlayerId()+\"-options-menu\";e={id:f,items:r,category:\"options\"};this.createMenu(e);this.optionsButton.setAttribute(\"data-menu-id\",f);this.initializePlayerMenus();this.updateReactiveControlDisplay()}},n.prototype.updateMenuSelection=function(n,t){var u,s,r,e,o,i;if(n&&this.menuContainer&&(u=f.selectFirstElement(\"#\"+n,this.menuContainer),u))for(s=f.selectElements(\"li\",u),r=0,e=s;r<e.length;r++)o=e[r],i=f.selectFirstElement(\"button\",o),i&&i.getAttribute(\"data-video-selectable\")&&(t&&t===o.id?(f.addClasses(i,[\"c-glyph\",\"glyph-check-mark\"]),i.setAttribute(\"aria-checked\",\"true\")):(f.removeClass(i,\"glyph-check-mark\"),i.removeAttribute(\"aria-checked\")))},n.prototype.resetSlidersWorkaround=function(){var i=this.videoControls.getBoundingClientRect(),t,r;this.controlsBounds&&this.controlsBounds.height===i.height&&this.controlsBounds.width===i.width||(this.controlsBounds=i,this.progressSlider&&this.videoPlayer&&(t=this.videoPlayer.getPlayPosition(),r=t.endTime-t.startTime,this.progressSlider.resetSlider(0,r,t.currentTime-t.startTime,n.seekSteps)),this.volumeSlider&&this.videoPlayer&&this.volumeSlider.resetSlider(0,100,this.videoPlayer.getVolume()*100,n.volumeSteps))},n.selector=\".f-video-controls\",n.ariaHidden=\"aria-hidden\",n.ariaLabel=\"aria-label\",n.menuSelector=\".f-player-menu\",n.seekSteps=5,n.volumeSteps=5,n.volumeAutoHideTimeout=2e3,n}();t.VideoControls=h});define(\"context-menu\",[\"require\",\"exports\",\"htmlExtensions\",\"utility\"],function(n,t,i,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var u=function(){function n(n,t){var u=this;this.contextMenuContainer=n;this.focusedMenuItemIndex=0;this.onContextMenuEvents=function(n,t){switch(n.type){case\"click\":u.onContextMenuItemClick(n,t);break;case\"keyup\":var f=r.getKeyCode(n);f===32&&i.preventDefault(n);break;case\"keydown\":u.onContextMenuKeyPressed(n)}};this.onContextMenuItemClick=function(n){var t;n=i.getEvent(n);t=i.getEventTargetOrSrcElement(n);i.preventDefault(n);var r=t.parentElement,f=r.id||r.parentElement&&r.parentElement.id,e=t.getAttribute(\"data-info\")||r.getAttribute(\"data-info\");if(!!u.videoPlayer)u.videoPlayer.onPlayerContextMenuItemClick({category:t.getAttribute(\"data-category\"),id:f,data:e})};this.videoPlayer=t}return n.prototype.initializeCustomPlayerMenus=function(){this.contextMenuContainer&&(this.menuItems=i.selectElements(n.contextMenuSelector+\" ul li\",this.contextMenuContainer),this.menuItems&&this.menuItems.length&&i.addEvents(this.menuItems,\"click keydown keyup\",this.onContextMenuEvents))},n.prototype.calcHeightWidthOfContextMenu=function(){if(this.contextMenuContainer){var t=i.selectFirstElement(n.contextMenuSelector,this.contextMenuContainer);t&&(t.setAttribute(\"aria-hidden\",\"false\"),this.menuHeight=i.getClientRect(t).height,this.menuWidth=i.getClientRect(t).width,t.setAttribute(\"aria-hidden\",\"true\"))}},n.prototype.showMenu=function(t,r){var u=t.offsetX,f=t.offsetY;this.calcHeightWidthOfContextMenu();var o=r.offsetHeight+r.offsetTop,s=r.offsetWidth+r.offsetLeft,h=f+this.menuHeight+2,c=u+this.menuWidth+2,e=i.selectFirstElement(n.contextMenuSelector,this.contextMenuContainer);e&&(h>o&&(f=f-this.menuHeight),c>s&&(u=u-this.menuWidth),i.css(e,\"left\",u+\"px\"),i.css(e,\"top\",f+\"px\"),e.setAttribute(\"aria-hidden\",\"false\"))},n.prototype.checkContextMenuIsVisible=function(){if(this.contextMenuContainer){var t=i.selectFirstElement(n.contextMenuSelector,this.contextMenuContainer);return t?t.getAttribute(\"aria-hidden\")===\"false\":!1}return!1},n.prototype.setFocusOnFirstElement=function(){this.contextMenuContainer&&(this.menuItems=i.selectElements(n.contextMenuSelector+\" ul li\",this.contextMenuContainer),this.menuItems&&this.menuItems.length&&this.setFocus(i.selectFirstElement(\"button\",this.menuItems[0])))},n.prototype.onContextMenuKeyPressed=function(t){var f=r.getKeyCode(t),e=i.getEventTargetOrSrcElement(t),o=e&&e.parentElement,u;switch(f){case 37:case 39:i.stopPropagation(t);i.preventDefault(t);break;case 13:case 32:i.preventDefault(t);this.onContextMenuItemClick(t,!0);break;case 38:case 40:i.stopPropagation(t);i.preventDefault(t);this.menuItems&&this.menuItems.length&&(f===38?(this.focusedMenuItemIndex-=1,this.focusedMenuItemIndex<0&&(this.focusedMenuItemIndex=this.menuItems.length-1)):this.focusedMenuItemIndex=(this.focusedMenuItemIndex+1)%this.menuItems.length,this.setFocus(i.selectFirstElement(\"button\",this.menuItems[this.focusedMenuItemIndex])));break;case 33:case 36:i.stopPropagation(t);i.preventDefault(t);this.menuItems&&this.menuItems.length>0&&this.setFocus(i.selectFirstElement(\"button\",this.menuItems[0]));break;case 35:case 34:i.stopPropagation(t);i.preventDefault(t);this.menuItems&&this.menuItems.length>0&&this.setFocus(i.selectFirstElement(\"button\",this.menuItems[this.menuItems.length-1]));break;case 27:u=i.selectFirstElement(n.contextMenuSelector,this.contextMenuContainer);u&&u.setAttribute(\"aria-hidden\",\"true\");this.videoPlayer.setFocusOnPlayButton()}},n.prototype.setupCustomizeContextMenu=function(t){var h=i.selectFirstElement(n.contextMenuSelector,this.contextMenuContainer),u,c,f,e,r,o,l,s;for(h&&this.contextMenuContainer.removeChild(h),u=\"\",c=1,u=\"<ul role='menu' class='c-list f-bare'>\",f=0,e=t;f<e.length;f++)r=e[f],o=\"c-action-trigger active\",o+=r.glyph?\" \"+r.glyph:\"\",u+=\"<li id='\"+r.id+\"' role='presentation'>\\n                    <button class='\"+o+\"'  role='menuitem'\\n                        aria-setsize='\"+t.length+\"' \\n                        aria-posinset='\"+c+++\"'\\n                        aria-label='\"+r.label+\"'\\n                        data-category='\"+r.category+\"'>\\n                        \"+r.label+\"\\n                    <\\/button>\\n                <\\/li>\";u+=\"<\\/ul>\";l=\"<div class='f-player-context-menu' aria-hidden='true'>\\n                    \"+u+\"\\n                <\\/div>\";s=document.createElement(\"div\");s.innerHTML=l;this.contextMenuContainer.appendChild(s.firstChild);this.initializeCustomPlayerMenus()},n.prototype.setFocus=function(n){!n||setTimeout(function(){n.focus()},0)},n.contextMenuSelector=\".f-player-context-menu\",n}();t.ContextMenu=u});define(\"player-data-interfaces\",[\"require\",\"exports\"],function(n,t){\"use strict\";var i,r,u,f,e;Object.defineProperty(t,\"__esModule\",{value:!0}),function(n){n[n.MP4=\"MP4\"]=\"MP4\";n[n.DASH=\"DASH\"]=\"DASH\";n[n.SMOOTH=\"SMOOTH\"]=\"SMOOTH\";n[n.HLS=\"HLS\"]=\"HLS\"}(i=t.MediaTypes||(t.MediaTypes={})),function(n){n[n.VTT=\"VTT\"]=\"VTT\";n[n.TTML=\"TTML\"]=\"TTML\"}(r=t.ClosedCaptionTypes||(t.ClosedCaptionTypes={})),function(n){n[n.HD=\"HD\"]=\"HD\";n[n.HQ=\"HQ\"]=\"HQ\";n[n.SD=\"SD\"]=\"SD\";n[n.LO=\"LO\"]=\"LO\"}(u=t.MediaQuality||(t.MediaQuality={})),function(n){n[n.transcript=\"transcript\"]=\"transcript\";n[n.audio=\"audio\"]=\"audio\";n[n.video=\"video\"]=\"video\";n[n.videoWithCC=\"videoWithCC\"]=\"videoWithCC\"}(f=t.DownloadableMediaTypes||(t.DownloadableMediaTypes={})),function(n){n[n.BufferingFirstByteTimeout=2e3]=\"BufferingFirstByteTimeout\";n[n.MediaErrorAborted=2100]=\"MediaErrorAborted\";n[n.MediaErrorNetwork=2101]=\"MediaErrorNetwork\";n[n.MediaErrorDecode=2102]=\"MediaErrorDecode\";n[n.MediaErrorSourceNotSupported=2103]=\"MediaErrorSourceNotSupported\";n[n.MediaErrorUnknown=2104]=\"MediaErrorUnknown\";n[n.MediaSelectionNoMedia=2200]=\"MediaSelectionNoMedia\";n[n.AmpEncryptError=2405]=\"AmpEncryptError\";n[n.AmpPlayerMismatch=2406]=\"AmpPlayerMismatch\"}(e=t.VideoErrorCodes||(t.VideoErrorCodes={}))});define(\"player-options\",[\"require\",\"exports\",\"utility\",\"environment\",\"player-constants\",\"player-config\"],function(n,t,i,r,u,f){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var e=function(){function n(n){this.autoload=!0;this.autoplay=!1;this.startTime=0;this.mute=!1;this.loop=!1;this.controls=!0;this.lazyLoad=!0;this.trigger=!0;this.theme=\"light\";this.maskLevel=\"40\";this.useHLS=!0;this.useAdaptive=!0;this.debug=!1;this.reporting={enabled:!0,jsll:!0,aria:!1,wedcs:!1};this.playbackSpeed=!0;this.interactivity=!0;this.share=!0;this.shareOptions=[u.shareTypes.facebook,u.shareTypes.twitter,u.shareTypes.linkedin,u.shareTypes.skype,u.shareTypes.mail,u.shareTypes.copy];this.download=!1;this.playFullScreen=!1;this.hidePosterFrame=!1;this.shimServiceEnv=\"prod\";this.corePlayer=\"html5\";this.autoCaptions=null;this.flexSize=!1;this.aspectRatio=f.PlayerConfig.defaultAspectRatio;this.ageGate=!0;this.jsllPostMessage=!0;this.userMinimumAge=0;this.playPauseTrigger=!1;this.showEndImage=!1;this.showImageForVideoError=!1;this.inviewPlay=!1;this.inviewThreshold=null;this.timeRemainingCheckpoint=null;this.adsEnabled=!1;this.inViewWidthFraction=f.PlayerConfig.defaultInViewWidthFraction;this.inViewHeightFraction=f.PlayerConfig.defaultInViewHeightFraction;this.controlPanelTimeout=null;this.showControlOnLoad=!0;this.useAMPVersion2=!1;i.extend(this,n);r.Environment.isMobile?this.autoplay=!1:n&&n.autoPlay!==undefined&&(this.autoplay=!!n&&!!n.autoPlay);n&&n.autoLoad!==undefined&&(this.autoload=!!n&&!!n.autoLoad);this.autoplay&&(this.playFullScreen=!1,!this.mute&&r.Environment.isSafari&&(this.mute=!0));r.Environment.isIPhone&&(this.trigger=!1);(r.Environment.isOfficeCLView()||r.Environment.isIProduct)&&(this.useAdaptive=!1);n&&n.shareOptions&&(this.shareOptions=n.shareOptions);(!this.aspectRatio||!i.isNumber(this.aspectRatio)||this.aspectRatio<=0)&&(this.aspectRatio=f.PlayerConfig.defaultAspectRatio);(!this.inViewWidthFraction||!i.isNumber(this.inViewWidthFraction)||this.inViewWidthFraction>1)&&(this.inViewWidthFraction=f.PlayerConfig.defaultInViewWidthFraction);(!this.inViewHeightFraction||!i.isNumber(this.inViewHeightFraction)||this.inViewHeightFraction>1)&&(this.inViewHeightFraction=f.PlayerConfig.defaultInViewHeightFraction)}return n}();t.PlayerOptions=e});define(\"player-config\",[\"require\",\"exports\",\"player-data-interfaces\"],function(n,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function n(){}return n.resourcesUrl=\"{0}/{1}/videoplayer/resources/{2}\",n.resourceHost=\"https://www.microsoft.com\",n.resourceHash=\"34246619Platform_20210506_34246619\",n.defaultResourceHost=\"https://www.microsoft.com\",n.ampUrl=\"//amp.azure.net/libs/amp/1.8.0/azuremediaplayer.min.js\",n.ampVersion2Url=\"//amp.azure.net/libs/amp/2.1.9/azuremediaplayer.min.js\",n.hasPlayerUrl=\"url(//www.microsoft.com/onerfstatics/marketingsites-eas-prod/sc/76/42277f.js)\",n.hlsPlayerUrl=\"url(//www.microsoft.com/onerfstatics/marketingsites-eas-prod/sc/5b/8d47f5.js)\",n.shimServiceProdUrl=\"//prod-video-cms-rt-microsoft-com.akamaized.net/vhs/api/videos/{0}\",n.shimServiceIntUrl=\"//int-video-cms-rt-microsoft-com.akamaized.net/vhs/api/videos/{0}\",n.adSdkUrl=\"//msadsdk.blob.core.windows.net/core/1/latest.min.js\",n.eventCheckpointInterval=2e4,n.firstByteTimeoutVideoMobile=15e3,n.firstByteTimeoutVideoDesktop=1e4,n.defaultVolume=.8,n.checkpoints=[25,50,75,95],n.playbackRates=[2,1.5,1.25,1,.75,.5],n.defaultPlaybackRate=1,n.defaultQualityMobile=i.MediaQuality.SD,n.defaultQualityTV=i.MediaQuality.SD,n.defaultQualityDesktop=i.MediaQuality.HQ,n.defaultAspectRatio=16/9,n.defaultInViewWidthFraction=.5,n.defaultInViewHeightFraction=.5,n}();t.PlayerConfig=r});define(\"video-shim-data-fetcher\",[\"require\",\"exports\",\"player-data-interfaces\",\"player-utility\",\"player-config\",\"stringExtensions\"],function(n,t,i,r,u,f){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var e=function(){function n(n,t){this.serviceEnv=n;this.serviceUrl=t}return n.prototype.getMetadata=function(n,t,i){var u=this,f=this.getServiceUrl(n);r.PlayerUtility.ajax(f,function(r){var f,e;if(r&&r.length){f=null;try{f=JSON.parse(r)}catch(o){i&&i();return}e=u.mapToVideoMetadata(n,f);t&&t(e)}else i&&i()},function(){i&&i()})},n.prototype.getServiceUrl=function(n){return this.serviceUrl||(this.serviceUrl=this.serviceEnv===\"prod\"?u.PlayerConfig.shimServiceProdUrl:u.PlayerConfig.shimServiceIntUrl),f.format(this.serviceUrl,n)},n.prototype.mapToVideoMetadata=function(n,t){var r,l,u,f,o,a,s,h,v,c,y,e;if(!n||!t)return null;if(r={videoId:n},t.snippet&&(r.title=t.snippet.title,r.description=t.snippet.description,r.interactiveTriggersEnabled=t.snippet.interactiveTriggersEnabled,r.interactiveTriggersUrl=t.snippet.interactiveTriggersUrl,r.minimumAge=t.snippet.minimumAge,t.snippet.thumbnails&&(r.posterframeUrl=this.removeProtocolFromUrl(t.snippet.thumbnails.medium.url))),t.captions){r.ccFiles=[];l=\"&vtt=true\";for(u in t.captions)t.captions.hasOwnProperty(u)&&(t.captions[u].url.indexOf(\"?\")<0&&(l=\"?vtt=true\"),r.ccFiles.push({locale:u,url:this.removeProtocolFromUrl(t.captions[u].url),ccType:i.ClosedCaptionTypes.TTML}),r.ccFiles.push({locale:u,url:this.removeProtocolFromUrl(t.captions[u].url)+l,ccType:i.ClosedCaptionTypes.VTT}))}if(t.streams){r.videoFiles=[];for(f in t.streams)if(t.streams.hasOwnProperty(f)){if(f===\"1001\")continue;o=t.streams[f];a=this.getMediaTypeAndQuality(f);r.videoFiles.push({height:o.heightPixels,width:o.widthPixels,url:this.removeProtocolFromUrl(o.url),quality:a.quality,mediaType:a.mediaType})}}if(r.downloadableFiles=[],t.transcripts)for(s in t.transcripts)t.transcripts.hasOwnProperty(s)&&r.downloadableFiles.push({locale:s,url:this.removeProtocolFromUrl(t.transcripts[s].url),mediaType:i.DownloadableMediaTypes.transcript});if(r.videoFiles){for(h=void 0,v=0,c=0,y=r.videoFiles;c<y.length;c++)e=y[c],e.mediaType===i.MediaTypes.MP4&&e.width>=v&&(h=e,v=e.width);h&&r.downloadableFiles.push({locale:t.snippet.culture,url:this.removeProtocolFromUrl(h.url),mediaType:i.DownloadableMediaTypes.video})}return r},n.prototype.removeProtocolFromUrl=function(n){return n?n.replace(/(^\\w+:|^)\\/\\//,\"//\"):n},n.prototype.getMediaTypeAndQuality=function(n){var t=i.MediaTypes.MP4,r=null;switch(n.toLowerCase()){case\"h.264_320_180_400kbps\":t=i.MediaTypes.MP4;r=i.MediaQuality.LO;break;case\"h.264_640_360_1000kbps\":t=i.MediaTypes.MP4;r=i.MediaQuality.SD;break;case\"h.264_960_540_2250kbps\":t=i.MediaTypes.MP4;r=i.MediaQuality.HQ;break;case\"h.264_1280_720_3400kbps\":t=i.MediaTypes.MP4;r=i.MediaQuality.HD;break;case\"apple_http_live_streaming\":t=i.MediaTypes.HLS;break;case\"smooth_streaming\":t=i.MediaTypes.SMOOTH;break;case\"mpeg_dash\":t=i.MediaTypes.DASH}return{mediaType:t,quality:r}},n.prototype.isUuid=function(n){return/^[0-9a-fA-F]{8}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{4}\\-[0-9a-fA-F]{12}$/gi.test(n)},n}();t.VideoShimDataFetcher=e});define(\"age-gate-helper\",[\"require\",\"exports\",\"utility\",\"htmlExtensions\",\"selectMenu\",\"componentFactory\",\"environment\",\"localization-helper\"],function(n,t,i,r,u,f,e,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=function(){function n(n,t,i,u){var f=this;this.playerContainer=n;this.corePlayer=t;this.localizationHelper=i;this.onCompleteCallback=u;this.ageGateData={};this.contentMinimumAge=0;this.isUserOldEnough=!1;this.didUserClickSubmit=!1;this.ageGateIsDisplayed=!1;this.onAgeGateButtonClick=function(n){var u,v;if(r.preventDefault(n),u=r.getEventTargetOrSrcElement(n),u){var o=r.selectFirstElement(\".month-button\",f.ageGateDialogue.monthSelectMenu),s=r.selectFirstElement(\".day-button\",f.ageGateDialogue.daySelectMenu),h=r.selectFirstElement(\".year-button\",f.ageGateDialogue.yearSelectMenu);if(o&&s&&h){var i=Number(r.getText(o)),c=Number(r.getText(s)),l=Number(r.getText(h));if(i&&c&&l){f.didUserClickSubmit=!0;var t=new Date,a=t.getFullYear()-l,y=t.getMonth()+1<i,p=t.getMonth()+1===i&&t.getDate()<c;(y||p)&&a--;f.addAgeGateVerifiedToUserSession(a+\"\");f.playerData.options.lazyLoad=!1;f.isUserOldEnoughToViewContent(f.contentMinimumAge)?(f.isUserOldEnough=!0,f.onCompleteCallback&&f.onCompleteCallback()):f.onCompleteCallback&&f.onCompleteCallback();f.ageGateDialogue.container.setAttribute(\"aria-hidden\",\"true\");f.ageGateIsDisplayed=!1;!e.Environment.isIProduct||(v=r.selectFirstElement(\"video\",f.playerContainer),v.style.visibility=\"\",f.playerContainer.style.backgroundColor=\"\")}}}}}return n.prototype.verifyAgeGate=function(){if(this.playerData=this.corePlayer.getPlayerData(),this.contentMinimumAge=this.playerData.metadata.minimumAge?this.playerData.metadata.minimumAge:0,this.contentMinimumAge<=0||!this.playerData.options.ageGate)return this.isUserOldEnough=!0,this.onCompleteCallback&&this.onCompleteCallback(),!1;if(this.addUserAgeFromExternalLogin(),this.isUserAgeAlreadyVerified())this.isUserOldEnoughToViewContent(this.contentMinimumAge)?(this.isUserOldEnough=!0,this.onCompleteCallback&&this.onCompleteCallback()):this.onCompleteCallback&&this.onCompleteCallback();else return this.displayAgeGateDialogue(),!0;return!1},n.prototype.didUserSubmitAge=function(){return this.didUserClickSubmit},n.prototype.resetAgeGateSubmit=function(){this.didUserClickSubmit=!1},n.prototype.doesUserPassAgeGate=function(){return this.isUserOldEnough},n.prototype.addUserAgeFromExternalLogin=function(){var r=i.getCookie(n.xboxDotComAgeGateCookieName),t;Number(r)?i.saveToSessionStorage(n.ageGateSessionStorageKey,r):(t=this.playerData.options.userMinimumAge,t>0&&i.saveToSessionStorage(n.ageGateSessionStorageKey,t+\"\"))},n.prototype.addAgeGateVerifiedToUserSession=function(t){i.saveToSessionStorage(n.ageGateSessionStorageKey,t)},n.prototype.isUserAgeAlreadyVerified=function(){return!!i.getValueFromSessionStorage(n.ageGateSessionStorageKey)},n.prototype.isUserOldEnoughToViewContent=function(t){var r=Number(i.getValueFromSessionStorage(n.ageGateSessionStorageKey));return r>=t?!0:!1},n.prototype.displayAgeGateDialogue=function(){if(this.ageGateIsDisplayed=!0,this.getLocalizedAgeGateStrings(),this.ageGateDialogue||(this.setDefaultSelectMenuContainer(),this.createAgeGateContainer()),this.populateDateDropDowns(),!!e.Environment.isIProduct){var n=r.selectFirstElement(\"video\",this.playerContainer);n.style.visibility=\"hidden\";this.playerContainer.style.backgroundColor=\"black\"}},n.prototype.setDefaultSelectMenuContainer=function(){this.defaultDateSelectMenuContainer='<div class=\"select-menu-month c-select-menu f-border f-persist\">\\n        <a href=\"#\" role=\"button\" aria-expanded=\"false\" class=\"month-button\" aria-label=\"'+this.ageGateData.monthLabel+'\">\\n        '+this.ageGateData.monthLabel+'\\n        <\\/a>\\n        <ul role=\"menu\" class=\"c-menu f-scroll\" aria-hidden=\"true\">\\n        <\\/ul>\\n    <\\/div>\\n    <div class=\"select-menu-day c-select-menu f-border f-persist\">\\n        <a href=\"#\" role=\"button\" aria-expanded=\"false\" class=\"day-button\" aria-label=\"'+this.ageGateData.dayLabel+'\">\\n        '+this.ageGateData.dayLabel+'\\n        <\\/a>\\n        <ul role=\"menu\" class=\"c-menu f-scroll\" aria-hidden=\"true\">\\n        <\\/ul>\\n    <\\/div>\\n    <div class=\"select-menu-year c-select-menu f-border f-persist\">\\n        <a href=\"#\" role=\"button\" aria-expanded=\"false\" class=\"year-button\" aria-label=\"'+this.ageGateData.yearLabel+'\">\\n        '+this.ageGateData.yearLabel+'\\n        <\\/a>\\n        <ul role=\"menu\" class=\"c-menu f-scroll\" aria-hidden=\"true\">\\n        <\\/ul>\\n    <\\/div>'},n.prototype.getLocalizedAgeGateStrings=function(){this.ageGateData.buttonText=this.localizationHelper.getLocalizedValue(o.playerLocKeys.agegate_submit);this.ageGateData.heading=this.localizationHelper.getLocalizedValue(o.playerLocKeys.agegate_enterdate);this.ageGateData.dropDownAriaLabel=this.localizationHelper.getLocalizedValue(o.playerLocKeys.agegate_enterdate_arialabel);this.ageGateData.monthLabel=this.localizationHelper.getLocalizedValue(o.playerLocKeys.agegate_month);this.ageGateData.dayLabel=this.localizationHelper.getLocalizedValue(o.playerLocKeys.agegate_day);this.ageGateData.yearLabel=this.localizationHelper.getLocalizedValue(o.playerLocKeys.agegate_year);this.ageGateData.monthDayYearOrder=this.localizationHelper.getLocalizedValue(o.playerLocKeys.agegate_dateorder);this.ageGateData.monthAriaLabel=this.ageGateData.dropDownAriaLabel.replace(\"{0}\",this.ageGateData.monthLabel);this.ageGateData.dayAriaLabel=this.ageGateData.dropDownAriaLabel.replace(\"{0}\",this.ageGateData.dayLabel);this.ageGateData.yearAriaLabel=this.ageGateData.dropDownAriaLabel.replace(\"{0}\",this.ageGateData.yearLabel)},n.prototype.setSelectMenuMonthDayYearOrder=function(){var n;try{var t=\"\",i=this.ageGateData.monthDayYearOrder.toLowerCase().split(new RegExp(\"\\\\/|\\\\.|\\\\. |\\\\-\"),3),r=!0;for(n=0;n<i.length;n++)i[n].indexOf(\"m\")>-1?t+='<div class=\"select-menu-month c-select-menu f-border f-persist\">\\n                    <a href=\"#\" role=\"button\" aria-expanded=\"false\" class=\"month-button\" aria-label=\"'+this.ageGateData.monthAriaLabel+'\">\\n                    '+this.ageGateData.monthLabel+'\\n                    <\\/a>\\n                    <ul role=\"menu\" class=\"c-menu f-scroll\" aria-hidden=\"true\">\\n                    <\\/ul>\\n                <\\/div>':i[n].indexOf(\"d\")>-1?t+='<div class=\"select-menu-day c-select-menu f-border f-persist\">\\n                    <a href=\"#\" role=\"button\" aria-expanded=\"false\" class=\"day-button\" aria-label=\"'+this.ageGateData.dayAriaLabel+'\">\\n                    '+this.ageGateData.dayLabel+'\\n                    <\\/a>\\n                    <ul role=\"menu\" class=\"c-menu f-scroll\" aria-hidden=\"true\">\\n                    <\\/ul>\\n                <\\/div>':i[n].indexOf(\"y\")>-1?t+='<div class=\"select-menu-year c-select-menu f-border f-persist\">\\n                    <a href=\"#\" role=\"button\" aria-expanded=\"false\" class=\"year-button\" aria-label=\"'+this.ageGateData.yearAriaLabel+'\">\\n                    '+this.ageGateData.yearLabel+'\\n                    <\\/a>\\n                    <ul role=\"menu\" class=\"c-menu f-scroll\" aria-hidden=\"true\">\\n                    <\\/ul>\\n                <\\/div>':r=!1;return r?t:this.defaultDateSelectMenuContainer}catch(u){return this.defaultDateSelectMenuContainer}},n.prototype.createAgeGateContainer=function(){var t=this,s=this.setSelectMenuMonthDayYearOrder(),h='\\n<div class=\"theme-dark c-update-dark-theme\">\\n    <div class=\"\">\\n        <h3 aria-hidden=\"true\" class=\"c-heading-3 c-font-weight-override\">'+this.ageGateData.heading+\"<\\/h3>\\n        <fieldset>\"+s+('<button name=\"button\" class=\"c-button\" type=\"submit\" disabled>'+this.ageGateData.buttonText+\"<\\/button>\\n        <\\/fieldset>\\n    <\\/div>\\n<\\/div>\\n\"),i=document.createElement(\"div\"),e;i.innerHTML=h;r.addClass(i,\"f-age-gate-dialogue\");e=r.selectFirstElement(\".f-video-cc-overlay\",this.playerContainer);this.playerContainer.insertBefore(i,e);this.ageGateDialogue={};this.ageGateDialogue.container=document.createElement(\"div\");this.ageGateDialogue.container=r.selectFirstElement(\".f-age-gate-dialogue\",this.playerContainer);this.ageGateDialogue.button=r.selectFirstElement(\".c-button\",this.ageGateDialogue.container);r.addEvent(this.ageGateDialogue.button,r.eventTypes.click,this.onAgeGateButtonClick);this.ageGateDialogue.button.setAttribute(n.ariaLabel,this.localizationHelper.getLocalizedValue(o.playerLocKeys.agegate_submit));this.ageGateDialogue.monthSelectMenu=r.selectFirstElement(\".select-menu-month\",this.ageGateDialogue.container);this.ageGateDialogue.daySelectMenu=r.selectFirstElement(\".select-menu-day\",this.ageGateDialogue.container);this.ageGateDialogue.yearSelectMenu=r.selectFirstElement(\".select-menu-year\",this.ageGateDialogue.container);this.ageGateDialogue.monthSelectMenuList=r.selectFirstElement(\".c-menu\",this.ageGateDialogue.monthSelectMenu);this.ageGateDialogue.daySelectMenuList=r.selectFirstElement(\".c-menu\",this.ageGateDialogue.daySelectMenu);this.ageGateDialogue.yearSelectMenuList=r.selectFirstElement(\".c-menu\",this.ageGateDialogue.yearSelectMenu);f.ComponentFactory.create([{component:u.SelectMenu,eventToBind:\"DOMContentLoaded\",elements:[this.ageGateDialogue.monthSelectMenu,this.ageGateDialogue.daySelectMenu,this.ageGateDialogue.yearSelectMenu],callback:function(n){!n&&!n.length||(t.selectMenuMonth=n[0],t.selectMenuDay=n[1],t.selectMenuYear=n[2],t.selectMenuDay.subscribe({onSelectionChanged:function(n){return t.onMonthDayYearDropDownSelect(n)}}),t.selectMenuMonth.subscribe({onSelectionChanged:function(n){return t.onMonthDayYearDropDownSelect(n)}}),t.selectMenuYear.subscribe({onSelectionChanged:function(n){return t.onMonthDayYearDropDownSelect(n)}}))}}])},n.prototype.populateDateDropDowns=function(){var i,u,t,r;if(!!this.ageGateDialogue.monthSelectMenuList)for(i=void 0,i=1;i<=12;i++)t=this.createListItem(\"month-\",i),r='<a role=\"menuitem\" href=\"#\" aria-selected=\"false\" tabindex=\"-1\">'+(i+\"\")+\"<\\/a>\",t.innerHTML=r,this.ageGateDialogue.monthSelectMenuList.appendChild(t);if(!!this.ageGateDialogue.daySelectMenuList)for(u=void 0,u=1;u<=31;u++)t=this.createListItem(\"day-\",u),r='<a role=\"menuitem\" href=\"#\" aria-selected=\"false\" tabindex=\"-1\">'+(u+\"\")+\"<\\/a>\",t.innerHTML=r,this.ageGateDialogue.daySelectMenuList.appendChild(t);if(!!this.ageGateDialogue.yearSelectMenuList)for(var e=(new Date).getFullYear(),o=e-n.numberOfSelectableYears,f=void 0,f=e;f>=o;f--)t=this.createListItem(\"year-\",f),r='<a role=\"menuitem\" href=\"#\" aria-selected=\"false\" tabindex=\"-1\">'+(f+\"\")+\"<\\/a>\",t.innerHTML=r,this.ageGateDialogue.yearSelectMenuList.appendChild(t)},n.prototype.createListItem=function(n,t){var i=document.createElement(\"li\");return i.id=n+t,r.addClass(i,\"c-menu-item\"),i.setAttribute(\"role\",\"presentation\"),i},n.prototype.onMonthDayYearDropDownSelect=function(n){var h,f,c;if(n){var e=r.selectFirstElement(\".month-button\",this.ageGateDialogue.monthSelectMenu),o=r.selectFirstElement(\".day-button\",this.ageGateDialogue.daySelectMenu),s=r.selectFirstElement(\".year-button\",this.ageGateDialogue.yearSelectMenu);if(e&&o&&s){var t=Number(r.getText(e)),i=Number(r.getText(o)),u=Number(r.getText(s));for(t&&e.setAttribute(\"aria-label\",t+\" \"+this.ageGateData.monthLabel),i&&o.setAttribute(\"aria-label\",i+\" \"+this.ageGateData.dayLabel),u&&s.setAttribute(\"aria-label\",u+\" \"+this.ageGateData.yearLabel),t&&i&&u&&this.ageGateDialogue.button.removeAttribute(\"disabled\"),i=i?i:1,t=t?t:1,u=u?u:(new Date).getFullYear(),h=new Date(u,t,0).getDate(),f=void 0,f=28;31>=f;f++)c=r.selectFirstElement(\"#day-\"+f),f>h?r.addClass(c,\"c-hide-menu-item\"):r.removeClass(c,\"c-hide-menu-item\");i>h&&this.selectMenuDay.setSelectedItem(\"day-1\")}}},n.ageGateSessionStorageKey=\"UserAge\",n.xboxDotComAgeGateCookieName=\"maturityRatingAge\",n.ariaLabel=\"aria-label\",n.numberOfSelectableYears=110,n}();t.AgeGateHelper=s});define(\"interactive-triggers-helper\",[\"require\",\"exports\",\"player-utility\",\"utility\",\"htmlExtensions\",\"player-constants\",\"video-shim-data-fetcher\",\"localization-helper\"],function(n,t,i,r,u,f,e,o){\"use strict\";var s,h,l,c;Object.defineProperty(t,\"__esModule\",{value:!0}),function(n){n[n.WebLink=1]=\"WebLink\";n[n.StoreOffer=2]=\"StoreOffer\";n[n.VideoBranch=3]=\"VideoBranch\";n[n.Poll=4]=\"Poll\";n[n.Graphic=5]=\"Graphic\";n[n.CustomHtml=6]=\"CustomHtml\"}(s=t.OverlayType||(t.OverlayType={})),function(n){n.LowerThird=\"lowerThird\";n.UpperThird=\"upperThird\";n.LeftVertical=\"leftVertical\";n.RightVertical=\"rightVertical\";n.Fullscreen=\"fullScreen\";n.Default=\"default\"}(h=t.OverlayTemplate||(t.OverlayTemplate={})),function(n){n.VideoBranch=\"VideoBranch\";n.WebLink=\"WebLink\";n.Telemetry=\"Telemetry\"}(l=t.CustomHtmlPostMessageType||(t.CustomHtmlPostMessageType={}));c=function(){function n(n,t,i,e,o){var h=this;this.playerContainer=n;this.interactivityInfoUrl=t;this.telemetryEventCallback=o;this.streamLinkBackStack=[];this.screenManagerObjects=[];this.minimizedOverlays={};this.onScreenOverlays={};this.interactedTriggers=[];this.isEndSlateOn=!1;this.isStreamLinkBackStackPop=!1;this.isInteractivityJSONReady=!1;this.preRollDefaultDurationMs=5e3;this.onInteractivityInfoSuccess=function(n){try{h.interactivityInfo=JSON.parse(n);h.preloadContent();u.addThrottledEvent(window,u.eventTypes.resize,h.onResized);window.addEventListener(\"message\",h.onCustomHtmlMessageReceived);h.isInteractivityJSONReady=!0}catch(t){h.isInteractivityJSONReady=!0}};this.onCustomHtmlMessageReceived=function(n){var i,r,t;if(!!n&&!!n.data&&!!n.data.type&&(i=n.data.customHtmlOverlayId,!!i&&(r=i.split(\"-\").pop(),t=h.onScreenOverlays[r],!!r&&!!t)))switch(n.data.type){case\"VideoBranch\":!n.data.streamLink||h.handleClickByOverlayType(t,s.VideoBranch,n.data.streamLink);break;case\"WebLink\":default:!n.data.webLink||h.handleClickByOverlayType(t,s.WebLink,n.data.webLink)}};this.onInteractivityInfoFailed=function(){h.isInteractivityJSONReady=!0};this.onMinimizeClick=function(n){var t=u.getEventTargetOrSrcElement(n),e,i,r;t&&t.parentElement&&t.parentElement.parentElement&&(e=t.parentElement.id,i=e.split(\"-\").pop(),i&&(r=h.onScreenOverlays[i],h.minimizeOverlay(r),h.telemetryEventCallback&&h.telemetryEventCallback(f.PlayerEvents.InteractiveOverlayMinimize,r)))};this.onMaximizeButtonClick=function(n){var i=u.getEventTargetOrSrcElement(n),e,r,t;i&&i.parentElement&&i.parentElement.parentElement&&(e=i.id,r=e.split(\"-\").pop(),r&&(t=h.minimizedOverlays[r],t&&(h.removeMaximizeButton(t),delete h.minimizedOverlays[r],h.createContainerAndShowOverlay(t.onScreenOverlay.overlay,t.onScreenOverlay.trigger,!0),h.telemetryEventCallback&&h.telemetryEventCallback(f.PlayerEvents.InteractiveOverlayMinimize,t.onScreenOverlay))))};this.onOverlayClick=function(n){var t=u.getEventTargetOrSrcElement(n);if(t&&t.parentElement&&t.parentElement.parentElement){var r=t.parentElement.parentElement.id,f=r.split(\"-\").pop(),i=h.onScreenOverlays[f];i.trigger.triggerWindowId&&h.interactedTriggers.push(i.trigger.triggerWindowId);h.handleClickByOverlayType(i)}};this.onBackButtonClick=function(){h.streamLinkBackStack.length<1||(h.streamLinkBackstackPop(),h.telemetryEventCallback&&h.telemetryEventCallback(f.PlayerEvents.InteractiveBackButtonClick))};this.onResized=function(){var s,n,i,e,o,t,u,f;if(!(Object.keys(h.onScreenOverlays).length<1)&&h.interactivityInfo){for(s=r.getDimensions(h.playerContainer),n=0,i=Object.keys(h.onScreenOverlays);n<i.length;n++)if(e=i[n],o=h.onScreenOverlays[e],r.getDimensions(h.playerContainer).width<r.Viewports.allWidths[1]){h.hideOverlay(o);return}if(h.screenManagerObjects.length>0)for(t=0,u=h.screenManagerObjects;t<u.length;t++)f=u[t],h.corePlayer.screenManagerHelper.updateElementHeight(f,h.getOverlayHeight(f.HtmlObject))}};this.onPlayerEvent=function(n){switch(n.name){case f.PlayerEvents.ContentComplete:h.onContentComplete();break;case f.PlayerEvents.Seek:if(n.data&&n.data.seekTo)h.onSeek(n.data.seekTo);break;case f.PlayerEvents.Resume:h.onPlay()}};this.corePlayer=i;this.localizationHelper=e;this.corePlayer.addPlayerEventListener(this.onPlayerEvent);this.createBackButton();n&&t&&this.requestInteractivityJSON()}return n.prototype.dispose=function(){this.hideAllOverlays();u.removeEvent(window,u.eventTypes.resize,this.onResized)},n.prototype.requestInteractivityJSON=function(){i.PlayerUtility.ajax(this.interactivityInfoUrl,this.onInteractivityInfoSuccess,this.onInteractivityInfoFailed)},n.prototype.createGraphicContainer=function(n){var t=\"interactive-graphic-overlay-\"+n.overlay.overlayId,i;u.selectFirstElement(\"#\"+t,this.playerContainer)||(i=\"<img aria-hidden='true' alt='' id='\"+t+\"' class='f-interactive-overlay \\n                interactive-fullscreen interactive-graphic'>\\n            <img>\",this.appendHtmlToPlayerContainer(i,t,n));n.overlayContainer=u.selectFirstElement(\"#\"+t,this.playerContainer)},n.prototype.createCustomHtmlContainer=function(n){var t=\"interactive-fullscreen\",i,r;switch(n.trigger.overlayTemplate){case h.LeftVertical:t=\"interactive-left\";break;case h.RightVertical:t=\"interactive-right\";break;case h.UpperThird:t=\"interactive-upper\";break;case h.LowerThird:t=\"interactive-lower\"}i=\"custom-html-overlay-\"+n.overlay.overlayId;r=\"<div aria-hidden='true' id='\"+i+\"' \\n        class='f-interactive-overlay \"+t+\" f-interactive-overlay-customhtml'>\\n        <iframe src='\"+n.overlay.overlayData.customHtml+\"' name='\"+i+\"' \\n        style='height: 100%; width: 100%; border: none;'><\\/iframe>\\n        <\\/div>\";this.appendHtmlToPlayerContainer(r,i,n);this.createScreenManagerObject(n)},n.prototype.createBakedInOverlayContainer=function(n){var i=\"interactive-lower\",r=\"f-overlay-minimize-lowerthird\",t,f;switch(n.trigger.overlayTemplate){case h.LeftVertical:i=\"interactive-left\";break;case h.RightVertical:i=\"interactive-right\";break;case h.UpperThird:r=\"f-overlay-minimize-upperthird\";i=\"interactive-upper\"}t=\"interactive-overlay-\"+n.overlay.overlayId;u.selectFirstElement(\"#\"+t,this.playerContainer)||(f=\"<div aria-hidden='true' id='\"+t+\"' class='f-interactive-overlay \"+i+\"'>\\n<div class='f-overlay-info'>\\n    <h2 class='c-headline'><\\/h2>\\n    <p class='c-paragraph'><\\/p>\\n<\\/div>\\n<div class='f-overlay-link'>\\n    <button class='c-action-trigger f-heavyweight'><\\/button>\\n<\\/div>\\n<button type='button' class='f-overlay-minimizeMaximize \"+r+\" c-glyph glyph-chevron-left'>\\n<\\/button>  \\n<\\/div>\",this.appendHtmlToPlayerContainer(f,t,n));n.overlayContainer=u.selectFirstElement(\"#\"+t,this.playerContainer);n.overlayHeadline=u.selectFirstElement(\"h2\",n.overlayContainer);n.overlayText=u.selectFirstElement(\"p\",n.overlayContainer);n.overlayButton=u.selectFirstElement(\"button\",n.overlayContainer);n.minimizeButton=u.selectFirstElement(\".f-overlay-minimizeMaximize\",n.overlayContainer);this.createScreenManagerObject(n);u.addEvent(n.overlayButton,u.eventTypes.click,this.onOverlayClick);u.addEvent(n.minimizeButton,u.eventTypes.click,this.onMinimizeClick)},n.prototype.createOverlayContainer=function(n){switch(n.overlay.overlayType){case s.StoreOffer:case s.WebLink:case s.VideoBranch:this.createBakedInOverlayContainer(n);break;case s.Graphic:this.createGraphicContainer(n);break;case s.CustomHtml:this.createCustomHtmlContainer(n)}},n.prototype.appendHtmlToPlayerContainer=function(n,t,i){var r=document.createElement(\"div\"),f;r.innerHTML=n;f=u.selectFirstElement(\".f-video-cc-overlay\",this.playerContainer);this.playerContainer.insertBefore(r.firstChild,f);i.overlayContainer=u.selectFirstElement(\"#\"+t,this.playerContainer)},n.prototype.createScreenManagerObject=function(n){n.trigger.overlayTemplate===h.LowerThird&&(this.screenManagerObjects.push(this.corePlayer.screenManagerHelper.registerElement({HtmlObject:n.overlayContainer,Height:this.getOverlayHeight(n.overlayContainer),Id:null,IsVisible:!1,Priority:1,Transition:null})),this.screenManagerObjects[this.screenManagerObjects.length-1]==null&&this.screenManagerObjects.pop())},n.prototype.createBackButton=function(){var i,t,r;this.backButtonContainer||(i=\"<button type='button' aria-hidden='true' class='f-interactive-back-button c-glyph glyph-chevron-left'>\\n                <\\/button>\",t=document.createElement(\"div\"),t.innerHTML=i,r=u.selectFirstElement(\".f-video-cc-overlay\",this.playerContainer),this.playerContainer.insertBefore(t.firstChild,r),this.backButtonContainer=u.selectFirstElement(\".f-interactive-back-button\",this.playerContainer),this.backButtonContainer.setAttribute(n.ariaLabel,this.localizationHelper.getLocalizedValue(o.playerLocKeys.close_text)));u.addEvent(this.backButtonContainer,u.eventTypes.click,this.onBackButtonClick)},n.prototype.removeMaximizeButton=function(n){u.removeEvent(n.maximizeButton,u.eventTypes.click,this.onMaximizeButtonClick);u.removeElement(n.maximizeButton)},n.prototype.updateCurrentOverlay=function(n){this.interactivityInfo&&this.updateInteractivity(n)},n.prototype.updateOverlays=function(n){for(var t,r,o,u,h,f,l,a,b=n*1e7,i={},e=0,v=this.interactivityInfo.triggers;e<v.length;e++){if(t=v[e],t.triggerTimeTicks>b)break;t.isOverlayOn!==!0||this.userAlreadyInteractedWithTrigger(t.triggerWindowId)?delete i[t.triggerWindowId]:i[t.triggerWindowId]=t}for(r=0,o=Object.keys(this.minimizedOverlays);r<o.length;r++){var y=o[r],s=this.minimizedOverlays[y],p=i[s.onScreenOverlay.trigger.triggerWindowId]?!0:!1;p?delete i[s.onScreenOverlay.trigger.triggerWindowId]:this.hideOverlay(s.onScreenOverlay)}for(u=0,h=Object.keys(this.onScreenOverlays);u<h.length;u++){var w=h[u],c=this.onScreenOverlays[w],p=i[c.trigger.triggerWindowId]?!0:!1;p?delete i[c.trigger.triggerWindowId]:this.hideOverlay(c)}for(f=0,l=Object.keys(i);f<l.length;f++){var y=l[f],t=i[y],w=t.overlayId;t.zIndex=this.normalizeZIndex(t.zIndex);a=this.getOverlayInfo(w);!a||this.createContainerAndShowOverlay(a,t)}},n.prototype.createContainerAndShowOverlay=function(n,t,i){if(!(r.getDimensions(this.playerContainer).width<r.Viewports.allWidths[1])){var u={overlay:n,overlayContainer:null,trigger:t,hideTimer:null,showTimer:null};this.createOverlayContainer(u);this.setOverlayData(u,t.zIndex);this.showOverlay(u,i)}},n.prototype.showOverlay=function(n,t){if(n.overlayContainer){this.onScreenOverlays[n.overlay.overlayId]=n;switch(n.overlay.overlayType){case s.Graphic:n.trigger.overlayTemplate===h.Default&&(n.trigger.overlayTemplate=h.Fullscreen);break;case s.CustomHtml:case s.WebLink:case s.StoreOffer:case s.VideoBranch:default:n.trigger.overlayTemplate===h.Default&&(n.trigger.overlayTemplate=h.LowerThird);this.isContentStreamLink()||this.corePlayer.resetFocusTrap(this.findInteractivityFocusTrapStart());n.overlayContainer.setAttribute(\"role\",\"alert\")}clearTimeout(n.showTimer);this.displayOverlayContainer(n);var i=null;n&&n.overlay&&(i=n.overlay.overlayData);i&&i.headline&&n.overlayContainer.setAttribute(\"aria-label\",i.headline);t||this.telemetryEventCallback&&this.telemetryEventCallback(f.PlayerEvents.InteractiveOverlayShow,n)}},n.prototype.isContentStreamLink=function(){return this.streamLinkBackStack.length>=1},n.prototype.hideAllOverlays=function(){var n,i,u,t,r,f,e;if(Object.keys(this.minimizedOverlays).length>0)for(n=0,i=Object.keys(this.minimizedOverlays);n<i.length;n++)u=i[n],this.removeMaximizeButton(this.minimizedOverlays[u]);if(!(Object.keys(this.onScreenOverlays).length<1)&&this.interactivityInfo)for(t=0,r=Object.keys(this.onScreenOverlays);t<r.length;t++)f=r[t],e=this.onScreenOverlays[f],this.hideOverlay(e)},n.prototype.hideOverlay=function(n){if(n.overlayContainer){switch(n.overlay.overlayType){case s.Graphic:case s.CustomHtml:n.trigger.overlayTemplate===h.Default&&(n.trigger.overlayTemplate=h.Fullscreen);break;case s.WebLink:case s.StoreOffer:case s.VideoBranch:default:n.trigger.overlayTemplate===h.Default&&(n.trigger.overlayTemplate=h.LowerThird)}this.removeOverlayFromScreen(n);this.telemetryEventCallback&&this.telemetryEventCallback(f.PlayerEvents.InteractiveOverlayHide,n)}},n.prototype.removeOverlayFromScreen=function(n,t){var i=this.minimizedOverlays[n.trigger.triggerWindowId];i?(this.removeMaximizeButton(i),delete this.minimizedOverlays[i.onScreenOverlay.trigger.triggerWindowId]):(this.hideOveralyContainer(n,function(){!t||t()}),delete this.onScreenOverlays[n.overlay.overlayId]);this.isContentStreamLink()||this.corePlayer.resetFocusTrap(this.findInteractivityFocusTrapStart())},n.prototype.displayOverlayContainer=function(n){var t=this,i,r;n.overlayContainer.setAttribute(\"aria-hidden\",\"false\");i=\"f-interactive-overlay-slidein\";r=\"f-interactive-overlay-slideout\";switch(n.trigger.overlayTemplate){case h.LeftVertical:case h.RightVertical:case h.UpperThird:u.addClass(n.overlayContainer,i);u.removeClass(n.overlayContainer,r);break;case h.Fullscreen:break;case h.LowerThird:default:n.showTimer=setTimeout(function(){t.corePlayer.screenManagerHelper.updateElementDisplay(t.getScreenManagerObjectByOverlayId(n.overlay.overlayId),!0)},100)}},n.prototype.hideOveralyContainer=function(n,t){var i=this;switch(n.trigger.overlayTemplate){case h.LeftVertical:case h.RightVertical:case h.UpperThird:u.addClass(n.overlayContainer,\"f-interactive-overlay-slideout\");u.removeClass(n.overlayContainer,\"f-interactive-overlay-slidein\");n.hideTimer=setTimeout(function(){n.overlayContainer.setAttribute(\"aria-hidden\",\"true\");n.overlayButton&&u.removeEvent(n.overlayButton,u.eventTypes.click,i.onOverlayClick);u.removeElement(n.overlayContainer);!t()||t()},500);break;case h.Fullscreen:n.overlayContainer.setAttribute(\"aria-hidden\",\"true\");u.removeElement(n.overlayContainer);break;case h.LowerThird:default:this.screenManagerObjects.length>0&&(this.corePlayer.screenManagerHelper.deleteElement(this.deleteScreenManagerObjectByOverlayId(n.overlay.overlayId)),n.hideTimer=setTimeout(function(){n.overlayContainer.setAttribute(\"aria-hidden\",\"true\");n.overlayButton&&u.removeEvent(n.overlayButton,u.eventTypes.click,i.onOverlayClick);u.removeElement(n.overlayContainer);!t()||t()},500))}},n.prototype.setOverlayData=function(n,t){if(n.overlayContainer&&n.overlay)switch(n.overlay.overlayType){case s.Graphic:this.setGraphicOverlay(n,t);break;case s.WebLink:case s.StoreOffer:case s.VideoBranch:default:this.setBakedInOverlayContainerFields(n,t)}},n.prototype.setGraphicOverlay=function(n,t){var r=n.overlay.overlayData,i;!t||u.css(n.overlayContainer,\"z-index\",t);i=n.overlayContainer;i.src=r.graphicUrl},n.prototype.setBakedInOverlayContainerFields=function(t,i){var r=t.overlay.overlayData;t.overlayHeadline&&u.setText(t.overlayHeadline,r.headline);t.overlayText&&u.setText(t.overlayText,r.bodyText);!i||u.css(t.overlayContainer,\"z-index\",i);r.imageUrl&&u.css(t.overlayContainer,\"background-image\",\"url('\"+r.imageUrl+\"')\");t.overlayButton&&(u.setText(t.overlayButton,r.buttonText),t.overlayButton.setAttribute(\"aria-label\",r.buttonText));t.minimizeButton&&(typeof t.trigger.isMinimizable==\"undefined\"||t.trigger.isMinimizable?t.minimizeButton.setAttribute(n.ariaLabel,this.localizationHelper.getLocalizedValue(o.playerLocKeys.interactivity_hide)+\" \"+t.overlay.overlayData.headline):t.minimizeButton.setAttribute(\"aria-hidden\",\"true\"))},n.prototype.getOverlayInfo=function(n){var t,i,r;if(!this.interactivityInfo||!this.interactivityInfo.overlays||!this.interactivityInfo.overlays||!this.interactivityInfo.overlays.length)return null;for(t=0,i=this.interactivityInfo.overlays;t<i.length;t++)if(r=i[t],r.overlayId===n)return r;return null},n.prototype.getScreenManagerObjectByOverlayId=function(n){var t,i,r;if(this.screenManagerObjects.length===0)return null;for(t=0,i=this.screenManagerObjects;t<i.length;t++)if(r=i[t],r.HtmlObject.id.split(\"-\").pop()===n)return r;return null},n.prototype.deleteScreenManagerObjectByOverlayId=function(n){if(this.screenManagerObjects.length===0)return null;var i=this.getScreenManagerObjectByOverlayId(n),t=this.screenManagerObjects.splice(this.screenManagerObjects.indexOf(i),1);return t.length>0?t[0]:null},n.prototype.getOverlayHeight=function(n){var t=n.clientHeight;return t<=0&&!!n.parentElement&&(t=n.parentElement.clientHeight*.2),t},n.prototype.createMaximizeButton=function(t){var f=t.trigger.triggerWindowId,e=\"f-overlay-maximize-lowerthird\",s,r,c,i;return t.trigger.overlayTemplate===h.UpperThird&&(e=\"f-overlay-maximize-upperthird\"),s=\"<button type='button' id='\"+f+\"' class='f-overlay-minimizeMaximize \"+e+\" c-glyph glyph-chevron-left'>\\n        <\\/button>\",r=document.createElement(\"div\"),r.innerHTML=s,c=u.selectFirstElement(\".f-video-cc-overlay\",this.playerContainer),this.playerContainer.insertBefore(r.firstChild,c),i=u.selectFirstElement(\"#\"+f,this.playerContainer),i.setAttribute(n.ariaLabel,this.localizationHelper.getLocalizedValue(o.playerLocKeys.interactivity_show)+\" \"+t.overlay.overlayData.headline),u.addEvent(i,u.eventTypes.click,this.onMaximizeButtonClick),i},n.prototype.minimizeOverlay=function(n){var t=this,i;n&&(i={onScreenOverlay:n},this.removeOverlayFromScreen(n,function(){i.maximizeButton=t.createMaximizeButton(n);t.corePlayer.resetFocusTrap(t.findInteractivityFocusTrapStart())}),this.minimizedOverlays[n.trigger.triggerWindowId]=i)},n.prototype.streamLinkBackstackPop=function(){var n;n=this.streamLinkBackStack.pop();!this.isContentStreamLink()&&this.backButtonContainer&&(this.backButtonContainer.setAttribute(\"aria-hidden\",\"true\"),this.corePlayer.resetFocusTrap(this.findInteractivityFocusTrapStart()));this.hideAllOverlays();this.isStreamLinkBackStackPop=!0;this.corePlayer.load(n.corePlayer);this.interactivityInfo=n.interactivityInfo;this.interactedTriggers=n.interactedTriggers;this.minimizedOverlays=n.minimizedOverlays;this.isInteractivityJSONReady=!0;this.corePlayer.getPlayerData().options.startTime=0;this.finalizeBackStackPop(n.paused)},n.prototype.finalizeBackStackPop=function(n){var i=this,t;!n||(t=this.corePlayer,t.playerState===\"loading\"||t.playerState===\"init\"?setTimeout(function(){i.finalizeBackStackPop(n)},50):t.pause())},n.prototype.handleClickByOverlayType=function(n,t,i){if(n){t||(t=n.overlay.overlayType);i||(i=n.overlay.overlayData);this.hideOverlay(n);switch(t){case s.VideoBranch:this.navigateToStreamLink(i);break;case s.WebLink:default:window.open(i.linkUrl,\"_blank\")}this.telemetryEventCallback&&this.telemetryEventCallback(f.PlayerEvents.InteractiveOverlayClick,n)}},n.prototype.setFocusOnInteractivity=function(n){!n||n.tagName===\"IMG\"||(n.setAttribute(\"tabindex\",\"1\"),setTimeout(function(){n.focus()},0))},n.prototype.findInteractivityFocusTrapStart=function(){var n,i,e,r,t,u,o,f;if(this.streamLinkBackStack.length>0)return this.backButtonContainer;for(n=0,i=Object.keys(this.minimizedOverlays);n<i.length;n++)if(e=i[n],r=this.minimizedOverlays[e].maximizeButton,r)return r;for(t=0,u=Object.keys(this.onScreenOverlays);t<u.length;t++)if(o=u[t],f=this.onScreenOverlays[o],f.overlayButton!==undefined)return f.overlayButton;return null},n.prototype.navigateToStreamLink=function(n){var i=this.corePlayer.getPlayerData(),u,f,e,t;i.options.startTime=this.corePlayer.getPlayPosition().currentTime;i.options.lazyLoad=!1;u={};r.extend(u,this.minimizedOverlays);f=[];r.extend(f,this.interactedTriggers);e={corePlayer:i,interactivityInfo:this.interactivityInfo,minimizedOverlays:u,interactedTriggers:f,paused:this.corePlayer.isPaused()};this.hideAllOverlays();this.clearOutInteractedTriggers();this.minimizedOverlays={};this.interactivityInfo=null;this.streamLinkBackStack.push(e);t={};t.options={};r.extend(t.options,i.options);t.options.startTime=n.startTime?n.startTime:0;this.fetchStreamLinkMetadataAndSwitch(t,n.videoId)},n.prototype.clearOutInteractedTriggers=function(){this.isStreamLinkBackStackPop?this.isStreamLinkBackStackPop=!1:this.interactedTriggers.length=0},n.prototype.fetchStreamLinkMetadataAndSwitch=function(n,t){var i=this,r=new e.VideoShimDataFetcher(n.options.shimServiceEnv,n.options.shimServiceUrl);r.getMetadata(t,function(t){n.metadata=t;i.isInteractivityJSONReady=!1;i.corePlayer.stop();i.corePlayer.load(n);n.metadata.interactiveTriggersEnabled&&n.metadata.interactiveTriggersUrl&&(i.interactivityInfoUrl=n.metadata.interactiveTriggersUrl,i.requestInteractivityJSON());i.backButtonContainer&&(i.backButtonContainer.setAttribute(\"aria-hidden\",\"false\"),i.corePlayer.resetFocusTrap(i.backButtonContainer))},function(){})},n.prototype.userAlreadyInteractedWithTrigger=function(n){for(var r,t=0,i=this.interactedTriggers;t<i.length;t++)if(r=i[t],r===n)return!0;return!1},n.prototype.displayEndSlate=function(){for(var n,i,u,f=this.interactivityInfo.showOnVideoEnd,t=0,r=f;t<r.length;t++)n=r[t],i=this.getOverlayInfo(n.overlayId),!i||(u={overlayId:n.overlayId,overlayTemplate:n.overlayTemplate,zIndex:this.normalizeZIndex(n.zIndex)},this.createContainerAndShowOverlay(i,u),this.isEndSlateOn=!0)},n.prototype.displayPreRoll=function(n){var r,i,u,t,f,e,o;try{if(!this.interactivityInfo||this.interactivityInfo.showOnVideoStart.length<1||this.corePlayer.getPlayerData().options.startTime!==0){n();return}if(r=this.interactivityInfo.showOnVideoStart,r.length<1){n();return}for(i=0,u=r;i<u.length;i++)t=u[i],f=this.getOverlayInfo(t.overlayId),!f||(e={overlayId:t.overlayId,overlayTemplate:t.overlayTemplate,zIndex:this.normalizeZIndex(t.zIndex)},this.createContainerAndShowOverlay(f,e));o=this.interactivityInfo.preRollDurationSecs?this.interactivityInfo.preRollDurationSecs*1e3:this.preRollDefaultDurationMs;setTimeout(function(){n()},o)}catch(s){n()}},n.prototype.normalizeZIndex=function(n){return isNaN(n)?1:Math.max(1,Math.min(50,n))},n.prototype.onSeek=function(n){!this.interactivityInfo||(this.isStreamLinkBackStackPop?this.isStreamLinkBackStackPop=!1:this.clearOutInteractedTriggers(),this.updateInteractivity(n))},n.prototype.updateInteractivity=function(n){n>0&&this.updateOverlays(n)},n.prototype.onPlay=function(){!this.interactivityInfo||this.isEndSlateOn&&(this.hideAllOverlays(),this.isEndSlateOn=!1)},n.prototype.onContentComplete=function(){var n=this.streamLinkBackStack.length>0;n?this.streamLinkBackstackPop():!this.interactivityInfo||this.displayEndSlate()},n.prototype.postIFrameMessage=function(n){for(var u,i,f,t=0,r=Object.keys(this.onScreenOverlays);t<r.length;t++)u=r[t],i=this.onScreenOverlays[u],!i||i.overlay.overlayType===s.CustomHtml&&(f=i.overlayContainer.firstElementChild,f.contentWindow.postMessage(n,\"*\"))},n.prototype.preloadContent=function(){for(var n,t=[],i=[],r=0,u=this.interactivityInfo.overlays;r<u.length;r++){n=u[r];switch(n.overlayType){case s.WebLink:case s.StoreOffer:case s.VideoBranch:!n.overlayData||!n.overlayData.imageUrl||t.push(n.overlayData.imageUrl);break;case s.Graphic:!n.overlayData||!n.overlayData.graphicUrl||t.push(n.overlayData.graphicUrl);break;case s.CustomHtml:!n.overlayData||!n.overlayData.customHtml||i.push(n.overlayData.customHtml)}}t.length>0&&this.cacheImages(t);i.length>0&&this.cacheIFrames(i)},n.prototype.cacheImages=function(n){for(var r,u,t=0,i=n;t<i.length;t++)r=i[t],u=new Image,u.src=r},n.prototype.cacheIFrames=function(){},n.ariaLabel=\"aria-label\",n}();t.VideoPlayerInteractiveTriggersHelper=c});define(\"localization-helper\",[\"require\",\"exports\",\"stringExtensions\",\"player-config\",\"player-utility\"],function(n,t,i,r,u){\"use strict\";var f,e,o;Object.defineProperty(t,\"__esModule\",{value:!0});f={audio_tracks:\"Audio Tracks\",closecaption_off:\"Off\",geolocation_error:\"We're sorry, this video cannot be played from your current location.\",media_err_aborted:\"video playback was aborted\",media_err_decode:\"video is not readable\",media_err_network:\"video failed to download\",media_err_src_not_supported:\"video format is not supported\",media_err_unknown_error:\"unknown error occurred\",media_err_amp_encrypt:\"The video is encrypted and we do not have the keys to decrypt it.\",media_err_amp_player_mismatch:\"No compatible source was found for this video.\",browserunsupported:\"We're sorry, but your browser does not support this video.\",browserunsupported_download:\"Please download a copy of this video to view on your device:\",expand:\"Full Screen\",mute:\"Mute\",nullvideoerror:\"We're sorry, this video cannot be played.\",pause:\"Pause\",play:\"Play\",play_pause_button_tooltip:\"Play and Pause Button\",live_caption:\"Skip ahead to live broadcast.\",live_label:\"LIVE\",playbackerror:\"We're sorry, an error has occurred when playing video ({0}).\",standarderror:\"We're sorry, this video can't be played.\",time:\"Time\",more_caption:\"More options\",data_error:\"Sorry, this video cannot be played.\",seek:\"Seek\",unexpand:\"Exit Full Screen\",unmute:\"Unmute\",volume:\"Volume\",quality:\"Quality\",quality_hd:\"HD\",quality_hq:\"HQ\",quality_lo:\"LO\",quality_sd:\"SD\",quality_auto:\"Auto\",closecaption:\"Closed captions\",close_text:\"Close\",playbackspeed:\"Playback speed\",playbackspeed_normal:\"Normal\",sharing_label:\"Share\",sharing_facebook:\"Facebook\",sharing_twitter:\"Twitter\",sharing_linkedin:\"LinkedIn\",sharing_skype:\"Skype\",sharing_mail:\"Mail\",sharing_copy:\"Copy link\",loading_value_text:\"Loading...\",loading_aria_label:\"Loading\",descriptive_audio:\"Audio description\",unknown_language:\"Unknown\",cc_customize:\"Customize\",cc_text_font:\"Font\",cc_text_color:\"Text color\",cc_color_black:\"Black\",cc_color_blue:\"Blue\",cc_color_cyan:\"Cyan\",cc_color_green:\"Green\",cc_color_grey:\"Grey\",cc_color_magenta:\"Magenta\",cc_color_red:\"Red\",cc_color_white:\"White\",cc_color_yellow:\"Yellow\",cc_font_name_casual:\"Casual\",cc_font_name_cursive:\"Cursive\",cc_font_name_monospacedsansserif:\"Monospaced Sans Serif\",cc_font_name_monospacedserif:\"Monospaced Serif\",cc_font_name_proportionalserif:\"Proportional Serif\",cc_font_name_proportionalsansserif:\"Proportional Sans Serif\",cc_font_name_smallcapitals:\"Small Capitals\",cc_text_size:\"Text size\",cc_text_size_default:\"Default\",cc_text_size_extralarge:\"Extra Large\",cc_text_size_large:\"Large\",cc_text_size_maximum:\"Maximum\",cc_text_size_small:\"Small\",cc_appearance:\"Appearance\",cc_preset1:\"Preset 1 \",cc_preset2:\"Preset 2\",cc_preset3:\"Preset 3\",cc_preset4:\"Preset 4\",cc_preset5:\"Preset 5\",cc_presettings:\"Close captions appearance {0}: ({1}:{2}, {3}:{4})\",cc_text_background_color:\"Background color\",cc_text_background_opacity:\"Background opacity\",cc_text_opacity:\"Text opacity\",cc_percent_0:\"0%\",cc_percent_100:\"100%\",cc_percent_25:\"25%\",cc_percent_50:\"50%\",cc_percent_75:\"75%\",cc_text_edge_color:\"Text edge color\",cc_text_edge_style:\"Text edge style\",cc_text_edge_style_depressed:\"Depressed\",cc_text_edge_style_dropshadow:\"Drop shadow\",cc_text_edge_style_none:\"No edge\",cc_text_edge_style_raised:\"Raised\",cc_text_edge_style_uniform:\"Uniform\",cc_window_color:\"Window color\",cc_window_opacity:\"Window opacity\",cc_reset:\"Reset\",download_label:\"Download\",download_transcript:\"Transcript\",download_audio:\"Audio\",download_video:\"Video\",download_videoWithCC:\"Video with closed captions\",agegate_day:\"Day\",agegate_month:\"Month\",agegate_year:\"Year\",agegate_submit:\"Submit\",agegate_fail:\"This content is not available at this time due to age restrictions.\",agegate_enterdate:\"Enter your date of birth\",agegate_enterdate_arialabel:\"Enter your {0} of birth\",agegate_verifyyourage:\"Content not intended for all audiences. Please verify your age.\",agegate_dateorder:\"m/d/yyyy\",previous_menu_aria_label:\"{0} menu - go back to previous menu\",reactive_menu_aria_label:\"{0} menu - close menu\",reactive_menu_aria_label_closedcaption:\"Close {0}\",interactivity_show:\"Show\",interactivity_hide:\"Hide\",play_video:\"Play Video\",playing:\"playing\",paused:\"paused\"};t.ccCultureLocStrings={\"ar-ab\":\"\u0639\u0631\u0628\u064a\",\"ar-xm\":\"\u0639\u0631\u0628\u064a\",\"ar-ma\":\"\u0639\u0631\u0628\u064a\",\"ar-sa\":\"\u0639\u0631\u0628\u064a\",\"eu-es\":\"Euskara\",\"bg-bg\":\"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438\",\"ca-es\":\"Catal\u00e0\",\"zh-cn\":\"\u7b80\u4f53\u4e2d\u6587\",\"zh-hk\":\"\u7e41\u9ad4\u4e2d\u6587\",\"zh-tw\":\"\u7e41\u9ad4\u4e2d\u6587\",\"hr-hr\":\"Hrvatski\",\"cs-cz\":\"\u010ce\u0161tina\",\"da-dk\":\"Dansk\",\"nl-be\":\"Nederlands\",\"nl-nl\":\"Nederlands\",\"en-ab\":\"English\",\"en-aa\":\"English\",\"en-au\":\"English\",\"en-ca\":\"English\",\"en-eu\":\"English\",\"en-hk\":\"English\",\"en-in\":\"English\",\"en-id\":\"English\",\"en-ie\":\"English\",\"en-jm\":\"English\",\"en-my\":\"English\",\"en-nz\":\"English\",\"en-pk\":\"English\",\"en-ph\":\"English\",\"en-sg\":\"English\",\"en-za\":\"English\",\"en-tt\":\"English\",\"en-gb\":\"English\",\"en-us\":\"English\",\"et-ee\":\"Eesti\",\"fi-fi\":\"Suomi\",\"fr-ab\":\"Fran\u00e7ais\",\"fr-be\":\"Fran\u00e7ais\",\"fr-ca\":\"Fran\u00e7ais\",\"fr-fr\":\"Fran\u00e7ais\",\"fr-xf\":\"Fran\u00e7ais\",\"fr-ch\":\"Fran\u00e7ais\",\"gl-es\":\"Galego\",\"de-de\":\"Deutsch\",\"de-at\":\"Deutsch\",\"de-ch\":\"Deutsch\",\"el-gr\":\"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac\",\"he-il\":\"\u05e2\u05d1\u05e8\u05d9\u05ea\",\"hi-in\":\"\u0939\u093f\u0902\u0926\u0940\",\"hu-hu\":\"Magyar\",\"is-is\":\"\u00cdslenska\",\"id-id\":\"Bahasa Indonesia\",\"it-it\":\"Italiano\",\"ja-jp\":\"\u65e5\u672c\u8a9e\",\"kk-kz\":\"\u049a\u0430\u0437\u0430\u049b\",\"ko-kr\":\"\ud55c\uad6d\uc5b4\",\"lv-lv\":\"Latvie\u0161u\",\"lt-lt\":\"Lietuvi\u0173\",\"ms-my\":\"Bahasa Melayu (Asia Tenggara)\u200e\",\"nb-no\":\"Norsk (bokm\u00e5l)\",\"nn-no\":\"Norsk (nynorsk)\",\"fa-ir\":\"\u0641\u0627\u0631\u0633\u06cc\",\"pl-pl\":\"Polski\",\"pt-br\":\"Portugu\u00eas (Brasil)\u200e\",\"pt-pt\":\"Portugu\u00eas (Portugal)\u200e\",\"ro-ro\":\"Rom\u00e2n\u0103\",\"ru-ru\":\"\u0420\u0443\u0441\u0441\u043a\u0438\u0439\",\"sr-latn-rs\":\"Srpski\",\"sk-sk\":\"Sloven\u010dina\",\"sl-si\":\"Slovenski\",\"es-ar\":\"Espa\u00f1ol\",\"es-cl\":\"Espa\u00f1ol\",\"es-co\":\"Espa\u00f1ol\",\"es-cr\":\"Espa\u00f1ol\",\"es-do\":\"Espa\u00f1ol\",\"es-ec\":\"Espa\u00f1ol\",\"es-us\":\"Espa\u00f1ol\",\"es-gt\":\"Espa\u00f1ol\",\"es-hn\":\"Espa\u00f1ol\",\"es-xl\":\"Espa\u00f1ol\",\"es-mx\":\"Espa\u00f1ol\",\"es-ni\":\"Espa\u00f1ol\",\"es-pa\":\"Espa\u00f1ol\",\"es-py\":\"Espa\u00f1ol\",\"es-pe\":\"Espa\u00f1ol\",\"es-pr\":\"Espa\u00f1ol\",\"es-es\":\"Espa\u00f1ol\",\"es-uy\":\"Espa\u00f1ol\",\"es-ve\":\"Espa\u00f1ol\",\"sv-se\":\"Svenska\",\"tl-ph\":\"Tagalog\",\"th-th\":\"\u0e44\u0e17\u0e22\",\"tr-tr\":\"T\u00fcrk\u00e7e\",\"uk-ua\":\"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430\",\"ur-pk\":\"\u0627\u0631\u062f\u0648\",\"vi-vn\":\"Ti\u1ebfng Vi\u1ec7t\",\"sl-sl\":\"Slovenian\"};t.ccLanguageCodes={\"ar-ab\":\"ar\",\"ar-xm\":\"ar\",\"ar-ma\":\"ar\",\"ar-sa\":\"ar\",\"eu-es\":\"eu\",\"bg-bg\":\"bg\",\"ca-es\":\"ca\",\"zh-cn\":\"zh\",\"zh-hk\":\"zh\",\"zh-tw\":\"zh\",\"hr-hr\":\"hr\",\"cs-cz\":\"cs\",\"da-dk\":\"da\",\"nl-be\":\"nl\",\"nl-nl\":\"nl\",\"en-ab\":\"en\",\"en-aa\":\"en\",\"en-au\":\"en\",\"en-ca\":\"en\",\"en-eu\":\"en\",\"en-hk\":\"en\",\"en-in\":\"en\",\"en-id\":\"en\",\"en-ie\":\"en\",\"en-jm\":\"en\",\"en-my\":\"en\",\"en-nz\":\"en\",\"en-pk\":\"en\",\"en-ph\":\"en\",\"en-sg\":\"en\",\"en-za\":\"en\",\"en-tt\":\"en\",\"en-gb\":\"en\",\"en-us\":\"en\",\"et-ee\":\"et\",\"fi-fi\":\"fi\",\"fr-ab\":\"fr\",\"fr-be\":\"fr\",\"fr-ca\":\"fr\",\"fr-fr\":\"fr\",\"fr-xf\":\"fr\",\"fr-ch\":\"fr\",\"gl-es\":\"gl\",\"de-de\":\"de\",\"de-at\":\"de\",\"de-ch\":\"de\",\"el-gr\":\"el\",\"he-il\":\"he\",\"hi-in\":\"hi\",\"hu-hu\":\"hu\",\"is-is\":\"is\",\"id-id\":\"id\",\"it-it\":\"it\",\"ja-jp\":\"ja\",\"kk-kz\":\"kk\",\"ko-kr\":\"ko\",\"lv-lv\":\"lv\",\"lt-lt\":\"lt\",\"ms-my\":\"ms\u200e\",\"nb-no\":\"nb\",\"nn-no\":\"nn\",\"fa-ir\":\"fa\",\"pl-pl\":\"pl\",\"pt-br\":\"pt\u200e\",\"pt-pt\":\"pt\u200e\",\"ro-ro\":\"ro\",\"ru-ru\":\"ru\",\"sr-latn-rs\":\"sr\",\"sk-sk\":\"sk\",\"sl-si\":\"sl\",\"es-ar\":\"es\",\"es-cl\":\"es\",\"es-co\":\"es\",\"es-cr\":\"es\",\"es-do\":\"es\",\"es-ec\":\"es\",\"es-us\":\"es\",\"es-gt\":\"es\",\"es-hn\":\"es\",\"es-xl\":\"es\",\"es-mx\":\"es\",\"es-ni\":\"es\",\"es-pa\":\"es\",\"es-py\":\"es\",\"es-pe\":\"es\",\"es-pr\":\"es\",\"es-es\":\"es\",\"es-uy\":\"es\",\"es-ve\":\"es\",\"sv-se\":\"sv\",\"tl-ph\":\"tl\",\"th-th\":\"th\",\"tr-tr\":\"tr\",\"uk-ua\":\"uk\",\"ur-pk\":\"ur\",\"vi-vn\":\"vi\",\"sl-sl\":\"sl\"};t.playerLocKeys={audio_tracks:\"audio_tracks\",closecaption_off:\"closecaption_off\",geolocation_error:\"geolocation_error\",media_err_aborted:\"media_err_aborted\",media_err_decode:\"media_err_decode\",media_err_network:\"media_err_network\",media_err_src_not_supported:\"media_err_src_not_supported\",media_err_unknown_error:\"media_err_unknown_error\",media_err_amp_encrypt:\"media_err_amp_encrypt\",media_err_amp_player_mismatch:\"media_err_amp_player_mismatch\",browserunsupported:\"browserunsupported\",browserunsupported_download:\"browserunsupported_download\",expand:\"expand\",mute:\"mute\",nullvideoerror:\"nullvideoerror\",pause:\"pause\",play:\"play\",play_video:\"play_video\",playing:\"playing\",paused:\"paused\",play_pause_button_tooltip:\"play_pause_button_tooltip\",live_caption:\"live_caption\",live_label:\"live_label\",playbackerror:\"playbackerror\",standarderror:\"standarderror\",time:\"time\",more_caption:\"more_caption\",data_error:\"data_error\",seek:\"seek\",unexpand:\"unexpand\",unmute:\"unmute\",volume:\"volume\",quality:\"quality\",quality_hd:\"quality_hd\",quality_hq:\"quality_hq\",quality_lo:\"quality_lo\",quality_sd:\"quality_sd\",quality_auto:\"quality_auto\",cc_customize:\"cc_customize\",cc_text_font:\"cc_text_font\",cc_text_color:\"cc_text_color\",cc_color_black:\"cc_color_black\",cc_color_blue:\"cc_color_blue\",cc_color_cyan:\"cc_color_cyan\",cc_color_green:\"cc_color_green\",cc_color_grey:\"cc_color_grey\",cc_color_magenta:\"cc_color_magenta\",cc_color_red:\"cc_color_red\",cc_color_white:\"cc_color_white\",cc_color_yellow:\"cc_color_yellow\",cc_font_name_casual:\"cc_font_name_casual\",cc_font_name_cursive:\"cc_font_name_cursive\",cc_font_name_monospacedsansserif:\"cc_font_name_monospacedsansserif\",cc_font_name_proportionalsansserif:\"cc_font_name_proportionalsansserif\",cc_font_name_monospacedserif:\"cc_font_name_monospacedserif\",cc_font_name_proportionalserif:\"cc_font_name_proportionalserif\",cc_font_name_smallcapitals:\"cc_font_name_smallcapitals\",cc_text_size:\"cc_text_size\",cc_text_size_default:\"cc_text_size_default\",cc_text_size_extralarge:\"cc_text_size_extralarge\",cc_text_size_large:\"cc_text_size_large\",cc_text_size_maximum:\"cc_text_size_maximum\",cc_text_size_small:\"cc_text_size_small\",cc_appearance:\"cc_appearance\",cc_preset1:\"cc_preset1\",cc_preset2:\"cc_preset2\",cc_preset3:\"cc_preset3\",cc_preset4:\"cc_preset4\",cc_preset5:\"cc_preset5\",cc_presettings:\"cc_presettings\",cc_text_background_color:\"cc_text_background_color\",cc_text_background_opacity:\"cc_text_background_opacity\",cc_text_opacity:\"cc_text_opacity\",cc_percent_0:\"cc_percent_0\",cc_percent_100:\"cc_percent_100\",cc_percent_25:\"cc_percent_25\",cc_percent_50:\"cc_percent_50\",cc_percent_75:\"cc_percent_75\",cc_text_edge_color:\"cc_text_edge_color\",cc_text_edge_style:\"cc_text_edge_style\",cc_text_edge_style_depressed:\"cc_text_edge_style_depressed\",cc_text_edge_style_dropshadow:\"cc_text_edge_style_dropshadow\",cc_text_edge_style_none:\"cc_text_edge_style_none\",cc_text_edge_style_raised:\"cc_text_edge_style_raised\",cc_text_edge_style_uniform:\"cc_text_edge_style_uniform\",cc_window_color:\"cc_window_color\",cc_window_opacity:\"cc_window_opacity\",cc_reset:\"cc_reset\",closecaption:\"closecaption\",close_text:\"close_text\",playbackspeed:\"playbackspeed\",playbackspeed_normal:\"playbackspeed_normal\",sharing_label:\"sharing_label\",sharing_facebook:\"sharing_facebook\",sharing_twitter:\"sharing_twitter\",sharing_linkedin:\"sharing_linkedin\",sharing_skype:\"sharing_skype\",sharing_mail:\"sharing_mail\",sharing_copy:\"sharing_copy\",loading_value_text:\"loading_value_text\",loading_aria_label:\"loading_aria_label\",descriptive_audio:\"descriptive_audio\",unknown_language:\"unknown_language\",download_label:\"download_label\",download_transcript:\"download_transcript\",download_audio:\"download_audio\",download_video:\"download_video\",download_videoWithCC:\"download_videoWithCC\",agegate_day:\"agegate_day\",agegate_month:\"agegate_month\",agegate_year:\"agegate_year\",agegate_enterdate:\"agegate_enterdate\",agegate_enterdate_arialabel:\"agegate_enterdate_arialabel\",agegate_fail:\"agegate_fail\",agegate_verifyyourage:\"agegate_verifyyourage\",agegate_submit:\"agegate_submit\",agegate_dateorder:\"agegate_dateorder\",previous_menu_aria_label:\"previous_menu_aria_label\",reactive_menu_aria_label:\"reactive_menu_aria_label\",reactive_menu_aria_label_closedcaption:\"reactive_menu_aria_label_closedcaption\",interactivity_show:\"interactivity_show\",interactivity_hide:\"interactivity_hide\"};e={transcript:\"download_transcript\",audio:\"download_audio\",video:\"download_video\",videoWithCC:\"download_videoWithCC\"};o=function(){function n(n,t,i,r){this.market=n;this.resHost=t;this.resHash=i;this.onErrorCallback=r}return n.prototype.getCorrectResourceHost=function(){return this.resHost||(r.PlayerConfig.resourceHost.indexOf(\"%playerResourceHost\")===-1?r.PlayerConfig.resourceHost:r.PlayerConfig.defaultResourceHost)},n.prototype.getResourceHash=function(){return this.resHash||(r.PlayerConfig.resourceHash.indexOf(\"%playerResourceHash\")===-1?r.PlayerConfig.resourceHash:\"latest\")},n.prototype.queueRequest=function(t){var f=this,e;if(n.requestQueue[this.market]){n.requestQueue[this.market].push(t);return}n.requestQueue[this.market]=[t];e=i.format(r.PlayerConfig.resourcesUrl,this.getCorrectResourceHost(),this.market,this.getResourceHash());u.PlayerUtility.ajax(e,function(t){if(t&&t.length)try{n.resources[f.market]=JSON.parse(t)}catch(i){if(f.onErrorCallback)f.onErrorCallback({errorType:\"oneplayer.error.LocalizationHelper.queueRequest.parse\",errorDesc:\"Parsing error \"+e})}else if(f.onErrorCallback)f.onErrorCallback({errorType:\"oneplayer.error.LocalizationHelper.queueRequest.ajaxcall\",errorDesc:\"No result for file: \"+e});f.completeRequest()},this.completeRequest)},n.prototype.completeRequest=function(){var t,i,r;if(n.requestQueue[this.market]){for(t=0,i=n.requestQueue[this.market];t<i.length;t++)r=i[t],this.doCallback(r);n.requestQueue[this.market]=null}},n.prototype.doCallback=function(n){n&&typeof n==\"function\"&&n()},n.prototype.loadResources=function(t){if(!this.market||n.resources[this.market]){this.doCallback(t);return}this.queueRequest(t)},n.prototype.getLocalizedValue=function(t){return t?n.resources[this.market]&&n.resources[this.market][t]||f[t]||\"\":\"\"},n.prototype.getLanguageNameFromLocale=function(n){return t.ccCultureLocStrings[n]||this.getLocalizedValue(t.playerLocKeys.unknown_language)},n.prototype.getLanguageCodeFromLocale=function(n){return t.ccLanguageCodes[n]||null},n.prototype.getLocalizedMediaTypeName=function(t){if(!t||!e[t])return\"\";var i=e[t];return n.resources[this.market]&&n.resources[this.market][i]||f[i]||\"\"},n.resources={},n.requestQueue={},n}();t.LocalizationHelper=o});define(\"screen-manager-helper\",[\"require\",\"exports\"],function(n,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function n(){this.screenElements=[];this.nextScreenElementId=0}return n.prototype.registerElement=function(n){return n.HtmlObject==null||n.Priority==null||n.Height==null?null:(n.Transition==null&&(n.Transition=\"bottom 0.5s ease-in\"),n.Height<=0&&(n.Height=n.HtmlObject.clientHeight),n.Id=this.nextScreenElementId,this.nextScreenElementId++,n.HtmlObject.style.bottom=\"-\"+n.Height+\"px\",n.HtmlObject.style.transition=n.Transition,this.screenElements.push(n),this.sortScreenElements(),n)},n.prototype.updateElementDisplay=function(n,t){for(var i,r=0,f=!1,u=this.screenElements.length-1;u>=0;u--)i=this.screenElements[u],i.Id===n.Id&&i.IsVisible!==t?(i.IsVisible=t,f=!0,i.IsVisible?(i.HtmlObject.style.bottom=r+\"px\",r+=i.Height):i.HtmlObject.style.bottom=\"-\"+n.Height+\"px\"):i.IsVisible&&(f&&(i.HtmlObject.style.bottom=r+\"px\"),r+=i.Height)},n.prototype.updateElementHeight=function(n,t){for(var i,r=0,f=!1,u=this.screenElements.length-1;u>=0;u--)i=this.screenElements[u],i.Id===n.Id&&i.Height!==t?(i.Height=t,f=!0,i.IsVisible&&(i.HtmlObject.style.bottom=r+\"px\",r+=i.Height)):i.IsVisible&&(f&&(i.HtmlObject.style.bottom=r+\"px\"),r+=i.Height)},n.prototype.deleteElement=function(n){var i,t;for(this.updateElementDisplay(n,!1),i=-1,t=0;t<this.screenElements.length;t++)if(this.screenElements[t].Id===n.Id){i=t;break}this.screenElements.splice(i,1)},n.prototype.sortScreenElements=function(){this.screenElements.sort(function(n,t){return n.Priority<t.Priority?-1:n.Priority>t.Priority?1:0})},n}();t.ScreenManagerHelper=i});define(\"sharing-helper\",[\"require\",\"exports\",\"htmlExtensions\",\"localization-helper\",\"player-constants\"],function(n,t,i,r,u){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var f={\"zh-cn\":[u.shareTypes.facebook,u.shareTypes.twitter,u.shareTypes.linkedin,u.shareTypes.skype]},e=function(){function n(){}return n.getCurrentPageUrl=function(){return window.location.href.replace(\"&jsapi=true\",\"\")},n.tryCopyTextToClipboard=function(n){var u,t,r;if(window.clipboardData)window.clipboardData.setData(\"text\",n);else{u=0;t=document.createElement(\"textarea\");t.value=n;r=i.selectFirstElement(\"body\");u=r.scrollTop;r.appendChild(t);t.select();try{document.execCommand(\"copy\")}catch(f){}t.remove();r.scrollTop=u}},n.getShareOptionsData=function(t,i,e){var s,h,c,l,o;if(!i||!i.share||!i.shareOptions||!t)return null;for(s=[],h=encodeURIComponent(e||n.getCurrentPageUrl()),c=0,l=i.shareOptions;c<l.length;c++)if(o=l[c],o=o.toLowerCase(),!i.market||!f[i.market]||!(f[i.market].indexOf(o)>=0))switch(o){case u.shareTypes.facebook:s.push({url:\"//www.facebook.com/share.php?u=\"+h,id:o,label:t.getLocalizedValue(r.playerLocKeys.sharing_facebook),image:\"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzIgMzIiPjxzdHlsZT4uc3Qwe2Rpc3BsYXk6bm9uZTt9IC5zdDF7ZGlzcGxheTppbmxpbmU7fSAuc3Qye2ZpbGw6bm9uZTt9IC5zdDN7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxnIGlkPSJSZXN0XzNfIiBjbGFzcz0ic3QwIj48ZyBpZD0iVHdpdHRlcl8zXyIgY2xhc3M9InN0MSI+PHBhdGggY2xhc3M9InN0MiIgZD0iTTAgMGgzMnYzMkgweiIvPjxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik0yOC40IDguNmMtLjkuNC0xLjkuNy0yLjkuOCAxLS42IDEuOC0xLjYgMi4yLTIuOC0xIC42LTIuMSAxLTMuMiAxLjItLjktMS0yLjItMS42LTMuNy0xLjYtMi44IDAtNSAyLjMtNSA1IDAgLjQgMCAuOC4xIDEuMi00LjItLjItNy45LTIuMi0xMC40LTUuMy0uNC44LS43IDEuNy0uNyAyLjYgMCAxLjggMSAzLjMgMi4zIDQuMi0uOCAwLTIuMi0uMy0yLjItLjZ2LjFjMCAyLjQgMS42IDQuNSAzLjkgNS0uNC4xLS45LjItMS40LjItLjMgMC0uNyAwLTEtLjEuNiAyIDIuNSAzLjUgNC43IDMuNS0xLjUgMS4yLTMuNyAyLTYuMSAyLS40IDAtLjggMC0xLjItLjEgMi4yIDEuNCA0LjkgMi4zIDcuNyAyLjMgOS4zIDAgMTQuNC03LjcgMTQuNC0xNC40di0uN2MxLS42IDEuOC0xLjUgMi41LTIuNXoiLz48L2c+PC9nPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0wIDBoMzJ2MzJIMHoiIGlkPSJGYWNlYm9va183XyIvPjxwYXRoIGlkPSJXaGl0ZV8yXyIgY2xhc3M9InN0MyIgZD0iTTMwLjIgMEgxLjhDLjggMCAwIC44IDAgMS44djI4LjVjMCAxIC44IDEuOCAxLjggMS44aDE1LjNWMTkuNmgtNC4ydi00LjhoNC4ydi0zLjZjMC00LjEgMi41LTYuNCA2LjItNi40IDEuOCAwIDMuMy4yIDMuNy4ydjQuM2gtMi42Yy0yIDAtMi40IDEtMi40IDIuNHYzLjFoNC44bC0uNiA0LjhIMjJWMzJoOC4yYzEgMCAxLjgtLjggMS44LTEuOFYxLjhjMC0xLS44LTEuOC0xLjgtMS44eiIvPjwvc3ZnPg==\"});break;case u.shareTypes.twitter:s.push({url:\"//twitter.com/share?url=\"+h+\"&text=\",id:o,label:t.getLocalizedValue(r.playerLocKeys.sharing_twitter),image:\"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzIgMzIiPjxzdHlsZT4uc3Qwe2ZpbGw6I0ZGRkZGRjt9PC9zdHlsZT48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzIgNi4xYy0xLjIuNS0yLjUuOS0zLjggMSAxLjMtLjggMi4zLTIuMSAyLjktMy42LTEuMy44LTIuNyAxLjMtNC4yIDEuNkMyNS44IDMuOCAyNC4xIDMgMjIuMSAzYy0zLjYgMC02LjUgMy02LjUgNi41IDAgLjUgMCAxIC4xIDEuNi01LjQtLjMtMTAuMi0yLjktMTMuNS02LjktLjUgMS0uOSAyLjItLjkgMy40IDAgMi4zIDEuMyA0LjMgMyA1LjUtMSAwLTIuOS0uNC0yLjktLjh2LjFjMCAzLjEgMi4xIDUuOSA1LjEgNi41LS41LjEtMS4yLjItMS44LjItLjQgMC0uOSAwLTEuMy0uMS44IDIuNiAzLjMgNC42IDYuMSA0LjYtMiAxLjYtNC44IDIuNi03LjkgMi42LS41IDAtMSAwLTEuNi0uMSAyLjkgMS44IDYuNCAzIDEwIDMgMTIuMSAwIDE4LjctMTAgMTguNy0xOC43di0uOWMxLjMtLjkgMi40LTIuMSAzLjMtMy40eiIvPjwvc3ZnPg==\"});break;case u.shareTypes.skype:s.push({url:\"//web.skype.com/share?url=\"+h+\"&amp;lang=\"+i.market,id:o,label:t.getLocalizedValue(r.playerLocKeys.sharing_skype),image:\"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzIgMzIiPjxzdHlsZT4uc3Qwe2Rpc3BsYXk6bm9uZTt9IC5zdDF7ZGlzcGxheTppbmxpbmU7fSAuc3Qye2ZpbGw6bm9uZTt9IC5zdDN7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxnIGlkPSJMYXllcl8xXzFfIiBjbGFzcz0ic3QwIj48ZyBpZD0iUmVzdF8zXyIgY2xhc3M9InN0MSI+PGcgaWQ9IlR3aXR0ZXJfM18iPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz48cGF0aCBjbGFzcz0ic3QzIiBkPSJNMjguNCA4LjZjLS45LjQtMS45LjctMi45LjggMS0uNiAxLjgtMS42IDIuMi0yLjgtMSAuNi0yLjEgMS0zLjIgMS4yLS45LTEtMi4yLTEuNi0zLjctMS42LTIuOCAwLTUgMi4zLTUgNSAwIC40IDAgLjguMSAxLjItNC4yLS4yLTcuOS0yLjItMTAuNC01LjMtLjQuOC0uNyAxLjctLjcgMi42IDAgMS44IDEgMy4zIDIuMyA0LjItLjggMC0yLjItLjMtMi4yLS42di4xYzAgMi40IDEuNiA0LjUgMy45IDUtLjQuMS0uOS4yLTEuNC4yLS4zIDAtLjcgMC0xLS4xLjYgMiAyLjUgMy41IDQuNyAzLjUtMS41IDEuMi0zLjcgMi02LjEgMi0uNCAwLS44IDAtMS4yLS4xIDIuMiAxLjQgNC45IDIuMyA3LjcgMi4zIDkuMyAwIDE0LjQtNy43IDE0LjQtMTQuNHYtLjdjMS0uNiAxLjgtMS41IDIuNS0yLjV6Ii8+PC9nPjwvZz48ZyBpZD0iRmFjZWJvb2tfN18iIGNsYXNzPSJzdDEiPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz48cGF0aCBpZD0iZl82XyIgY2xhc3M9InN0MyIgZD0iTTE4IDI2di05aDIuNmwuNS00SDE4di0xLjljMC0xLS4yLTIuMSAxLjMtMi4xSDIxVjYuMVMxOS43IDYgMTguNCA2QzE1LjcgNiAxNCA3LjcgMTQgMTAuN1YxM2gtM3Y0aDN2OWg0eiIvPjwvZz48L2c+PHBhdGggY2xhc3M9InN0MyIgZD0iTTMwLjkgMTguNmMuMS0uOC4xLTEuOC4xLTIuNiAwLTguMy02LjctMTUtMTUtMTUtMSAwLTEuOCAwLTIuNi4yQzEyLjIuMyAxMC42IDAgOSAwIDQgMCAwIDQgMCA5YzAgMS42LjUgMy4yIDEuMSA0LjUtLjEuNy0uMSAxLjctLjEgMi41IDAgOC4zIDYuNyAxNSAxNSAxNSAxIDAgMS44IDAgMi42LS4yIDEuMy44IDIuOSAxLjEgNC41IDEuMSA1IDAgOS00IDktOS0uMS0xLjYtLjQtMy4xLTEuMi00LjN6bS0xNC43IDYuNWMtNS4xIDAtNy41LTIuNi03LjUtNC41IDAtMSAuOC0xLjYgMS44LTEuNiAyLjIgMCAxLjYgMy4yIDUuOCAzLjIgMi4xIDAgMy40LTEuMyAzLjQtMi40IDAtLjYtLjUtMS40LTEuOC0xLjhsLTQuOC0xYy0zLjctMS00LjMtMy00LjMtNC44IDAtMy44IDMuNS01LjMgNy01LjMgMy4yIDAgNi45IDEuOCA2LjkgNC4yIDAgMS0uOCAxLjYtMS44IDEuNi0xLjkgMC0xLjYtMi42LTUuMy0yLjYtMS45IDAtMi45LjgtMi45IDIuMXMxLjQgMS42IDIuNyAxLjlsMy40LjhjMy43LjggNC42IDMgNC42IDUuMS4xIDIuNy0yLjQgNS4xLTcuMiA1LjF6Ii8+PC9zdmc+\"});break;case u.shareTypes.linkedin:s.push({url:\"//www.linkedin.com/shareArticle?mini=true&url=\"+h+\"&title=&summary=&source=\",id:o,label:t.getLocalizedValue(r.playerLocKeys.sharing_linkedin),image:\"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzIgMzIiPjxzdHlsZT4uc3Qwe2Rpc3BsYXk6bm9uZTt9IC5zdDF7ZGlzcGxheTppbmxpbmU7fSAuc3Qye2ZpbGw6bm9uZTt9IC5zdDN7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxnIGlkPSJMYXllcl8xXzFfIiBjbGFzcz0ic3QwIj48ZyBpZD0iUmVzdF8zXyIgY2xhc3M9InN0MSI+PGcgaWQ9IlR3aXR0ZXJfM18iPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz48cGF0aCBjbGFzcz0ic3QzIiBkPSJNMjguNCA4LjZjLS45LjQtMS45LjctMi45LjggMS0uNiAxLjgtMS42IDIuMi0yLjgtMSAuNi0yLjEgMS0zLjIgMS4yLS45LTEtMi4yLTEuNi0zLjctMS42LTIuOCAwLTUgMi4zLTUgNSAwIC40IDAgLjguMSAxLjItNC4yLS4yLTcuOS0yLjItMTAuNC01LjMtLjQuOC0uNyAxLjctLjcgMi42IDAgMS44IDEgMy4zIDIuMyA0LjItLjggMC0yLjItLjMtMi4yLS42di4xYzAgMi40IDEuNiA0LjUgMy45IDUtLjQuMS0uOS4yLTEuNC4yLS4zIDAtLjcgMC0xLS4xLjYgMiAyLjUgMy41IDQuNyAzLjUtMS41IDEuMi0zLjcgMi02LjEgMi0uNCAwLS44IDAtMS4yLS4xIDIuMiAxLjQgNC45IDIuMyA3LjcgMi4zIDkuMyAwIDE0LjQtNy43IDE0LjQtMTQuNHYtLjdjMS0uNiAxLjgtMS41IDIuNS0yLjV6Ii8+PC9nPjwvZz48ZyBpZD0iRmFjZWJvb2tfN18iIGNsYXNzPSJzdDEiPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz48cGF0aCBpZD0iZl82XyIgY2xhc3M9InN0MyIgZD0iTTE4IDI2di05aDIuNmwuNS00SDE4di0xLjljMC0xLS4yLTIuMSAxLjMtMi4xSDIxVjYuMVMxOS43IDYgMTguNCA2QzE1LjcgNiAxNCA3LjcgMTQgMTAuN1YxM2gtM3Y0aDN2OWg0eiIvPjwvZz48L2c+PGcgaWQ9IkxheWVyXzMiIGNsYXNzPSJzdDAiPjxnIGlkPSJTa3lwZV83XyIgY2xhc3M9InN0MSI+PHBhdGggY2xhc3M9InN0MiIgZD0iTTAgMGgzMnYzMkgweiIvPjxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik0yNS4yIDE3LjZjLjEtLjUuMS0xLjEuMS0xLjYgMC01LjItNC4yLTkuNC05LjQtOS40LS42IDAtMS4xIDAtMS42LjEtLjgtLjUtMS44LS43LTIuOC0uNy0zLjEgMC01LjYgMi41LTUuNiA1LjYgMCAxIC4zIDIgLjcgMi44LS4xLjUtLjEgMS4xLS4xIDEuNiAwIDUuMiA0LjIgOS40IDkuNCA5LjQuNiAwIDEuMSAwIDEuNi0uMS44LjUgMS44LjcgMi44LjcgMy4xIDAgNS42LTIuNSA1LjYtNS42IDAtMS4xLS4yLTItLjctMi44ek0xNiAyMS43Yy0zLjIgMC00LjctMS42LTQuNy0yLjggMC0uNi41LTEgMS4xLTEgMS40IDAgMSAyIDMuNiAyIDEuMyAwIDIuMS0uOCAyLjEtMS41IDAtLjQtLjMtLjktMS4xLTEuMWwtMi45LS43Yy0yLjMtLjYtMi43LTEuOS0yLjctMyAwLTIuNCAyLjItMy4zIDQuNC0zLjMgMiAwIDQuMyAxLjEgNC4zIDIuNiAwIC42LS41IDEtMS4xIDEtMS4yIDAtMS0xLjYtMy4zLTEuNi0xLjIgMC0xLjguNS0xLjggMS4zcy45IDEgMS43IDEuMmwyLjEuNWMyLjMuNSAyLjkgMS45IDIuOSAzLjIgMCAxLjctMS42IDMuMi00LjYgMy4yeiIvPjwvZz48L2c+PHBhdGggY2xhc3M9InN0MyIgZD0iTTI5LjYgMEgyLjRDMS4xIDAgMCAxIDAgMi4zdjI3LjRDMCAzMSAxLjEgMzIgMi40IDMyaDI3LjNjMS4zIDAgMi40LTEgMi40LTIuM1YyLjNDMzIgMSAzMC45IDAgMjkuNiAwek05LjUgMjcuM0g0LjdWMTJoNC43djE1LjN6TTcuMSA5LjljLTEuNSAwLTIuOC0xLjItMi44LTIuOCAwLTEuNSAxLjItMi44IDIuOC0yLjggMS41IDAgMi44IDEuMiAyLjggMi44IDAgMS42LTEuMyAyLjgtMi44IDIuOHptMjAuMiAxNy40aC00Ljd2LTcuNGMwLTEuOCAwLTQtMi41LTRzLTIuOCAxLjktMi44IDMuOXY3LjZoLTQuN1YxMkgxN3YyLjFoLjFjLjYtMS4yIDIuMi0yLjUgNC41LTIuNSA0LjggMCA1LjcgMy4yIDUuNyA3LjN2OC40eiIvPjwvc3ZnPg==\"});break;case u.shareTypes.mail:s.push({url:\"mailto:?subject=Check out this great video&body=\"+h,id:o,label:t.getLocalizedValue(r.playerLocKeys.sharing_mail),glyph:\"glyph-mail\"});break;case u.shareTypes.copy:s.push({url:h,id:o,label:t.getLocalizedValue(r.playerLocKeys.sharing_copy),glyph:\"glyph-copy\"})}return s},n}();t.SharingHelper=e});define(\"inview-helper\",[\"require\",\"exports\",\"htmlExtensions\",\"utility\",\"core-player\"],function(n,t,i,r,u){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.DocumentVisibility={msHidden:\"msvisibilitychange\",webkitHidden:\"webkitvisibilitychange\",mozHidden:\"mozvisibilitychange\",hidden:\"visibilitychange\"};var f=function(){function n(){var i=this,r;this.isAnyPlayerPlaying=!1;this.defaultInViewWidthFraction=.5;this.defaultInViewHeightFraction=.5;this.onDocumentVisibilityChanged=function(){n.isDocumentVisible()?i.triggerInViewPlay(!1):i.isAnyPlayerPlaying&&n.currentPlayer?n.currentPlayer.hasUserInteracted()&&n.currentPlayer.hasUserIntiatedPause()?n.currentPlayer.pause():i.clearCurrentPlayer():i.triggerInViewPlay(!1)};this.onInViewPlayHandler=function(){setTimeout(i.triggerInViewPlay(!1),500)};n.players=[];n.currentPlayer=null;for(r in t.DocumentVisibility)if(r in document){n.hidden=r;n.visibilityChange=t.DocumentVisibility[r];break}this.bindInViewEvents()}return n.Instance=function(){return(this._instance===null||this._instance===undefined)&&(this._instance=new n),this._instance},n.prototype.clearCurrentPlayer=function(){n.currentPlayer&&n.currentPlayer.pause();n.currentPlayer=null;this.isAnyPlayerPlaying=!1},n.prototype.setCurrentPlayer=function(t){t&&n.currentPlayer!==t&&(n.currentPlayer=t,this.isAnyPlayerPlaying=!0)},n.prototype.insertByPosition=function(t){var u=this.getPlayerPosition(t.getPlayerContainer()),i,r;if(!u){n.players.push(t);return}for(i=0;i<n.players.length;){if(n.players[i].getPlayerId()===t.getPlayerId())return;if(r=this.getPlayerPosition(n.players[i].getPlayerContainer()),r&&u.top<r.top)break;i++}n.players.splice(i,0,t)},n.prototype.registerPlayer=function(t){t&&(this.insertByPosition(t),n.currentPlayer||this.triggerInViewPlay(!0))},n.prototype.disposePlayer=function(t){if(t){n.currentPlayer===t&&this.clearCurrentPlayer();var i=n.players.indexOf(t);i>=0&&n.players.splice(i,1);n.players.length===0&&this.dispose()}},n.prototype.dispose=function(){n.players=[];n.currentPlayer=null},n.isDocumentVisible=function(){var n=document[this.hidden];return!n},n.prototype.triggerInViewPlay=function(t){var f,s,e,i,o,r;if(n.isDocumentVisible()&&(f=!1,n.currentPlayer&&this.isAnyPlayerPlaying&&(f=this.isPlayerInView(n.currentPlayer),f||(n.currentPlayer.hasUserInteracted()&&n.currentPlayer.hasUserIntiatedPause()?n.currentPlayer.pause():this.clearCurrentPlayer())),!this.isAnyPlayerPlaying||!n.currentPlayer||!(n.currentPlayer.hasUserInteracted()||f))&&(s=!1,n.players&&n.players.length))for(e=0;e<n.players.length;e++)if(i=n.players[e],n.currentPlayer!==i)if(!t&&i.hasUserInteracted()&&i.hasUserIntiatedPause())i.hasUserInteracted()&&i.hasUserIntiatedPause()&&this.handledUserInteractedPlay(i);else if(i.hasUserInteracted()&&i.hasUserIntiatedPause())this.handledUserInteractedPlay(i);else{if(o=this.isPlayerInView(i),r=i.getCurrentPlayState(),!o&&r===u.PlayerStates.Playing){i.pause();this.clearCurrentPlayer();break}if(o&&(i.isPaused()||r===u.PlayerStates.Paused)&&r!==u.PlayerStates.Ended){i.play();this.setCurrentPlayer(i);s=!0;break}if(o&&r===u.PlayerStates.Playing){this.setCurrentPlayer(i);break}}},n.prototype.handledUserInteractedPlay=function(n){if(n){var t=this.isPlayerInView(n);t||n.getCurrentPlayState()!==u.PlayerStates.Playing||(n.pause(),this.clearCurrentPlayer())}},n.prototype.isPlayerInView=function(n){var i=r.getWindowWidth(),u=r.getWindowHeight(),t,f,e,o,s;return!i||!u||i<=0||u<=0?!1:(t=this.getPlayerPosition(n.getPlayerContainer()),!t||!t.width||!t.height)?!1:(f=this.defaultInViewWidthFraction,e=this.defaultInViewHeightFraction,n.getPlayerData().options&&(n.getPlayerData().options.inViewWidthFraction&&(f=n.getPlayerData().options.inViewWidthFraction),n.getPlayerData().options.inViewHeightFraction&&(e=n.getPlayerData().options.inViewHeightFraction)),o=t.width*Math.abs(f),s=t.height*Math.abs(e),this.isInView(i,u,t,o,s))},n.prototype.isInView=function(n,t,i,r,u){var f=i.bottom<0||i.top>t?0:Math.min(t,i.bottom)-Math.max(i.top,0),e=i.right<0||i.left>n?0:Math.min(n,i.right)-Math.max(0,i.left);return f&&f>=u&&e&&e>=r},n.prototype.listenForInviewThresholdChanges=function(n,t,r){if(n&&t&&!(t<0)&&!(t>1)){this.inviewChange={enter:!0,exit:!1};this.inviewContainer=n;this.inviewThreshold=t;this.inviewCallback=r;var u=this;i.addEvents(window,\"scroll\",function(){u.checkInviewThreshold()})}},n.prototype.checkInviewThreshold=function(){this.inviewChange.enter===!0?this.inviewVerticalThreshold()&&this.inviewHorizontalThreshold()||(this.inviewChange.enter=!1,this.inviewChange.exit=!0,this.inviewCallback(\"InviewExit\")):this.inviewChange.exit===!0&&this.inviewVerticalThreshold()&&this.inviewHorizontalThreshold()&&(this.inviewChange.enter=!0,this.inviewChange.exit=!1,this.inviewCallback(\"InviewEnter\"))},n.prototype.inviewVerticalThreshold=function(){var t=r.getWindowHeight(),n=this.getPlayerPosition(this.inviewContainer),u=n.top<0?n.top*-1:n.top,f=n.bottom<0?n.bottom*-1:n.bottom,i=this.inviewThreshold*n.height;return!n||!n.height?!1:n.bottom<0||n.top>t?!1:n.top<0&&u<i||n.bottom>t&&f-t<i||n.top>=0&&n.bottom<=t?!0:!1},n.prototype.inviewHorizontalThreshold=function(){var t=r.getWindowWidth(),n=this.getPlayerPosition(this.inviewContainer),u=n.left<0?n.left*-1:n.left,f=n.right<0?n.right*-1:n.right,i=this.inviewThreshold*n.width;return!n||!n.width?!1:n.right<0||n.left>t?!1:n.left<0&&u<i||n.right>=t&&f-t<i||n.left>=0&&n.right<=t?!0:!1},n.prototype.getPlayerPosition=function(n){if(!n||n.childElementCount===0)return null;var i=n.firstElementChild,t=i.getBoundingClientRect();return!t||!t.width||!t.height?null:t},n.prototype.bindInViewEvents=function(){i.addEvents(document,n.visibilityChange,this.onDocumentVisibilityChanged);i.addEvents(window,\"scroll\",this.onInViewPlayHandler);i.addEvents(window,\"resize\",this.onInViewPlayHandler)},n.hidden=\"hidden\",n.visibilityChange=\"visibilitychange\",n}();t.InviewManager=f});define(\"core-player\",[\"require\",\"exports\",\"video-controls\",\"video-closed-captions\",\"video-closed-captions-settings\",\"utility\",\"htmlExtensions\",\"stringExtensions\",\"player-data-interfaces\",\"player-options\",\"html5-video-wrapper\",\"amp-wrapper\",\"has-video-wrapper\",\"hls-video-wrapper\",\"native-video-wrapper\",\"environment\",\"stopwatch\",\"player-utility\",\"player-constants\",\"jsll-reporter\",\"localization-helper\",\"player-config\",\"sharing-helper\",\"player-constants\",\"interactive-triggers-helper\",\"screen-manager-helper\",\"age-gate-helper\",\"inview-helper\",\"video-shim-data-fetcher\",\"context-menu\"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.PlayerStates={Init:\"init\",PlayerLoaded:\"playerLoaded\",Loading:\"loading\",Ready:\"ready\",Playing:\"playing\",Paused:\"paused\",Buffering:\"buffering\",Seeking:\"seeking\",Ended:\"ended\",Error:\"error\",Stopped:\"stopped\"};var ht={AudioTracks:\"audio-tracks\",ClosedCaption:\"close-caption\",ClosedCaptionSettings:\"cc-settings\",PlaybackSpeed:\"playback-speed\",Quality:\"quality\",Share:\"share\",Download:\"download\"},ct={PlayPause:\"play-pause\",MuteUnMute:\"mute-unMute\"},lt=[s.MediaQuality.HD,s.MediaQuality.HQ,s.MediaQuality.SD,s.MediaQuality.LO],at=function(){function n(i,r){var u=this;(this.videoComponent=i,this.videoElementIsFocus=!1,this.canPlay=!1,this.isFallbackVideo=!1,this.playerData={},this.wrapperLoadCalled=!1,this.errorMessageDisplayed=!1,this.isInFullscreen=!1,this.isAudioTracksDoneSwitching=!0,this.videoMetadata=null,this.playerOptions=null,this.isBuffering=!1,this.isWindowClosing=!1,this.isFirstTimePlayed=!0,this.showcontrolFirstTime=!0,this.isVideoMuted=!1,this.commonPlayerImpressionReported=!1,this.areMediaEventsBound=!1,this.areControlsInitialized=!1,this.areControlsVisible=!1,this.seekFrom=null,this.volumeStart=null,this.playerTechnology=null,this.nextCheckpoint=null,this.stopwatchBuffering=new w.Stopwatch,this.stopwatchLoading=new w.Stopwatch,this.stopwatchPlaying=new w.Stopwatch,this.currentVideoStopwatchPlaying=new w.Stopwatch,this.firstByteTimer=null,this.lastVolume=nt.PlayerConfig.defaultVolume,this.currentVideoFile=null,this.reporters=[],this.playOnDataLoad=!1,this.startTimeOnDataLoad=0,this.locReady=!1,this.playerId=null,this.playTriggered=!1,this.playPauseTrigger=!1,this.hasProgressive=!1,this.hasAdaptive=!1,this.useAdaptive=!1,this.hasHLS=!1,this.hasInteractivity=!1,this.isVideoPlayerSupported=!0,this.hasDataError=!1,this.dataErrorShown=!1,this.playerEventCallbacks=[],this.isContentStartReported=!1,this.showEndImage=!1,this.wasUserInteracted=!1,this.wasUserIntiatedPause=!1,this.timeRemainingCheckpointReached=!1,this.inviewManager=null,this.registedInviewManagerAlready=!1,this.showingPosterImage=!1,this.setAutoPlayNeeded=!1,this.playerContainerEventHandler=function(n){switch(n.type){case\"contextmenu\":if(n.preventDefault(),!window.storeApi)switch(u.playerState){case t.PlayerStates.Ready:case t.PlayerStates.Playing:case t.PlayerStates.Paused:case t.PlayerStates.Ended:case t.PlayerStates.Stopped:u.setupCustomizeContextMenu();u.contextMenu.showMenu(n,u.playerContainer)}}},this.documentEventHandler=function(n){n=e.getEvent(n);switch(n.type){case\"click\":u.customizedContextMenu&&u.customizedContextMenu.setAttribute(\"aria-hidden\",\"true\")}},this.videoControlsContainerEventHandler=function(n){n=e.getEvent(n);switch(n.type){case\"contextmenu\":u.customizedContextMenu.setAttribute(\"aria-hidden\",\"true\");n.preventDefault();n.stopPropagation()}},this.playPauseButtonEventHandler=function(n){n=e.getEvent(n);switch(n.type){case\"mouseover\":case\"focus\":u.showElement(u.playPauseTooltip);p.Environment.isChrome&&(u.isPaused()?u.setAriaLabelForButton(u.playPauseButton):u.playPauseButton.setAttribute(\"aria-label\",u.locPause.toLowerCase()));break;case\"mouseout\":case\"blur\":u.hideElement(u.playPauseTooltip)}},this.triggerPlayEventHandler=function(n){n=e.getEvent(n);switch(n.type){case\"mouseover\":case\"focus\":u.showElement(u.triggerTooltip);break;case\"mouseout\":case\"blur\":u.hideElement(u.triggerTooltip)}},this.triggerContainerEventHandler=function(n){var t,i;n=e.getEvent(n);t=function(t){u.onVideoPlayerClicked(n);t&&u.videoControls&&u.videoControls.setFocusOnControlBar();u.playerOptions&&u.playerOptions.playFullScreen&&u.enterFullScreen();u.playerOptions&&u.playerOptions.showEndImage&&u.hideImage();u.updateScreenReaderElement(u.locPlaying,!0);n.preventDefault&&n.preventDefault();e.removeEvents(u.triggerContainer,\"click keyup\",u.triggerContainerEventHandler,!0)};switch(n.type){case\"click\":t(!1);break;case\"keyup\":i=f.getKeyCode(e.getEvent(n));i===32&&t(!1)}},this.triggerPlayPauseContainerEventHandler=function(n){var t,i;n=e.getEvent(n);t=function(){u.isPlayable()&&(u.setUserInteracted(!0),u.isPaused()?(u.play(),u.setUserIntiatedPause(!1),!u.playPauseButton||(e.removeClass(u.playPauseButton,\"glyph-play\"),e.addClass(u.playPauseButton,\"glyph-pause\"),p.Environment.isChrome?u.playPauseButton.setAttribute(\"aria-label\",u.locPlaying):u.playPauseButton.setAttribute(\"aria-label\",u.locPause),e.setText(u.playPauseTooltip,u.locPause),u.updateScreenReaderElement(u.locPlaying))):(u.pause(!0),u.setUserIntiatedPause(!0),!u.playPauseButton||(e.removeClass(u.playPauseButton,\"glyph-pause\"),e.addClass(u.playPauseButton,\"glyph-play\"),p.Environment.isChrome?u.playPauseButton.setAttribute(\"aria-label\",u.locPaused):u.setAriaLabelForButton(u.playPauseButton),e.setText(u.playPauseTooltip,u.locPlay),u.updateScreenReaderElement(u.locPaused))))};switch(n.type){case\"click\":t();break;case\"keydown\":i=f.getKeyCode(e.getEvent(n));i===32&&t()}},this.onResourcesLoaded=function(){if(b.PlayerUtility.createVideoPerfMarker(u.playerId,it.videoPerfMarkers.locReady),u.videoMetadata&&u.videoMetadata.geoFenced===!0){u.playerState=t.PlayerStates.Error;u.hideSpinner();u.playerOptions.showImageForVideoError===!0&&u.videoMetadata&&u.videoMetadata.posterframeUrl?(u.hideTrigger(),u.disablePlayPauseTrigger(),u.displayImage(u.videoMetadata.posterframeUrl)):u.displayErrorMessage({title:u.localizationHelper.getLocalizedValue(g.playerLocKeys.geolocation_error)});return}u.locPlay=u.localizationHelper.getLocalizedValue(g.playerLocKeys.play);u.locPlayVideo=u.localizationHelper.getLocalizedValue(g.playerLocKeys.play_video);u.locPause=u.localizationHelper.getLocalizedValue(g.playerLocKeys.pause);u.locMute=u.localizationHelper.getLocalizedValue(g.playerLocKeys.mute);u.locUnmute=u.localizationHelper.getLocalizedValue(g.playerLocKeys.unmute);u.locPlaying=u.localizationHelper.getLocalizedValue(g.playerLocKeys.playing);u.locPaused=u.localizationHelper.getLocalizedValue(g.playerLocKeys.paused);u.setSpinnerProperties();u.setTriggerProperties();u.locReady=!0;u.initializeAgeGating();var n=u.ageGateHelper.verifyAgeGate();n&&(u.hideTrigger(),u.hideSpinner());u.hasDataError&&!u.dataErrorShown&&(u.showDataError(),u.hasDataError=!1)},this.onMediaEvent=function(n){var t,i,r;if(!!n){if(e.customEvent(u.videoComponent,n.type,{bubbles:n.bubbles,cancelable:n.cancelable}),u.playerEventCallbacks&&u.playerEventCallbacks.length)for(t=0,i=u.playerEventCallbacks;t<i.length;t++)r=i[t],r&&r({name:n.type});switch(n.type.toLowerCase()){case\"canplay\":case\"canplaythrough\":u.onVideoCanPlay(n);break;case\"error\":u.onVideoError(n);break;case\"play\":u.onVideoPlay(n);break;case\"pause\":u.onVideoPause(n);break;case\"seeking\":u.onVideoSeeking(n);break;case\"seeked\":u.onVideoSeeked(n);break;case\"waiting\":u.onVideoWaiting(n);break;case\"loadedmetadata\":u.onVideoMetadataLoaded();break;case\"loadeddata\":u.onVideoLoadedData();break;case\"timeupdate\":u.onVideoTimeUpdate();break;case\"ended\":u.onVideoEnded();break;case\"playing\":u.onVideoPlaying();break;case\"volumechange\":u.onVideoVolumeChange(n)}}},this.onVideoPlaying=function(){u.updateState(t.PlayerStates.Playing);u.checkReplacedVideoTag();!u.videoControls||!u.videoWrapper||(u.videoControls.setLive(u.isLive()),u.videoControls.setPlayPosition(u.videoWrapper.getPlayPosition()),u.videoControls.resetSlidersWorkaround());u.setNextCheckpoint();u.reportContentStart();p.Environment.isAndroid&&(u.logMessage(\"re-invoking play for Android only\"),u.videoWrapper.play());u.playerOptions&&u.playerOptions.inviewPlay&&(u.registedInviewManagerAlready||(u.inviewManager||(u.inviewManager=et.InviewManager.Instance()),u.inviewManager&&(u.inviewManager.registerPlayer(u),u.registedInviewManagerAlready=!0)))},this.onVideoWrapperLoaded=function(){u.checkReplacedVideoTag();b.PlayerUtility.createVideoPerfMarker(u.playerId,it.videoPerfMarkers.wrapperReady);u.loadVideo();u.showingPosterImage?(u.posterImageUrl?u.videoWrapper.setPosterFrame(u.posterImageUrl):u.videoMetadata&&u.videoMetadata.posterframeUrl?u.videoWrapper.setPosterFrame(u.videoMetadata.posterframeUrl):console.log(\"no poster image passed in parameter or video metadata\"),u.showingPosterImage=!1):u.playerOptions.autoplay&&u.displayPreRollAndPlayContent()},this.onBeforeUnload=function(){u.isWindowClosing=!0},this.onWindowResize=function(){u.closedCaptions&&(u.closedCaptions.resetCaptions(),u.closedCaptions.updateCaptions(u.getPlayPosition().currentTime))},this.onVideoWrapperLoadFailed=function(){u.playerOptions&&u.playerOptions.showImageForVideoError===!0&&u.videoMetadata&&u.videoMetadata.posterframeUrl?(u.hideTrigger(),u.disablePlayPauseTrigger(),u.displayImage(u.videoMetadata.posterframeUrl)):u.displayErrorMessage({title:u.localizationHelper.getLocalizedValue(g.playerLocKeys.standarderror)})},this.onMouseEvent=function(n){if(n=e.getEvent(n),n.type===\"mousemove\")u.showcontrolFirstTime=!1,!u.playPauseTrigger&&u.videoControls&&u.showControlsBasedOnState(),u.playPauseTrigger&&u.showPlayPauseTrigger(!0);else if(n.type===\"mouseout\"){u.showcontrolFirstTime=!1;u.playPauseTrigger&&u.showPlayPauseTrigger(!1);for(var t=n.toElement||n.relatedTarget;t&&t.parentNode&&t.parentNode!==window;){if(t.parentNode===u||t===u){e.preventDefault(n);return}t=t.parentNode}}},this.onKeyboardEvent=function(n){var t=f.getKeyCode(n);switch(t){case 9:u.showControlsBasedOnState()}},this.onVideoMetadataLoaded=function(){u.setupPlayerMenus()},this.onVideoLoadedData=function(){u.updateState(t.PlayerStates.Ready);var n=u.getPlayPosition();!u.videoControls||(u.videoControls.setLive(u.isLive()),u.videoControls.setPlayPosition(n));u.startTimeOnDataLoad&&u.startTimeOnDataLoad>n.startTime&&u.startTimeOnDataLoad<n.endTime&&(u.seek(u.startTimeOnDataLoad),u.startTimeOnDataLoad=null);u.playOnDataLoad&&(u.play(),u.playOnDataLoad=!1)},this.onVideoTimeUpdate=function(){var n,i,r,f,e;u.videoWrapper&&(n=u.getPlayPosition(),u.videoControls&&u.videoControls.setPlayPosition(n),n.startTime!==n.endTime)&&(u.closedCaptions&&u.closedCaptions.updateCaptions(n.currentTime),u.interactiveTriggersHelper&&u.interactiveTriggersHelper.updateCurrentOverlay(n.currentTime),u.isPaused()||(u.playerState===t.PlayerStates.Buffering&&u.updateState(t.PlayerStates.Playing),i=n.endTime-n.startTime,u.checkTimeRemainingCheckpoint(i-n.currentTime),r=u.nextCheckpoint&&i>0&&Math.round(n.currentTime*100)/100>=Math.round(i*u.nextCheckpoint/1)/100,f=u.stopwatchPlaying.hasReached(nt.PlayerConfig.eventCheckpointInterval),r?(e=u.nextCheckpoint,u.reportEvent(k.PlayerEvents.ContentCheckpoint,{checkpoint:e,checkpointType:\"quartile\"}),u.setNextCheckpoint(),u.stopwatchBuffering.reset()):f&&u.reportEvent(k.PlayerEvents.ContentCheckpoint,{checkpointType:\"interval\"})))},this.onVideoCanPlay=function(){u.canPlay=!0;u.videoControls&&u.videoControls.updatePlayPauseState()},this.onVideoError=function(){var i,r,n,f;if(!u.isWindowClosing&&u.playerState!==t.PlayerStates.Init&&u.playerState!==t.PlayerStates.Error)if(i=u.videoWrapper.getError(),i&&i.errorCode){if(i.errorCode===s.VideoErrorCodes.MediaErrorSourceNotSupported&&(r=u.getFallbackVideoFile(),u.currentVideoFile&&u.currentVideoFile.mediaType!==s.MediaTypes.MP4&&r&&r.mediaType===s.MediaTypes.MP4)){u.reportEvent(k.PlayerEvents.PlayerError,{errorType:k.PlayerEvents.SourceErrorAttemptRecovery,errorDesc:\"Playback using media type \"+u.currentVideoFile.mediaType+\" failed. Attempting to fallback to MP4 source.\"});u.setVideoSrc(r);u.playerOptions.autoplay&&(u.playOnDataLoad=!0,u.play());u.isFallbackVideo=!0;return}if(u.playerOptions&&u.playerOptions.showImageForVideoError&&u.videoMetadata&&u.videoMetadata.posterframeUrl){u.hideControlPanel();u.videoControls=null;u.stopMedia();u.hideTrigger();u.disablePlayPauseTrigger();u.displayImage(u.videoMetadata.posterframeUrl);return}u.updateState(t.PlayerStates.Error);n=void 0;switch(i.errorCode){case s.VideoErrorCodes.MediaErrorAborted:n=u.localizationHelper.getLocalizedValue(g.playerLocKeys.media_err_aborted);break;case s.VideoErrorCodes.MediaErrorNetwork:n=u.localizationHelper.getLocalizedValue(g.playerLocKeys.media_err_network);break;case s.VideoErrorCodes.MediaErrorDecode:n=u.localizationHelper.getLocalizedValue(g.playerLocKeys.media_err_decode);break;case s.VideoErrorCodes.MediaErrorSourceNotSupported:n=u.localizationHelper.getLocalizedValue(g.playerLocKeys.media_err_src_not_supported);break;case s.VideoErrorCodes.AmpEncryptError:n=u.localizationHelper.getLocalizedValue(g.playerLocKeys.media_err_amp_encrypt);break;case s.VideoErrorCodes.AmpPlayerMismatch:n=u.localizationHelper.getLocalizedValue(g.playerLocKeys.media_err_amp_player_mismatch);break;default:n=u.localizationHelper.getLocalizedValue(g.playerLocKeys.media_err_unknown_error)}n=o.format(u.localizationHelper.getLocalizedValue(g.playerLocKeys.playbackerror),n);f=b.PlayerUtility.formatContentErrorMessage(i.errorCode,n,i.message);u.stopMedia(n,f)}else u.stopMedia()},this.onErrorCallback=function(n,t){u.reportEvent(k.PlayerEvents.PlayerError,{errorType:n,errorDesc:t})},this.onVideoPlay=function(){u.hideTrigger();u.playTriggered?u.reportEvent(k.PlayerEvents.Resume):(u.playTriggered=!0,b.PlayerUtility.createVideoPerfMarker(u.playerId,it.videoPerfMarkers.playTriggered));u.firstByteTimer&&window.clearTimeout(u.firstByteTimer);var n=p.Environment.isMobile?nt.PlayerConfig.firstByteTimeoutVideoMobile:nt.PlayerConfig.firstByteTimeoutVideoDesktop;n>0&&(u.firstByteTimer=setTimeout(function(){if(!u.getBufferedDuration()&&u.playerState===t.PlayerStates.Buffering){if(u.logMessage(\"Buffering stuck detected\"),u.updateState(t.PlayerStates.Error),u.playerOptions&&u.playerOptions.showImageForVideoError&&u.videoMetadata&&u.videoMetadata.posterframeUrl){u.hideControlPanel();u.videoControls=null;u.stopMedia();u.hideTrigger();u.disablePlayPauseTrigger();u.displayImage(u.videoMetadata.posterframeUrl);return}u.stopMedia(u.localizationHelper.getLocalizedValue(g.playerLocKeys.standarderror),b.PlayerUtility.formatContentErrorMessage(s.VideoErrorCodes.BufferingFirstByteTimeout,\"Time out waiting for first byte.\"))}},n))},this.onVideoPause=function(){u.videoWrapper&&u.videoWrapper.isSeeking()||u.playerState===t.PlayerStates.Ended||u.updateState(t.PlayerStates.Paused)},this.onVideoSeeking=function(){u.playerState!==t.PlayerStates.Ended&&u.videoWrapper&&u.videoWrapper.isSeeking()?(u.nextCheckpoint=null,u.seekFrom===null&&(u.seekFrom=u.getPlayPosition().currentTime),u.updateState(t.PlayerStates.Seeking)):u.seekFrom=null},this.onVideoSeeked=function(){var n=u.getPlayPosition().currentTime;u.playerState!==t.PlayerStates.Ended&&u.videoWrapper&&!u.videoWrapper.isSeeking()&&u.seekFrom!==null&&u.seekFrom!==n&&(u.setNextCheckpoint(),u.reportEvent(k.PlayerEvents.Seek,{seekFrom:u.seekFrom,seekTo:n}),u.seekFrom=null,u.updateState(u.isPaused()?t.PlayerStates.Paused:t.PlayerStates.Playing))},this.onVideoWaiting=function(){u.updateState(t.PlayerStates.Buffering)},this.onVideoVolumeChange=function(n){n&&n.target&&(u.videoWrapper.isMuted()?u.isVideoMuted=!0:u.isVideoMuted&&(u.isVideoMuted=!1,p.Environment.isMobile&&u.videoWrapper.unmute()));!u.videoControls||u.videoControls.updateVolumeState()},this.onCcPresetFocus=function(n){var r,i,t;if(u.videoControls&&u.closedCaptions&&u.closedCaptionsSettings){if(u.closedCaptions.getCurrentCcLanguage()||u.closedCaptions.showSampleCaptions(),r=e.getEventTargetOrSrcElement(n),i=r.getAttribute(\"data-info\"),i===\"reset\")u.closedCaptionsSettings.reset();else{if(t=i.split(\":\"),!t&&t.length<0)return;u.closedCaptionsSettings.setSetting(t[0],t[1],!1)}u.closedCaptions.resetCaptions();u.closedCaptions.updateCaptions(u.getPlayPosition().currentTime)}},this.onCcPresetBlur=function(){var r,t,i,n;if(u.videoControls&&u.closedCaptions&&u.closedCaptionsSettings){if(u.closedCaptions.getCurrentCcLanguage()||u.closedCaptions.setCcLanguage(\"off\",null),r=e.selectFirstElement(\"#\"+u.ccSettingsMenuId,u.videoControlsContainer),t=e.selectFirstElement(\".glyph-check-mark\",r),t!=null)if(i=t.getAttribute(\"data-info\"),i===\"reset\")u.closedCaptionsSettings.reset();else{if(n=i.split(\":\"),!n&&n.length<0)return;u.closedCaptionsSettings.setSetting(n[0],n[1])}else u.closedCaptionsSettings.reset(!1);u.closedCaptions.resetCaptions();u.closedCaptions.updateCaptions(u.getPlayPosition().currentTime)}},this.onVideoPlayerClicked=function(){u.playerOptions.useAMPVersion2&&u.isFallbackVideo||(u.playerOptions&&u.playerOptions.lazyLoad&&!u.wrapperLoadCalled?(u.playOnDataLoad=!1,u.playerOptions.adsEnabled?(u.playerOptions.adsEnabled=!1,u.playerOptions.autoplay=!1):u.playerOptions.autoplay=!0,u.hasInteractivity?u.loadVideoWrapper(!1):u.loadVideoWrapper(u.playerOptions.autoplay),u.isFirstTimePlayed&&u.displayPreRollAndPlayContent()):u.isFirstTimePlayed?u.displayPreRollAndPlayContent():u.isPaused()?(u.play(),u.setUserInteracted(!0),u.setUserIntiatedPause(!1)):(u.pause(!0),u.setUserInteracted(!0),u.setUserIntiatedPause(!0)),u.hideTrigger(),u.showSpinnerBasedOnState(),u.videoControls&&u.isInFullscreen&&u.videoControls.setFocusOnControlBar())},this.onVideoEnded=function(){u.updateState(t.PlayerStates.Ended);u.reportEvent(k.PlayerEvents.ContentComplete);p.Environment.useNativeControls||u.stop()},this.onFullscreenChanged=function(){var t=n.getElementInFullScreen(),i=u.getFullscreenContainer();t?i!==t||u.isInFullscreen||u.onFullscreenEnter():u.isInFullscreen&&u.onFullscreenExit()},this.onIOSFullscreenEnter=function(){u.play();u.onFullscreenEnter()},this.onIOSFullscreenExit=function(){u.onFullscreenExit()},this.onFullscreenError=function(){u.isInFullscreen=!1},this.onSetAudioCallback=function(){u.isAudioTracksDoneSwitching=!0},i)&&(this.isVideoPlayerSupported=p.Environment.isVideoPlayerSupported(),this.createComponents(r),this.load(r))}return n.prototype.createComponents=function(t){var u,f,s,h,i;this.playPauseTrigger=t&&t.options&&t.options.playPauseTrigger;this.showEndImage=t&&t.options&&t.options.showEndImage;this.playerContainer=e.selectFirstElement(n.playerContainerSelector,this.videoComponent);var r=t&&t.options&&t.options.maskLevel?t.options.maskLevel:\"40\",c=t&&t.options&&t.options.theme?t.options.theme:\"light\",l=t&&t.options&&t.options.trigger;this.setAutoPlayNeeded=t&&t.options&&t.options.autoplay&&(p.Environment.isChrome||p.Environment.isMobile);u=t&&t.options&&t.options.controls&&this.isVideoPlayerSupported&&!this.playPauseTrigger&&!p.Environment.useNativeControls;this.playerContainer||(f='<div class=\"f-core-player\" tabindex=\"-1\">\\n    '+(this.setAutoPlayNeeded?'<video class=\"f-video-player\" preload=\"metadata\" muted autoplay playsinline tabindex=\"-1\"><\\/video>':'<video class=\"f-video-player\" preload=\"metadata\" tabindex=\"-1\"><\\/video>')+\"\\n    \"+(l?'<div class=\"f-video-trigger\" aria-hidden=\"true\" >\\n                        <div class=\"f-mask-'+r+\" theme-\"+c+'\" >\\n                            <button class=\"c-action-trigger f-play-trigger c-glyph glyph-play\" aria-label=\"Play\" role=\"button\">\\n                            <\\/button>\\n                            <span aria-hidden=\"true\" role=\"presentation\">Play<\\/span>\\n                        <\\/div>\\n                    <\\/div>':\"\")+'    \\n    <div class=\"f-customize-context-menu-container\"><\\/div> \\n    <div class=\"f-video-cc-overlay\" aria-hidden=\"true\"><\\/div>\\n    <div class=\"f-screen-reader\" aria-live=\"polite\"><\\/div>\\n    '+(u?'<div class=\"f-video-controls\" dir=\"ltr\" aria-hidden=\"true\" role=\"group\"><\\/div>':\"\")+'\\n    <div aria-hidden=\"true\" class=\"c-progress f-indeterminate-local f-progress-large\" role=\"progressbar\" tabindex=\"0\">\\n        <span><\\/span>\\n        <span><\\/span>\\n        <span><\\/span>\\n        <span><\\/span>\\n        <span><\\/span>\\n    <\\/div>\\n    '+(this.playPauseTrigger?'<div role=\"presentation\" class=\"f-play-pause-trigger\">\\n            <button type=\"button\" class=\"f-play-pause c-action-trigger c-glyph glyph-pause f-play-pause-hide\" aria-label=\"pause\">\\n            <\\/button>\\n            <span aria-hidden=\"true\" role=\"presentation\">Pause<\\/span>\\n         <\\/div>':\"\")+\"\\n<\\/div>\",this.videoComponent.innerHTML=f,this.playerContainer=e.selectFirstElement(n.playerContainerSelector,this.videoComponent));this.checkReplacedVideoTag();this.spinner=e.selectFirstElement(\".c-progress\",this.playerContainer);this.triggerContainer=e.selectFirstElement(\".f-video-trigger\",this.videoComponent);this.triggerPlayPauseContainer=e.selectFirstElement(\".f-play-pause-trigger\",this.videoComponent);this.screenReaderElement=e.selectFirstElement(\".f-screen-reader\",this.videoComponent);this.customizedContextMenuContainer=e.selectFirstElement(\".f-customize-context-menu-container\",this.videoComponent);e.addEvents(this.playerContainer,\"contextmenu\",this.playerContainerEventHandler,!0);e.addEvents(document,\"click\",this.documentEventHandler,!0);!this.triggerContainer||(s=e.selectFirstElement(\"div\",this.triggerContainer),h=o.format(\"background-color: rgba(0,0,0,{0})\",Number(r)/100),s.setAttribute(\"style\",h),this.trigger=e.selectFirstElement(\".c-action-trigger\",this.triggerContainer),this.triggerTooltip=e.selectFirstElement(\"span\",this.triggerContainer),e.addEvents(this.trigger,\"mouseover mouseout focus blur\",this.triggerPlayEventHandler,!0),t&&t.options&&!t.options.autoplay&&(this.showTrigger(),this.hideControlPanel(),this.hideSpinner()));this.triggerPlayPauseContainer&&t&&t.options&&(this.playPauseButton=e.selectFirstElementT(\".f-play-pause\",this.triggerPlayPauseContainer),this.playPauseButton.setAttribute(\"aria-label\",\"pause\"),this.playPauseTooltip=e.selectFirstElement(\"span\",this.triggerPlayPauseContainer),e.addEvents(this.playPauseButton,\"mouseover mouseout focus blur\",this.playPauseButtonEventHandler,!0),e.addEvents(this.triggerPlayPauseContainer,\"click keydow\",this.triggerPlayPauseContainerEventHandler,!0));p.Environment.isInIframe&&(i=document.getElementsByTagName(\"body\"),i&&i[0].setAttribute(\"tabindex\",\"-1\"))},n.prototype.initializeLocalization=function(){b.PlayerUtility.createVideoPerfMarker(this.playerId,it.videoPerfMarkers.locLoadStart);this.localizationHelper?this.onResourcesLoaded():(this.playerOptions.market||(this.playerOptions.market=this.videoComponent.getAttribute(\"data-market\")),this.localizationHelper=new g.LocalizationHelper(this.playerOptions.market,this.playerOptions.resourceHost,this.playerOptions.resourceHash,this.onErrorCallback),this.localizationHelper.loadResources(this.onResourcesLoaded))},n.prototype.initializeAgeGating=function(){var n=this;this.ageGateHelper=new ft.AgeGateHelper(this.playerContainer,this,this.localizationHelper,function(){n.finishPlayerLoad()})},n.prototype.initializeReporting=function(n){if(n&&n.options&&n.options.reporting&&n.options.reporting.enabled&&this.reporters.length<1&&(n.options.reporting.jsll&&this.reporters.push(new d.JsllReporter(this.videoComponent,n.options.jsllPostMessage)),n&&n.options&&n.options.inviewThreshold&&(this.inviewManager||(this.inviewManager=et.InviewManager.Instance()),this.inviewManager))){var t=this;this.inviewManager.listenForInviewThresholdChanges(this.playerContainer,n.options.inviewThreshold,function(n){t.reportEvent(n)})}},n.prototype.getPlayerId=function(){return this.playerId||this.videoComponent.id},n.prototype.getPlayerData=function(){return this.playerData},n.prototype.getPlayerContainer=function(){return this.playerContainer},n.prototype.hasUserInteracted=function(){return this.wasUserInteracted},n.prototype.setUserInteracted=function(n){this.wasUserInteracted=n},n.prototype.hasUserIntiatedPause=function(){return this.wasUserIntiatedPause},n.prototype.setAutoPlay=function(){!!this.videoWrapper&&this.wrapperLoadCalled&&this.videoWrapper.setAutoPlay()},n.prototype.setUserIntiatedPause=function(n){this.wasUserIntiatedPause=n},n.prototype.getCurrentPlayState=function(){return this.playerState},n.prototype.load=function(n){if(n){this.playerData=n;this.currentVideoFile=null;this.playerId=this.videoComponent.getAttribute(\"id\");this.updateState(t.PlayerStates.Init);this.hideErrorMessage();this.videoMetadata=n.metadata;this.playerOptions=n.options||new h.PlayerOptions;this.screenManagerHelper=new ut.ScreenManagerHelper;this.startTimeOnDataLoad=this.playerOptions.startTime;(this.playerOptions.autoplay||this.playerOptions.lazyLoad&&!this.playerOptions.trigger)&&(this.playerOptions.lazyLoad=!1);try{this.initializeLocalization();this.initializeReporting(n)}catch(i){this.reportEvent(k.PlayerEvents.PlayerError,{errorType:\"initializeError\",errorDesc:\"InitializeError with loc, reporting, age-gating : \"+i.message})}if(!this.videoMetadata||!this.videoMetadata.videoFiles||!this.videoMetadata.videoFiles.length){this.hasDataError=!0;this.locReady&&this.showDataError();return}}},n.prototype.finishPlayerLoad=function(){var n=this.ageGateHelper.doesUserPassAgeGate(),i=!1;if(this.ageGateHelper.didUserSubmitAge()&&(this.reportEvent(k.PlayerEvents.AgeGateSubmitClick,{ageGatePassed:n}),this.ageGateHelper.resetAgeGateSubmit(),i=!0),!n){this.displayErrorMessage({title:this.localizationHelper.getLocalizedValue(g.playerLocKeys.agegate_fail)});return}try{if(!this.triggerPlayPauseContainer||this.playerData.options.autoplay||!this.playPauseButton||(e.removeClass(this.playPauseButton,\"glyph-pause\"),e.addClass(this.playPauseButton,\"glyph-play\"),this.setAriaLabelForButton(this.playPauseButton),e.setText(this.playPauseTooltip,this.locPlay)),this.contextMenu=new st.ContextMenu(this.customizedContextMenuContainer,this),this.initializeVideoControls(),!this.isVideoPlayerSupported){this.displayErrorWithDownloadLink();return}this.analyzeVideoFiles();this.initializeClosedCaptions();this.hasInteractivity=!p.Environment.isMobile&&this.playerOptions.interactivity&&this.videoMetadata.interactiveTriggersEnabled&&!!this.videoMetadata.interactiveTriggersUrl;this.interactiveTriggersHelper||this.initializeInteractiveTriggers()}catch(r){this.reportEvent(k.PlayerEvents.PlayerError,{errorType:\"initializeError\",errorDesc:\"InitializeError with video files, CC, interactiveTrigger: \"+r.message})}this.videoTag?(this.videoTag.title=this.videoMetadata.title,this.videoTag.loop=this.playerOptions.loop,this.videoMetadata.posterframeUrl&&!this.playerOptions.hidePosterFrame&&(this.videoTag.poster=this.videoMetadata.posterframeUrl)):this.reportEvent(k.PlayerEvents.PlayerError,{errorType:\"videoTagNotAvailable\",errorDesc:\"VideoTag not available\"});this.videoWrapper=this.getVideoWrapper();this.playerTechnology=\"OnePlayer_\"+this.videoWrapper.getWrapperName();this.commonPlayerImpressionReported||(this.reportEvent(k.PlayerEvents.CommonPlayerImpression),this.commonPlayerImpressionReported=!0);p.Environment.isIPhone&&(this.playerOptions.lazyLoad=!0);this.playerOptions.lazyLoad||(i?this.hasInteractivity?this.loadVideoWrapper(!1):this.loadVideoWrapper(!0):this.hasInteractivity?this.loadVideoWrapper(!1):this.loadVideoWrapper(this.playerOptions.autoplay));this.reportEvent(k.PlayerEvents.Ready);this.updateState(t.PlayerStates.PlayerLoaded);this.canPlay=!0},n.prototype.setAriaLabelForButton=function(n,t){this.videoMetadata.title!==\"\"?n.setAttribute(\"aria-label\",this.locPlay.toLowerCase()+\" \"+this.videoMetadata.title):t?n.setAttribute(\"aria-label\",t.toLowerCase()):n.setAttribute(\"aria-label\",this.locPlayVideo.toLowerCase())},n.prototype.updatePlayerSource=function(n){var t=this,i;n&&(this.playerData.options=new h.PlayerOptions(n.options),this.playerData.metadata=n.metadata,this.isFirstTimePlayed=!0,this.isContentStartReported=!1,this.wrapperLoadCalled=!1,!this.playerData.metadata||!this.playerData.metadata.videoId||this.playerData.metadata.videoFiles&&this.playerData.metadata.videoFiles.length||this.playerData.metadata.playerName?(this.pause(),this.load(this.playerData)):(i=new ot.VideoShimDataFetcher(this.playerData.options.shimServiceEnv,this.playerData.options.shimServiceUrl),i.getMetadata(this.playerData.metadata.videoId,function(n){t.pause();t.playerData.metadata=n;t.load(t.playerData)})))},n.prototype.displayErrorWithDownloadLink=function(){var t=this.getVideoFileforDownload(),n=\"\",i;this.playerOptions.download&&t?(i='<a href=\"'+t.url+'\"><span style=\"text-decoration:underline\">'+this.localizationHelper.getLocalizedValue(g.playerLocKeys.download_video)+\"<\\/span><\\/a>\",n=this.localizationHelper.getLocalizedValue(g.playerLocKeys.browserunsupported)+\" \"+this.localizationHelper.getLocalizedValue(g.playerLocKeys.browserunsupported_download)+\" \"+i+\".\"):n=this.localizationHelper.getLocalizedValue(g.playerLocKeys.browserunsupported);this.displayErrorMessage({message:n});this.reportEvent(k.PlayerEvents.ContentError,{errorType:\"content:error\",errorDesc:\"error to play video\",errorMessage:\"error to play video, browser not supportted\"})},n.prototype.showDataError=function(){this.playerOptions&&this.playerOptions.showImageForVideoError===!0&&this.videoMetadata&&this.videoMetadata.posterframeUrl?(this.hideTrigger(),this.disablePlayPauseTrigger(),this.displayImage(this.videoMetadata.posterframeUrl)):this.displayErrorMessage({title:this.localizationHelper.getLocalizedValue(g.playerLocKeys.data_error)});this.dataErrorShown=!0},n.prototype.checkTimeRemainingCheckpoint=function(n){if(!!this.playerData.options.timeRemainingCheckpoint){var t=this.playerData.options.timeRemainingCheckpoint;t>=n&&!this.timeRemainingCheckpointReached?(this.timeRemainingCheckpointReached=!0,this.reportEvent(\"TimeRemainingCheckpoint\")):t<n&&(this.timeRemainingCheckpointReached=!1)}},n.prototype.analyzeVideoFiles=function(){var n,t,i;for(this.hasHLS=!1,this.hasProgressive=!1,this.hasAdaptive=!1,n=0,t=this.videoMetadata.videoFiles;n<t.length;n++){i=t[n];switch(i.mediaType){case s.MediaTypes.DASH:case s.MediaTypes.SMOOTH:this.hasAdaptive=!0;break;case s.MediaTypes.HLS:this.hasHLS=!0;break;case s.MediaTypes.MP4:default:this.hasProgressive=!0}}this.useAdaptive=this.hasAdaptive&&(this.playerOptions&&this.playerOptions.useAdaptive||!this.hasProgressive);this.hasProgressive&&p.Environment.isMobile&&(this.useAdaptive=!1);this.hasProgressive&&this.playerOptions&&this.playerOptions.autoplay&&this.playerOptions.startTime===0&&p.Environment.isChrome&&(this.useAdaptive=!1)},n.prototype.loadVideoWrapper=function(n){this.videoWrapper&&(p.Environment.isMobile&&!p.Environment.isIPhone&&(n=!1),this.wrapperLoadCalled=!0,b.PlayerUtility.createVideoPerfMarker(this.playerId,it.videoPerfMarkers.wrapperLoadStart),this.videoWrapper.load(this.videoComponent,n,this.onVideoWrapperLoaded,this.onVideoWrapperLoadFailed,this.onSetAudioCallback))},n.prototype.initializeInteractiveTriggers=function(){var n=this;this.hasInteractivity&&(this.interactiveTriggersHelper=new rt.VideoPlayerInteractiveTriggersHelper(this.playerContainer,this.videoMetadata.interactiveTriggersUrl,this,this.localizationHelper,function(t,i){n.reportInteractiveTelemetryEvent(t,i)}))},n.prototype.reportInteractiveTelemetryEvent=function(n,t){switch(n){case k.PlayerEvents.InteractiveOverlayClick:t&&t.overlay.overlayData.pauseVideoOnClick&&this.pause();t.overlay.overlayType===rt.OverlayType.VideoBranch&&(t.overlay.overlayData.linkUrl=t.overlay.overlayData.videoId);this.reportEvent(k.PlayerEvents.InteractiveOverlayClick,{interactiveTriggerAndOverlay:t});t.overlay.overlayType===rt.OverlayType.VideoBranch&&this.currentVideoStopwatchPlaying.reset();break;case k.PlayerEvents.InteractiveOverlayMaximize:this.reportEvent(k.PlayerEvents.InteractiveOverlayMaximize,{interactiveTriggerAndOverlay:t});break;case k.PlayerEvents.InteractiveOverlayMinimize:this.reportEvent(k.PlayerEvents.InteractiveOverlayMinimize,{interactiveTriggerAndOverlay:t});break;case k.PlayerEvents.InteractiveBackButtonClick:this.reportEvent(k.PlayerEvents.InteractiveBackButtonClick)}},n.prototype.initializeVideoControls=function(){var r=this,n,t;p.Environment.useNativeControls||(this.videoControlsContainer=e.selectFirstElement(i.VideoControls.selector,this.videoComponent),e.addEvents(this.videoControlsContainer,\"contextmenu\",this.videoControlsContainerEventHandler,!0),n=!p.Environment.useNativeControls&&this.playerOptions&&this.playerOptions.controls&&!this.areControlsInitialized,t=n&&!this.playerOptions.trigger&&!this.isTriggerShown(),this.controlsScreenManagerObject={HtmlObject:this.videoControlsContainer,Height:44,Id:null,IsVisible:!1,Priority:5,Transition:null},this.screenManagerHelper.registerElement(this.controlsScreenManagerObject),this.videoControlsContainer&&(n&&(this.areControlsInitialized=!0,this.videoControlsContainer.setAttribute(\"aria-hidden\",\"false\"),this.videoControls=new i.VideoControls(this.videoControlsContainer,this,this.localizationHelper,this.contextMenu),this.videoControls.addUserInteractionListener(function(){r.showControlsBasedOnState()})),t||this.videoControlsContainer.setAttribute(\"aria-hidden\",\"true\"),!this.playerOptions.showControlOnLoad&&this.showcontrolFirstTime&&this.videoControlsContainer.setAttribute(\"aria-hidden\",\"true\")))},n.prototype.getQualityMenu=function(){var n,i,u,t,h,c,f,o,e,r,l;if(!this.videoMetadata.videoFiles||!this.videoMetadata.videoFiles.length)return null;if(n=[],this.hasAdaptive&&this.playerOptions&&this.playerOptions.useAdaptive){if(i=this.videoWrapper.getVideoTracks(),!n.length&&i&&i.length>1)for(u=this.videoWrapper.getCurrentVideoTrack(),n.push({id:this.addIdPrefix(\"auto\"),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.quality_auto),selected:u.auto,selectable:!0,persistOnClick:!0}),t=0;t<i.length;t++)h=i[t],n.push({id:this.addIdPrefix(\"video-\"+t),label:b.PlayerUtility.toFriendlyBitrateString(h.bitrate),selected:!u.auto&&u.trackIndex===t,selectable:!0,persistOnClick:!0})}else if(!n.length)for(c=this.currentVideoFile&&this.currentVideoFile.quality,f=0,o=lt;f<o.length;f++)e=o[f],r=this.getVideoFileByQuality(e),r&&r.url&&(l={id:this.addIdPrefix(s.MediaQuality[e]),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys[\"quality_\"+s.MediaQuality[e].toLowerCase()]),data:r.url,selected:r.quality===c,selectable:!0,persistOnClick:!0},n.push(l));return{category:ht.Quality,id:this.addIdPrefix(ht.Quality),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.quality),items:n}},n.prototype.getAudioTracksMenu=function(){var i=this.videoWrapper.getAudioTracks(),f,r,e,n,o,h,t,s,l,a;if(!i||i.length<=1)return null;for(f=0,r=0,e=i;r<e.length;r++)n=e[r],n.isDescriptiveAudio&&f++;for(o=[],h=this.videoWrapper.getCurrentAudioTrack(),t=0;t<i.length;t++){var n=i[t],u=void 0,c=null;n.isDescriptiveAudio?(s=this.localizationHelper.getLocalizedValue(g.playerLocKeys.descriptive_audio),f>1?(l=this.localizationHelper.getLanguageNameFromLocale(n.languageCode),u=s+\" - \"+l):u=s):(u=this.localizationHelper.getLanguageNameFromLocale(n.languageCode),c=this.localizationHelper.getLanguageCodeFromLocale(n.languageCode.toLowerCase()));a={label:u,language:c,id:this.addIdPrefix(\"audio-\"+t),selected:t===h,selectable:!0,persistOnClick:!0};o.push(a)}return{category:ht.AudioTracks,id:this.addIdPrefix(ht.AudioTracks),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.audio_tracks),items:o}},n.prototype.getClosedCaptionsSettingsMenu=function(){var f,e,n,i,l,r,t,h;if(this.closedCaptionsSettings){f=this.closedCaptionsSettings.getCurrentSettings();e=[];for(n in u.closedCaptionsSettingsMap)if(u.closedCaptionsSettingsMap.hasOwnProperty(n)){var v=u.closedCaptionsSettingsMap[n],s=u.closedCaptionsSettingsOptions[v.option],c=[];for(i in s.map)s.map.hasOwnProperty(i)&&c.push({id:this.getCCMenuItemId(n,i),label:this.localizationHelper.getLocalizedValue(s.pre+i),selectable:!0,selected:f[n]===i,persistOnClick:!0,data:n+\":\"+i});e.push({id:this.addIdPrefix(n+\"_item\"),label:this.localizationHelper.getLocalizedValue(\"cc_\"+n),selectable:!1,subMenu:{id:this.getCCSettingsMenuId(n),category:ht.ClosedCaptionSettings,items:c,label:this.localizationHelper.getLocalizedValue(\"cc_\"+n)}})}l={id:this.addIdPrefix(ht.ClosedCaptionSettings),category:ht.ClosedCaptionSettings,label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.cc_customize),items:e};r=[];for(t in u.closedCaptionsPresetMap)if(u.closedCaptionsPresetMap.hasOwnProperty(t)){var a=u.closedCaptionsPresetMap[t],y=a.text_font,p=a.text_color,w=o.format(this.localizationHelper.getLocalizedValue(g.playerLocKeys.cc_presettings),\"\",this.localizationHelper.getLocalizedValue(g.playerLocKeys.cc_text_font),this.localizationHelper.getLocalizedValue(\"cc_font_name_\"+y),this.localizationHelper.getLocalizedValue(g.playerLocKeys.cc_text_color),this.localizationHelper.getLocalizedValue(\"cc_color_\"+p));r.push({id:this.getCCMenuItemId(u.VideoClosedCaptionsSettings.presetKey,t),label:this.localizationHelper.getLocalizedValue(\"cc_\"+t),data:\"preset:\"+t,selectable:!0,selected:f[u.VideoClosedCaptionsSettings.presetKey]===t,persistOnClick:!0,ariaLabel:w})}return r.length&&(r.push({id:this.addIdPrefix(\"cc-customize\"),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.cc_customize),subMenu:l}),r.push({id:this.addIdPrefix(\"cc-reset\"),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.cc_reset),data:\"reset\",persistOnClick:!0})),h={id:this.getCCSettingsMenuId(u.VideoClosedCaptionsSettings.presetKey),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.cc_appearance),category:ht.ClosedCaptionSettings,items:r},this.ccSettingsMenuId=h.id,h}},n.prototype.getCCSettingsMenuId=function(n){return this.addIdPrefix(\"cc-\"+n)},n.prototype.getCCMenuItemId=function(n,t){return this.addIdPrefix(\"cc-\"+n+\"-\"+t)},n.prototype.getClosedCaptionMenu=function(){var r,c,t,p,w,u,l,e,a,v;if(!this.videoMetadata||!this.videoMetadata.ccFiles||!this.videoMetadata.ccFiles.length||!this.ccOverlay||!this.closedCaptions)return null;var y=f.getValueFromSessionStorage(n.ccLangPrefKey),b=this.playerOptions&&this.playerOptions.autoCaptions,o=null,i=[],h=!1;for(r=0,c=this.videoMetadata.ccFiles;r<c.length;r++)t=c[r],t.ccType&&t.ccType!==s.ClosedCaptionTypes.TTML||(h||(h=t.locale===y),!o&&t.locale.indexOf(b)>-1&&(o=t.locale),p=this.localizationHelper.getLanguageCodeFromLocale(t.locale.toLowerCase()),w={id:this.addIdPrefix(t.locale),label:g.ccCultureLocStrings[t.locale],language:p,data:t.url,selected:!1,selectable:!0,persistOnClick:!0,ariaLabel:g.ccCultureLocStrings[t.locale]+\" \"+this.localizationHelper.getLocalizedValue(g.playerLocKeys.closecaption)},i.push(w));if(i.push({id:this.addIdPrefix(\"appearance\"),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.cc_appearance),selected:!1,selectable:!1,subMenu:this.getClosedCaptionsSettingsMenu()}),u=h?y:o,u){for(l=this.addIdPrefix(u),e=0,a=i;e<a.length;e++)v=a[e],v.id===l&&(v.selected=!0);this.setCC(l)}return i.unshift({id:this.addIdPrefix(\"off\"),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.closecaption_off),selected:!u,selectable:!0,persistOnClick:!0,ariaLabel:this.localizationHelper.getLocalizedValue(g.playerLocKeys.closecaption_off)+\" \"+this.localizationHelper.getLocalizedValue(g.playerLocKeys.closecaption)}),{category:ht.ClosedCaption,id:this.addIdPrefix(ht.ClosedCaption),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.closecaption),items:i,hideBackButton:!0,glyph:\"glyph-subtitles\",cssClass:\"closed-caption\",priority:3}},n.prototype.getPlaybackRateMenu=function(){var r,u,t,e;if(!this.playerOptions||!this.playerOptions.playbackSpeed||!this.videoWrapper||this.videoWrapper.getWrapperName()===\"amp\")return null;for(r=f.getValueFromSessionStorage(n.playbackRatePrefKey)||nt.PlayerConfig.defaultPlaybackRate,u=[],t=0,e=nt.PlayerConfig.playbackRates;t<e.length;t++){var i=e[t],o=i===+r,s=i===1?this.localizationHelper.getLocalizedValue(g.playerLocKeys.playbackspeed_normal):i+\"x\",h={id:this.addIdPrefix(\"rate\"+i),label:s,selected:o,selectable:!0,persistOnClick:!0};u.push(h)}return this.setPlaybackRate(this.addIdPrefix(\"rate\"+r)),{category:ht.PlaybackSpeed,id:this.addIdPrefix(ht.PlaybackSpeed),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.playbackspeed),items:u}},n.prototype.getShareMenu=function(){var t,r,i,u,n,f;if(!this.playerOptions||!this.playerOptions.share)return null;if(t=tt.SharingHelper.getShareOptionsData(this.localizationHelper,this.playerOptions,this.videoMetadata&&this.videoMetadata.shareUrl),t&&t.length){for(r=[],i=0,u=t;i<u.length;i++)n=u[i],f={id:this.addIdPrefix(n.id),label:n.label,data:n.url,glyph:n.glyph,image:n.image},r.push(f);return{category:ht.Share,id:this.addIdPrefix(ht.Share),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.sharing_label),items:r}}},n.prototype.getDownloadMenu=function(){var i,u,f,c,t,l,r,e,o,a,n,h;if(this.videoMetadata&&this.videoMetadata.downloadableFiles&&!(this.videoMetadata.downloadableFiles.length<1)){for(i={},u=0,f=0,c=this.videoMetadata.downloadableFiles;f<c.length;f++)n=c[f],this.playerOptions&&this.playerOptions.download?(t=i[n.locale],t||(t=[],u++,i[n.locale]=t),t.push(n)):n.mediaType===s.DownloadableMediaTypes.transcript&&(t=i[n.locale],t||(t=[],u++,i[n.locale]=t),t.push(n));if(u>0){l=[];for(r in i)if(i.hasOwnProperty(r)){for(e=[],o=0,a=i[r];o<a.length;o++)n=a[o],this.playerOptions&&this.playerOptions.download?(h={id:this.addIdPrefix(n.locale+\"-\"+n.mediaType),label:this.localizationHelper.getLocalizedMediaTypeName(n.mediaType),selected:!1,selectable:!1,data:n.url},e.push(h)):n.mediaType===s.DownloadableMediaTypes.transcript&&(h={id:this.addIdPrefix(n.locale+\"-\"+n.mediaType),label:this.localizationHelper.getLocalizedMediaTypeName(n.mediaType),selected:!1,selectable:!1,data:n.url},e.push(h));l.push({id:this.addIdPrefix(ht.Download+r),label:this.localizationHelper.getLanguageNameFromLocale(r),selected:!1,selectable:!1,subMenuId:this.addIdPrefix(ht.Download+r+\"menu\"),subMenu:{id:this.addIdPrefix(ht.Download+r+\"menu\"),category:ht.Download,label:this.localizationHelper.getLanguageNameFromLocale(r),items:e}})}return{category:ht.Download,id:this.addIdPrefix(ht.Download),label:this.localizationHelper.getLocalizedValue(g.playerLocKeys.download_label),hideBackButton:!0,items:l,glyph:\"glyph-download\",priority:2}}}},n.prototype.setupCustomizeContextMenu=function(){var n=[],i=this.getPlayPauseMenu(),t;n.push(i);this.playerData.options.playPauseTrigger||(t=this.getMuteUnMuteMenu(),n.push(t));this.contextMenu.setupCustomizeContextMenu(n);this.customizedContextMenu=e.selectFirstElement(\".f-player-context-menu\",this.playerContainer)},n.prototype.getMuteUnMuteMenu=function(){var n,t;return this.isMuted()?(n=this.locUnmute,t=\"glyph-volume\"):(n=this.locMute,t=\"glyph-mute\"),{id:\"context-menu-\"+ct.MuteUnMute,label:n,glyph:t,priority:2,category:ct.MuteUnMute}},n.prototype.getPlayPauseMenu=function(){var n,t;return this.isPaused()?(n=this.locPlay,t=\"glyph-play\"):(n=this.locPause,t=\"glyph-pause\"),{id:\"context-menu-\"+ct.PlayPause,label:n,glyph:t,priority:1,category:ct.PlayPause}},n.prototype.setupPlayerMenus=function(){var n,i,r,u,f,o,s,c,a,h,l,t;if(this.videoControls&&this.videoMetadata&&(n=[],i=this.getQualityMenu(),i&&i.items.length&&n.push(i),r=this.getAudioTracksMenu(),r&&r.items.length&&n.push(r),u=this.getDownloadMenu(),u&&u.items.length&&n.push(u),f=this.getClosedCaptionMenu(),f&&f.items.length&&n.push(f),o=this.getPlaybackRateMenu(),o&&o.items.length&&n.push(o),s=this.getShareMenu(),s&&s.items.length&&n.push(s),this.videoControls.setupPlayerMenus(n),!!this.ccSettingsMenuId&&(c=e.selectFirstElement(\"#\"+this.ccSettingsMenuId,this.videoControlsContainer),!!c)))for(a=e.selectElementsT(\"button\",c),h=0,l=a;h<l.length;h++)t=l[h],t.innerHTML.toLowerCase().indexOf(\"preset\")>=0?(e.addEvents(t,\"mouseover focus\",this.onCcPresetFocus),e.addEvents(t,\"mouseout blur\",this.onCcPresetBlur)):e.addEvents(t,\"mouseover focus\",this.onCcPresetBlur)},n.prototype.dispose=function(){this.hideErrorMessage();this.unbindEvents();this.stop();this.updateState(t.PlayerStates.Stopped);this.videoTag=null;this.videoWrapper&&this.videoWrapper.dispose();this.interactiveTriggersHelper&&this.interactiveTriggersHelper.dispose();this.inviewManager&&this.registedInviewManagerAlready&&this.inviewManager.disposePlayer(this)},n.prototype.restoreSettings=function(){if(this.playerOptions.mute||f.getValueFromSessionStorage(n.mutePrefKey)===\"1\")this.isVideoMuted=!0,this.mute(!1);else{var t=parseInt(f.getValueFromSessionStorage(n.volumePrefKey),10);this.lastVolume=f.isNumber(t)?t/10:nt.PlayerConfig.defaultVolume;this.setVolume(this.lastVolume)}!this.videoControls||this.videoControls.updateVolumeState()},n.prototype.checkReplacedVideoTag=function(){var n=this,t=e.selectFirstElementT(\"video\",this.playerContainer);t&&t!==this.videoTag&&(this.videoTag=t,this.videoTag.tabIndex=-1,this.videoTag.style.cursor=\"pointer\",this.videoTag.playsInline=!0,this.videoTag.setAttribute(\"aria-hidden\",\"true\"),p.Environment.isIProduct?p.Environment.isIPhone?(this.videoTag.controls=!0,e.addEvents(this.videoTag,e.eventTypes[e.eventTypes.click],function(){n.playerOptions.lazyLoad&&!n.wrapperLoadCalled&&n.loadVideoWrapper(!0)})):e.addEvents(this.videoTag,e.eventTypes[e.eventTypes.touchstart],function(){n.videoTag.controls=!0}):e.addEvents(this.videoTag,e.eventTypes[e.eventTypes.click],this.onVideoPlayerClicked))},n.prototype.loadVideo=function(){var n=this;if(!this.locReady){setTimeout(function(){n.loadVideo()},50);return}if(!this.videoTag)return null;this.checkReplacedVideoTag();this.restoreSettings();this.bindEvents();this.videoMetadata&&this.videoMetadata.posterframeUrl&&!this.playerOptions.hidePosterFrame&&this.videoWrapper.setPosterFrame(this.videoMetadata.posterframeUrl);this.currentVideoFile=this.getVideoFileToPlay();this.currentVideoFile&&this.setVideoSrc(this.currentVideoFile);p.Environment.isMobile&&this.videoMetadata.ccFiles&&this.videoWrapper.addNativeClosedCaption(this.videoMetadata.ccFiles,s.ClosedCaptionTypes.VTT,this.localizationHelper);this.setupPlayerMenus();this.showControlsBasedOnState()},n.prototype.displayPreRollAndPlayContent=function(){var i=this,n,r,u;if(this.playerState===t.PlayerStates.Ended&&(this.reportEvent(k.PlayerEvents.Replay),this.updateState(\"ready\")),!this.hasInteractivity){this.play();return}if(!this.interactiveTriggersHelper.isInteractivityJSONReady){setTimeout(function(){i.displayPreRollAndPlayContent()},50);return}if(n=this.videoWrapper,r=\"\",!n.ampPlayer||!n.ampPlayer.techName||(r=n.ampPlayer.techName.toLowerCase()),r.indexOf(\"flash\")>=0&&(u=e.selectFirstElementT(\".f-video-player\",this.playerContainer),this.playerState===\"loading\"||this.playerState===\"init\"||u.classList.contains(\"vjs-loading\")||u.classList.contains(\"vjs-waiting\"))){setTimeout(function(){i.displayPreRollAndPlayContent()},50);return}this.reportContentStart();this.interactiveTriggersHelper.displayPreRoll(function(){i.play()})},n.prototype.reportContentStart=function(){this.isFirstTimePlayed&&!this.isContentStartReported&&(this.isFirstTimePlayed=!1,this.isContentStartReported=!0,this.reportEvent(k.PlayerEvents.ContentStart))},n.prototype.bindEvents=function(){this.areMediaEventsBound||(this.areMediaEventsBound=!0,this.videoWrapper.bindVideoEvents(this.onMediaEvent),e.addEvents(this.videoComponent,\"mousemove mouseout\",this.onMouseEvent),e.addEvents(this.videoComponent,\"keydown\",this.onKeyboardEvent),e.addEvents(window,\"onBeforeUnload\",this.onBeforeUnload),this.addFullscreenEvents(),e.addEvents(this.ccOverlay,e.eventTypes[e.eventTypes.click],this.onVideoPlayerClicked),this.checkReplacedVideoTag(),e.addThrottledEvent(window,e.eventTypes.resize,this.onWindowResize))},n.prototype.unbindEvents=function(){e.removeEvents(this.videoComponent,\"mousemove mouseout\",this.onMouseEvent);e.removeEvents(this.videoComponent,\"keydown\",this.onKeyboardEvent);e.removeEvents(this.ccOverlay,e.eventTypes[e.eventTypes.click],this.onVideoPlayerClicked);e.removeEvents(window,\"onBeforeUnload\",this.onBeforeUnload);e.removeEvents(window,\"resize\",this.onWindowResize);this.removeFullscreenEvents()},n.prototype.setVideoSrc=function(n){var i,u,f,r,e,o;if(!!n&&!!n.url&&!!this.videoWrapper){if(this.updateState(t.PlayerStates.Loading),i=[n],u=this.getFallbackVideoFile(),u){for(f=!1,r=0,e=i;r<e.length;r++)if(o=e[r],o.url===u.url){f=!0;break}f||i.push(this.getFallbackVideoFile())}this.videoWrapper.setSource(i);this.setAutoPlayNeeded&&this.videoWrapper.setAutoPlay()}},n.prototype.reportEvent=function(n,t){var i=this.getReport(t),r,f,h,u,o,s;for(this.logMessage(\"Event reported : \"+k.PlayerEvents[n]+\" | data : \"+JSON.stringify(i)),r=0,f=this.reporters;r<f.length;r++)h=f[r],h.reportEvent(n,i);for(e.customEvent(this.videoComponent,k.PlayerEvents[n],{detail:i}),u=0,o=this.playerEventCallbacks;u<o.length;u++)s=o[u],s&&s({name:k.PlayerEvents[n],data:i})},n.prototype.getVideoWrapper=function(){return this.playerOptions&&this.playerOptions.corePlayer===\"nativeplayer\"?new y.NativeVideoWrapper:this.playerOptions&&this.playerOptions.corePlayer===\"hasplayer\"?new a.HasPlayerVideoWrapper:this.playerOptions&&this.playerOptions.corePlayer===\"hlsplayer\"?new v.HlsPlayerVideoWrapper:this.playerOptions&&this.playerOptions.corePlayer===\"amp\"||this.useAdaptive?new l.AmpWrapper(this.playerOptions.useAMPVersion2):new c.Html5VideoWrapper},n.prototype.hideControlPanel=function(){!this.controlPanelTimer||(window.clearTimeout(this.controlPanelTimer),this.controlPanelTimer=0);this.areControlsVisible&&(p.Environment.useNativeControls?this.videoTag&&!this.playerOptions.lazyLoad&&this.wrapperLoadCalled&&(this.videoTag.controls=!1):!this.videoControlsContainer||e.hasClass(this.videoControlsContainer,n.hideControlsClass)||(this.screenManagerHelper.updateElementDisplay(this.controlsScreenManagerObject,!1),!this.ccOverlay||this.closedCaptions&&this.videoWrapper&&this.closedCaptions.updateCaptions(this.getPlayPosition().currentTime)),!this.videoControls||(this.videoControls.prepareToHide(),this.videoControls.hideControls()),this.areControlsVisible=!1)},n.prototype.showControlPanel=function(t){var r=this,i;(t===void 0&&(t=!0),this.playerOptions&&!this.playerOptions.controls||this.isTriggerShown())||this.playerOptions&&!this.playerOptions.showControlOnLoad&&this.showcontrolFirstTime||(!this.controlPanelTimer||(window.clearTimeout(this.controlPanelTimer),this.controlPanelTimer=0),this.areControlsVisible||(p.Environment.useNativeControls?this.videoTag&&(this.videoTag.controls=!0):!this.videoControlsContainer||e.hasClass(this.videoControlsContainer,n.showControlsClass)||(this.screenManagerHelper.updateElementDisplay(this.controlsScreenManagerObject,!0),!this.ccOverlay||this.closedCaptions&&this.videoWrapper&&this.closedCaptions.updateCaptions(this.getPlayPosition().currentTime),this.videoControls.resetSlidersWorkaround()),this.areControlsVisible=!0),i=null,i=this.playerOptions.controlPanelTimeout!==null?this.playerOptions.controlPanelTimeout:n.controlPanelTimeout,t&&(this.controlPanelTimer=window.setTimeout(function(){r.hideControlPanel()},i)))},n.prototype.stopMedia=function(n,i){this.logMessage(\"StopMedia invoked\");this.firstByteTimer&&(window.clearTimeout(this.firstByteTimer),this.firstByteTimer=null);this.exitFullScreen();n&&(this.logMessage(i||n),this.updateState(t.PlayerStates.Stopped),this.displayErrorMessage({title:n}),this.reportEvent(k.PlayerEvents.ContentError,{errorType:\"content:error\",errorDesc:i||n,errorMessage:n}))},n.prototype.setNextCheckpoint=function(){var t=this.getPlayPosition(),n,i,r;if(t.endTime)for(n=0,i=nt.PlayerConfig.checkpoints;n<i.length;n++)if(r=i[n],Math.round(t.currentTime/t.endTime*100)<=r){this.nextCheckpoint=r;return}this.nextCheckpoint=null},n.prototype.getPlayPosition=function(){return this.videoWrapper?this.videoWrapper.getPlayPosition():{currentTime:0,startTime:0,endTime:0}},n.prototype.getBufferedDuration=function(){var n=0;try{n=this.videoWrapper&&this.videoWrapper.getBufferedDuration()}catch(t){this.reportEvent(k.PlayerEvents.PlayerError,{errorType:\"getBufferedDuration\",errorDesc:\"GetBufferedDuration: \"+t.message});throw t;}return n},n.prototype.addPlayerEventListener=function(n){this.playerEventCallbacks.indexOf(n)<0&&this.playerEventCallbacks.push(n)},n.prototype.removePlayerEventListener=function(n){var t=this.playerEventCallbacks.indexOf(n);t>=0&&this.playerEventCallbacks.splice(t,1)},n.prototype.stop=function(){if(this.seek(0),!!this.videoControls){this.pause();var n=this.getPlayPosition();this.videoControls.setPlayPosition({startTime:n&&n.startTime,endTime:n&&n.endTime,currentTime:n&&n.startTime})}this.closedCaptions&&this.closedCaptions.updateCaptions(0)},n.prototype.isPaused=function(){return!this.videoWrapper?!1:this.videoWrapper.isPaused()},n.prototype.isLive=function(){return this.videoWrapper&&this.videoWrapper.isLive()},n.prototype.isPlayable=function(){return!this.videoTag?!1:this.canPlay},n.prototype.play=function(){var n=this;if(this.playerState!==t.PlayerStates.Playing&&this.playerState!==t.PlayerStates.Error&&this.playerState!==t.PlayerStates.Stopped&&this.playerState!==t.PlayerStates.Init){if(this.reportEvent(k.PlayerEvents.Play),this.playerState===t.PlayerStates.Ended){!this.showEndImage||p.Environment.isIProduct||!this.endImage||this.endImage.container.setAttribute(\"aria-hidden\",\"true\");this.displayPreRollAndPlayContent();return}this.playerOptions.lazyLoad&&!this.wrapperLoadCalled?(this.playOnDataLoad=!1,this.loadVideoWrapper(!0)):(!this.videoWrapper||(p.Environment.isIProduct||p.Environment.isAndroidModern?this.videoWrapper.play():setTimeout(function(){n.videoWrapper.play()},0)),!this.videoControls||this.videoControls.updatePlayPauseState());this.triggerPlayPauseContainer&&(!this.playPauseButton||(e.removeClass(this.playPauseButton,\"glyph-play\"),e.addClass(this.playPauseButton,\"glyph-pause\"),this.playPauseButton.setAttribute(\"aria-label\",this.locPause),e.setText(this.playPauseTooltip,this.locPause)))}},n.prototype.pause=function(n){!this.videoWrapper||this.videoWrapper.pause();this.triggerPlayPauseContainer&&(!this.playPauseButton||(e.removeClass(this.playPauseButton,\"glyph-pause\"),e.addClass(this.playPauseButton,\"glyph-play\"),p.Environment.isChrome?this.playPauseButton.setAttribute(\"aria-label\",this.locPlay):this.setAriaLabelForButton(this.playPauseButton),e.setText(this.playPauseTooltip,this.locPlay)));!this.videoControls||this.videoControls.updatePlayPauseState();n&&this.reportEvent(k.PlayerEvents.Pause)},n.prototype.seek=function(t){if(f.isNumber(t)&&!!this.videoWrapper){var i=this.getPlayPosition();t=Math.max(i.startTime,Math.min(t,i.endTime));Math.abs(t-i.currentTime)>=n.positionUpdateThreshold&&(this.setNextCheckpoint(),this.seekFrom=i.currentTime,this.videoWrapper.setCurrentTime(t))}},n.prototype.getVolume=function(){return this.videoWrapper&&this.videoWrapper.getVolume()||0},n.prototype.setVolume=function(t,i){if(f.isNumber(t)&&!!this.videoWrapper){t=Math.round(Math.max(0,Math.min(t,1))*100)/100;var r=this.videoWrapper.getVolume();t!==r&&(this.lastVolume=r,this.videoWrapper.setVolume(t),this.lastVolume=t?t:this.lastVolume,i&&(f.saveToSessionStorage(n.volumePrefKey,Math.ceil(t*10).toString()),this.reportEvent(k.PlayerEvents.Volume)),this.isMuted()&&t>0&&this.unmute(i,!0),!this.videoControls||this.videoControls.updateVolumeState())}},n.prototype.isMuted=function(){return this.videoWrapper&&this.videoWrapper.isMuted()||this.isVideoMuted},n.prototype.mute=function(t){this.lastVolume=this.getVolume();this.setMuted(!0);t&&(f.saveToSessionStorage(n.mutePrefKey,\"1\"),this.reportEvent(k.PlayerEvents.Mute))},n.prototype.unmute=function(t,i){i||this.setVolume(this.lastVolume||nt.PlayerConfig.defaultVolume,!1);this.setMuted(!1);t&&(f.saveToSessionStorage(n.mutePrefKey,\"0\"),this.reportEvent(k.PlayerEvents.Unmute))},n.prototype.setMuted=function(n){!this.videoWrapper||n===this.videoWrapper.isMuted()||(n?this.videoWrapper.mute():this.videoWrapper.unmute());!this.videoControls||this.videoControls.updateVolumeState()},n.isNativeFullscreenEnabled=function(){var n=document;return n.fullscreenEnabled||n.mozFullScreenEnabled||n.webkitFullscreenEnabled||n.webkitSupportsFullscreen||n.msFullscreenEnabled},n.getElementInFullScreen=function(){var n=document;return n.fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||n.msFullscreenElement},n.prototype.getFullscreenContainer=function(){return p.Environment.useNativeControls?this.videoTag:this.playerContainer},n.prototype.enterFullScreen=function(){var t,i,r;n.isNativeFullscreenEnabled()&&(t=this.getFullscreenContainer(),i=n.getElementInFullScreen(),!t||i||(r=t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen||t.webkitEnterFullScreen,r.call(t)))},n.prototype.exitFullScreen=function(){var i,r,t,u;n.isNativeFullscreenEnabled()&&(i=this.getFullscreenContainer(),r=n.getElementInFullScreen(),!i||i!==r||(t=document,u=t.cancelFullScreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitCancelFullScreen,u.call(t)))},n.prototype.toggleFullScreen=function(){this.isInFullscreen?this.exitFullScreen():this.enterFullScreen()},n.prototype.isFullScreen=function(){return this.isInFullscreen},n.prototype.addFullscreenEvents=function(){e.addEvents(document,\"fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange\",this.onFullscreenChanged,!1);e.addEvents(document,\"fullscreenerror mozfullscreenerror webkitfullscreenerror MSFullscreenError\",this.onFullscreenError,!1);this.videoTag&&(e.addEvents(this.videoTag,\"webkitbeginfullscreen\",this.onIOSFullscreenEnter,!1),e.addEvents(this.videoTag,\"webkitendfullscreen\",this.onIOSFullscreenExit,!1))},n.prototype.removeFullscreenEvents=function(){e.removeEvents(document,\"fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange\",this.onFullscreenChanged,!1);e.removeEvents(document,\"fullscreenerror mozfullscreenerror webkitfullscreenerror MSFullscreenError\",this.onFullscreenError,!1);this.videoTag&&(e.removeEvents(this.videoTag,\"webkitbeginfullscreen\",this.onIOSFullscreenEnter,!1),e.removeEvents(this.videoTag,\"webkitendfullscreen\",this.onIOSFullscreenExit,!1))},n.prototype.onFullscreenEnter=function(){this.isInFullscreen=!0;this.videoControls&&(!this.interactiveTriggersHelper?this.resetFocusTrap():this.resetFocusTrap(this.interactiveTriggersHelper.findInteractivityFocusTrapStart()),this.videoControls.updateFullScreenState());this.reportEvent(k.PlayerEvents.FullScreenEnter)},n.prototype.onFullscreenExit=function(){this.isInFullscreen=!1;this.videoControls&&(this.videoControls.removeFocusTrap(),this.videoControls.updateFullScreenState());this.reportEvent(k.PlayerEvents.FullScreenExit)},n.prototype.resetFocusTrap=function(n){this.isFullScreen()&&(this.videoControls.removeFocusTrap(),n?this.videoControls.setFocusTrap(n):this.hasInteractivity?this.videoControls.setFocusTrap(n):this.videoControls.setFocusTrap(null))},n.prototype.initializeClosedCaptions=function(){this.ccOverlay=e.selectFirstElement(\".f-video-cc-overlay\",this.videoComponent);this.closedCaptions=new r.VideoClosedCaptions(this.ccOverlay,this.onErrorCallback);this.closedCaptionsSettings=new u.VideoClosedCaptionsSettings(this.onErrorCallback);this.ccScreenManagerObject={HtmlObject:this.ccOverlay,Height:0,Id:null,IsVisible:!1,Priority:0,Transition:null};this.screenManagerHelper.registerElement(this.ccScreenManagerObject)},n.prototype.onPlayerMenuItemClick=function(n){if(n&&n.category)switch(n.category){case ht.ClosedCaption:this.setCC(n.id,!0);break;case ht.ClosedCaptionSettings:this.setCCSettings(n);break;case ht.Quality:this.setQuality(n.id);break;case ht.AudioTracks:this.setAudio(n.id);break;case ht.Share:this.shareVideo(n);break;case ht.PlaybackSpeed:this.setPlaybackRate(n.id,!0);break;case ht.Download:this.downloadMedia(n)}},n.prototype.onPlayerContextMenuItemClick=function(n){if(n&&n.category){switch(n.category){case ct.PlayPause:this.isPaused()?this.play():this.pause(!0);break;case ct.MuteUnMute:this.isMuted()?this.unmute(!0):this.mute(!0)}this.customizedContextMenu.setAttribute(\"aria-hidden\",\"true\")}},n.prototype.setCC=function(t,i){var u,e,o,r,h;if(this.closedCaptions){if(t=this.removeIdPrefix(t),u=null,t&&this.videoMetadata&&this.videoMetadata.ccFiles)for(e=0,o=this.videoMetadata.ccFiles;e<o.length;e++)if(r=o[e],r.locale===t&&(!r.ccType||r.ccType===s.ClosedCaptionTypes.TTML)){u=r;break}h=this.closedCaptions.getCurrentCcLanguage();this.closedCaptions.setCcLanguage(t,u?u.url:null);i&&f.saveToSessionStorage(n.ccLangPrefKey,t);t===\"off\"?this.screenManagerHelper.updateElementDisplay(this.ccScreenManagerObject,!1):this.screenManagerHelper.updateElementDisplay(this.ccScreenManagerObject,!0);this.reportEvent(k.PlayerEvents.ClosedCaptionsChanged,{startcaptionselection:h,endCaptionSelection:t})}},n.prototype.setCCSettings=function(n){var i,t,r;if(this.videoControls&&this.closedCaptions&&this.closedCaptionsSettings&&n&&n.data){if(n.data===\"reset\")this.closedCaptionsSettings.reset();else{if(i=n.data.split(\":\"),!i&&i.length<0)return;this.closedCaptionsSettings.setSetting(i[0],i[1])}if(this.closedCaptions.resetCaptions(),this.closedCaptions.updateCaptions(this.getPlayPosition().currentTime),t=this.closedCaptionsSettings.getCurrentSettings(),t){for(r in t)t.hasOwnProperty(r)&&this.videoControls.updateMenuSelection(this.getCCSettingsMenuId(r),this.getCCMenuItemId(r,t[r]));t[u.VideoClosedCaptionsSettings.presetKey]||this.videoControls.updateMenuSelection(this.getCCSettingsMenuId(u.VideoClosedCaptionsSettings.presetKey))}this.reportEvent(k.PlayerEvents.ClosedCaptionSettingsChanged,{closedCaptionSettings:n.data})}},n.prototype.setPlaybackRate=function(t,i){if(t=this.removeIdPrefix(t),t&&this.videoWrapper){var u=\"rate\",r=u&&o.startsWith(t,u,!1)?t.substring(u.length):t;r&&(this.videoWrapper.setPlaybackRate(+r),i&&f.saveToSessionStorage(n.playbackRatePrefKey,r),this.reportEvent(k.PlayerEvents.PlaybackRateChanged,{playbackRate:r}))}},n.prototype.setQuality=function(t){var u,i,o,h;if(t=this.removeIdPrefix(t),t){var e=s.MediaQuality[t],c=this.currentMediaQuality,r=this.getVideoFileToPlay(e),l=this.videoWrapper.getCurrentVideoTrack();if(r&&r.url)this.currentVideoFile=r,f.saveToSessionStorage(n.qualityPrefKey,t),this.playOnDataLoad=!this.isPaused(),this.startTimeOnDataLoad=this.getPlayPosition().currentTime,this.setVideoSrc(r),this.reportEvent(k.PlayerEvents.VideoQualityChanged,{startRes:c,endRes:e});else{if(u=t.match(/video-(\\d+)/),!u||u.length<2)return;i=parseInt(u[1],10);i!==NaN&&i>=0&&(o=l.auto?\"auto\":this.videoWrapper.getVideoTracks()[this.videoWrapper.getCurrentVideoTrack().trackIndex].bitrate,this.videoWrapper.switchToVideoTrack(i),h=t===\"auto\"?\"auto\":this.videoWrapper.getVideoTracks()[i].bitrate,this.reportEvent(k.PlayerEvents.VideoQualityChanged,{startRes:o,endRes:h}))}}},n.prototype.setAudio=function(n){var i,t;if((n=this.removeIdPrefix(n),n)&&(i=n.match(/audio-(\\d+)/),i&&!(i.length<2))&&(t=parseInt(i[1],10),t!==NaN&&t>=0&&!!this.isAudioTracksDoneSwitching)){var r=this.videoWrapper.getAudioTracks(),u=this.videoWrapper.getCurrentAudioTrack(),f=!r[u]?null:r[u].title,e=!r[t]?null:r[t].title;this.isAudioTracksDoneSwitching=!1;this.videoWrapper.switchToAudioTrack(t);this.reportEvent(k.PlayerEvents.AudioTrackChanged,{startTrackSelection:f,endTrackSelection:e})}},n.prototype.shareVideo=function(n){if(n&&n.id){var t=this.removeIdPrefix(n.id);if(t&&n.data){this.reportEvent(k.PlayerEvents.VideoShared,{videoShare:t});switch(t){case it.shareTypes.copy:tt.SharingHelper.tryCopyTextToClipboard(decodeURIComponent(n.data));break;case it.shareTypes.mail:window.location.href=n.data;break;default:window.open(n.data,\"_blank\")}}}},n.prototype.downloadMedia=function(n){if(n&&n.data){window.open(n.data,\"_blank\");var t=n.id.indexOf(\"transcript\")!==-1?\"transcript\":\"video\";this.reportEvent(k.PlayerEvents.MediaDownloaded,{downloadType:t,downloadMedia:n.data.toString()})}},n.prototype.addIdPrefix=function(n){var t=this.videoComponent&&this.videoComponent.id?this.videoComponent.id+\"-\":null;return t&&!o.startsWith(n,t,!1)?t+n:n},n.prototype.removeIdPrefix=function(n){var t=this.videoComponent&&this.videoComponent.id?this.videoComponent.id+\"-\":null;return t&&o.startsWith(n,t,!1)?n.substring(t.length):n},n.prototype.setFocusOnVideoContainerEdge=function(){var n=this;p.Environment.isEdgeBrowser&&!this.videoElementIsFocus&&(this.videoElementIsFocus=!0,this.playerContainer.setAttribute(\"tabindex\",\"0\"),setTimeout(function(){return n.playerContainer.focus()},100))},n.prototype.showTrigger=function(){!this.triggerContainer||(this.triggerContainer.setAttribute(\"aria-hidden\",\"false\"),e.addEvents(this.triggerContainer,\"click keyup\",this.triggerContainerEventHandler,!0),p.Environment.isEdgeBrowser&&this.playerContainer.setAttribute(\"tabindex\",\"-1\"));this.playerOptions&&this.playerOptions.controls&&this.videoControlsContainer&&!p.Environment.useNativeControls&&this.videoControlsContainer.setAttribute(\"aria-hidden\",\"true\")},n.prototype.hideTrigger=function(){!this.triggerContainer||(this.triggerContainer.setAttribute(\"aria-hidden\",\"true\"),this.setFocusOnVideoContainerEdge());this.playerOptions&&this.playerOptions.controls&&this.videoControlsContainer&&!p.Environment.useNativeControls&&this.videoControlsContainer.setAttribute(\"aria-hidden\",\"false\")},n.prototype.showPlayPauseTrigger=function(n){!this.triggerPlayPauseContainer||(n?(e.removeClass(this.playPauseButton,\"f-play-pause-hide\"),e.addClass(this.playPauseButton,\"f-play-pause-show\")):(e.addClass(this.playPauseButton,\"f-play-pause-hide\"),e.removeClass(this.playPauseButton,\"f-play-pause-show\")))},n.prototype.disablePlayPauseTrigger=function(){!this.triggerPlayPauseContainer||e.removeClass(this.triggerPlayPauseContainer,\"f-play-pause-trigger\")},n.prototype.isTriggerShown=function(){return this.triggerContainer&&this.triggerContainer.getAttribute(\"aria-hidden\")===\"false\"},n.prototype.setTriggerProperties=function(){if(this.localizationHelper&&this.trigger){var n=this.localizationHelper.getLocalizedValue(g.playerLocKeys.play),t=this.localizationHelper.getLocalizedValue(g.playerLocKeys.play_video);this.setAriaLabelForButton(this.trigger,t);e.setText(this.triggerTooltip,n)}},n.prototype.displayErrorMessage=function(n){if(n&&(n.title||n.message)){if(this.errorMessageDisplayed=!0,!this.errorMessage){this.errorMessage={};this.errorMessage.container=document.createElement(\"div\");var t=document.createElement(\"div\");this.errorMessage.title=document.createElement(\"p\");this.errorMessage.message=document.createElement(\"p\");this.errorMessage.container.setAttribute(\"role\",\"status\");this.errorMessage.container.setAttribute(\"class\",\"f-error-message\");this.errorMessage.title.setAttribute(\"class\",\"c-heading\");this.errorMessage.message.setAttribute(\"class\",\"c-paragraph\");!n.title||e.setText(this.errorMessage.title,n.title);!n.message||e.setText(this.errorMessage.message,n.message);this.errorMessage.container.appendChild(t);!n.title||t.appendChild(this.errorMessage.title);t.appendChild(this.errorMessage.message);this.playerContainer.appendChild(this.errorMessage.container)}else e.setText(this.errorMessage.title,n.title||\"\"),e.setText(this.errorMessage.message,n.message||\"\"),this.errorMessage.container.setAttribute(\"aria-hidden\",\"false\");this.updateScreenReaderElement(n.title,!0);this.hideTrigger()}},n.prototype.displayImage=function(n){var i,t;n||(n=this.videoMetadata.posterframeUrl);this.endImage?(i=e.selectFirstElement(\".f-post-image\",this.endImage.container),i.setAttribute(\"src\",n),this.endImage.container.setAttribute(\"aria-hidden\",\"false\")):(this.endImage={},this.endImage.container=document.createElement(\"div\"),this.endImage.container.setAttribute(\"class\",\"f-end-poster-image\"),this.endImage.container.setAttribute(\"aria-hidden\",\"false\"),this.endImage.container.setAttribute(\"role\",\"none\"),t=document.createElement(\"img\"),t.setAttribute(\"src\",n),t.setAttribute(\"class\",\"f-post-image\"),t.setAttribute(\"height\",\"auto\"),t.setAttribute(\"width\",\"100%\"),t.setAttribute(\"role\",\"none\"),this.endImage.container.appendChild(t),this.playerContainer.appendChild(this.endImage.container))},n.prototype.hideImage=function(){!this.endImage||this.endImage.container.setAttribute(\"aria-hidden\",\"true\")},n.prototype.hideErrorMessage=function(){!this.errorMessage||!this.errorMessage.container||(this.errorMessage.container.setAttribute(\"aria-hidden\",\"true\"),this.errorMessageDisplayed=!1)},n.prototype.showPosterImage=function(n){this.wrapperLoadCalled||(this.showingPosterImage=!0,this.posterImageUrl=n,this.loadVideoWrapper(!1))},n.prototype.resize=function(){!this.videoControls||(this.videoControls.resetSlidersWorkaround(),this.videoControls.updateReactiveControlDisplay(),this.onWindowResize())},n.prototype.getDefaultMediaQuality=function(){var i=f.getValueFromSessionStorage(n.qualityPrefKey),t=null;return i&&(t=s.MediaQuality[i]),t||(t=p.Environment.isMobile?nt.PlayerConfig.defaultQualityMobile:p.Environment.isTV?nt.PlayerConfig.defaultQualityTV:nt.PlayerConfig.defaultQualityDesktop),t},n.prototype.getVideoFileforDownload=function(){return this.getVideoFileByQuality(s.MediaQuality.HQ)||this.getVideoFileByType(s.MediaTypes.MP4)},n.prototype.getVideoFileByQuality=function(n){var u=null,t,i,r;if(n&&this.videoMetadata&&this.videoMetadata.videoFiles)for(t=0,i=this.videoMetadata.videoFiles;t<i.length;t++)if(r=i[t],r.quality===n){u=r;break}return u},n.prototype.getVideoFileByType=function(n){var u=null,t,i,r;if(n&&this.videoMetadata&&this.videoMetadata.videoFiles)for(t=0,i=this.videoMetadata.videoFiles;t<i.length;t++)if(r=i[t],r.mediaType===n){u=r;break}return u},n.prototype.getVideoFileToPlay=function(n){var r=n||this.getDefaultMediaQuality(),t,i;return this.currentMediaQuality=r,i=!1,this.hasHLS&&this.playerOptions&&this.playerOptions.useHLS&&this.playerOptions.corePlayer===\"hlsplayer\"&&(t=this.getVideoFileByType(s.MediaTypes.HLS),t&&t.url&&(i=!0)),i||!this.playerOptions||this.useAdaptive||(t=this.getVideoFileByQuality(r),t&&t.url&&(i=!0)),i||this.currentVideoFile||(this.useAdaptive&&(t=this.getVideoFileByType(s.MediaTypes.DASH)||this.getVideoFileByType(s.MediaTypes.SMOOTH),t&&t.url&&(i=!0)),i||(t=this.getVideoFileByType(s.MediaTypes.MP4))),t},n.prototype.getFallbackVideoFile=function(){return this.getVideoFileByQuality(s.MediaQuality.HQ)||this.getVideoFileByType(s.MediaTypes.MP4)},n.prototype.updateState=function(n){if(n&&n!==this.playerState&&this.playerState!==t.PlayerStates.Error){this.playerState=n;this.logMessage(\"Player state updated. New state: \"+n);var i=null;switch(this.playerState){case t.PlayerStates.Loading:i=k.PlaybackStatus.VideoOpening;this.stopwatchLoading.start();break;case t.PlayerStates.Playing:i=k.PlaybackStatus.VideoPlaying;this.stopwatchPlaying.start();this.currentVideoStopwatchPlaying.start();this.stopwatchBuffering.stop();this.stopwatchLoading.stop();this.isBuffering&&this.stopwatchBuffering.getValue()&&(this.isBuffering=!1,this.reportEvent(k.PlayerEvents.BufferComplete));break;case t.PlayerStates.Paused:i=k.PlaybackStatus.VideoPaused;this.stopwatchPlaying.stop();this.currentVideoStopwatchPlaying.stop();this.stopwatchLoading.stop();break;case t.PlayerStates.Buffering:i=k.PlaybackStatus.VideoPlaying;this.stopwatchBuffering.start();this.isBuffering=!0;break;case t.PlayerStates.Seeking:this.stopwatchLoading.stop();break;case t.PlayerStates.Ended:i=k.PlaybackStatus.VideoPlayCompleted;this.stopwatchPlaying.stop();this.currentVideoStopwatchPlaying.reset();this.showEndImage&&!p.Environment.isIProduct&&(this.displayImage(this.videoMetadata.posterframeUrl),this.showTrigger());this.triggerPlayPauseContainer&&(!this.playPauseButton||(e.removeClass(this.playPauseButton,\"glyph-pause\"),e.addClass(this.playPauseButton,\"glyph-play\"),this.setAriaLabelForButton(this.playPauseButton),e.setText(this.playPauseTooltip,this.locPlay)));break;case t.PlayerStates.Error:i=k.PlaybackStatus.VideoPlayFailed;this.stopwatchBuffering.reset();this.stopwatchLoading.stop();this.stopwatchPlaying.reset();this.currentVideoStopwatchPlaying.reset()}!this.videoControls||(this.videoControls.updatePlayPauseState(),this.videoControls.updateVolumeState());this.setPlaybackStatus(i);this.showControlsBasedOnState();this.showSpinnerBasedOnState()}},n.prototype.setPlaybackStatus=function(n){n&&this.playbackStatus!==n&&(this.playbackStatus=n,this.reportEvent(k.PlayerEvents.PlaybackStatusChanged,{status:n}))},n.prototype.setSpinnerProperties=function(){this.localizationHelper&&this.spinner&&(this.spinner.setAttribute(\"aria-label\",this.localizationHelper.getLocalizedValue(g.playerLocKeys.loading_aria_label)),this.spinner.setAttribute(\"aria-valuetext\",this.localizationHelper.getLocalizedValue(g.playerLocKeys.loading_value_text)))},n.prototype.showSpinner=function(){this.spinner&&!this.isTriggerShown()&&this.spinner.setAttribute(\"aria-hidden\",\"false\")},n.prototype.hideSpinner=function(){this.spinner&&this.spinner.setAttribute(\"aria-hidden\",\"true\")},n.prototype.showSpinnerBasedOnState=function(){if(!!this.ageGateHelper&&!!this.ageGateHelper.ageGateIsDisplayed){this.hideSpinner();return}switch(this.playerState){case t.PlayerStates.Ready:case t.PlayerStates.Playing:case t.PlayerStates.Paused:case t.PlayerStates.Ended:case t.PlayerStates.Stopped:case t.PlayerStates.Error:this.hideSpinner();break;case t.PlayerStates.PlayerLoaded:p.Environment.isIPhone?this.hideSpinner():this.showSpinner();break;default:this.showSpinner()}},n.prototype.showControlsBasedOnState=function(){switch(this.playerState){case t.PlayerStates.Loading:case t.PlayerStates.Init:case t.PlayerStates.Error:this.hideControlPanel();break;case t.PlayerStates.Ended:this.showEndImage&&!p.Environment.isIProduct?this.hideControlPanel():this.showControlPanel(!1);break;case t.PlayerStates.Ready:case t.PlayerStates.Paused:case t.PlayerStates.Stopped:this.showControlPanel(!1);break;default:this.showControlPanel(!0)}},n.prototype.updateScreenReaderElement=function(n,t){t===void 0&&(t=!1);!this.screenReaderElement||this.screenReaderElement.innerText===n||p.Environment.isChrome&&!t||(this.screenReaderElement.innerText=n)},n.prototype.setFocusOnPlayButton=function(){this.videoControls&&this.videoControls.setFocusonPlayButton()},n.prototype.getVideoTitle=function(){return this.videoMetadata?this.videoMetadata.title:\"\"},n.prototype.getReport=function(n){var t=this.getPlayPosition().endTime;return{playerInstanceId:this.playerId,playerTechnology:this.playerTechnology,playerType:this.videoWrapper&&this.videoWrapper.getPlayerTechName(),playbackStatus:k.PlaybackStatus[this.playbackStatus],totalBufferWaitTime:this.stopwatchBuffering&&this.stopwatchBuffering.getValue(),bufferCount:this.stopwatchBuffering&&this.stopwatchBuffering.getIntervals(),errorType:n&&n.errorType,errorDesc:n&&n.errorDesc,loadTime:this.stopwatchLoading&&this.stopwatchLoading.getFirstValue(),numPlayed:this.stopwatchLoading&&this.stopwatchLoading.getIntervals(),videoDuration:t,videoElapsedTime:this.getPlayPosition().currentTime,seekFrom:n&&n.seekFrom,seekTo:n&&n.seekTo,videoLength:t*1e3,videoSize:f.getDimensions(this.playerContainer),totalTimePlaying:this.stopwatchPlaying&&this.stopwatchPlaying.getTotalValue(),currentVideoTotalTimePlaying:this.currentVideoStopwatchPlaying&&this.currentVideoStopwatchPlaying.getTotalValue(),currentInterval:this.stopwatchPlaying&&this.stopwatchPlaying.getValue(),eventCheckpointInterval:nt.PlayerConfig.eventCheckpointInterval,checkpoint:n&&n.checkpoint,checkpointType:n&&n.checkpointType,currentVideoFile:this.currentVideoFile,videoMetadata:this.videoMetadata,playerOptions:this.playerOptions,interactiveTriggerAndOverlay:n&&n.interactiveTriggerAndOverlay,videoShare:n&&n.videoShare,closedCaptions:n&&n.closedCaptions,closedCaptionSettings:n&&n.closedCaptionSettings,playbackRate:n&&n.playbackRate,downloadMedia:n&&n.downloadMedia,downloadType:n&&n.downloadType,audioTrack:n&&n.audioTrack,ageGatePassed:n&&n.ageGatePassed,live:this.isLive(),lastVolume:n&&n.lastVolume,newVolume:n&&n.newVolume,startRes:n&&n.startRes,endRes:n&&n.endRes,startTrackSelection:n&&n.startTrackSelection,endTrackSelection:n&&n.endTrackSelection,startCaptionSelection:n&&n.startCaptionSelection,endCaptionSelection:n&&n.endCaptionSelection}},n.prototype.logMessage=function(n){this.playerOptions&&this.playerOptions.debug&&n&&b.PlayerUtility.logConsoleMessage(n,\"Core-Player : \"+this.videoComponent.id)},n.prototype.showElement=function(n){n&&n.setAttribute(\"aria-hidden\",\"false\")},n.prototype.hideElement=function(n){n&&n.setAttribute(\"aria-hidden\",\"true\")},n.playerContainerSelector=\".f-core-player\",n.showControlsClass=\"f-slidein\",n.hideControlsClass=\"f-slideout\",n.fitControlsClass=\"f-overlay-slidein\",n.volumePrefKey=\"vidvol\",n.mutePrefKey=\"vidmut\",n.qualityPrefKey=\"vidqlt\",n.ccLangPrefKey=\"vidccpref\",n.playbackRatePrefKey=\"vidrate\",n.positionUpdateThreshold=.1,n.controlPanelTimeout=6500,n}();t.CorePlayer=at});define(\"base-reporter\",[\"require\",\"exports\",\"player-constants\",\"player-utility\",\"utility\"],function(n,t,i,r,u){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var f=[i.videoPerfMarkers.playerInit,i.videoPerfMarkers.playerLoadStart,i.videoPerfMarkers.locLoadStart,i.videoPerfMarkers.locReady,i.videoPerfMarkers.metadataFetchStart,i.videoPerfMarkers.metadataFetchEnd,i.videoPerfMarkers.wrapperLoadStart,i.videoPerfMarkers.wrapperReady,i.videoPerfMarkers.playerReady,i.videoPerfMarkers.playTriggered,i.videoPerfMarkers.ttvs],e=function(){function n(n){if(this.videoComponent=n,this.isDebugMode=!1,!n){console.log(\"base-reporter: video component is null\");return}this.playerId=n.getAttribute(\"id\");this.isDebugMode=n.getAttribute(\"data-debug\")===\"true\"}return n.prototype.reportEvent=function(n,t){if(n)switch(n){case i.PlayerEvents.CommonPlayerImpression:r.PlayerUtility.createVideoPerfMarker(this.playerId,i.videoPerfMarkers.playerReady);this.onCommonPlayerImpression(t);break;case i.PlayerEvents.Replay:this.onReplay(t);break;case i.PlayerEvents.BufferComplete:this.onBufferComplete(t);break;case i.PlayerEvents.ContentStart:r.PlayerUtility.createVideoPerfMarker(this.playerId,i.videoPerfMarkers.ttvs);this.onContentStart(t);break;case i.PlayerEvents.ContentError:this.onContentError(t);break;case i.PlayerEvents.ContentComplete:this.onContentComplete(t);break;case i.PlayerEvents.ContentCheckpoint:this.onContentCheckpoint(t);break;case i.PlayerEvents.ContentLoaded3PP:this.on3ppVideoLoaded(t);break;case i.PlayerEvents.Pause:this.onPause(t);break;case i.PlayerEvents.Resume:this.onResume(t);break;case i.PlayerEvents.Seek:this.onSeek(t);break;case i.PlayerEvents.VideoQualityChanged:this.onVideoQualityChanged(t);break;case i.PlayerEvents.Mute:this.onMute(t);break;case i.PlayerEvents.Unmute:this.onUnmute(t);break;case i.PlayerEvents.FullScreenEnter:this.onFullScreenEnter(t);break;case i.PlayerEvents.FullScreenExit:this.onFullScreenExit(t);break;case i.PlayerEvents.InteractiveOverlayClick:this.onInteractiveOverlayClick(t);break;case i.PlayerEvents.InteractiveOverlayShow:this.onInteractiveOverlayShow(t);break;case i.PlayerEvents.InteractiveOverlayHide:this.onInteractiveOverlayHide(t);break;case i.PlayerEvents.InteractiveOverlayMaximize:this.onInteractiveOverlayMaximize(t);break;case i.PlayerEvents.InteractiveOverlayMinimize:this.onInteractiveOverlayMinimize(t);break;case i.PlayerEvents.InteractiveBackButtonClick:this.onInteractiveBackButtonClick(t);break;case i.PlayerEvents.PlayerError:this.onPlayerErrors(t);break;case i.PlayerEvents.VideoShared:this.onVideoShared(t);break;case i.PlayerEvents.ClosedCaptionsChanged:this.onClosedCaptionsChanged(t);break;case i.PlayerEvents.ClosedCaptionSettingsChanged:this.onClosedCaptionSettingsChanged(t);break;case i.PlayerEvents.PlaybackRateChanged:this.onPlaybackRateChanged(t);break;case i.PlayerEvents.MediaDownloaded:this.onMediaDownloaded(t);break;case i.PlayerEvents.AudioTrackChanged:this.onAudioTrackChanged(t);break;case i.PlayerEvents.AgeGateSubmitClick:this.onAgeGateSubmitClick(t);break;case i.PlayerEvents.Volume:this.onVolumeChanged(t)}},n.prototype.getPerfMarkers=function(){var t={},h=u.getPerfMarkerValue(i.videoPerfMarkers.scriptLoaded),n,e,o,s;for(h&&(t[\"p.\"+i.videoPerfMarkers.scriptLoaded]=h),n=0,e=f;n<e.length;n++)o=e[n],s=r.PlayerUtility.getVideoPerfMarker(this.playerId,o),s&&(t[\"p.\"+o]=s);return t},n.prototype.log=function(n,t){t===void 0&&(t=\"Reporter\");this.isDebugMode&&r.PlayerUtility.logConsoleMessage(n,t)},n}();t.BaseReporter=e});__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define(\"jsll-reporter\",[\"require\",\"exports\",\"base-reporter\",\"utility\",\"environment\"],function(n,t,i,r,u){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var f=function(n){function t(t,i){var f=n.call(this,t)||this,e;return f.postJsllMsg=!1,f.playerIdfromUrl=null,e=r.getQSPValue(\"postJsllMsg\",!1),e&&u.Environment.isInIframe&&i&&(f.postJsllMsg=!0,f.playerIdfromUrl=r.getQSPValue(\"pid\",!1)),f}return __extends(t,n),t.prototype.doPing=function(n,t,i,u){var f=this.getDefaultParams(n,i),e;r.extend(f,u);this.log(\"jsll - t: \"+f.t+\" behavior : \"+t+\" data : \"+JSON.stringify(f));e={vidnm:\"\",vidid:\"\",vidpct:0,vidpctwtchd:0,vidwt:0,viddur:0,vidtimeseconds:0,sessiontimeseconds:0,live:!1,parentpage:\"\",containerName:\"oneplayer\",dlid:\"\",dltype:\"\",socchn:\"\",name:\"\",id:\"\"};this.populateContentTags(e,n,u);var h={videoObj:f},s={behavior:t,actionType:\"O\",pageTags:h,contentTags:e},o=window;try{this.postJsllMsg?window.parent.postMessage(JSON.stringify({eventName:\"postjsllmessage\",playerId:this.playerIdfromUrl,data:s}),\"*\"):o.awa&&o.awa.ct&&o.awa.ct.captureContentPageAction(s)}catch(c){this.log(\"jsll logger threw exception : \"+c)}},t.prototype.populateContentTags=function(n,t,i){n.vidnm=t.videoMetadata&&t.videoMetadata.title;n.vidid=t.videoMetadata&&t.videoMetadata.videoId;n.live=t.live;var u=t.videoDuration,f=t.videoElapsedTime,e=t.currentVideoTotalTimePlaying/1e3,h=t.totalTimePlaying/1e3,o=0,s=0;u&&r.isNumber(u)&&f&&r.isNumber(f)&&(o=Math.round(f/u*100),o=Math.min(o,100));u&&r.isNumber(u)&&e&&r.isNumber(e)&&(s=Math.round(e/u*100),s=Math.min(s,100));n.viddur=Math.round(u);n.vidwt=Math.round(f);n.vidtimeseconds=Math.round(e);n.sessiontimeseconds=Math.round(h);n.vidpct=o;n.vidpctwtchd=s;n.parentpage=parent!==window?document.referrer:window.location.href;n.name=i&&i.interactiveOverlayAndTrigger&&i.interactiveOverlayAndTrigger.overlay.friendlyName;n.id=i&&i.interactiveOverlayAndTrigger&&i.interactiveOverlayAndTrigger.trigger.triggerId;n.dlid=i&&i.downloadMedia;n.dltype=i&&i.downloadType;n.socchn=i&&i.socchn},t.prototype.getDefaultParams=function(n,t){var i={};return t&&r.extend(i,t),n&&(r.extend(i,{d:n.videoDuration,piid:n.playerInstanceId,plt:n.playerType,ptech:n.playerTechnology,size:n.videoSize?n.videoSize.width+\"x\"+n.videoSize.height:null,vt:n.playerType,te:n.videoElapsedTime}),n.currentVideoFile&&r.extend(i,{vfc:n.currentVideoFile.formatCode,vfile:n.currentVideoFile.url,vmedia:n.currentVideoFile.mediaType,vQuality:n.currentVideoFile.quality}),n.playerOptions&&r.extend(i,{isAutoplay:n.playerOptions.autoplay,playerOptions:n.playerOptions}),n.videoMetadata&&r.extend(i,{eid:n.videoMetadata.videoId,vtitle:n.videoMetadata.title,vmetadata:n.videoMetadata})),i},t.prototype.onCommonPlayerImpression=function(n){this.log(\"jsll - OnCommonPlayerImpression()\");var i=window.awa?window.awa.behavior.VIDEOPLAYERLOAD:null;this.doPing(n,i,t.usageCounters.commonPlayerImpression,this.getPerfMarkers())},t.prototype.onBufferComplete=function(n){this.log(\"jsll - OnBufferComplete()\");var i=window.awa?window.awa.behavior.VIDEOBUFFERING:null;this.doPing(n,i,t.usageCounters.contentBuffering,{bd:n.totalBufferWaitTime})},t.prototype.onContentStart=function(n){this.log(\"jsll - OnContentStart()\");var i=window.awa?window.awa.behavior.VIDEOSTART:null;this.doPing(n,i,t.usageCounters.contentStart,this.getPerfMarkers())},t.prototype.onContentCheckpoint=function(n){this.log(\"jsll - OnContentCheckpoint()\");var t=window.awa?window.awa.behavior.VIDEOCHECKPOINT:null;this.doPing(n,t,null,{cp:n.checkpoint,checkpointtype:n.checkpointType})},t.prototype.onContentComplete=function(n){this.log(\"jsll - OnContentComplete()\");var i=window.awa?window.awa.behavior.VIDEOCOMPLETE:null;this.doPing(n,i,t.usageCounters.contentComplete)},t.prototype.onContentError=function(n){this.log(\"jsll - OnContentError()\");var i={fi:n.currentVideoFile&&n.currentVideoFile.url,et:n.errorType,etd:n.errorDesc},r=window.awa?window.awa.behavior.VIDEOERROR:null;this.doPing(n,r,t.usageCounters.contentError,i)},t.prototype.onMute=function(n){this.log(\"jsll - OnMute()\");var i=window.awa?window.awa.behavior.VIDEOMUTE:null;this.doPing(n,i,t.usageCounters.mute)},t.prototype.onUnmute=function(n){this.log(\"jsll - OnMute()\");var i=window.awa?window.awa.behavior.VIDEOUNMUTE:null;this.doPing(n,i,t.usageCounters.unmute)},t.prototype.onVolumeChanged=function(n){this.log(\"jsll - onVolumeChange()\");var t=window.awa?window.awa.behavior.VIDEOVOLUMECONTROL:null;this.doPing(n,t,null,{startvol:n.lastVolume,endvol:n.newVolume})},t.prototype.onPause=function(n){this.log(\"jsll - OnPause()\");var i=window.awa?window.awa.behavior.VIDEOPAUSE:null;this.doPing(n,i,t.usageCounters.pause)},t.prototype.onSeek=function(n){if(n.seekFrom!==n.seekTo){this.log(\"jsll - OnSeek()\");var i=window.awa?window.awa.behavior.VIDEOJUMP:null;this.doPing(n,i,t.usageCounters.seek,{te:n.seekFrom,st:n.seekTo,startloc:n.seekFrom,endloc:n.seekTo})}},t.prototype.onVideoQualityChanged=function(n){this.log(\"jsll - OnVideoQualityChanged()\");var i=window.awa?window.awa.behavior.VIDEORESOLUTIONCONTROL:null;this.doPing(n,i,t.usageCounters.videoQuality,{q:n.endRes,startres:n.startRes,endres:n.endRes})},t.prototype.onFullScreenEnter=function(n){this.log(\"jsll - OnFullScreenEnter()\");var i=window.awa?window.awa.behavior.VIDEOFULLSCREEN:null;this.doPing(n,i,t.usageCounters.fullScreenEnter)},t.prototype.onFullScreenExit=function(n){this.log(\"jsll - OnFullScreenExit()\");var i=window.awa?window.awa.behavior.VIDEOUNFULLSCREEN:null;this.doPing(n,i,t.usageCounters.fullScreenExit)},t.prototype.onReplay=function(n){this.log(\"jsll - OnReplay()\");var i=window.awa?window.awa.behavior.VIDEOREPLAY:null;this.doPing(n,i,t.usageCounters.replay)},t.prototype.onResume=function(n){this.log(\"jsll - OnResume()\");var i=window.awa?window.awa.behavior.VIDEOCONTINUE:null;this.doPing(n,i,null,t.usageCounters.resume)},t.prototype.on3ppVideoLoaded=function(n){this.log(\"jsll - On3ppVideoLoaded()\");this.doPing(n,null,t.usageCounters.contentImpression3PP)},t.prototype.onInteractiveOverlayClick=function(n){this.log(\"jsll - onInteractiveTriggerClick\");var i=window.awa?window.awa.behavior.VIDEOLAYERCLICK:null;this.doPing(n,i,t.usageCounters.overlayClick,{interactiveOverlayAndTrigger:n.interactiveTriggerAndOverlay})},t.prototype.onInteractiveBackButtonClick=function(n){this.log(\"jsll - onInteractiveTriggerClick\");var i=window.awa?window.awa.behavior.BACKBUTTON:null;this.doPing(n,i,t.usageCounters.streamLinkBackButtonClick)},t.prototype.onInteractiveOverlayShow=function(n){this.log(\"jsll - onInteractiveOverlayShow\");var i=window.awa?window.awa.behavior.SHOW:null;this.doPing(n,i,t.usageCounters.overlayShow,{interactiveOverlayAndTrigger:n.interactiveTriggerAndOverlay})},t.prototype.onInteractiveOverlayHide=function(n){this.log(\"jsll - onInteractiveOverlayHide\");var i=window.awa?window.awa.behavior.HIDE:null;this.doPing(n,i,t.usageCounters.overlayHide,{interactiveOverlayAndTrigger:n.interactiveTriggerAndOverlay})},t.prototype.onInteractiveOverlayMaximize=function(n){this.log(\"jsll - onInteractiveOverlayMaximize\");var i=window.awa?window.awa.behavior.MAXIMIZE:null;this.doPing(n,i,t.usageCounters.maximizeOverlay,{interactiveOverlayAndTrigger:n.interactiveTriggerAndOverlay})},t.prototype.onInteractiveOverlayMinimize=function(n){this.log(\"jsll - onInteractiveOverlayMinimize\");var i=window.awa?window.awa.behavior.MINIMIZE:null;this.doPing(n,i,t.usageCounters.minimizeOverlay,{interactiveOverlayAndTrigger:n.interactiveTriggerAndOverlay})},t.prototype.onAgeGateSubmitClick=function(n){this.log(\"jsll - onAgeGateSubmitClick\");var i=window.awa?window.awa.behavior.PROCESSCHECKPOINT:null;this.doPing(n,i,t.usageCounters.ageGateSubmitClick,{ageGatePassed:n.ageGatePassed,scn:\"OnePlayerAgeGate\",isSuccess:n.ageGatePassed})},t.prototype.onPlayerErrors=function(n){this.log(\"jsll - onPlayerErrors()\");var i=window.awa?window.awa.behavior.VIDEOERROR:null;this.doPing(n,i,t.usageCounters.contentError,{et:n.errorType,etd:n.errorDesc})},t.prototype.onVideoShared=function(n){this.log(\"jsll - onVideoShared\");var t=window.awa?window.awa.behavior.SOCIALSHARE:null;this.doPing(n,t,null,{videoShare:n.videoShare,socchn:n.videoShare})},t.prototype.onClosedCaptionsChanged=function(n){this.log(\"jsll - onClosedCaptionsChanged\");var t=window.awa?window.awa.behavior.VIDEOCLOSEDCAPTIONCONTROL:null;this.doPing(n,t,null,{closedCaptions:n.endCaptionSelection,startcaptionselection:n.startCaptionSelection,endcaptionselection:n.endCaptionSelection})},t.prototype.onClosedCaptionSettingsChanged=function(n){this.log(\"jsll - onClosedCaptionSettingsChanged\");var t=window.awa?window.awa.behavior.VIDEOCLOSEDCAPTIONSTYLE:null;this.doPing(n,t,null,{closedCaptionSettings:n.closedCaptionSettings,appsel:n.closedCaptionSettings})},t.prototype.onPlaybackRateChanged=function(n){this.log(\"jsll - onPlaybackRateChanged\");this.doPing(n,null,null,{playbackRate:n.playbackRate})},t.prototype.onMediaDownloaded=function(n){this.log(\"jsll - onMediaDownloaded\");var t=window.awa?window.awa.behavior.DOWNLOAD:null;this.doPing(n,t,null,{downloadMedia:n.downloadMedia,dlnm:\"Download\",dlid:n.downloadMedia,dltype:n.downloadType})},t.prototype.onAudioTrackChanged=function(n){this.log(\"jsll - onAudioTrackChanged\");var t=window.awa?window.awa.behavior.VIDEOAUDIOTRACKCONTROL:null;this.doPing(n,t,null,{audioTrack:n.audioTrack,starttrackselection:n.startTrackSelection,endtrackselection:n.endTrackSelection})},t.usageCounters={contentBuffering:{t:\"2\",evt:\"ContentPlay\"},contentError:{t:\"20\",evt:\"ContentPlay\"},contentStart:{t:\"21\",evt:\"ContentPlay\"},contentContinue:{t:\"22\",evt:\"ContentPlay\"},contentComplete:{t:\"23\",evt:\"ContentPlay\"},contentImpression3PP:{t:\"41\",evt:\"ContentPlay\"},commonPlayerImpression:{t:\"61\",evt:\"ContentPlay\"},cc:{t:\"30\",evt:\"Click_Non-nav\"},pause:{t:\"31\",evt:\"Click_Non-nav\"},seek:{t:\"32\",evt:\"Click_Non-nav\"},mute:{t:\"33\",evt:\"Click_Non-nav\"},fullScreenEnter:{t:\"34\",evt:\"Click_Non-nav\"},info:{t:\"35\",evt:\"Click_Non-nav\"},videoQuality:{t:\"36\",evt:\"Click_Non-nav\"},resume:{t:\"37\",evt:\"Click_Non-nav\"},fullScreenExit:{t:\"38\",evt:\"Click_Non-nav\"},replay:{t:\"39\",evt:\"Click_Non-nav\"},unmute:{t:\"40\",evt:\"Click_Non-nav\"},facebook:{t:\"51\",evt:\"Click_Non-nav\"},twitter:{t:\"52\",evt:\"Click_Non-nav\"},email:{t:\"53\",evt:\"Click_Non-nav\"},overlayClick:{t:\"70\",evt:\"Click_Non-nav\"},streamLinkBackButtonClick:{t:\"71\",evt:\"Click_Non-nav\"},overlayShow:{t:\"72\",evt:\"Show_Overlay\"},overlayHide:{t:\"73\",evt:\"Hide_Overlay\"},minimizeOverlay:{t:\"74\",evt:\"Minimize_Overlay\"},maximizeOverlay:{t:\"75\",evt:\"Maximize_Overlay\"},ageGateSubmitClick:{t:\"80\",evt:\"Click_Non-nav\"}},t}(i.BaseReporter);t.JsllReporter=f});define(\"reporting-data\",[\"require\",\"exports\"],function(n,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0})});define(\"player-utility\",[\"require\",\"exports\",\"stringExtensions\",\"player-data-interfaces\",\"utility\",\"environment\"],function(n,t,i,r,u,f){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var e=function(){function n(){}return n.random4CharString=function(){return(1+Math.random()).toString(32).substring(1)},n.loadScript=function(n){var i=document.getElementsByTagName(\"script\")[0],t=document.createElement(\"script\");t.src=n;t.async=!0;t.onload=t.onreadystatechange=function(){t.readyState&&t.readyState!==\"loaded\"&&t.readyState!==\"complete\"||(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t))};i.parentNode.insertBefore(t,i)},n.formatContentErrorMessage=function(n,t,u){var f=i.format(\"[CE{0}]: {1}\",r.VideoErrorCodes[n],t);return u&&(f+=i.format(\"; (Additional: {0})\",u)),f},n.logConsoleMessage=function(t,r){r===void 0&&(r=\"VideoPlayer\");var u=i.format(\"[{0}][{1}] {2}\",n.toLogTime(new Date),r,t);typeof console==\"object\"&&console.log&&console.log(u);f.Environment.isOfficeCLView()&&n.logPanelMessage(u,r)},n.toLogTime=function(n){n||(n=new Date);var t=n.getHours(),i=n.getMinutes(),r=n.getSeconds();return t=t<10?\"0\"+t:t,i=i<10?\"0\"+i:i,r=r<10?\"0\"+r:r,t+\":\"+i+\":\"+r},n.toFriendlyBitrateString=function(n){var t,i,r;return n>=1e7?(i=n/1e6,t=Math.round(i).toLocaleString()+\" Mbps\"):n>=1e6?(i=n/1e6,t=(Math.round(i*100)*.01).toLocaleString()+\" Mbps\"):n>=1e4?(r=n/1e3,t=Math.round(r).toLocaleString()+\" Kbps\"):n>=1e3?(r=n/1e3,t=(Math.round(r*100)*.01).toLocaleString()+\" Kbps\"):t=Math.round(n).toLocaleString()+\" bps\",t},n.logPanelMessage=function(t){typeof n.debugPanel==\"undefined\"&&(n.debugPanel=n.createDebugPanel());n.debugPanel.appendChild(document.createTextNode(\"[\"+(new Date).toLocaleString()+\"]\"+t));n.debugPanel.appendChild(document.createElement(\"BR\"));n.debugPanel.scrollTop=n.debugPanel.scrollHeight-n.debugPanel.clientHeight},n.createDebugPanel=function(){var n=document.createElement(\"div\");return n.className=\"debugPanel\",document.body.appendChild(n),n},n.getGUID=function(){var n=(new Date).getTime();return\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\".replace(/x/g,function(t){var i=Math.floor((n+Math.random()*16)%16),r=t===\"x\"?i:i%4+4;return r.toString(16)})},n.removeFromPendingAjaxRequests=function(t){for(var r=-1,i=0;i<n.pendingAjaxRequests.length;i++)if(t===n.pendingAjaxRequests[i]){r=i;break}r>=0&&n.pendingAjaxRequests.splice(r,1)},n.ajax=function(t,i,r){if(t){var u=null;window.XDomainRequest?(u=new XDomainRequest,u.onload=function(){i&&i(u.responseText);n.removeFromPendingAjaxRequests(u)},n.pendingAjaxRequests.push(u)):window.XMLHttpRequest&&(u=new XMLHttpRequest,u.onreadystatechange=function(){if(u.readyState===4){var n=null;u.status===200&&(n=u.responseText);i&&i(n)}});u&&(u.ontimeout=u.onerror=function(){n.removeFromPendingAjaxRequests(u);r&&r()},u.open(\"GET\",t,!0),u.send())}},n.createVideoPerfMarker=function(n,t){n&&t&&u.createPerfMarker(n+\"_\"+t,!0);t===\"ttvs\"&&u.createPerfMarker(t,!0)},n.getVideoPerfMarker=function(n,t){return n&&t?u.getPerfMarkerValue(n+\"_\"+t):0},n.pendingAjaxRequests=[],n}();t.PlayerUtility=e});define(\"stopwatch\",[\"require\",\"exports\",\"utility\"],function(n,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function n(){this.timestamp=null;this.timeValue=null;this.firstValue=null;this.totalValue=null;this.intervals=null}return n.prototype.start=function(){this.timestamp||(this.timestamp=new Date,this.intervals++)},n.prototype.stop=function(){if(this.timestamp){var n=(new Date).valueOf()-this.timestamp.valueOf();this.timeValue+=n;this.totalValue+=n;this.firstValue||(this.firstValue=this.timeValue);this.timestamp=null}},n.prototype.reset=function(){this.timestamp=null;this.timeValue=this.intervals=this.firstValue=this.totalValue=0},n.prototype.isStarted=function(){return!!this.intervals},n.prototype.isStopped=function(){return!this.timestamp},n.prototype.hasReached=function(n){return i.isNumber(n)&&this.getValue()>=n?(this.timestamp&&(this.totalValue+=(new Date).valueOf()-this.timestamp.valueOf(),this.timestamp=new Date),this.timeValue=0,this.intervals=0,!0):!1},n.prototype.getValue=function(){var n=this.timeValue;return this.timestamp&&(n+=(new Date).valueOf()-this.timestamp.valueOf()),n},n.prototype.getTotalValue=function(){var n=this.totalValue;return this.timestamp&&(n+=(new Date).valueOf()-this.timestamp.valueOf()),n},n.prototype.getFirstValue=function(){return this.firstValue},n.prototype.getIntervals=function(){return this.intervals},n}();t.Stopwatch=r});define(\"environment\",[\"require\",\"exports\"],function(n,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function n(){}return n.isOfficeCLView=function(){var t=parent!==window,n=t?document.referrer:window.location.href;return n.match(/client/i)&&n.match(/support.office./i)?!0:!1},n.isVideoPlayerSupported=function(){return n.isHTML5videoSupported()&&n.isES5Supported()},n.isHTML5videoSupported=function(){try{return!!document.createElement(\"video\").canPlayType}catch(n){}return!1},n.isES5Supported=function(){try{var n=!!(String.prototype&&String.prototype.trim),t=!!(Function.prototype&&Function.prototype.bind),i=!!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions);return n&&t&&i?!0:!1}catch(r){}return!1},n.userAgent=navigator.userAgent,n.isWindowsPhone=!!n.userAgent.match(/Windows Phone/i),n.isSilk=!!n.userAgent.match(/Silk/i),n.hasSilkVersion=/\\bSilk\\/(\\d+)\\.(\\d+)/.test(n.userAgent),n.silkMajor=n.hasSilkVersion?Number(RegExp.$1):0,n.silkMinor=n.hasSilkVersion?Number(RegExp.$2):0,n.isSilkModern=n.silkMajor>3||n.silkMajor>=3&&n.silkMinor>=5,n.isAndroid=!n.isWindowsPhone&&(n.isSilk||!!n.userAgent.match(/Android/i)),n.androidVersion=/Android (\\d+\\.\\d+)/i.test(n.userAgent)?Number(RegExp.$1):n.hasSilkVersion?n.isSilkModern?4:1:0,n.isIPhone=!!n.userAgent.match(/iPhone/i)||!!n.userAgent.match(/iPod/i),n.isIPad=!!n.userAgent.match(/iPad/i),n.isIProduct=n.isIPad||n.isIPhone,n.isBlackBerry=!!n.userAgent.match(/BlackBerry/i),n.isHtcWindowsPhone=n.isWindowsPhone&&!!n.userAgent.match(/HTC/i),n.windowsVersion=/Windows NT(\\s)*(\\d+\\.\\d+)/.test(n.userAgent)?parseFloat(RegExp.$2):-1,n.ieVersion=/MSIE (\\d+\\.\\d+)/.test(n.userAgent)?Number(RegExp.$1):/Trident.*rv:(\\d+\\.\\d+)/.test(n.userAgent)?Number(RegExp.$1):0,n.isIEMobileModern=/\\bIEMobile\\/(\\d+\\.\\d+)/.test(n.userAgent)?Number(RegExp.$1)>=10:/Windows Phone (\\d+\\.\\d+)/i.test(n.userAgent)?Number(RegExp.$1)>=10:!1,n.isAndroidModern=n.isAndroid&&(n.androidVersion>=4||n.isSilkModern),n.isMobile=n.isIProduct||n.isAndroid||n.isBlackBerry||n.isWindowsPhone,n.useNativeControls=n.isIProduct||n.isAndroid||n.isWindowsPhone,n.isWebkit=!!n.userAgent.match(/Webkit/i),n.isFirefox=!!n.userAgent.match(/Firefox/i),n.isChrome=!!n.userAgent.match(/Chrome/i)&&navigator.vendor&&navigator.vendor.indexOf(\"Google\")>-1,n.isEdgeBrowser=n.userAgent.indexOf(\"Edge\")>-1,n.isTV=!!n.userAgent.match(/.*SMART\\-TV.*Safari\\/(535\\.20\\+|537\\.42)/),n.isWindowsRT=/^.*?\\bWindows\\b.*?\\bARM\\b.*?$/m.test(n.userAgent),n.isInIframe=parent!==window,n.isSafari=navigator.vendor&&navigator.vendor.indexOf(\"Apple\")>-1&&navigator.userAgent&&!navigator.userAgent.match(\"CriOS\"),n}();t.Environment=i});define(\"html5-video-wrapper\",[\"require\",\"exports\",\"player-data-interfaces\",\"htmlExtensions\",\"player-constants\",\"utility\"],function(n,t,i,r,u,f){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var e=function(){function n(){var n=this;this.triggerEvents=function(t){if(n.onMediaEventCallback)n.onMediaEventCallback(t)}}return n.prototype.bindVideoEvents=function(n){var t,i,f;if(this.videoTag)for(this.onMediaEventCallback=n,t=0,i=u.MediaEvents;t<i.length;t++)f=i[t],r.addEvents(this.videoTag,f,this.triggerEvents)},n.prototype.unbindVideoEvents=function(){var n,t,i;if(this.videoTag)for(n=0,t=u.MediaEvents;n<t.length;n++)i=t[n],r.removeEvents(this.videoTag,i,this.triggerEvents)},n.prototype.load=function(n,t,i,u){n||(console.log(\"player container is null\"),u&&u());this.videoTag&&this.dispose();this.playerContainer=n;this.videoTag=r.selectFirstElementT(\"video\",this.playerContainer);this.videoTag.autoplay=t;!this.videoTag&&u&&(console.log(\"video tag not found\"),u());i&&setTimeout(i,0)},n.prototype.play=function(){this.videoTag&&this.videoTag.play()},n.prototype.pause=function(){this.videoTag&&this.videoTag.pause()},n.prototype.isPaused=function(){return this.videoTag&&this.videoTag.paused},n.prototype.isLive=function(){return!1},n.prototype.getPlayPosition=function(){return this.videoTag?{currentTime:this.videoTag.currentTime,startTime:0,endTime:this.videoTag.duration}:{currentTime:0,endTime:0,startTime:0}},n.prototype.getVolume=function(){return this.videoTag?this.videoTag.volume:0},n.prototype.setVolume=function(n){this.videoTag&&(this.videoTag.volume=n)},n.prototype.isMuted=function(){return this.videoTag?this.videoTag.muted:!1},n.prototype.mute=function(){this.videoTag&&(this.videoTag.muted=!0,this.videoTag.setAttribute(\"muted\",\"muted\"))},n.prototype.unmute=function(){this.videoTag&&(this.videoTag.muted=!1,this.videoTag.removeAttribute(\"muted\"))},n.prototype.setCurrentTime=function(n){this.videoTag&&(this.videoTag.currentTime=n)},n.prototype.isSeeking=function(){return this.videoTag?this.videoTag.seeking:!1},n.prototype.getBufferedDuration=function(){var n=0;return this.videoTag&&this.videoTag.buffered&&this.videoTag.buffered.length&&(n=this.videoTag.buffered.end(this.videoTag.buffered.length-1)),n},n.prototype.setSource=function(n){if(this.videoTag&&n&&n.length){var t=this.videoTag.getAttribute(\"src\");n[0].url!==t&&(this.videoTag.setAttribute(\"src\",n[0].url),this.videoTag.load&&this.videoTag.load())}},n.prototype.addNativeClosedCaption=function(n,t,i){var f,e,u,r;if(n&&n.length&&this.videoTag){for(this.clearNativeCc(this.videoTag),this.videoTag.setAttribute(\"crossorigin\",\"anonymous\"),f=0,e=n;f<e.length;f++)u=e[f],u.ccType===t&&(r=document.createElement(\"track\"),r.setAttribute(\"src\",u.url),r.setAttribute(\"kind\",\"captions\"),r.setAttribute(\"srclang\",u.locale),r.setAttribute(\"label\",i.getLanguageNameFromLocale(u.locale)),this.videoTag.appendChild(r));this.videoTag.load&&this.videoTag.load()}},n.prototype.clearNativeCc=function(n){var f,t,u,i;if(n)for(f=r.selectElements(\"track\",n),t=0,u=f;t<u.length;t++)i=u[t],i&&i.parentElement===n&&n.removeChild(i)},n.prototype.clearSource=function(){this.videoTag&&(this.videoTag.setAttribute(\"src\",\"\"),this.videoTag.load&&this.videoTag.load())},n.prototype.setPosterFrame=function(n){n&&this.videoTag&&this.videoTag.poster!==n&&(this.videoTag.poster=n)},n.prototype.getError=function(){var n;if(this.videoTag!==null&&this.videoTag.error!==null){switch(this.videoTag.error.code){case this.videoTag.error.MEDIA_ERR_ABORTED:n=i.VideoErrorCodes.MediaErrorAborted;break;case this.videoTag.error.MEDIA_ERR_NETWORK:n=i.VideoErrorCodes.MediaErrorNetwork;break;case this.videoTag.error.MEDIA_ERR_DECODE:n=i.VideoErrorCodes.MediaErrorDecode;break;case this.videoTag.error.MEDIA_ERR_SRC_NOT_SUPPORTED:n=i.VideoErrorCodes.MediaErrorSourceNotSupported;break;default:n=i.VideoErrorCodes.MediaErrorUnknown}return{errorCode:n}}return null},n.prototype.setPlaybackRate=function(n){this.videoTag&&n&&f.isNumber(n)&&(this.videoTag.playbackRate=n)},n.prototype.getPlayerTechName=function(){return\"html5\"},n.prototype.getWrapperName=function(){return\"html5video\"},n.prototype.getAudioTracks=function(){return null},n.prototype.switchToAudioTrack=function(){throw new Error(\"HTML5.switchToAudioTrack is not supported\");},n.prototype.getCurrentAudioTrack=function(){return null},n.prototype.getVideoTracks=function(){return null},n.prototype.switchToVideoTrack=function(){throw new Error(\"HTML5.switchToVideoTrack is not supported\");},n.prototype.getCurrentVideoTrack=function(){return null},n.prototype.setAutoPlay=function(){!this.videoTag||(this.videoTag.autoplay=!0,this.videoTag.muted=!0,this.setVolume(0),this.videoTag.setAttribute(\"playsinline\",\"\"),this.videoTag.setAttribute(\"muted\",\"\"))},n.prototype.dispose=function(){this.unbindVideoEvents();this.clearSource()},n.supportedMediaTypes=[i.MediaTypes.HLS,i.MediaTypes.MP4],n}();t.Html5VideoWrapper=e});define(\"video-wrapper-interface\",[\"require\",\"exports\"],function(n,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0})});define(\"amp-wrapper\",[\"require\",\"exports\",\"player-data-interfaces\",\"htmlExtensions\",\"stringExtensions\",\"player-constants\",\"player-utility\",\"utility\",\"player-config\"],function(n,t,i,r,u,f,e,o,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var h=function(){function n(t){var i=this;this.ampPlayer=null;this.triggerEvents=function(n){if(i.onMediaEventCallback)i.onMediaEventCallback(n)};this.setupAmpPlayer=function(n){var t=r.selectFirstElementT(\"video\",i.playerContainer);if(t||(t=r.selectFirstElementT(\".f-video-player\",i.playerContainer)),!t){console.log(\"could not find video tag\");i.onLoadFailedCallback&&i.onLoadFailedCallback();return}i.ampPlayer=window.amp(t,{nativeControlsForTouch:!1,autoplay:n,controls:!1,logo:{enabled:!1}},i.onAmpPlayerInit);i.ampPlayer.options_.autoplay=n;t.hasAttribute(\"aria-hidden\")&&t.removeAttribute(\"aria-hidden\");i.onLoadedCallback&&i.onLoadedCallback()};this.onAmpPlayerInit=function(){var n=r.selectFirstElement(\".f-video-player\",i.playerContainer),u,s,o,f,h,t;if(n){if(i.useAMPVersion2){var e=r.selectFirstElement(\"div\",n),o=Array.prototype.slice.call(e.children),c=r.selectFirstElementT(\"video\",n);for(u=0,s=o;u<s.length;u++)t=s[u],t&&t.parentElement===e&&!t.contains(c)?e.removeChild(t):(t.hasAttribute(\"aria-label\")&&t.removeAttribute(\"aria-label\"),t.hasAttribute(\"role\")||t.setAttribute(\"role\",\"none\"));c.removeAttribute(\"aria-hidden\")}else for(o=r.selectElements(\"div\",n),f=0,h=o;f<h.length;f++)t=h[f],t&&t.parentElement===n&&n.removeChild(t);n.removeAttribute(\"title\");n.removeAttribute(\"style\");n.removeAttribute(\"tabindex\");n.removeAttribute(\"aria-label\");n.removeAttribute(\"vjs-label\");n.removeAttribute(\"aria-hidden\");i.videoTag=r.selectFirstElementT(\"video\",n)}};this.useAMPVersion2=t;n.isAmpScriptLoaded()||e.PlayerUtility.loadScript(t?s.PlayerConfig.ampVersion2Url:s.PlayerConfig.ampUrl)}return n.isAmpScriptLoaded=function(){return window&&window.amp},n.prototype.bindVideoEvents=function(n){var t,i,r;if(this.ampPlayer)for(this.onMediaEventCallback=n,t=0,i=f.MediaEvents;t<i.length;t++)r=i[t],this.ampPlayer.addEventListener(r,this.triggerEvents)},n.prototype.unbindVideoEvents=function(){var n,t,i;if(this.ampPlayer)for(n=0,t=f.MediaEvents;n<t.length;n++)i=t[n],this.ampPlayer.removeEventListener(i,this.triggerEvents)},n.prototype.load=function(t,i,r,u,f){var e=this;t||(console.log(\"player container is null\"),u&&u());this.ampPlayer&&this.dispose();this.playerContainer=t;this.onLoadedCallback=r;this.onLoadFailedCallback=u;this.onAudioStreamSelectedCallback=f;n.isAmpScriptLoaded()?this.setupAmpPlayer(i):o.poll(n.isAmpScriptLoaded,n.pollingInterval,n.pollingTimeout,function(){e.setupAmpPlayer(i)},this.onLoadFailedCallback)},n.prototype.play=function(){this.ampPlayer&&this.ampPlayer.play()},n.prototype.pause=function(){this.ampPlayer&&this.ampPlayer.pause()},n.prototype.isPaused=function(){return this.ampPlayer&&this.ampPlayer.paused()},n.prototype.isLive=function(){return this.ampPlayer&&this.ampPlayer.isLive()},n.prototype.getPlayPosition=function(){if(!this.ampPlayer)return{currentTime:0,endTime:0,startTime:0};if(this.ampPlayer.isLive()){var n=this.ampPlayer.currentPlayableWindow();return{startTime:n.startInSec,endTime:n.endInSec,currentTime:this.ampPlayer.currentAbsoluteTime()||n.endInSec}}return{currentTime:this.ampPlayer.currentTime(),startTime:0,endTime:this.ampPlayer.duration()}},n.prototype.getVolume=function(){return this.ampPlayer?this.ampPlayer.volume():0},n.prototype.setVolume=function(n){this.ampPlayer&&this.ampPlayer.volume(n)},n.prototype.isMuted=function(){return this.ampPlayer?this.ampPlayer.muted():!1},n.prototype.mute=function(){this.ampPlayer&&this.ampPlayer.muted(!0)},n.prototype.unmute=function(){this.ampPlayer&&this.ampPlayer.muted(!1)},n.prototype.setCurrentTime=function(n){this.ampPlayer&&this.ampPlayer.currentTime(this.ampPlayer.fromPresentationTime(n))},n.prototype.isSeeking=function(){return this.ampPlayer?this.ampPlayer.seeking():!1},n.prototype.getBufferedDuration=function(){var t=0,n;return this.ampPlayer&&this.ampPlayer.buffered&&this.ampPlayer.buffered().length&&(n=this.ampPlayer.buffered(),n.length&&(t=n.end(n.length-1))),t},n.prototype.setSource=function(n){var f,u,e,t,r;if(n&&n.length){for(f=[],u=0,e=n;u<e.length;u++)if(t=e[u],t&&t.url&&this.ampPlayer){r=\"video/mp4\";switch(t.mediaType){case i.MediaTypes.HLS:r=\"application/vnd.apple.mpegurl\";break;case i.MediaTypes.DASH:r=\"application/dash-xml\";break;case i.MediaTypes.SMOOTH:r=\"application/vnd.ms-sstr+xml\"}f.push({src:t.url,type:r})}this.ampPlayer.src(f)}},n.prototype.addNativeClosedCaption=function(n,t,i){var f,e,u,r;if(n&&n.length&&this.videoTag){for(this.clearNativeCc(this.videoTag),this.videoTag.setAttribute(\"crossorigin\",\"anonymous\"),f=0,e=n;f<e.length;f++)u=e[f],u.ccType===t&&(r=document.createElement(\"track\"),r.setAttribute(\"src\",u.url),r.setAttribute(\"kind\",\"captions\"),r.setAttribute(\"srclang\",u.locale),r.setAttribute(\"label\",i.getLanguageNameFromLocale(u.locale)),this.videoTag.appendChild(r));this.videoTag.load&&this.videoTag.load()}},n.prototype.clearNativeCc=function(n){var f,t,u,i;if(n)for(f=r.selectElements(\"track\",n),t=0,u=f;t<u.length;t++)i=u[t],i&&i.parentElement===n&&n.removeChild(i)},n.prototype.clearSource=function(){},n.prototype.setPosterFrame=function(n){n&&this.ampPlayer&&this.ampPlayer.poster()!==n&&this.ampPlayer.poster(n)},n.prototype.getError=function(){var n=this.ampPlayer&&this.ampPlayer.error(),r,t;return n?(t=window,r=n.code&t.amp.errorCode.abortedErrStart?i.VideoErrorCodes.MediaErrorAborted:n.code&t.amp.errorCode.networkErrStart?i.VideoErrorCodes.MediaErrorNetwork:n.code&t.amp.errorCode.decodeErrStart?i.VideoErrorCodes.MediaErrorDecode:n.code&t.amp.errorCode.srcErrStart?i.VideoErrorCodes.MediaErrorSourceNotSupported:n.code&t.amp.errorCode.encryptErrStart?i.VideoErrorCodes.AmpEncryptError:n.code&t.amp.errorCode.srcPlayerMismatchStart?i.VideoErrorCodes.AmpPlayerMismatch:i.VideoErrorCodes.MediaErrorUnknown,{errorCode:r,message:\"AMP Error Code: \"+n.code}):null},n.prototype.setPlaybackRate=function(){},n.prototype.getPlayerTechName=function(){return this.ampPlayer&&this.ampPlayer.currentTechName()},n.prototype.getWrapperName=function(){return\"amp\"},n.prototype.getAudioTracks=function(){var i=this.ampPlayer&&this.ampPlayer.currentAudioStreamList&&this.ampPlayer.currentAudioStreamList(),r,f,t,e;if(!i||(r=i.streams,!r))return null;for(!this.onAudioStreamSelectedCallback||i.addEventListener(\"streamselected\",this.onAudioStreamSelectedCallback),f=[],t=0,e=r;t<e.length;t++){var n=e[t],o=n.language&&u.startsWith(n.language,\"dau-\",!0)||n.title&&u.startsWith(n.title,\"dau-\",!0),s=o&&n.language?n.language.substring(4):n.language;f.push({isDescriptiveAudio:o,bitrate:n.bitrate,languageCode:s,name:n.name,title:n.title})}return f},n.prototype.switchToAudioTrack=function(n){var t=this.ampPlayer&&this.ampPlayer.currentAudioStreamList&&this.ampPlayer.currentAudioStreamList();t&&t.switchIndex(n)},n.prototype.getCurrentAudioTrack=function(){var n=this.ampPlayer&&this.ampPlayer.currentAudioStreamList&&this.ampPlayer.currentAudioStreamList(),t;return!n||!n.enabledIndices?undefined:(t=n.enabledIndices,t.length>0?t[0]:-1)},n.prototype.getVideoTracks=function(){var i=this.getSelectedAmpVideoStream(),r,n,u,t;if(!i||!i.tracks)return null;for(r=[],n=0,u=i.tracks;n<u.length;n++)t=u[n],r.push({bitrate:t.bitrate,width:t.width,height:t.height});return r},n.prototype.getSelectedAmpVideoStream=function(){if(!this.ampPlayer||!this.ampPlayer.currentVideoStreamList)return null;var n=this.ampPlayer.currentVideoStreamList();return n?!n.streams||n.selectedIndex<0||n.selectedIndex>=n.streams.length?null:n.streams[n.selectedIndex]:null},n.prototype.switchToVideoTrack=function(n){var t=this.getSelectedAmpVideoStream();if(!t||!t.selectTrackByIndex)return null;t.selectTrackByIndex(n)},n.prototype.getCurrentVideoTrack=function(){var i=this.getSelectedAmpVideoStream(),n,r,t;if(!i||!i.tracks||i.tracks.length===0)return null;if(n=i.tracks,r=n.reduce(function(n,t){return t.selectable?n+1:n},0),r===n.length)return{auto:!0,trackIndex:null};if(r===1)for(t=0;t<n.length;t++)if(n[t].selectable)return{auto:!1,trackIndex:t};return null},n.prototype.setAutoPlay=function(){this.useAMPVersion2?(this.ampPlayer.autoplay(!0),this.ampPlayer.muted(!0),this.setVolume(0)):!this.videoTag||(this.videoTag.autoplay=!0,this.videoTag.muted=!0,this.setVolume(0),this.videoTag.setAttribute(\"playsinline\",\"\"),this.videoTag.setAttribute(\"muted\",\"\"))},n.prototype.dispose=function(){this.clearSource();this.unbindVideoEvents();this.ampPlayer&&this.ampPlayer.dispose&&this.ampPlayer.dispose();this.ampPlayer=null},n.pollingInterval=50,n.pollingTimeout=3e4,n}();t.AmpWrapper=h});define(\"has-video-wrapper\",[\"require\",\"exports\",\"player-data-interfaces\",\"htmlExtensions\",\"player-constants\",\"player-utility\",\"utility\",\"player-config\"],function(n,t,i,r,u,f,e,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=function(){function n(){var t=this,i;this.hasPlayer=null;this.setupHasPlayer=function(n){if(t.videoTag=r.selectFirstElementT(\"video\",t.playerContainer),t.videoTag||(t.videoTag=r.selectFirstElementT(\".f-video-player\",t.playerContainer)),!t.videoTag){console.log(\"could not find video tag\");t.onLoadFailedCallback&&t.onLoadFailedCallback();return}t.hasPlayer=new window.MediaPlayer;t.hasPlayer.init(t.videoTag);t.hasPlayer.setAutoPlay(n);t.onLoadedCallback&&t.onLoadedCallback()};this.triggerEvents=function(n){if(t.onMediaEventCallback)t.onMediaEventCallback(n)};n.isHasPlayerScriptLoaded()||(i=o.PlayerConfig.hasPlayerUrl.replace(\"url(\",\"\").replace(\")\",\"\").trim(),f.PlayerUtility.loadScript(i))}return n.isHasPlayerScriptLoaded=function(){return window&&window.MediaPlayer},n.prototype.bindVideoEvents=function(n){var t,i,f;if(this.videoTag)for(this.onMediaEventCallback=n,t=0,i=u.MediaEvents;t<i.length;t++)f=i[t],r.addEvents(this.videoTag,f,this.triggerEvents)},n.prototype.unbindVideoEvents=function(){var n,t,i;if(this.videoTag)for(n=0,t=u.MediaEvents;n<t.length;n++)i=t[n],r.removeEvents(this.videoTag,i,this.triggerEvents)},n.prototype.load=function(t,i,r,u){var f=this;t||(console.log(\"player container is null\"),u&&u());this.videoTag&&this.dispose();this.playerContainer=t;this.onLoadedCallback=r;this.onLoadFailedCallback=u;n.isHasPlayerScriptLoaded()?this.setupHasPlayer(i):e.poll(n.isHasPlayerScriptLoaded,n.pollingInterval,n.pollingTimeout,function(){f.setupHasPlayer(i)},this.onLoadFailedCallback)},n.prototype.play=function(){this.videoTag&&this.videoTag.play()},n.prototype.pause=function(){this.videoTag&&this.videoTag.pause()},n.prototype.isPaused=function(){return this.videoTag&&(this.videoTag.paused||this.videoTag.ended)},n.prototype.isLive=function(){return!1},n.prototype.getPlayPosition=function(){return this.videoTag?{currentTime:this.videoTag.currentTime,startTime:0,endTime:this.videoTag.duration}:{currentTime:0,endTime:0,startTime:0}},n.prototype.getVolume=function(){return this.videoTag?this.videoTag.volume:0},n.prototype.setVolume=function(n){this.videoTag&&(this.videoTag.volume=n)},n.prototype.isMuted=function(){return this.videoTag?this.videoTag.muted:!1},n.prototype.mute=function(){this.videoTag&&(this.videoTag.muted=!0)},n.prototype.unmute=function(){this.videoTag&&(this.videoTag.muted=!1)},n.prototype.setCurrentTime=function(n){this.videoTag&&(this.videoTag.currentTime=n)},n.prototype.isSeeking=function(){return this.videoTag?this.videoTag.seeking:!1},n.prototype.getBufferedDuration=function(){var n=0;return this.videoTag&&this.videoTag.buffered&&this.videoTag.buffered.length&&(n=this.videoTag.buffered.end(this.videoTag.buffered.length-1)),n},n.prototype.setSource=function(n){if(this.hasPlayer&&n&&n.length&&n[0].url){this.hasPlayer.setInitialQualityFor(\"video\",999);this.hasPlayer.setQualityFor(\"video\",999);var t={url:n[0].url,protocol:n[0].mediaType===i.MediaTypes.HLS?\"HLS\":null};this.hasPlayer.load(t)}},n.prototype.addNativeClosedCaption=function(n,t,i){var f,e,u,r;if(n&&n.length&&this.videoTag){for(this.clearNativeCc(this.videoTag),this.videoTag.setAttribute(\"crossorigin\",\"anonymous\"),f=0,e=n;f<e.length;f++)u=e[f],u.ccType===t&&(r=document.createElement(\"track\"),r.setAttribute(\"src\",u.url),r.setAttribute(\"kind\",\"captions\"),r.setAttribute(\"srclang\",u.locale),r.setAttribute(\"label\",i.getLanguageNameFromLocale(u.locale)),this.videoTag.appendChild(r));this.videoTag.load&&this.videoTag.load()}},n.prototype.clearNativeCc=function(n){var f,t,u,i;if(n)for(f=r.selectElements(\"track\",n),t=0,u=f;t<u.length;t++)i=u[t],i&&i.parentElement===n&&n.removeChild(i)},n.prototype.clearSource=function(){this.hasPlayer&&this.hasPlayer.reset(1)},n.prototype.setPosterFrame=function(n){n&&this.videoTag&&this.videoTag.poster!==n&&(this.videoTag.poster=n)},n.prototype.getError=function(){var n;if(this.videoTag!==null&&this.videoTag.error!==null){switch(this.videoTag.error.code){case this.videoTag.error.MEDIA_ERR_ABORTED:n=i.VideoErrorCodes.MediaErrorAborted;break;case this.videoTag.error.MEDIA_ERR_NETWORK:n=i.VideoErrorCodes.MediaErrorNetwork;break;case this.videoTag.error.MEDIA_ERR_DECODE:n=i.VideoErrorCodes.MediaErrorDecode;break;case this.videoTag.error.MEDIA_ERR_SRC_NOT_SUPPORTED:n=i.VideoErrorCodes.MediaErrorSourceNotSupported;break;default:n=i.VideoErrorCodes.MediaErrorUnknown}return{errorCode:n}}return null},n.prototype.setPlaybackRate=function(n){this.videoTag&&n&&e.isNumber(n)&&(this.videoTag.playbackRate=n)},n.prototype.getPlayerTechName=function(){return\"hasplayer\"},n.prototype.getWrapperName=function(){return\"hasplayerVideo\"},n.prototype.getAudioTracks=function(){return null},n.prototype.switchToAudioTrack=function(){throw new Error(\"HTML5.switchToAudioTrack is not supported\");},n.prototype.getCurrentAudioTrack=function(){return null},n.prototype.getVideoTracks=function(){return null},n.prototype.switchToVideoTrack=function(){throw new Error(\"HTML5.switchToVideoTrack is not supported\");},n.prototype.getCurrentVideoTrack=function(){return null},n.prototype.setAutoPlay=function(){this.hasPlayer.setAutoPlay(!0)},n.prototype.dispose=function(){this.unbindVideoEvents();this.clearSource();this.hasPlayer&&this.hasPlayer.dispose&&this.hasPlayer.dispose();this.hasPlayer=null},n.pollingInterval=50,n.pollingTimeout=3e4,n.supportedMediaTypes=[i.MediaTypes.HLS,i.MediaTypes.MP4],n}();t.HasPlayerVideoWrapper=s});define(\"hls-video-wrapper\",[\"require\",\"exports\",\"player-data-interfaces\",\"htmlExtensions\",\"player-constants\",\"player-utility\",\"utility\",\"player-config\"],function(n,t,i,r,u,f,e,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=function(){function n(){var t=this,i;this.hlsPlayer=null;this.setupHlsPlayer=function(){if(t.videoTag=r.selectFirstElementT(\"video\",t.playerContainer),t.videoTag||(t.videoTag=r.selectFirstElementT(\".f-video-player\",t.playerContainer)),!t.videoTag){console.log(\"could not find video tag\");t.onLoadFailedCallback&&t.onLoadFailedCallback();return}t.hlsPlayer=new window.Hls;t.hlsPlayer.attachMedia(t.videoTag);t.onLoadedCallback&&t.onLoadedCallback()};this.triggerEvents=function(n){if(t.onMediaEventCallback)t.onMediaEventCallback(n)};n.isHlsPlayerScriptLoaded()||(i=o.PlayerConfig.hlsPlayerUrl.replace(\"url(\",\"\").replace(\")\",\"\").trim(),f.PlayerUtility.loadScript(i))}return n.isHlsPlayerScriptLoaded=function(){return window&&window.Hls},n.prototype.bindVideoEvents=function(n){var t,i,f;if(this.videoTag)for(this.onMediaEventCallback=n,t=0,i=u.MediaEvents;t<i.length;t++)f=i[t],r.addEvents(this.videoTag,f,this.triggerEvents)},n.prototype.unbindVideoEvents=function(){var n,t,i;if(this.videoTag)for(n=0,t=u.MediaEvents;n<t.length;n++)i=t[n],r.removeEvents(this.videoTag,i,this.triggerEvents)},n.prototype.load=function(t,i,r,u){var f=this;t||(console.log(\"player container is null\"),u&&u());this.videoTag&&this.dispose();this.playerContainer=t;this.onLoadedCallback=r;this.onLoadFailedCallback=u;n.isHlsPlayerScriptLoaded()?this.setupHlsPlayer(i):e.poll(n.isHlsPlayerScriptLoaded,n.pollingInterval,n.pollingTimeout,function(){f.setupHlsPlayer(i)},this.onLoadFailedCallback)},n.prototype.play=function(){this.videoTag&&this.videoTag.play()},n.prototype.pause=function(){this.videoTag&&this.videoTag.pause()},n.prototype.isPaused=function(){return this.videoTag&&(this.videoTag.paused||this.videoTag.ended)},n.prototype.isLive=function(){return!1},n.prototype.getPlayPosition=function(){return this.videoTag?{currentTime:this.videoTag.currentTime,startTime:0,endTime:this.videoTag.duration}:{currentTime:0,endTime:0,startTime:0}},n.prototype.getVolume=function(){return this.videoTag?this.videoTag.volume:0},n.prototype.setVolume=function(n){this.videoTag&&(this.videoTag.volume=n)},n.prototype.isMuted=function(){return this.videoTag?this.videoTag.muted:!1},n.prototype.mute=function(){this.videoTag&&(this.videoTag.muted=!0)},n.prototype.unmute=function(){this.videoTag&&(this.videoTag.muted=!1)},n.prototype.setCurrentTime=function(n){this.videoTag&&(this.videoTag.currentTime=n)},n.prototype.isSeeking=function(){return this.videoTag?this.videoTag.seeking:!1},n.prototype.getBufferedDuration=function(){var n=0;return this.videoTag&&this.videoTag.buffered&&this.videoTag.buffered.length&&(n=this.videoTag.buffered.end(this.videoTag.buffered.length-1)),n},n.prototype.setSource=function(n){this.hlsPlayer&&n&&n.length&&n[0].url&&this.hlsPlayer.loadSource(n[0].url)},n.prototype.addNativeClosedCaption=function(n,t,i){var f,e,u,r;if(n&&n.length&&this.videoTag){for(this.clearNativeCc(this.videoTag),this.videoTag.setAttribute(\"crossorigin\",\"anonymous\"),f=0,e=n;f<e.length;f++)u=e[f],u.ccType===t&&(r=document.createElement(\"track\"),r.setAttribute(\"src\",u.url),r.setAttribute(\"kind\",\"captions\"),r.setAttribute(\"srclang\",u.locale),r.setAttribute(\"label\",i.getLanguageNameFromLocale(u.locale)),this.videoTag.appendChild(r));this.videoTag.load&&this.videoTag.load()}},n.prototype.clearNativeCc=function(n){var f,t,u,i;if(n)for(f=r.selectElements(\"track\",n),t=0,u=f;t<u.length;t++)i=u[t],i&&i.parentElement===n&&n.removeChild(i)},n.prototype.clearSource=function(){this.hlsPlayer&&this.hlsPlayer.detachMedia()},n.prototype.setPosterFrame=function(n){n&&this.videoTag&&this.videoTag.poster!==n&&(this.videoTag.poster=n)},n.prototype.getError=function(){var n;if(this.videoTag!==null&&this.videoTag.error!==null){switch(this.videoTag.error.code){case this.videoTag.error.MEDIA_ERR_ABORTED:n=i.VideoErrorCodes.MediaErrorAborted;break;case this.videoTag.error.MEDIA_ERR_NETWORK:n=i.VideoErrorCodes.MediaErrorNetwork;break;case this.videoTag.error.MEDIA_ERR_DECODE:n=i.VideoErrorCodes.MediaErrorDecode;break;case this.videoTag.error.MEDIA_ERR_SRC_NOT_SUPPORTED:n=i.VideoErrorCodes.MediaErrorSourceNotSupported;break;default:n=i.VideoErrorCodes.MediaErrorUnknown}return{errorCode:n}}return null},n.prototype.setPlaybackRate=function(n){this.videoTag&&n&&e.isNumber(n)&&(this.videoTag.playbackRate=n)},n.prototype.getPlayerTechName=function(){return\"hlsplayer\"},n.prototype.getWrapperName=function(){return\"hlsplayerVideo\"},n.prototype.getAudioTracks=function(){return null},n.prototype.switchToAudioTrack=function(){throw new Error(\"HTML5.switchToAudioTrack is not supported\");},n.prototype.getCurrentAudioTrack=function(){return null},n.prototype.getVideoTracks=function(){return null},n.prototype.switchToVideoTrack=function(){throw new Error(\"HTML5.switchToVideoTrack is not supported\");},n.prototype.getCurrentVideoTrack=function(){return null},n.prototype.setAutoPlay=function(){this.videoTag.autoplay=!0;this.videoTag.muted=!0;this.setVolume(0);this.videoTag.setAttribute(\"playsinline\",\"\");this.videoTag.setAttribute(\"muted\",\"\")},n.prototype.dispose=function(){this.unbindVideoEvents();this.clearSource();this.hlsPlayer&&this.hlsPlayer.dispose&&this.hlsPlayer.dispose();this.hlsPlayer=null},n.pollingInterval=50,n.pollingTimeout=3e4,n.supportedMediaTypes=[i.MediaTypes.HLS,i.MediaTypes.MP4],n}();t.HlsPlayerVideoWrapper=s});define(\"native-video-wrapper\",[\"require\",\"exports\",\"htmlExtensions\"],function(n,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function n(){var n=this;this.triggerEvents=function(t){var i=null;if(t.state===\"MediaOpened\"?n.ensureLoadEventRaised():t.state===\"MediaEnded\"?(i=document.createEvent(\"CustomEvent\"),i.initEvent(\"ended\")):t.state===\"MediaFailed\"?(i=document.createEvent(\"CustomEvent\"),i.initEvent(\"error\")):i=n.createMediaPlaybackEvent(t.target),i)n.onMediaEventCallback(i)}}return n.prototype.bindVideoEvents=function(n){this.hasStoreApi&&(this.onMediaEventCallback=n,window.storeApi.backgroundVideoPlayer.addEventListener(\"mediaplayerstatechanged\",this.triggerEvents))},n.prototype.unbindVideoEvents=function(){this.hasStoreApi&&window.storeApi.backgroundVideoPlayer.removeEventListener(\"mediaplayerstatechanged\",this.triggerEvents)},n.prototype.load=function(n,t,r,u){var f,o,e;if(n||(console.log(\"player container is null\"),u&&u()),this.hasLoaded&&this.dispose(),this.playerContainer=n,f=i.selectFirstElementT(\"video\",this.playerContainer),!f&&u&&(console.log(\"video tag not found\"),u()),window&&window.storeApi&&window.storeApi.backgroundVideoPlayer?this.hasStoreApi=!0:u&&(console.log(\"native store host api not found\"),this.hasStoreApi=!1,u()),this.autoPlay=t,f&&this.hasStoreApi){for(o=f;o.parentElement;)o.style.background=\"transparent\",o=o.parentElement;e=document.createElement(\"DIV\");e.className=f.className;e.style.position=\"absolute\";e.style.width=\"100%\";e.style.height=\"100%\";f.parentNode.insertBefore(e,f);f.remove()}r&&setTimeout(r,0);this.hasLoaded=!0},n.prototype.play=function(){this.hasStoreApi&&(!this.autoPlay&&this.sourceUri?(window.storeApi.backgroundVideoPlayer.source=this.sourceUri,this.sourceUri=null):window.storeApi.backgroundVideoPlayer.play())},n.prototype.pause=function(){this.hasStoreApi&&window.storeApi.backgroundVideoPlayer.pause()},n.prototype.isPaused=function(){return this.hasStoreApi?!(window.storeApi.backgroundVideoPlayer.mediaPlaybackState===\"Opening\"||window.storeApi.backgroundVideoPlayer.mediaPlaybackState===\"Buffering\"||window.storeApi.backgroundVideoPlayer.mediaPlaybackState===\"Playing\"):!1},n.prototype.isLive=function(){return!1},n.prototype.getPlayPosition=function(){return{currentTime:0,endTime:0,startTime:0}},n.prototype.getVolume=function(){return 0},n.prototype.setVolume=function(){},n.prototype.isMuted=function(){return this.hasStoreApi?window.storeApi.backgroundVideoPlayer.isMuted:!1},n.prototype.mute=function(){this.hasStoreApi&&(window.storeApi.backgroundVideoPlayer.isMuted=!0)},n.prototype.unmute=function(){this.hasStoreApi&&(window.storeApi.backgroundVideoPlayer.isMuted=!1)},n.prototype.setCurrentTime=function(){},n.prototype.isSeeking=function(){return!1},n.prototype.getBufferedDuration=function(){return 0},n.prototype.setSource=function(n){var i,t;if(this.hasStoreApi)if(window.storeApi.backgroundVideoPlayer.source){if(this.ensureLoadEventRaised(),i=this.createMediaPlaybackEvent(window.storeApi.backgroundVideoPlayer),i)this.onMediaEventCallback(i)}else t=n[0].url,t.charAt(0)===\"/\"&&(t=\"http:\"+t),this.autoPlay?window.storeApi.backgroundVideoPlayer.source=t:this.sourceUri=t},n.prototype.addNativeClosedCaption=function(){},n.prototype.clearSource=function(){this.hasStoreApi&&(window.storeApi.backgroundVideoPlayer.source=null,window.storeApi.backgroundVideoPlayer.posterSource=null)},n.prototype.setPosterFrame=function(n){this.hasStoreApi&&(window.storeApi.backgroundVideoPlayer.posterSource||(n.charAt(0)===\"/\"&&(n=\"http:\"+n),window.storeApi.backgroundVideoPlayer.posterSource=n))},n.prototype.getError=function(){return null},n.prototype.setPlaybackRate=function(){},n.prototype.getPlayerTechName=function(){return\"nativeplayer\"},n.prototype.getWrapperName=function(){return\"nativeplayer\"},n.prototype.getAudioTracks=function(){return null},n.prototype.switchToAudioTrack=function(){throw new Error(\"HTML5.switchToAudioTrack is not supported\");},n.prototype.getCurrentAudioTrack=function(){return null},n.prototype.getVideoTracks=function(){return null},n.prototype.switchToVideoTrack=function(){throw new Error(\"HTML5.switchToVideoTrack is not supported\");},n.prototype.getCurrentVideoTrack=function(){return null},n.prototype.setAutoPlay=function(){},n.prototype.dispose=function(){this.unbindVideoEvents();this.clearSource()},n.prototype.ensureLoadEventRaised=function(){if(!this.hasRaisedLoadedEvent&&this.onMediaEventCallback){var n=document.createEvent(\"CustomEvent\");n.initEvent(\"loadeddata\",!1,!1);this.hasRaisedLoadedEvent=!0;this.onMediaEventCallback(n)}},n.prototype.createMediaPlaybackEvent=function(n){var t=null;switch(n.mediaPlaybackState){case\"Paused\":t=document.createEvent(\"CustomEvent\");t.initEvent(\"pause\",!1,!1);break;case\"Playing\":t=document.createEvent(\"CustomEvent\");t.initEvent(\"playing\",!1,!1)}return t},n}();t.NativeVideoWrapper=r});__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define(\"button\",[\"require\",\"exports\",\"observableComponent\",\"htmlExtensions\",\"utility\"],function(n,t,i,r,u){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var f=function(n){function t(t){var i=n.call(this,t)||this;return i.handleKeydown=function(n){var t=u.getKeyCode(n);switch(t){case 32:r.preventDefault(n);i.emitClickEvent()}},i.update(),i}return __extends(t,n),t.prototype.update=function(){this.element&&this.element.nodeName===\"A\"&&(this.element.getAttribute(\"role\")||\"\").toLowerCase()===\"button\"&&r.addEvent(this.element,r.eventTypes.keydown,this.handleKeydown)},t.prototype.teardown=function(){r.removeEvent(this.element,r.eventTypes.keydown,this.handleKeydown)},t.prototype.emitClickEvent=function(){r.customEvent(this.element,r.eventTypes.click)},t.selector=\".c-button\",t.typeName=\"Button\",t}(i.ObservableComponent);t.Button=f});require([\"button\",\"componentFactory\"],function(n,t){t.ComponentFactory&&t.ComponentFactory.create&&t.ComponentFactory.create([{c:n.Button}])});define(\"htmlExtensions\",[\"require\",\"exports\",\"stringExtensions\"],function(n,t,i){\"use strict\";function e(n,t,i,f){var e,o,s;for(f===void 0&&(f=!1),e=0,o=u(n);e<o.length;e++)s=o[e],y(s,i,f,r[t])}function g(n,t,r,f){var e,s,l,o,h,c;if(f===void 0&&(f=!1),!i.isNullOrWhiteSpace(t))for(e=0,s=u(n);e<s.length;e++)for(l=s[e],o=0,h=t.split(/\\s+/);o<h.length;o++)c=h[o],i.isNullOrWhiteSpace(c)||y(l,r,f,c)}function nt(n,t,r,f){var e,s,l,o,h,c;for(f===void 0&&(f=!1),e=0,s=u(n);e<s.length;e++)for(l=s[e],o=0,h=u(t);o<h.length;o++)c=h[o],i.isNullOrWhiteSpace(c)||d(l,r,f,c)}function tt(n){n=v(n);n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}function it(n,t,i,r){r===void 0&&(r=150);var f,u=0,o=function(n){var t=Date.now();f&&(clearTimeout(f),f=undefined);!!u&&t<u+r?f=setTimeout(function(){u=Date.now();i(n)},r-(t-u)):(u=t,i(n))};return e(n,t,o),o}function rt(n,t,r,f,e){function p(n){var i,t=0;return function(r){var u=Date.now();clearTimeout(i);!!t&&u<t+e?i=setTimeout(function(){t=u;n(r)},e-(u-t)):(t=u,n(r))}}var o,h,a,s,c,l,v;if(f===void 0&&(f=!1),e===void 0&&(e=150),!i.isNullOrWhiteSpace(t))for(o=0,h=u(n);o<h.length;o++)for(a=h[o],s=0,c=t.split(/\\s+/);s<c.length;s++)l=c[s],i.isNullOrWhiteSpace(l)||(v=p(r),y(a,v,f,l))}function ut(n,t,i,r){r===void 0&&(r=150);var u,f=function(n){window.clearTimeout(u);u=setTimeout(function(){i(n)},r)};return e(n,t,f),f}function ft(n,t){if(t===void 0&&(t=5e3),document.readyState===\"complete\"){n.call(null);return}if(!document.attachEvent&&document.readyState===\"interactive\"){n.call(null);return}var o,i,u,f=function(){clearTimeout(o);i&&c(document,r.DOMContentLoaded,i);u&&c(document,r.onreadystatechange,u);l.requestAnimationFrame.call(window,n)};if(o=setTimeout(function(){f(\"timedout\")},t),document.addEventListener){i=function(){f(\"domcontentloaded\")};e(document,r.DOMContentLoaded,i,!1);return}document.attachEvent&&(u=function(){document.readyState===\"complete\"&&f(\"readystatecomplete\")},e(document,r.onreadystatechange,u,!1))}function et(n,t){t===void 0&&(t=5e3);var i,u=setTimeout(function(){clearTimeout(u);c(window,r.load,i);n.call(null)},t);i=function(){clearTimeout(u);l.requestAnimationFrame.call(window,n)};document.readyState===\"complete\"?(clearTimeout(u),n.call(null)):e(window,r.load,i)}function p(n,t){!n||i.isNullOrWhiteSpace(t)||b(n,t)||(n.classList?n.classList.add(t):n.className=i.trim(n.className+\" \"+t))}function w(n,t){var o,e,s,r,f;if(!!n&&!i.isNullOrWhiteSpace(t))for(o=\" \"+i.trim(t)+\" \",e=0,s=u(n);e<s.length;e++)if(r=s[e],r.classList)r.classList.remove(t);else if(!i.isNullOrWhiteSpace(r.className)){for(f=\" \"+r.className+\" \";f.indexOf(o)>-1;)f=f.replace(o,\" \");r.className=i.trim(f)}}function ot(n,t){var i,r,u;if(t)for(i=0,r=t;i<r.length;i++)u=r[i],w(n,u)}function st(n,t){var i,r,u;if(t)for(i=0,r=t;i<r.length;i++)u=r[i],p(n,u)}function ht(n,t){var u,f,r;if(n&&t)for(u=0,f=t;u<f.length;u++)r=f[u],i.isNullOrWhiteSpace(r.name)||i.isNullOrWhiteSpace(r.value)||n.setAttribute(r.name,r.value)}function b(n,t){return!n||i.isNullOrWhiteSpace(t)?!1:n.classList?n.classList.contains(t):(\" \"+n.className+\" \").indexOf(\" \"+i.trim(t)+\" \")>-1}function ct(n){return n?n.parentElement.removeChild(n):n}function lt(n,t){return h(n,t)}function at(n,t){var i=h(n,t);return!i||!i.length?null:i[0]}function h(n,t){var r,u;if(i.isNullOrWhiteSpace(n)||n===\"#\")return[];if(r=t||document,/^[\\#.]?[\\w-]+$/.test(n)){switch(n[0]){case\".\":return r.getElementsByClassName?o(r.getElementsByClassName(n.slice(1))):o(r.querySelectorAll(n));case\"#\":return u=r.querySelector(n),u?[u]:[]}return o(r.getElementsByTagName(n))}return o(r.querySelectorAll(n))}function vt(n,t){var i=h(n,t);return!i||!i.length?null:i[0]}function yt(n,t){var o=t||document,u,f,i,r,e;for(u=n.split(\",\"),i=0,r=u;i<r.length;i++)e=r[i],f+=this.selectElements(e,o);return f}function o(n){var i,t;if(!n)return[];for(i=[],t=0;t<n.length;t++)i.push(n[t]);return i}function pt(n){for(n===void 0&&(n=document.documentElement);n!==null;){var t=n.getAttribute(\"dir\");if(!t)n=n.parentElement;else return t===\"rtl\"?s.right:s.left}return s.left}function a(n){var i,t,r;if(n){i=n.getBoundingClientRect();t={};for(r in i)t[r]=i[r];return typeof t.width==\"undefined\"&&(t.width=n.offsetWidth),typeof t.height==\"undefined\"&&(t.height=n.offsetHeight),t}}function wt(n){if(n)return{width:parseFloat(a(n).width)+parseFloat(f(n,\"margin-left\"))+parseFloat(f(n,\"margin-right\")),height:parseFloat(a(n).height)+parseFloat(f(n,\"margin-top\"))+parseFloat(f(n,\"margin-bottom\"))}}function f(n,t,r){if(!n)return null;if(!r&&r!==\"\")return r=n.style[t],i.isNullOrWhiteSpace(r)&&(r=getComputedStyle(n),r=r[t]),r;n.style[t]=r}function c(n,t,i,f){var e,o,s;if(n&&t&&i)for(e=0,o=u(n);e<o.length;e++)s=o[e],d(s,i,f,r[t])}function k(n){return Array.isArray?Array.isArray(n):{}.toString.call(n)===\"[object Array]\"}function u(n){return k(n)?n:[n]}function bt(n,t){return!!n&&n!==t&&n.contains(t)}function kt(n,t){return!!n&&n.contains(t)}function dt(n){return!n?\"\":n.textContent||n.innerText||\"\"}function gt(n,t){!n||t===null||(n.textContent?n.textContent=t:n.innerHTML=t)}function ni(n){n&&(n.innerHTML=\"\")}function ti(n){return n=v(n),n.target||n.srcElement}function v(n){return n||window.event}function y(n,t,i,r){i===void 0&&(i=!1);!n||(window.addEventListener?n.addEventListener(r,t,i):n.attachEvent(\"on\"+r,t))}function d(n,t,i,r){i===void 0&&(i=!1);!n||(window.removeEventListener?n.removeEventListener(r,t,i):n.detachEvent(\"on\"+r,t))}function ii(n,t,i){if(i===void 0&&(i={}),!n||!t)return null;var f=typeof t==\"string\"?t:r[t],u=null;if(i.bubbles=typeof i.bubbles==\"undefined\"?!0:i.bubbles,i.cancelable=typeof i.cancelable==\"undefined\"?!0:i.cancelable,window.CustomEvent&&typeof CustomEvent==\"function\")u=new CustomEvent(f,i),i.changedTouches&&i.changedTouches.length&&(u.changedTouches=i.changedTouches);else if(document.createEvent)u=document.createEvent(\"CustomEvent\"),u.initCustomEvent(f,i.bubbles,i.cancelable,i.detail),i.changedTouches&&i.changedTouches.length&&(u.changedTouches=i.changedTouches);else{u=document.createEventObject();try{n.fireEvent(\"on\"+f,u)}catch(e){return undefined}return u}return n.dispatchEvent(u),u}function ri(n){n.stopPropagation?n.stopPropagation():n.returnValue=!1}function ui(n){return n===void 0&&(n=window),n.scrollY||n.pageYOffset||(n.document.compatMode===\"CSS1Compat\"?n.document.documentElement.scrollTop:n.document.body.scrollTop)}function fi(n){if(!n)return window.document.documentElement;for(var i=n.ownerDocument.documentElement,t=n.offsetParent;t&&f(t,\"position\")==\"static\";)t=t.offsetParent;return t||i}function ei(n,t){if(n&&t){var i=t.clientHeight,r=t.scrollHeight;r>i&&(t.scrollTop=Math.min(n.offsetTop-t.firstElementChild.offsetTop,r-i))}}function oi(n){return typeof n.complete!=\"undefined\"&&typeof n.naturalHeight!=\"undefined\"?n&&n.complete&&n.naturalHeight>0:!0}function si(n){return n&&typeof n.complete!=\"undefined\"&&typeof n.naturalHeight!=\"undefined\"?n&&n.complete&&n.naturalWidth==0&&n.naturalHeight==0:!1}function hi(n){var i=n.touches&&n.touches.length?n.touches:[n],t=n.changedTouches&&n.changedTouches[0]||i[0];return{x:t.clientX,y:t.clientY}}function ci(n,t){for(var i=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;n;){if(i.call(n,t))break;n=n.parentElement}return n}function li(n,t){t===void 0&&(t=!0);!!n&&(window.PointerEvent||window.navigator.pointerEnabled)&&f(n,\"touchAction\",t?\"pan-y\":\"pan-x\")}var l,s,r;Object.defineProperty(t,\"__esModule\",{value:!0}),function(n){n.requestAnimationFrame=window.requestAnimationFrame||function(n){typeof n==\"function\"&&window.setTimeout(n,16.7)}}(l=t.SafeBrowserApis||(t.SafeBrowserApis={})),function(n){n[n.right=0]=\"right\";n[n.left=1]=\"left\"}(s=t.Direction||(t.Direction={})),function(n){n[n.animationend=0]=\"animationend\";n[n.blur=1]=\"blur\";n[n.change=2]=\"change\";n[n.click=3]=\"click\";n[n.DOMContentLoaded=4]=\"DOMContentLoaded\";n[n.DOMNodeInserted=5]=\"DOMNodeInserted\";n[n.DOMNodeRemoved=6]=\"DOMNodeRemoved\";n[n.ended=7]=\"ended\";n[n.error=8]=\"error\";n[n.focus=9]=\"focus\";n[n.focusin=10]=\"focusin\";n[n.focusout=11]=\"focusout\";n[n.input=12]=\"input\";n[n.load=13]=\"load\";n[n.keydown=14]=\"keydown\";n[n.keypress=15]=\"keypress\";n[n.keyup=16]=\"keyup\";n[n.loadedmetadata=17]=\"loadedmetadata\";n[n.mousedown=18]=\"mousedown\";n[n.mousemove=19]=\"mousemove\";n[n.mouseout=20]=\"mouseout\";n[n.mouseover=21]=\"mouseover\";n[n.mouseup=22]=\"mouseup\";n[n.onreadystatechange=23]=\"onreadystatechange\";n[n.resize=24]=\"resize\";n[n.scroll=25]=\"scroll\";n[n.submit=26]=\"submit\";n[n.timeupdate=27]=\"timeupdate\";n[n.touchcancel=28]=\"touchcancel\";n[n.touchend=29]=\"touchend\";n[n.touchmove=30]=\"touchmove\";n[n.touchstart=31]=\"touchstart\";n[n.wheel=32]=\"wheel\"}(r=t.eventTypes||(t.eventTypes={}));t.addEvent=e;t.addEvents=g;t.removeEvents=nt;t.preventDefault=tt;t.addThrottledEvent=it;t.addThrottledEvents=rt;t.addDebouncedEvent=ut;t.documentReady=ft;t.onDeferred=et;t.addClass=p;t.removeClass=w;t.removeClasses=ot;t.addClasses=st;t.addAttribute=ht;t.hasClass=b;t.removeElement=ct;t.selectElements=lt;t.selectFirstElement=at;t.selectElementsT=h;t.selectFirstElementT=vt;t.selectElementsFromSelectors=yt;t.nodeListToArray=o;t.getDirection=pt;t.getClientRect=a;t.getClientRectWithMargin=wt;t.css=f;t.removeEvent=c;t.isArray=k;t.toArray=u;t.isDescendant=bt;t.isDescendantOrSelf=kt;t.getText=dt;t.setText=gt;t.removeInnerHtml=ni;t.getEventTargetOrSrcElement=ti;t.getEvent=v;t.customEvent=ii;t.stopPropagation=ri;t.getScrollY=ui;t.getOffsetParent=fi;t.scrollElementIntoView=ei;t.isImageLoadedSuccessfully=oi;t.isImageLoadFailed=si;t.getCoordinates=hi;t.getParent=ci;t.preventDefaultSwipeAction=li});define(\"stringExtensions\",[\"require\",\"exports\"],function(n,t){\"use strict\";function r(n){return!n||typeof n!=\"string\"||!i(n)}function i(n){return!n||typeof n!=\"string\"?n:n.trim?n.trim():n.replace(/^\\s+|\\s+$/g,\"\")}function u(n,t,i){return(i===void 0&&(i=!0),!n||!t)?!1:(i&&(n=n.toLocaleLowerCase(),t=t.toLocaleLowerCase()),n.startsWith)?n.startsWith(t):n.indexOf(t)===0}function f(n,t,i){return(i===void 0&&(i=!0),!n||!t)?!1:(i&&(n=n.toLocaleLowerCase(),t=t.toLocaleLowerCase()),n.endsWith)?n.endsWith(t):n.lastIndexOf(t)===n.length-t.length}function e(n,t,i){if(i===void 0&&(i=!0),!n||!t)return 0;var r=0;for(i&&(n=n.toLocaleLowerCase(),t=t.toLocaleLowerCase());n.charCodeAt(r)===t.charCodeAt(r);)r++;return r}function o(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return n.replace(/{(\\d+)}/g,function(n,t){if(t>=i.length)return n;var r=i[t];return typeof r!=\"number\"&&!r?\"\":typeof r==\"string\"?r:r.toString()})}Object.defineProperty(t,\"__esModule\",{value:!0});t.isNullOrWhiteSpace=r;t.trim=i;t.startsWith=u;t.endsWith=f;t.getMatchLength=e;t.format=o});define(\"keycodes\",[\"require\",\"exports\"],function(n,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0})});define(\"observableComponent\",[\"require\",\"exports\",\"htmlExtensions\"],function(n,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function n(t,i){i===void 0&&(i=null);this.element=t;this.ignoreNextDOMChange=!1;this.observing=!1;n.shouldInitializeAsClass(t,i)&&this.setObserver()}return n.prototype.detach=function(){this.unObserve();this.teardown()},n.prototype.isObserving=function(){return this.observing},n.prototype.unObserve=function(){this.observing=!1;this.modernObserver&&this.modernObserver.disconnect();i.removeEvent(this.element,i.eventTypes.DOMNodeInserted,this.obsoleteNodeInsertedEventHander);i.removeEvent(this.element,i.eventTypes.DOMNodeRemoved,this.obsoleteNodeRemovedEventHandler)},n.prototype.setObserver=function(){this.observing=!0;typeof n.mutationObserver!=\"undefined\"?this.observeModern():\"MutationEvent\"in window&&this.observeObsolete()},n.prototype.observeModern=function(){var t=this,i=function(n){t.onModernMutations(n)};this.modernObserver=new n.mutationObserver(i);this.modernObserver.observe(this.element,{childList:!0,subtree:!0})},n.prototype.onModernMutations=function(n){var r,u,f,e,i,o,t,s;if(this.ignoreNextDOMChange){this.ignoreNextDOMChange=!1;return}for(r=!1,u=!1,f=0,e=n;f<e.length;f++){for(i=e[f],t=0,o=i.addedNodes.length;t<o;t++)i.addedNodes[t].nodeType===Node.ELEMENT_NODE&&(r=!0,u=!0);for(t=0,s=i.removedNodes.length;t<s;t++)i.removedNodes[t].nodeType===Node.ELEMENT_NODE&&(r=!0,i.removedNodes[t]!==this.element&&(u=!0))}r&&this.teardown();u&&this.update()},n.prototype.observeObsolete=function(){var n=this;this.obsoleteNodeInsertedEventHander=i.addDebouncedEvent(this.element,i.eventTypes.DOMNodeInserted,function(){n.onObsoleteNodeInserted()});this.obsoleteNodeRemovedEventHandler=i.addDebouncedEvent(this.element,i.eventTypes.DOMNodeRemoved,function(t){n.onObsoleteNodeRemoved(t)})},n.prototype.onObsoleteNodeInserted=function(){this.ignoreNextDOMChange||(this.teardown(),this.update())},n.prototype.onObsoleteNodeRemoved=function(n){this.ignoreNextDOMChange||(this.teardown(),i.getEventTargetOrSrcElement(n)!==this.element&&this.update())},n.shouldInitializeAsClass=function(t,i){var r=t?t.getAttribute(n.mwfClassAttribute):null,u=t?t.getAttribute(n.initializeAttribute):null;return u===\"false\"?!1:!!t&&(!r||!!i&&r===i.mwfClass)},n.mwfClassAttribute=\"data-mwf-class\",n.initializeAttribute=\"data-js-initialize\",n.mutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n}();t.ObservableComponent=r});define(\"utility\",[\"require\",\"exports\",\"stringExtensions\"],function(n,t,i){\"use strict\";function r(n){return!isNaN(n)&&typeof n==\"number\"}function e(){return window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth}function c(){return window.innerHeight&&document.documentElement.clientHeight?Math.min(window.innerHeight,document.documentElement.clientHeight):window.innerHeight||document.documentElement.clientHeight}function l(n){if(n!=null)return{width:n.clientWidth,height:n.clientHeight}}function a(n){var t;if((n=n||window.event,!n)||(t=n.key||n.keyIdentifier,!t))return t;switch(t){case\"Left\":return\"ArrowLeft\";case\"Right\":return\"ArrowRight\";case\"Up\":return\"ArrowUp\";case\"Down\":return\"ArrowDown\";case\"Esc\":return\"Escape\";default:return t}}function v(n){return n=n||window.event,n==null?null:n.which||n.keyCode||n.charCode}function y(n,t,i,r,u){var o=\"\",f,e;r&&(f=new Date,f.setTime(f.getTime()+r*864e5),o=\"; expires=\"+f.toUTCString());e=\"\";u&&(e=\";domain=\"+u);window.document.cookie=n+\"=\"+encodeURIComponent(t)+o+(\"; path=\"+i+\";\")+e}function p(n){var t,i;if(!!n)for(t=0,i=document.cookie.split(\"; \");t<i.length;t++){var r=i[t],f=r.indexOf(\"=\"),u=o(r.substring(0,f));if(u===n)return o(r.substring(u.length+1))}return null}function o(n){return n=decodeURIComponent(n.replace(\"/+/g\",\" \")),n.indexOf('\"')===0&&(n=n.slice(1,-1).replace(/\\\\\"/g,'\"').replace(/\\\\\\\\/g,\"\\\\\")),n}function w(n){var u;if(!!n&&n.length===6){var t=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),r=parseInt(n.substring(4,6),16);if(!isNaN(t)&&!isNaN(i)&&!isNaN(r))return u=(t*299+i*587+r*114)/255e3,u>=.5?2:1}return null}function b(n,t,i){return!i||!r(n)||!r(t)||!r(i.left)||!r(i.right)||!r(i.top)||!r(i.bottom)?!1:n>=i.left&&n<=i.right&&t>=i.top&&t<=i.bottom}function k(n){console&&console.warn?console.warn(n):console&&console.error&&console.error(n)}function d(n,t){if(t||!(s(\"item\").toLowerCase().indexOf(\"perf_marker_global:true\")<0)){\n/*!/#IFDEF perf_marker_global || log_define_timing */\nif(!i.isNullOrWhiteSpace(n)&&window.performance&&window.performance.mark){var r=n.split(\" \").join(\"_\");window.performance.mark(r);window.console&&window.console.timeStamp&&window.console.timeStamp(r);\n/*!/#ENDIF*/}}}function g(n){if(i.isNullOrWhiteSpace(n)||!window.performance||!window.performance.mark)return 0;var r=n.split(\" \").join(\"_\"),t=window.performance.getEntriesByName(r);return t&&t.length?Math.round(t[t.length-1].startTime):0}function nt(n,t){var f;if(!r(n))return\"00:00\";f=n<0;f&&(n*=-1);var u=Math.floor(n/3600),e=n%3600,o=Math.floor(e/60),i=\"\";return i=t?u>0?u+\":\":\"00:\":u>0?u+\":\":\"\",n=Math.floor(e%60),i+=(o<10?\"0\":\"\")+o,i+=\":\"+(n===0?\"00\":(n<10?\"0\":\"\")+n),f?\"-\"+i:i}function tt(n){if(!JSON||!JSON.parse)throw new Error(\"JSON.parse unsupported.\");if(!n)throw new Error(\"Invalid json.\");return JSON.parse(n)}function u(){for(var e,t,o,n,f,i,r=[],c=0;c<arguments.length;c++)r[c]=arguments[c];if(!r||!r.length)return null;if(e=typeof r[0]==\"boolean\"&&r[0],r.length<2)return e?null:r[0];if(e&&r.length<3)return r[1];for(t=e?r[1]:r[0],o=e?2:1;o<r.length;o++)for(n in r[o])if(r[o].hasOwnProperty(n)){if(f=r[o][n],e){var s=Array.isArray?Array.isArray(f):{}.toString.call(f)===\"[object Array]\",h=!!t[n]&&(Array.isArray?Array.isArray(t[n]):{}.toString.call(t[n])===\"[object Array]\"),l=!s&&typeof f==\"object\",a=!h&&!!t[n]&&typeof t[n]==\"object\";if(s&&h){for(i=0;i<f.length;i++)s=Array.isArray?Array.isArray(f[i]):{}.toString.call(f[i])===\"[object Array]\",h=!!t[n][i]&&(Array.isArray?Array.isArray(t[n][i]):{}.toString.call(t[n][i])===\"[object Array]\"),l=!s&&typeof f[i]==\"object\",a=!h&&!!t[n][i]&&typeof t[n][i]==\"object\",t[n][i]=s?u(!0,h?t[n][i]:[],f[i]):l?u(!0,a?t[n][i]:{},f[i]):f[i];continue}else if(s){t[n]=u(!0,[],f);continue}else if(l){t[n]=u(!0,a?t[n]:{},f);continue}}t[n]=f}return t}function it(n,t,i,r,u){var f=!i||i<0?-1:Number(new Date)+i;t=t||100,function e(){var i=n();if(i&&r)r();else{if(i)return;if(f===-1||Number(new Date)<f)setTimeout(e,t);else if(u)u();else return}}()}function s(n,t){return t===void 0&&(t=!0),h(location.search,n,t)}function rt(n,t,i){return i===void 0&&(i=!0),h(n,t,i)}function h(n,t,i){if(i===void 0&&(i=!0),!t||!n)return\"\";var r=\"[\\\\?&]\"+t.replace(/[\\[\\]]/g,\"\\\\$&\")+\"=([^&#]*)\",f=i?new RegExp(r,\"i\"):new RegExp(r),u=f.exec(n);return u===null?\"\":decodeURIComponent(u[1].replace(/\\+/g,\" \"))}function ut(n,t){var i,r;if(!t)return n;if(n.indexOf(\"//\")===-1)throw'To avoid unexpected results in URL parsing, url must begin with \"http://\", \"https://\", or \"//\"';return i=document.createElement(\"a\"),i.href=n,i.search=(i.search?i.search+\"&\":\"?\")+t,r=i.href,i=null,r}function f(n,t,i){try{if(!t||i!==undefined&&!i)return null;switch(n){case 1:if(!window.localStorage)return null;if(i===undefined)return localStorage.getItem(t);localStorage.setItem(t,i);break;case 0:if(!window.sessionStorage)return null;if(i===undefined)return sessionStorage.getItem(t);sessionStorage.setItem(t,i)}}catch(r){switch(n){case 1:console.log(\"Error while fetching or saving local storage. It could be due to cookie is blocked.\");break;case 0:console.log(\"Error while fetching or saving session storage. It could be due to cookie is blocked.\")}}}function ft(n,t){f(0,n,t)}function et(n){return f(0,n)}function ot(n,t){f(1,n,t)}function st(n){return f(1,n)}Object.defineProperty(t,\"__esModule\",{value:!0});t.isNumber=r;t.getWindowWidth=e;t.getWindowHeight=c;t.getDimensions=l;t.getVirtualKey=a;t.getKeyCode=v;t.setCookie=y;t.getCookie=p;t.detectContrast=w;t.pointInRect=b;t.apiDeprecated=k;t.createPerfMarker=d;t.getPerfMarkerValue=g;t.toElapsedTimeString=nt;t.parseJson=tt;t.extend=u;t.poll=it;t.getQSPValue=s;t.getQSPFromUrl=rt;t.addQSP=ut;t.saveToSessionStorage=ft;t.getValueFromSessionStorage=et;t.saveToLocalStorage=ot;t.getValueFromLocalStorage=st;var ht;(function(n){function t(){var t;if(window.matchMedia){for(t=0;t<n.allWidths.length;++t)if(!window.matchMedia(\"(min-width:\"+n.allWidths[t]+\"px)\").matches)return t}else for(t=0;t<n.allWidths.length;++t)if(!(e()>=n.allWidths[t]))return t;return n.allWidths.length}n.allWidths=[320,540,768,1084,1400,1779];n.vpMin=n.allWidths[0];n.vpMax=2048;n.getViewport=t})(ht=t.Viewports||(t.Viewports={}))});__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define(\"slider\",[\"require\",\"exports\",\"publisher\",\"htmlExtensions\",\"utility\"],function(n,t,i,r,u){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var f=function(n){function t(t){var i=n.call(this,t)||this;return i.onKeyPressed=function(n){var t,u,f,e;switch(n){case 37:case 39:i.isVerticalSlider||(t=i.primaryDirection===r.Direction.left?i.stepOffset:-i.stepOffset,t=n===37?-t:t,i.updateThumbOffset(i.thumbOffset+t,!0,!0),r.preventDefault(r.getEvent(event)));break;case 38:case 40:i.isVerticalSlider&&(t=n===38?i.stepOffset:-i.stepOffset,i.updateThumbOffset(i.thumbOffset+t,!0,!0),r.preventDefault(r.getEvent(event)));break;case 33:r.preventDefault(r.getEvent(event));t=2*i.stepOffset;i.updateThumbOffset(i.thumbOffset+t,!0,!0);break;case 34:r.preventDefault(r.getEvent(event));t=-(2*i.stepOffset);i.updateThumbOffset(i.thumbOffset+t,!0,!0);break;case 36:r.preventDefault(r.getEvent(event));u=parseInt(i.input.getAttribute(\"min\"),10)||0;i.updateThumbOffset(u,!0,!0);break;case 35:r.preventDefault(r.getEvent(event));f=parseInt(i.input.getAttribute(\"step\"),10);e=i.thumbRange+f;i.updateThumbOffset(e,!0,!0)}},i.onKeyDown=function(n){i.onKeyPressed(u.getKeyCode(r.getEvent(n)))},i.onMouseDown=function(n){if(n=r.getEvent(n),i.setupDimensions(),r.getEventTargetOrSrcElement(n)===i.thumb){r.addEvent(document,r.eventTypes.mousemove,i.onMouseMove);r.addEvent(document,r.eventTypes.mouseup,i.onMouseUp);r.addEvent(document,r.eventTypes.touchmove,i.onMouseMove);r.addEvent(document,r.eventTypes.touchcancel,i.onMouseUp);return}i.moveThumbTo(n.clientX,n.clientY)},i.onMouseMove=function(n){if(n.type===\"mousemove\"&&(n=r.getEvent(n)),n.type===\"touchmove\"){var t=r.getEvent(n);n=t.targetTouches[0]}i.moveThumbTo(n.clientX,n.clientY)},i.onMouseUp=function(){r.removeEvent(document,r.eventTypes.mousemove,i.onMouseMove);r.removeEvent(document,r.eventTypes.mouseup,i.onMouseUp);r.removeEvent(document,r.eventTypes.touchmove,i.onMouseMove);r.removeEvent(document,r.eventTypes.touchcancel,i.onMouseUp)},i.onWindowResized=function(){i.setupDimensions()},i.update(),i}return __extends(t,n),t.prototype.update=function(){if(this.element){this.input=r.selectFirstElement(\"input\",this.element);this.primaryDirection=r.getDirection(this.element);this.isVerticalSlider=r.hasClass(this.input,\"f-vertical\");r.preventDefaultSwipeAction(this.element,!this.isVerticalSlider);r.addClass(this.input,\"x-screen-reader\");var t=parseInt(this.input.getAttribute(\"min\"),10)||0,i=parseInt(this.input.getAttribute(\"max\"),10)||100,n=parseInt(this.input.getAttribute(\"value\"),10),u=parseInt(this.input.getAttribute(\"step\"),10);this.element.children[this.element.children.length-1]===this.input?(this.mockSlider=document.createElement(\"div\"),this.thumb=document.createElement(\"button\"),this.thumb.setAttribute(\"role\",\"slider\"),this.thumb.setAttribute(\"aria-valuemin\",t.toString()),this.thumb.setAttribute(\"aria-valuemax\",i.toString()),this.thumb.setAttribute(\"aria-valuenow\",n.toString()),this.thumb.setAttribute(\"aria-valuetext\",n.toString()),this.input.hasAttribute(\"aria-label\")&&this.thumb.setAttribute(\"aria-label\",this.input.getAttribute(\"aria-label\")),this.valueTooltip=document.createElement(\"span\"),this.track=document.createElement(\"span\"),this.thumb.appendChild(this.valueTooltip),this.mockSlider.appendChild(this.thumb),this.mockSlider.appendChild(this.track),this.element.appendChild(this.mockSlider),this.ignoreNextDOMChange=!0):(this.mockSlider=this.element.children[this.element.children.length-1],this.thumb=this.mockSlider.firstElementChild,this.valueTooltip=this.thumb.firstElementChild,this.track=this.mockSlider.children[this.mockSlider.children.length-1]);this.halfThumbOffset=this.thumb.clientWidth/2;this.resetSliderInternal(t,i,n,u,!0)&&(r.addEvent(this.element,r.eventTypes.mousedown,this.onMouseDown),r.addEvent(this.element,r.eventTypes.touchstart,this.onMouseDown),r.addEvent(this.thumb,r.eventTypes.keydown,this.onKeyDown),this.resizeListener=r.addDebouncedEvent(window,r.eventTypes.resize,this.onWindowResized))}},t.prototype.teardown=function(){r.removeEvent(this.element,r.eventTypes.mousedown,this.onMouseDown);r.removeEvent(this.element,r.eventTypes.touchstart,this.onMouseDown);r.removeEvent(this.thumb,r.eventTypes.keydown,this.onKeyDown);r.removeEvent(window,r.eventTypes.resize,this.resizeListener);this.input=null;this.mockSlider=null;this.thumb=null;this.valueTooltip=null;this.track=null;this.resizeListener=null},t.prototype.resetSlider=function(n,t,i,r){return this.resetSliderInternal(n,t,i,r,!1)},t.prototype.resetSliderInternal=function(n,t,i,r,f){return!u.isNumber(n)||!u.isNumber(t)?!1:Math.max(n,t)-Math.min(n,t)<=0?!1:(this.min=Math.min(n,t),this.max=Math.max(n,t),this.range=this.max-this.min,this.step=isNaN(r)?this.range/10:r,this.value=Math.min(Math.max(isNaN(i)?isNaN(this.value)?this.min:this.value:i,this.min),this.max),this.setupDimensions(),this.updateThumbOffset(this.thumbOffset,f,!1,this.value),!0)},t.prototype.setValue=function(n){return!u.isNumber(n)||n<this.min||n>this.max?!1:(n!==this.value&&(this.thumbOffset=(n-this.min)*this.thumbRange/this.range+this.halfThumbOffset,this.updateThumbOffset(this.thumbOffset,!1,!1,n)),!0)},t.prototype.setupDimensions=function(){this.dimensions=r.getClientRect(this.mockSlider);this.isVerticalSlider?(this.dimensions.left-=t.hitPadding,this.dimensions.right+=t.hitPadding,this.thumbRange=this.dimensions.height-this.thumb.clientWidth,this.maxThumbOffset=this.dimensions.height):(this.dimensions.top-=t.hitPadding,this.dimensions.bottom+=t.hitPadding,this.thumbRange=this.dimensions.width-this.thumb.clientWidth,this.maxThumbOffset=this.dimensions.width);this.thumbRange=Math.max(this.thumbRange,1);this.thumbOffset=(this.value-this.min)*this.thumbRange/this.range+this.halfThumbOffset;this.stepOffset=this.thumbRange/(this.range/this.step);this.setThumbPosition()},t.prototype.setThumbPosition=function(){var n=Math.max(0,this.thumbOffset-this.halfThumbOffset);r.css(this.thumb,r.Direction[this.primaryDirection],n+\"px\");r.css(this.track,\"width\",n+\"px\")},t.prototype.updateThumbOffset=function(n,t,i,f){var o,s,e;f===void 0&&(f=NaN);u.isNumber(n)||(n=this.thumbOffset);this.thumbOffset=Math.min(Math.max(0,n),this.maxThumbOffset);o=f;isNaN(o)&&(o=Math.max(0,this.thumbOffset-this.halfThumbOffset)*1e3*this.range/this.thumbRange,o=Math.round(o)/1e3+this.min);this.value=Math.min(Math.max(this.min,o),this.max);this.input.setAttribute(\"value\",this.value.toString());o=parseFloat(this.input.getAttribute(\"value\"));isNaN(o)||(this.value=o);s=isNaN(parseFloat(this.input.getAttribute(\"step\")))?this.value%1==0?this.value.toString():(Math.round(this.value*10)/10).toString():this.value.toString();this.thumb.setAttribute(\"aria-valuenow\",s);this.thumb.setAttribute(\"aria-valuetext\",s);this.setThumbPosition();this.valueDescriptor=null;this.initiatePublish({value:this.value,internal:t,userInitiated:i});e=this.valueDescriptor||{};this.valueDescriptor=null;typeof e==\"object\"?(r.setText(this.valueTooltip,e.tooltipText||s),e.ariaValueText&&this.thumb.setAttribute(\"aria-valuetext\",e.ariaValueText)):typeof e==\"string\"&&((isNaN(parseFloat(e))||e.match(\":\"))&&this.thumb.setAttribute(\"aria-valuetext\",e===\"00:00:00\"?\"0 second\":e),r.setText(this.valueTooltip,e))},t.prototype.publish=function(n,t){var i=n.onValueChanged(t);!i||this.valueDescriptor||(this.valueDescriptor=i)},t.prototype.moveThumbTo=function(n,t){if(u.pointInRect(n,t,this.dimensions)){var i=this.dimensions.bottom-t;this.isVerticalSlider||(i=this.primaryDirection===r.Direction.left?n-this.dimensions.left:this.dimensions.right-n);this.updateThumbOffset(i,!0,!0)}},t.selector=\".c-slider\",t.typeName=\"Slider\",t.hitPadding=20,t}(i.Publisher);t.Slider=f});require([\"slider\",\"componentFactory\"],function(n,t){t.ComponentFactory&&t.ComponentFactory.create&&t.ComponentFactory.create([{component:n.Slider}])});define(\"componentFactory\",[\"require\",\"exports\",\"htmlExtensions\",\"utility\",\"stringExtensions\"],function(n,t,i,r,u){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var f=function(){function n(){}return n.create=function(t){for(var i,r=0,u=t;r<u.length;r++){if(i=u[r],!i.c&&!i.component)throw\"factoryInput should has either component or c to tell the factory what component to create.Eg.ComponentFactory.create([{ c: Carousel] or ComponentFactory.create([component: Carousel]))\";n.createComponent(i.component||i.c,i)}},n.createComponent=function(t,r){if(t){var o=r&&r.eventToBind?r.eventToBind:\"\",f=r&&r.selector?r.selector:t.selector,s=r&&r.context?r.context:null,u=[],e=function(n,f,e){var a,c,l,o,h;for(a=r.elements?r.elements:f?i.selectElementsT(f,s):[document.body],c=0,l=a;c<l.length;c++)o=l[c],o.mwfInstances||(o.mwfInstances={}),o.mwfInstances[n]?u.push(o.mwfInstances[n]):(h=new t(o,e),(!h.isObserving||h.isObserving())&&(o.mwfInstances[n]=h,u.push(h)))};switch(o){case\"DOMContentLoaded\":if(n.onDomReadyHappened)n.callBindFunction(t,f,e,r,u);else{n.domReadyFunctions.push(function(){return n.callBindFunction(t,f,e,r,u)});break}break;case\"load\":default:if(n.onDeferredHappened)n.callBindFunction(t,f,e,r,u);else{n.deferredFunctions.push(function(){return n.callBindFunction(t,f,e,r,u)});break}}}},n.callBindFunction=function(t,i,u,f,e){f===void 0&&(f=null);var o=n.getTypeName(t),s=o||i||\"\",h=f&&f.params?f.params:{};h.mwfClass=o;r.createPerfMarker(s+\"_Begin\");u(o,i,h);r.createPerfMarker(s+\"_End\");f&&f.callback&&f.callback(e)},n.getTypeName=function(t){if(t.typeName)return t.typeName;if(t.name)return t.name;var i=n.typeNameRegEx.exec(t.toString());if(i&&i.length>1)return i[1]},n.enumerateComponents=function(n,t){var i,r,u;if(n&&t){i=n.mwfInstances;for(r in i)if(i.hasOwnProperty(r)&&(u=i[r],u&&!t(r,u)))break}},n.detach=function(n,t){var i=n,r;i&&i.mwfInstances&&!u.isNullOrWhiteSpace(t)&&i.mwfInstances.hasOwnProperty(t)&&(r=i.mwfInstances[t],i.mwfInstances[t]=null,r&&r.detach&&r.detach())},n.typeNameRegEx=/function\\s+(\\S+)\\s*\\(/,n.onLoadTimeoutMs=6e3,n.onDeferredHappened=!1,n.deferredFunctions=[],n.onDomReadyHappened=!1,n.domReadyFunctions=[],n}();t.ComponentFactory=f,function(){i.onDeferred(function(){var n,t,r,u;if(f.onDeferredHappened=!0,n=f.deferredFunctions,!n||n.length>0)for(t=0,r=n;t<r.length;t++)u=r[t],typeof u==\"function\"&&i.SafeBrowserApis.requestAnimationFrame.call(window,u);f.deferredFunctions=null},f.onLoadTimeoutMs);i.documentReady(function(){var n,t,r,u;if(f.onDomReadyHappened=!0,n=f.domReadyFunctions,!n||n.length>0)for(t=0,r=n;t<r.length;t++)u=r[t],typeof u==\"function\"&&i.SafeBrowserApis.requestAnimationFrame.call(window,u);f.domReadyFunctions=null},f.onLoadTimeoutMs)}()});__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define(\"publisher\",[\"require\",\"exports\",\"observableComponent\"],function(n,t,i){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(n){function t(t,i){i===void 0&&(i=null);var r=n.call(this,t,i)||this;return r.element=t,r}return __extends(t,n),t.prototype.subscribe=function(n){if(!n)return!1;if(this.subscribers){if(this.subscribers.indexOf(n)!==-1)return!1}else this.subscribers=[];return this.subscribers.push(n),!0},t.prototype.unsubscribe=function(n){if(!n||!this.subscribers||!this.subscribers.length)return!1;var t=this.subscribers.indexOf(n);return t===-1?!1:(this.subscribers.splice(t,1),!0)},t.prototype.hasSubscribers=function(){return!!this.subscribers&&this.subscribers.length>0},t.prototype.initiatePublish=function(n){var t,i,r;if(this.hasSubscribers())for(t=0,i=this.subscribers;t<i.length;t++)r=i[t],this.publish(r,n)},t.prototype.update=function(){},t.prototype.teardown=function(){},t}(i.ObservableComponent);t.Publisher=r});__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();define(\"selectMenu\",[\"require\",\"exports\",\"publisher\",\"htmlExtensions\",\"stringExtensions\",\"viewportCollision\",\"utility\"],function(n,t,i,r,u,f,e){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(n){function t(i){var u=n.call(this,i)||this;return u.onTriggerClick=function(n){n=r.getEvent(n);r.preventDefault(n);u.onTriggerToggled(n)},u.onItemClick=function(n){n=r.getEvent(n);u.onItemSelected(r.getEventTargetOrSrcElement(n),!1,!0)},u.onNonSelectMenuClick=function(n){if(n=r.getEvent(n),!!u.element&&!!u.menu){var t=r.getEventTargetOrSrcElement(n);u.element.contains(t)||t!==u.menu&&t.parentElement!==u.menu&&u.collapse()}},u.onNonSelectMenuTab=function(n){n=r.getEvent(n);var t=e.getKeyCode(n);t===9&&u.collapse()},u.onTriggerKeyPress=function(n){n=r.getEvent(n);var t=e.getKeyCode(n);switch(t){case 13:case 32:r.preventDefault(n);u.onTriggerToggled()}},u.handleMenuKeydownEvent=function(n){n=r.getEvent(n);var t=e.getKeyCode(n);t!==9&&u.isExpanded()&&r.preventDefault(n);u.handleMenuKeydown(r.getEventTargetOrSrcElement(n),t)},u.handleMenuItemBlur=function(n){var i=r.getEventTargetOrSrcElement(n);r.removeEvent(i,r.eventTypes.blur,u.handleMenuItemBlur);r.removeClass(i,t.hiddenFocus)},u.update(),u}return __extends(t,n),t.prototype.update=function(){var u,o,s,f,t,i,e,n,h;if(this.element&&(this.persist=r.hasClass(this.element,\"f-persist\"),this.trigger=r.selectFirstElementT('[role=\"button\"]',this.element),this.trigger||(this.trigger=r.selectFirstElementT(\"button\",this.element)),this.menu=r.selectFirstElement(\".c-menu\",this.element),u=r.selectElementsT(\".c-menu-item a\",this.element),this.items=u.length>0?u:r.selectElementsT(\".c-menu-item span\",this.element),this.isLtr=r.getDirection(this.menu)===r.Direction.left,o=!!r.selectFirstElement(\"img\",this.menu),o&&(this.ignoreNextDOMChange=!0,s=document.createElement(\"img\"),f=document.createElement(\"span\"),r.setText(f,r.getText(this.trigger)),r.setText(this.trigger,\"\"),this.trigger.appendChild(s),this.trigger.appendChild(f)),!!this.trigger&&!!this.menu&&!!this.items&&!!this.items.length)){for(t=null,i=0,e=this.items;i<e.length;i++)n=e[i],this.itemIsSelected(n)&&t===null?(t=n,n.setAttribute(this.getSelectedAttribute(n),\"true\")):n.setAttribute(this.getSelectedAttribute(n),\"false\"),n.setAttribute(\"tabindex\",\"-1\"),this.cleanSelectedAttributes(n),n.hasAttribute(\"role\")||n.setAttribute(\"role\",\"menuitem\");h=this.isExpanded();this.onItemSelected(t,!0,!1);this.selectedItem||this.updateAriaLabel();this.addEventListeners();h&&this.expand()}},t.prototype.teardown=function(){var n,t,i;for(r.removeEvent(this.trigger,r.eventTypes.click,this.onTriggerClick),r.removeEvent(this.trigger,r.eventTypes.keydown,this.onTriggerKeyPress),r.removeEvent(this.menu,r.eventTypes.keydown,this.handleMenuKeydownEvent,!0),n=0,t=this.items;n<t.length;n++)i=t[n],r.removeEvent(i,r.eventTypes.click,this.onItemClick);r.removeEvent(document,r.eventTypes.click,this.onNonSelectMenuClick);r.removeEvent(this.items[this.items.length-1],r.eventTypes.keydown,this.onNonSelectMenuTab);r.removeEvent(this.items,r.eventTypes.blur,this.handleMenuItemBlur);this.persist=!1;this.trigger=null;this.menu=null;this.items=null;this.selectedItem=null},t.prototype.setSelectedItem=function(n){if(!n||!this.element)return!1;var t=r.selectFirstElement('[id=\"'+n+'\"] > a',this.element)||r.selectFirstElement('[id=\"'+n+'\"] > span',this.element);return t?this.onItemSelected(t,!1,!1):!1},t.prototype.updateAriaLabel=function(){var n=this.trigger.getAttribute(t.dataAriaLabelFormat),i,f;n!=null&&(i=this.selectedItem?this.selectedItem.getAttribute(t.ariaLabel)||r.getText(this.selectedItem):r.getText(this.trigger),f=u.format(n,i),this.trigger.setAttribute(t.ariaLabel,f))},t.prototype.isExpanded=function(){return!!this.trigger&&!!this.menu&&this.trigger.getAttribute(t.ariaExpanded)===\"true\"&&this.menu.getAttribute(t.ariaHidden)===\"false\"},t.prototype.itemIsSelected=function(n){return n.getAttribute(t.ariaSelected)===\"true\"||n.getAttribute(t.ariaChecked)===\"true\"},t.prototype.getSelectedAttribute=function(n){return n.getAttribute(\"role\")===\"menuitemradio\"?t.ariaChecked:t.ariaSelected},t.prototype.cleanSelectedAttributes=function(n){var i=this.getSelectedAttribute(n)===t.ariaSelected?t.ariaChecked:t.ariaSelected;n.removeAttribute(i)},t.prototype.positionMenu=function(){var i=r.css(this.element,\"float\"),u=i===\"right\",o=!u&&i===\"left\",e=o?!0:u||!this.isLtr?!1:!0,n,t;r.css(this.menu,\"top\",\"auto\");r.css(this.menu,\"bottom\",\"auto\");r.css(this.menu,e?\"left\":\"right\",\"0\");r.css(this.menu,\"height\",\"auto\");n=f.getCollisionExtents(this.menu);!n||((n.right<0||n.left<0)&&(n.clientRect.width<=n.viewport.width?e?r.css(this.menu,\"left\",n.right+\"px\"):r.css(this.menu,\"right\",n.left+\"px\"):(r.css(this.menu,\"left\",-n.left+\"px\"),r.css(this.menu,\"width\",n.viewport.width+\"px\"))),n.bottom<0&&(t=parseFloat(r.css(this.trigger,\"height\")),n.clientRect.height<=n.top?r.css(this.menu,\"bottom\",t+\"px\"):n.clientRect.height<=n.viewport.height?r.css(this.menu,\"top\",n.bottom+t+\"px\"):(r.css(this.menu,\"top\",-n.top+t+\"px\"),r.css(this.menu,\"height\",n.viewport.height+\"px\"))))},t.prototype.expand=function(n){if(!!this.trigger&&!!this.menu&&(this.trigger.setAttribute(t.ariaExpanded,\"true\"),this.menu.setAttribute(t.ariaHidden,\"false\"),this.positionMenu(),!!this.items)){var u=this.items.indexOf(this.selectedItem),f=u===-1?0:u,i=this.items[f];i.focus();n&&n.type===\"click\"&&(r.addClass(i,t.hiddenFocus),r.addEvent(i,r.eventTypes.blur,this.handleMenuItemBlur))}},t.prototype.collapse=function(){!this.trigger||!this.menu||(this.trigger.setAttribute(t.ariaExpanded,\"false\"),this.menu.setAttribute(t.ariaHidden,\"true\"))},t.prototype.addEventListeners=function(){var n,t,i;if(!!this.trigger&&!!this.items){for(r.addEvent(this.trigger,r.eventTypes.click,this.onTriggerClick),r.addEvent(this.trigger,r.eventTypes.keydown,this.onTriggerKeyPress),r.addEvent(this.menu,r.eventTypes.keydown,this.handleMenuKeydownEvent,!0),n=0,t=this.items;n<t.length;n++)i=t[n],r.addEvent(i,r.eventTypes.click,this.onItemClick);r.addEvent(this.items[this.items.length-1],r.eventTypes.keydown,this.onNonSelectMenuTab);r.addEvent(document,r.eventTypes.click,this.onNonSelectMenuClick)}},t.prototype.onTriggerToggled=function(n){this.element.getAttribute(\"aria-disabled\")!==\"true\"&&(this.isExpanded()?this.collapse():this.expand(n))},t.prototype.onItemSelected=function(n,t,i){var e,u,o,s,h,f;if(!n||n===this.selectedItem)return this.collapse(),!1;for((n.nodeName===\"P\"||n.nodeName===\"IMG\")&&(n=n.parentElement),this.persist&&this.trigger&&(e=r.selectFirstElementT(\"img\",this.trigger),this.ignoreNextDOMChange=!0,e?(u=r.selectFirstElementT(\"img\",n),o=u?u.getAttribute(\"src\"):\"\",e.setAttribute(\"src\",o),s=r.selectFirstElementT(\"span\",this.trigger),r.setText(s,r.getText(n)),r.hasClass(this.trigger,\"f-icon\")&&!u?r.removeClass(this.trigger,\"f-icon\"):!r.hasClass(this.trigger,\"f-icon\")&&u&&r.addClass(this.trigger,\"f-icon\")):r.setText(this.trigger,r.getText(n))),this.selectedItem&&this.selectedItem.setAttribute(this.getSelectedAttribute(this.selectedItem),\"false\"),this.selectedItem=n,this.selectedItem.setAttribute(this.getSelectedAttribute(this.selectedItem),\"true\"),this.updateAriaLabel(),this.collapse(),h=null,f=this.selectedItem;f.parentElement!==this.menu;)f=f.parentElement;return this.initiatePublish({id:f.id,href:this.selectedItem.getAttribute(\"href\"),internal:t,userInitiated:i}),!0},t.prototype.publish=function(n,t){if(!!this.selectedItem)n.onSelectionChanged(t)},t.prototype.handleMenuKeydown=function(n,t){switch(t){case 32:case 13:this.handleMenuEnterKey(n);this.trigger.focus();break;case 27:this.trigger.focus();this.collapse();break;case 38:this.handleMenuArrowKey(!0,n);break;case 40:this.handleMenuArrowKey(!1,n);break;case 9:this.isExpanded()&&this.handleMenuEnterKey(n)}},t.prototype.handleMenuArrowKey=function(n,t){var i=this.items.indexOf(t);i!==-1&&(i+=n?-1:1,i<0?i=this.items.length-1:i>=this.items.length&&(i=0),this.items[i].focus())},t.prototype.handleMenuEnterKey=function(n){this.onItemSelected(n,!1,!0)},t.selector=\".c-select-menu\",t.typeName=\"SelectMenu\",t.dataAriaLabelFormat=\"data-aria-label-format\",t.ariaExpanded=\"aria-expanded\",t.ariaHidden=\"aria-hidden\",t.ariaSelected=\"aria-selected\",t.ariaLabel=\"aria-label\",t.ariaChecked=\"aria-checked\",t.hiddenFocus=\"x-hidden-focus\",t}(i.Publisher);t.SelectMenu=o});require([\"selectMenu\",\"componentFactory\"],function(n,t){t.ComponentFactory&&t.ComponentFactory.create&&t.ComponentFactory.create([{component:n.SelectMenu}])});define(\"viewportCollision\",[\"require\",\"exports\",\"htmlExtensions\"],function(n,t,i){\"use strict\";function r(n,t){var r=i.getClientRect(n),u,f,e,o;return(r.left=Math.round(r.left),r.top=Math.round(r.top),r.right=Math.round(r.right),r.bottom=Math.round(r.bottom),r.width!==0&&(u=!1,f={top:!1,bottom:!1,left:!1,right:!1},t||(e=Math.min(window.innerWidth,document.documentElement.clientWidth),o=Math.min(window.innerHeight,document.documentElement.clientHeight),t={left:0,top:0,right:e,bottom:o,width:e,height:o}),r.left<t.left&&(u=!0,f.left=!0),r.top<t.top&&(u=!0,f.top=!0),r.right>t.right&&(u=!0,f.right=!0),r.bottom>t.bottom&&(u=!0,f.bottom=!0),u))?f:!1}function u(n,t){var r=i.getClientRect(n),u,f;if(r.width===0)return null;t||(u=Math.min(window.innerWidth,document.documentElement.clientWidth),f=Math.min(window.innerHeight,document.documentElement.clientHeight),t={top:0,right:u,bottom:f,left:0,height:f,width:u});var e=Math.round(r.top-t.top),o=Math.round(t.right-r.right),s=Math.round(t.bottom-r.bottom),h=Math.round(r.left-t.left);return e>=0&&o>=0&&s>=0&&h>=0?null:{top:e,right:o,bottom:s,left:h,clientRect:r,viewport:t}}Object.defineProperty(t,\"__esModule\",{value:!0});t.collidesWith=r;t.getCollisionExtents=u})})();","js/jquery.reel.min.js":"(function(k){var U=typeof define==\"function\"&&define.amd&&(define([\"jquery\"],k)||true),X=!U&&typeof module==\"object\"&&typeof module.exports==\"object\"&&(module.exports=k);!U&&!X&&k()})(function(){return jQuery.reel||function(k,U,X,s){function Bc(f){return n.instances.push(f[0])&&f}function Cc(f){return(n.instances=n.instances.not(Ca(f.attr(ka))))&&f}function Y(f){return n.instances.first().data(f)}function Dc(f){return\"data:image/gif;base64,R0lGODlh\"+f}function V(f){return\"<\"+f+\"/>\"}function x(f){return\".\"+\n(f||\"\")}function Va(f){return f.replace(Da,n.cdn)}function Ea(f){return\"url('\"+$b(f)+\"')\"}function ac(f,j){return typeof j==tb?j[f]:j}function Fa(f,j,o){return ub(f,Ga(j,o))}function Ha(f,j){return H(f)*(j?-1:1)}function Wa(f){return f.touch||f.originalEvent.touches&&f.originalEvent.touches[0]||f}function vb(f){return f.originalEvent}function y(f){return f===s?0:typeof f==wb?f:f+\"px\"}function Ca(f){return\"#\"+f}function bc(f,j,o){for(;f.length<j;)f=o+f;return f}function xb(f){return bc(f,2,\"0\")}function $b(f){return encodeURI(decodeURI(f))}\nfunction yb(f){return n.re.array.exec(f)?f.split(n.re.array):f}function Ec(f){return!f.parents(zb).length}function cc(f){return typeof f==wb?f:k.each(f,function(j,o){f[j]=o?+o:s})}function Ab(f){try{console.error(\"[ Reel ] \"+f)}catch(j){}}if(k){var Z=k&&k().jquery.split(/\\./);if(!Z||+(xb(Z[0])+xb(Z[1])+xb(Z[2]||\"\"))<10602)return Ab(\"Too old jQuery library. Please upgrade your jQuery to version 1.6.2 or higher\");var n=k.reel={version:\"1.3.0\",def:{frame:1,frames:36,loops:true,clickfree:false,draggable:true,scrollable:true,steppable:true,throwable:true,wheelable:true,orientable:false,cw:false,revolution:s,stitched:0,directional:false,row:1,rows:0,rowlock:false,framelock:false,orbital:0,vertical:false,inversed:false,footage:6,spacing:0,horizontal:true,suffix:\"-reel\",image:s,images:\"\",path:\"\",preload:\"fidelity\",shy:false,speed:0,delay:0,timeout:2,duration:s,rebound:0.5,entry:s,opening:0,brake:0.23,velocity:0,tempo:36,laziness:6,cursor:s,hint:\"\",indicator:0,klass:\"\",preloader:2,area:s,attr:{},annotations:s,responsive:false,graph:s,monitor:s},scan:function(){return k(x(z)+\":not(\"+x(Bb)+\" > \"+x(z)+\")\").each(function(f,j){f=k(j);j=f.data();j.images=yb(j.images);var o={};k(x(dc)+\"[data-for=\"+f.attr(ka)+\"]\").each(function(t,r){t=k(r);r=t.data();r.x=cc(yb(r.x));r.y=cc(yb(r.y));var g=t.attr(ka);r.node=t.removeData();o[g]=r});j.annotations=o;f.removeData().reel(j)})},fn:{reel:function(){var f=arguments,j=k(this),o=j.data(),t=f[0]||{},r=f[1];if(typeof t!=\"object\")if(t.slice(0,1)==\":\")return j.trigger(t.slice(1),r);else if(f.length==1)return o[t];else{if(r!==s){n.normal[t]&&(r=n.normal[t](r,o));if(o[t]===s)o[t]=r;else if(o[t]!==r)j.trigger(t+\"Change\",[s,o[t]=r])}return j}else{var g=k.extend({},n.def,t),K=[];j.filter(Xa).unreel().filter(function(){var h=k(this),e=g.attr,a=e.src||h.attr(ra),I=e.width||h.attr(L)||h.width();h=e.height||h.attr(D)||h.height();if(!a)return Ab(\"`src` attribute missing on target image\");if(!I||!h)return Ab(\"Dimension(s) of the target image unknown\");return true}).each(function(){var h=k(this),e=function(c,d){return h.reel(c,d)&&a(c)},a=function(c){return h.data(c)},I={setup:function(){if(!(h.hasClass(z)&&h.parent().hasClass(Bb))){e(Ia,g);var c={src:h.attr(ra),width:h.attr(D)||null,height:h.attr(L)||null,style:h.attr($)||null,\"class\":h.attr(ec)||null},d=h.attr(g.attr).attr(ra),b=e(ka,h.attr(ka)||h.attr(ka,z+\"-\"+ +new Date).attr(ka)),i=k.extend({},h.data()),p=e(aa,g.images||[]),m=e(W,g.stitched),l=!p.length||m;l=e(Ya,g.responsive&&(Fc?true:!l));var q=e(fc,{}),u=g.loops,v=g.orbital,E=g.revolution,ba=g.rows,ca=e(sa,Ga(g.footage,g.frames));e(Za,g.spacing);var Cb=e(D,+h.attr(D)||h.width()),Db=e(L,+h.attr(L)||h.height()),Gc=e(Ja,g.shy),gc=e(O,v&&ca||ba<=1&&p.length||g.frames),Hc=ba>1||v;e(Ka,ac(\"x\",E)||m/2||Cb*2);e(Eb,!Hc?0:ac(\"y\",E)||(ba>3?Db:Db/(5-ba)));ba=m?1:la(gc/ca);e(Fb,m-(u?0:Cb));e($a,0);b=Ca(b+g.suffix);u=h.attr(ec);u=!u?P:u+A;u=k(V(ta),{id:b.substr(1),\"class\":u+A+Bb+A+hc+\"0\"});u=h.wrap(u.addClass(g.klass)).addClass(z);K.push(Bc(u)[0]);u=u.parent().bind(I.instance);e(Gb,p.length?P:g.image||d.replace(n.re.image,\"$1\"+g.suffix+\".$2\"));e(ab,k(V(ta),{\"class\":Hb}).appendTo(\"body\"));e(La,k());e(ic,[]);e(J,null);e(B,null);e(Q,g.row);e(ua,0);e(Ib,ba);e(jc,g.rowlock);e(kc,g.framelock);e(bb,e(Ma,e(cb,0)));e(db,1/gc);e(lc,b);e(M,e(va,g.speed)<0);e(Na,false);e(ma,0);e(wa,g.vertical);e(da,0);e(xa,Ha(1,!g.cw&&!m));e(eb,{});e(ea,false);e(fb,e(Jb,0));e(gb,e(hb,0));e(Oa,false);e(Kb,false);e(fa,false);e(mc,g.brake);e(Lb,!!v);e(ga,g.tempo/(n.lazy?g.laziness:1));e(ya,-1);e(ib,-1);e(Pa,g.annotations||u.unbind(x(Pa))&&{});e(Mb,1);e(nc,{attr:c,data:i});g.steppable||u.unbind(\"up.steppable\");g.indicator||u.unbind(\".indicator\");C(P,{overflow:Nb,position:\"relative\"});l||C(P,{width:Cb,height:Db});l&&k.each(Ic,function(cd,oc){q[oc]=a(oc)});C(na+A+x(z),{display:Ob});C(x(Hb),{position:\"fixed\",left:y(-100),top:y(-100)},true);C(x(Hb)+A+Xa,{position:Qa,width:10,height:10},true);ha.bind(I.pool);h.trigger(Gc?\"prepare\":\"setup\")}},instance:{teardown:function(){var c=h.data(nc);h.parent().unbind(I.instance);if(a(Ja))h.parent().unbind(jb,ia);else a($).remove()&&a(La).unbind(F);a(ab).empty();clearTimeout(Pb);clearTimeout(Qb);k(U).unbind(pc,qc);k(U).unbind(F);ha.unbind(I.pool);oa.unbind(ja);h.siblings().unbind(F).remove();kb();h.removeAttr(\"onloaded\");Cc(h.unbind(F).removeData().unwrap().attr(c.attr).data(c.data));h.attr($)==P&&h.removeAttr($)},setup:function(){function c(q){return h.trigger(\"down\",[Wa(q).clientX,Wa(q).clientY,q])&&q.give}function d(q,u){return!u||h.trigger(\"wheel\",[u,q])&&q.give}var b=h.parent().append(za()),i=e(La,k(g.area||b)),p=g.rows>1,m=g.cursor,l=m==rc?Jc:m||Kc;m=m==rc?Lc+A+\"!important\":s;C(A+x(z),{MozUserSelect:lb,WebkitUserSelect:lb,MozTransform:\"translateZ(0)\"});h.unbind(jb,ia);i.bind(Mc,c).bind(g.clickfree?Nc:Oc,c).bind(g.wheelable?Pc:null,d).bind(Qc,function(){return false});C(P,{cursor:Va(l)});C(x(Rb),{cursor:\"wait\"});C(x(mb)+na+x(mb)+\" *\",{cursor:Va(m||l)},true);if(a(Ya)){C(A+x(z),{width:\"100%\",height:Sb});k(U).bind(pc,qc)}g.hint&&i.attr(\"title\",g.hint);g.indicator&&b.append(Ra(\"x\"));p&&g.indicator&&b.append(Ra(\"y\"));g.monitor&&b.append(sc=k(V(ta),{\"class\":tc}))&&C(A+x(tc),{position:Qa,left:0,top:0})},preload:function(){function c(){var q=l.children(\":not([src]):first\");return q.attr(ra,q.data(ra))}var d=h.parent(),b=a(aa),i=!b.length,p=n.preload[g.preload]||n.preload[n.def.preload];b=i?[a(Gb)]:p(b.slice(0),g,a);e(da,i?0.5:0);var m=0,l=a(ab).empty();i=[];d.addClass(Rb);e($,a($)||k(\"<\"+$+' type=\"text/css\">'+C.rules.join(\"\\n\")+\"</\"+$+\">\").prependTo(Tb));e(Na,true);h.trigger(\"stop\");g.responsive&&Ub();for(h.trigger(\"resize\",true);b.length;){p=n.substitute(g.path+b.shift(),a);k(V(Xa)).data(ra,p).appendTo(l).bind(\"load error abort\",function(q){q.type!=\"load\"&&h.trigger(q.type);return!Ec(d)&&h.trigger(\"preloaded\")&&c()&&false});i.push(p)}setTimeout(function(){for(;++m<n.concurrent_requests;)c()},0);e(ic,i);e(Ja,false)},preloaded:function(){var c=a(aa).length||1,d=e(da,Ga(a(da)+1,c));d===1&&h.trigger(\"frameChange\",[s,a(J)]);if(d===c){h.parent().removeClass(Rb);h.trigger(\"loaded\")}},loaded:function(){a(aa).length>1||h.css({backgroundImage:Ea(n.substitute(g.path+a(Gb),a))}).attr({src:Va(uc)});a(W)&&h.attr({src:Va(uc)});a(Kb)||e(ma,g.velocity||0);e(Na,false);pa=true},prepare:function(){h.css(\"display\",Ob).parent().one(jb,ia)},opening:function(){if(!g.opening)return h.trigger(\"openingDone\");e(fa,true);e(Vb,!a(va));var c=g.entry||g.speed,d=a(B),b=g.opening;e(B,d-c*b);e(ya,la(b*Y(ga)))},openingDone:function(){function c(b){return h.trigger(\"orient\",[vb(b).alpha,vb(b).beta,vb(b).gamma,b])&&b.give}e(Sa,false);e(fa,false);var d=nb+x(fa);ha.unbind(d,I.pool[d]);g.orientable&&k(U).bind(Rc,c);if(g.delay>0)Pb=setTimeout(function(){h.trigger(\"play\")},g.delay*1E3);else h.trigger(\"play\")},play:function(c,d){d=d?e(va,d):a(va)*Ha(1,a(M));(c=g.duration)&&e(ib,la(c*Y(ga)));e(M,d<0);d=e(Sa,!!d);e(Vb,!d);Aa()},reach:function(c,d,b){if(d!=a(J)){c=a(O);e(Q,la(d/c));var i=e(bb,a(J));d=e(Ma,d);d=e(cb,n.math.distance(i,d,c));b=H(b||a(va))*Ha(1,d<0);h.trigger(\"play\",b)}},pause:function(){w()},stop:function(){var c=e(Vb,true);e(Sa,!c)},down:function(c,d,b,i){function p(l){return h.trigger(\"pan\",[Wa(l).clientX,Wa(l).clientY,l])&&l.give}function m(l){return h.trigger(\"up\",[l])&&l.give}if(!(!g.clickfree&&i&&i.button!==s&&i.button!=Sc))if(g.draggable){e(ea,a(J));c=g.clickfree;e(ma,0);i=c?a(La):oa;ob=pb(a(Ka),d,b);w();kb();G=0;k(zb,oa).addClass(mb);i.bind(Tc+A+Uc,p).bind(Vc+A+Wc,m).bind(c?Xc:Yc,m)}},up:function(){e(ea,false);e(Oa,false);var c=g.throwable,d=H(Ta[0]+Ta[1])/60;N=e(ma,!c?0:c===true?d:Ga(c,d))?1:0;w();kb();k(zb,oa).removeClass(mb);(g.clickfree?a(La):oa).unbind(ja)},pan:function(c,d,b,i){if(g.draggable&&Ua){Ua=false;w();c=g.rows;var p=g.orbital,m=!a(Oa)&&c<=1&&!p&&g.scrollable,l={x:d-ob.x,y:b-ob.y},q={x:H(l.x),y:H(l.y)};if(i&&m&&q.x<q.y)return i.give=true;if(q.x>0||q.y>0){i&&(i.give=false);G=ub(q.x,q.y);ob={x:d,y:b};i=a(Ka);m=a(eb);q=a(wa);if(!a(kc)){var u=e(B,vc(q?b-m.y:d-m.x,a(fb),i,a(gb),a(hb),a(xa),q?b-m.y:d-m.x));e(Oa,a(Oa)||a(J)!=a(ea));(l=wc(q?l.y:l.x||0))&&e(M,l<0)}if(p&&a(Lb)){e(wa,H(b-m.y)>H(d-m.x));m=pb(i,d,b)}if(c>1&&!a(jc)){c=a(Eb);p=a(Jb);l=-p*c;e(ua,n.math.envelope(b-m.y,p,c,l,l+c,-1))}!(u%1)&&!g.loops&&pb(i,d,b)}}},wheel:function(c,d,b){if(d){qb=true;c=la(qa.sqrt(H(d))/2);c=Ha(c,d>0);d=0.0833*a(Ka);pb(d);c&&e(M,c<0);e(ma,0);e(B,vc(c,a(fb),d,a(gb),a(hb),a(xa)));b&&b.preventDefault();b&&(b.give=false);w();h.trigger(\"up\",[b])}},orient:function(c,d){if(!(!Ua||R)){xc=true;c=d/360;fraction=e(B,+(g.stitched||g.cw?1-c:c).toFixed(2));Ua=false}},fractionChange:function(c,d,b){if(d===s){c=1+rb(b/a(db));d=g.rows>1;b=g.orbital;e(Lb,!!b&&(c<=b||c>=a(sa)-b+2));if(d)c+=(a(Q)-1)*a(O);e(J,c)}},tierChange:function(c,d,b){if(d===s){c=e(Q,S(Wb(b,1,g.rows)));d=a(O);b=a(J)%d||d;e(J,b+c*d-d)}},rowChange:function(c,d,b){d===s&&Xb(ua,s,b,g.rows)},frameChange:function(c,d,b){if(d===s){this.className=this.className.replace(n.re.frame_klass,hc+b);c=a(O);d=g.rows;var i=g.path,p=b%c||c,m=((b-p)/c+1-1)/(d-1),l=a(Q);!d?a(ua):Xb(ua,m,l,d);var q=Xb(B,s,p,c),u=a(sa);if(g.orbital&&a(wa)){b=g.inversed?u+1-b:b;b+=u}var v=a(W);c=a(aa);if(!c.length||v){p=a(Za);var E=a(D);m=a(L);if(v){b=e($a,S(Wb(q,0,a(Fb)))%v);d=d<=1?0:(m+p)*(d-l);b=[y(-b),y(-d)];c=c.length>1&&c[l-1];d=n.substitute(i+c,a);c&&h.css(\"backgroundImage\").search(d)<0&&h.css({backgroundImage:Ea(d)})}else{i=g.horizontal;l=b%u-1;l=l<0?u-1:l;b=rb((b-0.1)/u);b+=d>1?0:a(M)?0:!g.directional?0:a(Ib);b=b*((i?m:E)+p);d=l*((i?E:m)+p);b=c.length?[0,0]:i?[y(-d),y(-b)]:[y(-b),y(-d)]}h.css({backgroundPosition:b.join(A)})}else{a(Ya)&&Ub();a(da)&&h.attr({src:$b(n.substitute(i+c[b-1],a))})}}},\"frameChange.reach\":function(c,d,b){if(!(!a(Ma)||d!==s)){c=n.math.distance(a(bb),b,a(O));if(H(c)>=H(a(cb))){e(J,e(Ma));e(Ma,e(cb,e(bb,0)));h.trigger(\"stop\")}}},\"imageChange imagesChange\":function(){h.trigger(\"preload\")},\"fractionChange.indicator\":function(c,d,b){if(g.indicator&&d===s){c=g.indicator;var i=g.orbital;d=i&&a(wa)?a(L):a(D);i=i?a(sa):g.images.length||a(O);i=la(d/i);d-=i;b=S(Wb(b,0,d));b=!g.cw||a(W)?b:d-b;Ra.$x.css(a(wa)?{left:0,top:y(b),bottom:Sb,width:c,height:i}:{bottom:0,left:y(b),top:Sb,width:i,height:c})}},\"tierChange.indicator\":function(c,d,b){if(g.rows>1&&g.indicator&&d===s){var i=a(L);c=g.indicator;d=la(i/g.rows);i-=d;b=S(b*i);Ra.$y.css({left:0,top:b,width:c,height:d})}},\"setup.annotations\":function(){var c=h.parent();k.each(a(Pa),function(d,b){var i=typeof b.node==wb?k(b.node):b.node||{};i=i.jquery?i:k(V(ta),i);i=i.attr({id:d}).addClass(dc);var p=b.image?k(V(Xa),b.image):k(),m=b.link?k(V(\"a\"),b.link).click(function(){h.trigger(\"up.annotations\",{target:m})}):k();C(Ca(d),{display:lb,position:Qa},true);b.image||b.link&&i.append(m);b.link||b.image&&i.append(p);b.link&&b.image&&i.append(m.append(p));i.appendTo(c)})},\"prepare.annotations\":function(){k.each(a(Pa),function(c){k(Ca(c)).hide()})},\"frameChange.annotations\":function(c,d){if(!(!a(da)||d!==s)){var b=a(D),i=a(W),p=a($a);k.each(a(Pa),function(m,l){m=k(Ca(m));var q=l.start||1,u=l.end,v=v||a(J),E=v-1,ba=l.at?l.at[E]==\"+\":false;E=l.at?E:E-q+1;v=typeof l.x!=tb?l.x:l.x[E];var ca=typeof l.y!=tb?l.y:l.y[E];l=v!==s&&ca!==s&&(l.at?ba:E>=0&&(!u||E<=u-q));if(i){q=v>i-b&&p>=0&&p<b;v=!(v<b&&p>i-b)?v:v+i;v=!q?v:v-i;v-=p}if(a(Ya)){q=a(Mb);v=v&&v*q;ca=ca&&ca*q}v={display:l?Ob:lb,left:y(v),top:y(ca)};m.css(v)})}},\"up.annotations\":function(c,d){if(!(G>10||qb)){c=k(d.target);(c.is(\"a\")?c:c.parents(\"a\")).attr(\"href\")&&(G=10)}},\"up.steppable\":function(){G||qb||h.trigger(a(eb).x-h.offset().left>0.5*a(D)?\"stepRight\":\"stepLeft\")},\"stepLeft stepRight\":function(){w()},stepLeft:function(){e(M,false);e(B,a(B)-a(db)*a(xa))},stepRight:function(){e(M,true);e(B,a(B)+a(db)*a(xa))},stepUp:function(){e(Q,a(Q)-1)},stepDown:function(){e(Q,a(Q)+1)},resize:function(c,d){if(!(a(Na)&&!d)){var b=a(W),i=a(Za);c=a(L);var p=!a(aa).length||b,m=g.rows||1;b=a(aa).length?!b?s:y(b)+A+y(c):b&&y(b)+A+y((c+i)*m-i)||y((a(D)+i)*a(sa)-i)+A+y((c+i)*a(Ib)*m*(g.directional?2:1)-i);h.css({height:p?y(c):null,backgroundSize:b||null});d||h.trigger(\"imagesChange\")}},\"setup.fu\":function(){e(J,g.frame+(a(Q)-1)*a(O));h.trigger(\"preload\")},\"wheel.fu\":function(){qb=false},\"clean.fu\":function(){h.trigger(\"teardown\")},\"loaded.fu\":function(){h.trigger(\"opening\")}},pool:{\"tick.reel.preload\":function(){if(!(!(pa||a(Na))||a(Ja))){var c=a(D),d=Zc(za.$.css(D)),b=a(aa).length||1,i=S(1/b*a(da)*c);za.$.css({width:d+(i-d)/3+1});if(a(da)===b&&d>c-1){pa=false;za.$.fadeOut(300,function(){za.$.css({opacity:1,width:0})})}}},\"tick.reel\":function(c){if(!a(Ja)){var d=a(ma),b=Y(ga),i=g.monitor;if(!(!n.intense&&$c())){if(N){d=d-a(mc)/b*N;d=e(ma,d>0.1?d:(N=R=0))}i&&sc.text(a(i));d&&N++;R&&R++;wc(0);Ua=true;if(R&&!d)return T(c);if(a(ea))return T(c,w());if(!(a(ya)>0)){if(!g.loops&&g.rebound){!R&&!(a(B)%1)?Yb++:(Yb=0);Yb>=g.rebound*1E3/b&&e(M,!a(M))}c=a(xa)*Ha(1,a(M));b=a(ib);d=(!a(Sa)||xc||!b?d:H(a(va))+d)/Y(ga);e(B,a(B)-d*c);b=!g.duration?b:b>0&&e(ib,b-1);!b&&a(Sa)&&h.trigger(\"stop\")}}}},\"tick.reel.opening\":function(){if(a(fa)){var c=(g.entry||g.speed)/Y(ga)*(g.cw?-1:1),d=e(ya,a(ya)-1);e(B,a(B)+c);d||h.trigger(\"openingDone\")}}}},pa=false,T=function(c,d){return c.stopImmediatePropagation()||d},ia=function(){h.trigger(\"setup\")},R,N=0,Aa=function(){return R=0},w=function(){clearTimeout(Pb);ha.unbind(nb+x(fa),I.pool[nb+x(fa)]);e(ya,0);e(Kb,true);return R=-g.timeout*Y(ga)},G=0,qb=false,xc=false,sc=k(),za=function(){C(A+x(yc),{position:Qa,left:0,bottom:0,height:g.preloader,overflow:Nb,backgroundColor:\"#000\"});return za.$=k(V(ta),{\"class\":yc})},Ra=function(c){C(A+x(zc)+x(c),{position:Qa,width:0,height:0,overflow:Nb,backgroundColor:\"#000\"});return Ra[\"$\"+\nc]=k(V(ta),{\"class\":zc+A+c})},C=function(c,d,b){function i(p){var m=[];k.each(p,function(l,q){m.push(l.replace(/([A-Z])/g,\"-$1\").toLowerCase()+\":\"+y(q)+\";\")});return\"{\"+m.join(P)+\"}\"}b=b?P:a(lc);c=c.replace(/^/,b).replace(na,na+b);return C.rules.push(c+i(d))&&d},$c=function(){var c=a(L),d=a(D),b=h[0].getBoundingClientRect();return b.top<-c||b.left<-d||b.right>d+k(U).width()||b.bottom>c+k(U).height()},Yb=0,ob={x:0,y:0},wc=function(c){return Ta.push(c)&&Ta.shift()&&c},kb=function(){return Ta=[0,0]},Ta=kb(),vc=g.graph||n.math[g.loops?\"hatch\":\"envelope\"],qc=function(){clearTimeout(Qb);Qb=setTimeout(Ub,n.resize_gauge)},Ub=function(){if(h.width()!=a(D)){var c=a(fc),d=e(Mb,h.width()/c.width);k.each(c,function(b,i){e(b,S(i*d))});h.trigger(\"resize\")}},Pb,Qb,pb=function(c,d,b){var i=e(fb,a(B));e(Jb,a(ua));var p=g.loops;e(gb,p?0:-i*c);e(hb,p?c:c-i*c);return d!==s&&e(eb,{x:d,y:b})||s},Ua=true,Xb=function(c,d,b,i){if(i){var p=a(c)||0;b=d!==s?d:(b-1)/(i-1);b=c!=B?b:Ga(b,0.9999);return d=+H(p-b).toFixed(8)>=+(1/(i-1)).toFixed(8)?e(c,b):d||p}},oa=ha;try{if(ha[0]!=top.document)oa=ha.add(top.document)}catch(dd){}top===self?k():function(c){k(\"iframe\",oa.last()).each(function(){try{if(k(this).contents().find(Tb).html()==k(Tb).html())return(c=k(this))&&false}catch(d){}});return c}();C.rules=[];I.setup()});sb=sb||function h(){var e=+new Date,a=Y(ga);if(!a)return sb=null;ha.trigger(nb);n.cost=(+new Date+n.cost-e)/2;return sb=setTimeout(h,ub(4,1E3/a-n.cost))}();return k(K)}},unreel:function(){return this.trigger(\"teardown\")}},re:{image:/^(.*)\\.(jpg|jpeg|png|gif)\\??.*$/i,ua:[/(msie|opera|firefox|chrome|safari)[ \\/:]([\\d.]+)/i,/(webkit)\\/([\\d.]+)/i,/(mozilla)\\/([\\d.]+)/i],array:/ *, */,lazy_agent:/\\(iphone|ipod|android|fennec|blackberry/i,frame_klass:/frame-\\d+/,substitution:/(@([A-Z]))/g,no_match:/^(undefined|)$/,sequence:/(^[^#|]*([#]+)[^#|]*)($|[|]([0-9]+)\\.\\.([0-9]+))($|[|]([0-9]+)$)/},cdn:\"http://code.vostrel.net/\",math:{envelope:function(f,j,o,t,r,g){return j+Fa(t,r,-f*g)/o},hatch:function(f,j,o,t,r,g){f=(f<t?r:0)+\nf%r;f=j+-f*g/o;return f-rb(f)},interpolate:function(f,j,o){return j+f*(o-j)},distance:function(f,j,o){var t=o/2;f=j-f;return f<-t?f+o:f>t?f-o:f}},preload:{fidelity:function(f,j,o){function t(e,a,I){function pa(G){for(;!(G>=1&&G<=N);)G+=G<1?+N:-N;return h[I+G]||(h[I+G]=!!T.push(G))}if(!e.length)return[];var T=[],ia=4*a,R=j.frame,N=e.length;a=true;for(var Aa=N/ia,w=0;w<ia;w++)pa(R+S(w*Aa));for(;Aa>1;){w=0;ia=T.length;Aa/=2;for(a=!a;w<ia;w++)pa(T[w]+(a?1:-1)*S(Aa))}for(w=0;w<=N;w++)pa(w);for(w=0;w<T.length;w++)T[w]=e[T[w]-1];return T}var r=j.orbital,g=r?2:j.rows||1,K=r?o(sa):o(O);o=(j.row-1)*K;r=[].concat(f);var h=new Array(f.length+1);f=g<2?[]:r.slice(o,o+K);return t(f,1,o).concat(t(r,g,0))},linear:function(f){return f}},substitute:function(f,j){return f.replace(n.re.substitution,function(o,t,r){return typeof n.substitutes[r]==\"function\"?n.substitutes[r](j):Ac[r]?j(Ac[r]):t})},substitutes:{T:function(){return+new Date}},normal:{fraction:function(f,j){if(f===null)return f;return j[Ia].loops?f-rb(f):Fa(0,1,f)},tier:function(f){if(f===null)return f;return Fa(0,1,f)},row:function(f,j){if(f===null)return f;return S(Fa(1,j[Ia].rows,f))},frame:function(f,j){if(f===null)return f;var o=j[Ia];j=j[O]*(o.orbital?2:o.rows||1);f=S(o.loops?f%j||j:Fa(1,j,f));return f<0?f+j:f},images:function(f,j){var o=n.re.sequence.exec(f);return!o?f:n.sequence(o,j[Ia])}},sequence:function(f,j){if(f.length<=1)return j.images;var o=[],t=j.orbital,r=f[1],g=f[2],K=f[4];K=n.re.no_match.test(K+P)?1:+K;var h=t?2:j.rows||1;j=t?j.footage:j.stitched?1:j.frames;h=+(f[5]||h*j)-K;f=+f[7]||1;for(j=0;j<=h;){o.push(r.replace(g,bc(K+j+P,g.length,\"0\")));j+=f}return o},instances:k(),leader:Y,resize_gauge:300,concurrent_requests:4,cost:0},ha=k(X);X=navigator.userAgent;var Ba=n.re.ua[0].exec(X)||n.re.ua[1].exec(X)||n.re.ua[2].exec(X);Z=+Ba[2].split(\".\").slice(0,2).join(\".\");Ba=Ba[1]==\"MSIE\";var ad=!(Ba&&Z<8),Fc=!(Ba&&Z<9),sb,z=\"reel\",Bb=z+\"-overlay\",Hb=z+\"-cache\",zc=z+\"-indicator\",yc=z+\"-preloader\",tc=z+\"-monitor\",dc=z+\"-annotation\",mb=z+\"-panning\",Rb=z+\"-loading\",hc=\"frame-\",qa=Math,S=qa.round,rb=qa.floor,la=qa.ceil,Ga=qa.min,ub=qa.max,H=qa.abs,Zc=parseInt,Wb=n.math.interpolate,Pa=\"annotations\",La=\"area\",Sb=\"auto\",nc=\"backup\",M=\"backwards\",db=\"bit\",mc=\"brake\",ab=\"cache\",ic=ab+\"d\",Lb=\"center\",ec=\"class\",jb=\"click\",ea=jb+\"ed\",eb=ea+\"_location\",fb=ea+\"_on\",Jb=ea+\"_tier\",xa=\"cwish\",bb=\"departure\",Ma=\"destination\",cb=\"distance\",sa=\"footage\",B=\"fraction\",J=\"frame\",kc=\"framelock\",O=\"frames\",L=\"height\",hb=\"hi\",Nb=\"hidden\",Gb=\"image\",aa=\"images\",gb=\"lo\",Na=\"loading\",fa=\"opening\",ya=fa+\"_ticks\",Ia=\"options\",Sa=\"playing\",da=\"preloaded\",Mb=\"ratio\",Oa=\"reeling\",Kb=\"reeled\",Ya=\"responsive\",Ka=\"revolution\",Eb=\"revolution_y\",Q=\"row\",jc=\"rowlock\",Ib=\"rows\",Ja=\"shy\",Za=\"spacing\",va=\"speed\",ra=\"src\",lc=\"stage\",W=\"stitched\",$a=W+\"_shift\",Fb=W+\"_travel\",Vb=\"stopped\",$=\"style\",ga=\"tempo\",ib=\"ticks\",ua=\"tier\",fc=\"truescale\",ma=\"velocity\",wa=\"vertical\",D=\"width\",F=x(z),ja=x(\"pan\")+F,Rc=\"deviceorientation\"+F,Qc=\"dragstart\"+F,Oc=\"mousedown\"+F,Nc=\"mouseenter\"+F,Xc=\"mouseleave\"+ja,Uc=\"mousemove\"+ja,Yc=\"mouseup\"+ja,Pc=\"mousewheel\"+F,nb=\"tick\"+F,Wc=\"touchcancel\"+ja,Vc=\"touchend\"+ja,Mc=\"touchstart\"+F,Tc=\"touchmove\"+ja,pc=\"resize\"+F,P=\"\",A=\" \",na=\",\",Qa=\"absolute\",Ob=\"block\",Da=\"@CDN@\",ta=\"div\",rc=\"hand\",Tb=\"head\",zb=\"html\",ka=\"id\",Xa=\"img\",Zb=\"jquery.\"+z,lb=\"none\",tb=\"object\",wb=\"string\",Ic=[D,L,Za,Ka,Eb,W,$a,Fb],Ac={W:D,H:L},uc=ad?Dc(\"CAAIAIAAAAAAAAAAACH5BAEAAAAALAAAAAAIAAgAAAIHhI+py+1dAAA7\"):Da+\"blank.gif\",Kc=Ea(Da+Zb+\".cur\")+na+\"move\",Jc=Ea(Da+Zb+\"-drag.cur\")+\nna+\"move\",Lc=Ea(Da+Zb+\"-drag-down.cur\")+na+\"move\";n.lazy=n.re.lazy_agent.test(X);var Sc=Ba&&Z<9?1:0,bd=k.cleanData;k.cleanData=function(f){k(f).each(function(){k(this).triggerHandler(\"clean\")});return bd.apply(this,arguments)};k.extend(k.fn,n.fn)&&k(n.scan);return n}}(jQuery,window,document)});(function(c){function g(a){var b=a||window.event,i=[].slice.call(arguments,1),e=0,h=0,f=0;a=c.event.fix(b);a.type=\"mousewheel\";if(b.wheelDelta)e=b.wheelDelta/120;if(b.detail)e=-b.detail/3;f=e;if(b.axis!==undefined&&b.axis===b.HORIZONTAL_AXIS){f=0;h=-1*e}if(b.wheelDeltaY!==undefined)f=b.wheelDeltaY/120;if(b.wheelDeltaX!==undefined)h=-1*b.wheelDeltaX/120;i.unshift(a,e,h,f);return(c.event.dispatch||c.event.handle).apply(this,i)}var d=[\"DOMMouseScroll\",\"mousewheel\"];if(c.event.fixHooks)for(var j=d.length;j;)c.event.fixHooks[d[--j]]=c.event.mouseHooks;c.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=d.length;a;)this.addEventListener(d[--a],g,false);else this.onmousewheel=g},teardown:function(){if(this.removeEventListener)for(var a=d.length;a;)this.removeEventListener(d[--a],g,false);else this.onmousewheel=null}};c.fn.extend({mousewheel:function(a){return a?this.bind(\"mousewheel\",a):this.trigger(\"mousewheel\")},unmousewheel:function(a){return this.unbind(\"mousewheel\",a)}})})(jQuery);","js/nouislider.min.js":"(function(factory){if(typeof define===\"function\"&&define.amd){define([],factory);}else if(typeof exports===\"object\"){module.exports=factory();}else{window.noUiSlider=factory();}})(function(){\"use strict\";var VERSION=\"%%REPLACE_THIS_WITH_VERSION%%\";function isValidFormatter(entry){return typeof entry===\"object\"&&typeof entry.to===\"function\"&&typeof entry.from===\"function\";}\nfunction removeElement(el){el.parentElement.removeChild(el);}\nfunction isSet(value){return value!==null&&value!==undefined;}\nfunction preventDefault(e){e.preventDefault();}\nfunction unique(array){return array.filter(function(a){return!this[a]?(this[a]=true):false;},{});}\nfunction closest(value,to){return Math.round(value / to)*to;}\nfunction offset(elem,orientation){var rect=elem.getBoundingClientRect();var doc=elem.ownerDocument;var docElem=doc.documentElement;var pageOffset=getPageOffset(doc);if(/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)){pageOffset.x=0;}\nreturn orientation?rect.top+pageOffset.y-docElem.clientTop:rect.left+pageOffset.x-docElem.clientLeft;}\nfunction isNumeric(a){return typeof a===\"number\"&&!isNaN(a)&&isFinite(a);}\nfunction addClassFor(element,className,duration){if(duration>0){addClass(element,className);setTimeout(function(){removeClass(element,className);},duration);}}\nfunction limit(a){return Math.max(Math.min(a,100),0);}\nfunction asArray(a){return Array.isArray(a)?a:[a];}\nfunction countDecimals(numStr){numStr=String(numStr);var pieces=numStr.split(\".\");return pieces.length>1?pieces[1].length:0;}\nfunction addClass(el,className){if(el.classList&&!/\\s/.test(className)){el.classList.add(className);}else{el.className+=\" \"+className;}}\nfunction removeClass(el,className){if(el.classList&&!/\\s/.test(className)){el.classList.remove(className);}else{el.className=el.className.replace(new RegExp(\"(^|\\\\b)\"+className.split(\" \").join(\"|\")+\"(\\\\b|$)\",\"gi\"),\" \");}}\nfunction hasClass(el,className){return el.classList?el.classList.contains(className):new RegExp(\"\\\\b\"+className+\"\\\\b\").test(el.className);}\nfunction getPageOffset(doc){var supportPageOffset=window.pageXOffset!==undefined;var isCSS1Compat=(doc.compatMode||\"\")===\"CSS1Compat\";var x=supportPageOffset?window.pageXOffset:isCSS1Compat?doc.documentElement.scrollLeft:doc.body.scrollLeft;var y=supportPageOffset?window.pageYOffset:isCSS1Compat?doc.documentElement.scrollTop:doc.body.scrollTop;return{x:x,y:y};}\nfunction getActions(){return window.navigator.pointerEnabled?{start:\"pointerdown\",move:\"pointermove\",end:\"pointerup\"}:window.navigator.msPointerEnabled?{start:\"MSPointerDown\",move:\"MSPointerMove\",end:\"MSPointerUp\"}:{start:\"mousedown touchstart\",move:\"mousemove touchmove\",end:\"mouseup touchend\"};}\nfunction getSupportsPassive(){var supportsPassive=false;try{var opts=Object.defineProperty({},\"passive\",{get:function(){supportsPassive=true;}});window.addEventListener(\"test\",null,opts);}catch(e){}\nreturn supportsPassive;}\nfunction getSupportsTouchActionNone(){return window.CSS&&CSS.supports&&CSS.supports(\"touch-action\",\"none\");}\nfunction subRangeRatio(pa,pb){return 100 /(pb-pa);}\nfunction fromPercentage(range,value,startRange){return(value*100)/(range[startRange+1]-range[startRange]);}\nfunction toPercentage(range,value){return fromPercentage(range,range[0]<0?value+Math.abs(range[0]):value-range[0],0);}\nfunction isPercentage(range,value){return(value*(range[1]-range[0]))/ 100+range[0];}\nfunction getJ(value,arr){var j=1;while(value>=arr[j]){j+=1;}\nreturn j;}\nfunction toStepping(xVal,xPct,value){if(value>=xVal.slice(-1)[0]){return 100;}\nvar j=getJ(value,xVal);var va=xVal[j-1];var vb=xVal[j];var pa=xPct[j-1];var pb=xPct[j];return pa+toPercentage([va,vb],value)/ subRangeRatio(pa,pb);}\nfunction fromStepping(xVal,xPct,value){if(value>=100){return xVal.slice(-1)[0];}\nvar j=getJ(value,xPct);var va=xVal[j-1];var vb=xVal[j];var pa=xPct[j-1];var pb=xPct[j];return isPercentage([va,vb],(value-pa)*subRangeRatio(pa,pb));}\nfunction getStep(xPct,xSteps,snap,value){if(value===100){return value;}\nvar j=getJ(value,xPct);var a=xPct[j-1];var b=xPct[j];if(snap){if(value-a>(b-a)/ 2){return b;}\nreturn a;}\nif(!xSteps[j-1]){return value;}\nreturn xPct[j-1]+closest(value-xPct[j-1],xSteps[j-1]);}\nfunction handleEntryPoint(index,value,that){var percentage;if(typeof value===\"number\"){value=[value];}\nif(!Array.isArray(value)){throw new Error(\"noUiSlider (\"+VERSION+\"): 'range' contains invalid value.\");}\nif(index===\"min\"){percentage=0;}else if(index===\"max\"){percentage=100;}else{percentage=parseFloat(index);}\nif(!isNumeric(percentage)||!isNumeric(value[0])){throw new Error(\"noUiSlider (\"+VERSION+\"): 'range' value isn't numeric.\");}\nthat.xPct.push(percentage);that.xVal.push(value[0]);if(!percentage){if(!isNaN(value[1])){that.xSteps[0]=value[1];}}else{that.xSteps.push(isNaN(value[1])?false:value[1]);}\nthat.xHighestCompleteStep.push(0);}\nfunction handleStepPoint(i,n,that){if(!n){return;}\nif(that.xVal[i]===that.xVal[i+1]){that.xSteps[i]=that.xHighestCompleteStep[i]=that.xVal[i];return;}\nthat.xSteps[i]=fromPercentage([that.xVal[i],that.xVal[i+1]],n,0)/ subRangeRatio(that.xPct[i],that.xPct[i+1]);var totalSteps=(that.xVal[i+1]-that.xVal[i])/ that.xNumSteps[i];var highestStep=Math.ceil(Number(totalSteps.toFixed(3))-1);var step=that.xVal[i]+that.xNumSteps[i]*highestStep;that.xHighestCompleteStep[i]=step;}\nfunction Spectrum(entry,snap,singleStep){this.xPct=[];this.xVal=[];this.xSteps=[singleStep||false];this.xNumSteps=[false];this.xHighestCompleteStep=[];this.snap=snap;var index;var ordered=[];for(index in entry){if(entry.hasOwnProperty(index)){ordered.push([entry[index],index]);}}\nif(ordered.length&&typeof ordered[0][0]===\"object\"){ordered.sort(function(a,b){return a[0][0]-b[0][0];});}else{ordered.sort(function(a,b){return a[0]-b[0];});}\nfor(index=0;index<ordered.length;index++){handleEntryPoint(ordered[index][1],ordered[index][0],this);}\nthis.xNumSteps=this.xSteps.slice(0);for(index=0;index<this.xNumSteps.length;index++){handleStepPoint(index,this.xNumSteps[index],this);}}\nSpectrum.prototype.getDistance=function(value){var index;var distances=[];for(index=0;index<this.xNumSteps.length-1;index++){var step=this.xNumSteps[index];if(step&&(value / step)%1!==0){throw new Error(\"noUiSlider (\"+\nVERSION+\"): 'limit', 'margin' and 'padding' of \"+\nthis.xPct[index]+\"% range must be divisible by step.\");}\ndistances[index]=fromPercentage(this.xVal,value,index);}\nreturn distances;};Spectrum.prototype.getAbsoluteDistance=function(value,distances,direction){var xPct_index=0;if(value<this.xPct[this.xPct.length-1]){while(value>this.xPct[xPct_index+1]){xPct_index++;}}else if(value===this.xPct[this.xPct.length-1]){xPct_index=this.xPct.length-2;}\nif(!direction&&value===this.xPct[xPct_index+1]){xPct_index++;}\nvar start_factor;var rest_factor=1;var rest_rel_distance=distances[xPct_index];var range_pct=0;var rel_range_distance=0;var abs_distance_counter=0;var range_counter=0;if(direction){start_factor=(value-this.xPct[xPct_index])/(this.xPct[xPct_index+1]-this.xPct[xPct_index]);}else{start_factor=(this.xPct[xPct_index+1]-value)/(this.xPct[xPct_index+1]-this.xPct[xPct_index]);}\nwhile(rest_rel_distance>0){range_pct=this.xPct[xPct_index+1+range_counter]-this.xPct[xPct_index+range_counter];if(distances[xPct_index+range_counter]*rest_factor+100-start_factor*100>100){rel_range_distance=range_pct*start_factor;rest_factor=(rest_rel_distance-100*start_factor)/ distances[xPct_index+range_counter];start_factor=1;}else{rel_range_distance=((distances[xPct_index+range_counter]*range_pct)/ 100)*rest_factor;rest_factor=0;}\nif(direction){abs_distance_counter=abs_distance_counter-rel_range_distance;if(this.xPct.length+range_counter>=1){range_counter--;}}else{abs_distance_counter=abs_distance_counter+rel_range_distance;if(this.xPct.length-range_counter>=1){range_counter++;}}\nrest_rel_distance=distances[xPct_index+range_counter]*rest_factor;}\nreturn value+abs_distance_counter;};Spectrum.prototype.toStepping=function(value){value=toStepping(this.xVal,this.xPct,value);return value;};Spectrum.prototype.fromStepping=function(value){return fromStepping(this.xVal,this.xPct,value);};Spectrum.prototype.getStep=function(value){value=getStep(this.xPct,this.xSteps,this.snap,value);return value;};Spectrum.prototype.getDefaultStep=function(value,isDown,size){var j=getJ(value,this.xPct);if(value===100||(isDown&&value===this.xPct[j-1])){j=Math.max(j-1,1);}\nreturn(this.xVal[j]-this.xVal[j-1])/ size;};Spectrum.prototype.getNearbySteps=function(value){var j=getJ(value,this.xPct);return{stepBefore:{startValue:this.xVal[j-2],step:this.xNumSteps[j-2],highestStep:this.xHighestCompleteStep[j-2]},thisStep:{startValue:this.xVal[j-1],step:this.xNumSteps[j-1],highestStep:this.xHighestCompleteStep[j-1]},stepAfter:{startValue:this.xVal[j],step:this.xNumSteps[j],highestStep:this.xHighestCompleteStep[j]}};};Spectrum.prototype.countStepDecimals=function(){var stepDecimals=this.xNumSteps.map(countDecimals);return Math.max.apply(null,stepDecimals);};Spectrum.prototype.convert=function(value){return this.getStep(this.toStepping(value));};var defaultFormatter={to:function(value){return value!==undefined&&value.toFixed(2);},from:Number};var cssClasses={target:\"target\",base:\"base\",origin:\"origin\",handle:\"handle\",handleLower:\"handle-lower\",handleUpper:\"handle-upper\",touchArea:\"touch-area\",horizontal:\"horizontal\",vertical:\"vertical\",background:\"background\",connect:\"connect\",connects:\"connects\",ltr:\"ltr\",rtl:\"rtl\",textDirectionLtr:\"txt-dir-ltr\",textDirectionRtl:\"txt-dir-rtl\",draggable:\"draggable\",drag:\"state-drag\",tap:\"state-tap\",active:\"active\",tooltip:\"tooltip\",pips:\"pips\",pipsHorizontal:\"pips-horizontal\",pipsVertical:\"pips-vertical\",marker:\"marker\",markerHorizontal:\"marker-horizontal\",markerVertical:\"marker-vertical\",markerNormal:\"marker-normal\",markerLarge:\"marker-large\",markerSub:\"marker-sub\",value:\"value\",valueHorizontal:\"value-horizontal\",valueVertical:\"value-vertical\",valueNormal:\"value-normal\",valueLarge:\"value-large\",valueSub:\"value-sub\"};var INTERNAL_EVENT_NS={tooltips:\".__tooltips\",aria:\".__aria\"};function validateFormat(entry){if(isValidFormatter(entry)){return true;}\nthrow new Error(\"noUiSlider (\"+VERSION+\"): 'format' requires 'to' and 'from' methods.\");}\nfunction testStep(parsed,entry){if(!isNumeric(entry)){throw new Error(\"noUiSlider (\"+VERSION+\"): 'step' is not numeric.\");}\nparsed.singleStep=entry;}\nfunction testKeyboardPageMultiplier(parsed,entry){if(!isNumeric(entry)){throw new Error(\"noUiSlider (\"+VERSION+\"): 'keyboardPageMultiplier' is not numeric.\");}\nparsed.keyboardPageMultiplier=entry;}\nfunction testKeyboardDefaultStep(parsed,entry){if(!isNumeric(entry)){throw new Error(\"noUiSlider (\"+VERSION+\"): 'keyboardDefaultStep' is not numeric.\");}\nparsed.keyboardDefaultStep=entry;}\nfunction testRange(parsed,entry){if(typeof entry!==\"object\"||Array.isArray(entry)){throw new Error(\"noUiSlider (\"+VERSION+\"): 'range' is not an object.\");}\nif(entry.min===undefined||entry.max===undefined){throw new Error(\"noUiSlider (\"+VERSION+\"): Missing 'min' or 'max' in 'range'.\");}\nif(entry.min===entry.max){throw new Error(\"noUiSlider (\"+VERSION+\"): 'range' 'min' and 'max' cannot be equal.\");}\nparsed.spectrum=new Spectrum(entry,parsed.snap,parsed.singleStep);}\nfunction testStart(parsed,entry){entry=asArray(entry);if(!Array.isArray(entry)||!entry.length){throw new Error(\"noUiSlider (\"+VERSION+\"): 'start' option is incorrect.\");}\nparsed.handles=entry.length;parsed.start=entry;}\nfunction testSnap(parsed,entry){parsed.snap=entry;if(typeof entry!==\"boolean\"){throw new Error(\"noUiSlider (\"+VERSION+\"): 'snap' option must be a boolean.\");}}\nfunction testAnimate(parsed,entry){parsed.animate=entry;if(typeof entry!==\"boolean\"){throw new Error(\"noUiSlider (\"+VERSION+\"): 'animate' option must be a boolean.\");}}\nfunction testAnimationDuration(parsed,entry){parsed.animationDuration=entry;if(typeof entry!==\"number\"){throw new Error(\"noUiSlider (\"+VERSION+\"): 'animationDuration' option must be a number.\");}}\nfunction testConnect(parsed,entry){var connect=[false];var i;if(entry===\"lower\"){entry=[true,false];}else if(entry===\"upper\"){entry=[false,true];}\nif(entry===true||entry===false){for(i=1;i<parsed.handles;i++){connect.push(entry);}\nconnect.push(false);}\nelse if(!Array.isArray(entry)||!entry.length||entry.length!==parsed.handles+1){throw new Error(\"noUiSlider (\"+VERSION+\"): 'connect' option doesn't match handle count.\");}else{connect=entry;}\nparsed.connect=connect;}\nfunction testOrientation(parsed,entry){switch(entry){case\"horizontal\":parsed.ort=0;break;case\"vertical\":parsed.ort=1;break;default:throw new Error(\"noUiSlider (\"+VERSION+\"): 'orientation' option is invalid.\");}}\nfunction testMargin(parsed,entry){if(!isNumeric(entry)){throw new Error(\"noUiSlider (\"+VERSION+\"): 'margin' option must be numeric.\");}\nif(entry===0){return;}\nparsed.margin=parsed.spectrum.getDistance(entry);}\nfunction testLimit(parsed,entry){if(!isNumeric(entry)){throw new Error(\"noUiSlider (\"+VERSION+\"): 'limit' option must be numeric.\");}\nparsed.limit=parsed.spectrum.getDistance(entry);if(!parsed.limit||parsed.handles<2){throw new Error(\"noUiSlider (\"+\nVERSION+\"): 'limit' option is only supported on linear sliders with 2 or more handles.\");}}\nfunction testPadding(parsed,entry){var index;if(!isNumeric(entry)&&!Array.isArray(entry)){throw new Error(\"noUiSlider (\"+VERSION+\"): 'padding' option must be numeric or array of exactly 2 numbers.\");}\nif(Array.isArray(entry)&&!(entry.length===2||isNumeric(entry[0])||isNumeric(entry[1]))){throw new Error(\"noUiSlider (\"+VERSION+\"): 'padding' option must be numeric or array of exactly 2 numbers.\");}\nif(entry===0){return;}\nif(!Array.isArray(entry)){entry=[entry,entry];}\nparsed.padding=[parsed.spectrum.getDistance(entry[0]),parsed.spectrum.getDistance(entry[1])];for(index=0;index<parsed.spectrum.xNumSteps.length-1;index++){if(parsed.padding[0][index]<0||parsed.padding[1][index]<0){throw new Error(\"noUiSlider (\"+VERSION+\"): 'padding' option must be a positive number(s).\");}}\nvar totalPadding=entry[0]+entry[1];var firstValue=parsed.spectrum.xVal[0];var lastValue=parsed.spectrum.xVal[parsed.spectrum.xVal.length-1];if(totalPadding /(lastValue-firstValue)>1){throw new Error(\"noUiSlider (\"+VERSION+\"): 'padding' option must not exceed 100% of the range.\");}}\nfunction testDirection(parsed,entry){switch(entry){case\"ltr\":parsed.dir=0;break;case\"rtl\":parsed.dir=1;break;default:throw new Error(\"noUiSlider (\"+VERSION+\"): 'direction' option was not recognized.\");}}\nfunction testBehaviour(parsed,entry){if(typeof entry!==\"string\"){throw new Error(\"noUiSlider (\"+VERSION+\"): 'behaviour' must be a string containing options.\");}\nvar tap=entry.indexOf(\"tap\")>=0;var drag=entry.indexOf(\"drag\")>=0;var fixed=entry.indexOf(\"fixed\")>=0;var snap=entry.indexOf(\"snap\")>=0;var hover=entry.indexOf(\"hover\")>=0;var unconstrained=entry.indexOf(\"unconstrained\")>=0;if(fixed){if(parsed.handles!==2){throw new Error(\"noUiSlider (\"+VERSION+\"): 'fixed' behaviour must be used with 2 handles\");}\ntestMargin(parsed,parsed.start[1]-parsed.start[0]);}\nif(unconstrained&&(parsed.margin||parsed.limit)){throw new Error(\"noUiSlider (\"+VERSION+\"): 'unconstrained' behaviour cannot be used with margin or limit\");}\nparsed.events={tap:tap||snap,drag:drag,fixed:fixed,snap:snap,hover:hover,unconstrained:unconstrained};}\nfunction testTooltips(parsed,entry){if(entry===false){return;}\nif(entry===true){parsed.tooltips=[];for(var i=0;i<parsed.handles;i++){parsed.tooltips.push(true);}}else{parsed.tooltips=asArray(entry);if(parsed.tooltips.length!==parsed.handles){throw new Error(\"noUiSlider (\"+VERSION+\"): must pass a formatter for all handles.\");}\nparsed.tooltips.forEach(function(formatter){if(typeof formatter!==\"boolean\"&&(typeof formatter!==\"object\"||typeof formatter.to!==\"function\")){throw new Error(\"noUiSlider (\"+VERSION+\"): 'tooltips' must be passed a formatter or 'false'.\");}});}}\nfunction testAriaFormat(parsed,entry){parsed.ariaFormat=entry;validateFormat(entry);}\nfunction testFormat(parsed,entry){parsed.format=entry;validateFormat(entry);}\nfunction testKeyboardSupport(parsed,entry){parsed.keyboardSupport=entry;if(typeof entry!==\"boolean\"){throw new Error(\"noUiSlider (\"+VERSION+\"): 'keyboardSupport' option must be a boolean.\");}}\nfunction testDocumentElement(parsed,entry){parsed.documentElement=entry;}\nfunction testCssPrefix(parsed,entry){if(typeof entry!==\"string\"&&entry!==false){throw new Error(\"noUiSlider (\"+VERSION+\"): 'cssPrefix' must be a string or `false`.\");}\nparsed.cssPrefix=entry;}\nfunction testCssClasses(parsed,entry){if(typeof entry!==\"object\"){throw new Error(\"noUiSlider (\"+VERSION+\"): 'cssClasses' must be an object.\");}\nif(typeof parsed.cssPrefix===\"string\"){parsed.cssClasses={};for(var key in entry){if(!entry.hasOwnProperty(key)){continue;}\nparsed.cssClasses[key]=parsed.cssPrefix+entry[key];}}else{parsed.cssClasses=entry;}}\nfunction testOptions(options){var parsed={margin:0,limit:0,padding:0,animate:true,animationDuration:300,ariaFormat:defaultFormatter,format:defaultFormatter};var tests={step:{r:false,t:testStep},keyboardPageMultiplier:{r:false,t:testKeyboardPageMultiplier},keyboardDefaultStep:{r:false,t:testKeyboardDefaultStep},start:{r:true,t:testStart},connect:{r:true,t:testConnect},direction:{r:true,t:testDirection},snap:{r:false,t:testSnap},animate:{r:false,t:testAnimate},animationDuration:{r:false,t:testAnimationDuration},range:{r:true,t:testRange},orientation:{r:false,t:testOrientation},margin:{r:false,t:testMargin},limit:{r:false,t:testLimit},padding:{r:false,t:testPadding},behaviour:{r:true,t:testBehaviour},ariaFormat:{r:false,t:testAriaFormat},format:{r:false,t:testFormat},tooltips:{r:false,t:testTooltips},keyboardSupport:{r:true,t:testKeyboardSupport},documentElement:{r:false,t:testDocumentElement},cssPrefix:{r:true,t:testCssPrefix},cssClasses:{r:true,t:testCssClasses}};var defaults={connect:false,direction:\"ltr\",behaviour:\"tap\",orientation:\"horizontal\",keyboardSupport:true,cssPrefix:\"noUi-\",cssClasses:cssClasses,keyboardPageMultiplier:5,keyboardDefaultStep:10};if(options.format&&!options.ariaFormat){options.ariaFormat=options.format;}\nObject.keys(tests).forEach(function(name){if(!isSet(options[name])&&defaults[name]===undefined){if(tests[name].r){throw new Error(\"noUiSlider (\"+VERSION+\"): '\"+name+\"' is required.\");}\nreturn true;}\ntests[name].t(parsed,!isSet(options[name])?defaults[name]:options[name]);});parsed.pips=options.pips;var d=document.createElement(\"div\");var msPrefix=d.style.msTransform!==undefined;var noPrefix=d.style.transform!==undefined;parsed.transformRule=noPrefix?\"transform\":msPrefix?\"msTransform\":\"webkitTransform\";var styles=[[\"left\",\"top\"],[\"right\",\"bottom\"]];parsed.style=styles[parsed.dir][parsed.ort];return parsed;}\nfunction scope(target,options,originalOptions){var actions=getActions();var supportsTouchActionNone=getSupportsTouchActionNone();var supportsPassive=supportsTouchActionNone&&getSupportsPassive();var scope_Target=target;var scope_Base;var scope_Handles;var scope_Connects;var scope_Pips;var scope_Tooltips;var scope_Spectrum=options.spectrum;var scope_Values=[];var scope_Locations=[];var scope_HandleNumbers=[];var scope_ActiveHandlesCount=0;var scope_Events={};var scope_Self;var scope_Document=target.ownerDocument;var scope_DocumentElement=options.documentElement||scope_Document.documentElement;var scope_Body=scope_Document.body;var PIPS_NONE=-1;var PIPS_NO_VALUE=0;var PIPS_LARGE_VALUE=1;var PIPS_SMALL_VALUE=2;var scope_DirOffset=scope_Document.dir===\"rtl\"||options.ort===1?0:100;function addNodeTo(addTarget,className){var div=scope_Document.createElement(\"div\");if(className){addClass(div,className);}\naddTarget.appendChild(div);return div;}\nfunction addOrigin(base,handleNumber){var origin=addNodeTo(base,options.cssClasses.origin);var handle=addNodeTo(origin,options.cssClasses.handle);addNodeTo(handle,options.cssClasses.touchArea);handle.setAttribute(\"data-handle\",handleNumber);if(options.keyboardSupport){handle.setAttribute(\"tabindex\",\"0\");handle.addEventListener(\"keydown\",function(event){return eventKeydown(event,handleNumber);});}\nhandle.setAttribute(\"role\",\"slider\");handle.setAttribute(\"aria-orientation\",options.ort?\"vertical\":\"horizontal\");if(handleNumber===0){addClass(handle,options.cssClasses.handleLower);}else if(handleNumber===options.handles-1){addClass(handle,options.cssClasses.handleUpper);}\nreturn origin;}\nfunction addConnect(base,add){if(!add){return false;}\nreturn addNodeTo(base,options.cssClasses.connect);}\nfunction addElements(connectOptions,base){var connectBase=addNodeTo(base,options.cssClasses.connects);scope_Handles=[];scope_Connects=[];scope_Connects.push(addConnect(connectBase,connectOptions[0]));for(var i=0;i<options.handles;i++){scope_Handles.push(addOrigin(base,i));scope_HandleNumbers[i]=i;scope_Connects.push(addConnect(connectBase,connectOptions[i+1]));}}\nfunction addSlider(addTarget){addClass(addTarget,options.cssClasses.target);if(options.dir===0){addClass(addTarget,options.cssClasses.ltr);}else{addClass(addTarget,options.cssClasses.rtl);}\nif(options.ort===0){addClass(addTarget,options.cssClasses.horizontal);}else{addClass(addTarget,options.cssClasses.vertical);}\nvar textDirection=getComputedStyle(addTarget).direction;if(textDirection===\"rtl\"){addClass(addTarget,options.cssClasses.textDirectionRtl);}else{addClass(addTarget,options.cssClasses.textDirectionLtr);}\nreturn addNodeTo(addTarget,options.cssClasses.base);}\nfunction addTooltip(handle,handleNumber){if(!options.tooltips[handleNumber]){return false;}\nreturn addNodeTo(handle.firstChild,options.cssClasses.tooltip);}\nfunction isSliderDisabled(){return scope_Target.hasAttribute(\"disabled\");}\nfunction isHandleDisabled(handleNumber){var handleOrigin=scope_Handles[handleNumber];return handleOrigin.hasAttribute(\"disabled\");}\nfunction removeTooltips(){if(scope_Tooltips){removeEvent(\"update\"+INTERNAL_EVENT_NS.tooltips);scope_Tooltips.forEach(function(tooltip){if(tooltip){removeElement(tooltip);}});scope_Tooltips=null;}}\nfunction tooltips(){removeTooltips();scope_Tooltips=scope_Handles.map(addTooltip);bindEvent(\"update\"+INTERNAL_EVENT_NS.tooltips,function(values,handleNumber,unencoded){if(!scope_Tooltips[handleNumber]){return;}\nvar formattedValue=values[handleNumber];if(options.tooltips[handleNumber]!==true){formattedValue=options.tooltips[handleNumber].to(unencoded[handleNumber]);}\nscope_Tooltips[handleNumber].innerHTML=formattedValue;});}\nfunction aria(){removeEvent(\"update\"+INTERNAL_EVENT_NS.aria);bindEvent(\"update\"+INTERNAL_EVENT_NS.aria,function(values,handleNumber,unencoded,tap,positions){scope_HandleNumbers.forEach(function(index){var handle=scope_Handles[index];var min=checkHandlePosition(scope_Locations,index,0,true,true,true);var max=checkHandlePosition(scope_Locations,index,100,true,true,true);var now=positions[index];var text=options.ariaFormat.to(unencoded[index]);min=scope_Spectrum.fromStepping(min).toFixed(1);max=scope_Spectrum.fromStepping(max).toFixed(1);now=scope_Spectrum.fromStepping(now).toFixed(1);handle.children[0].setAttribute(\"aria-valuemin\",min);handle.children[0].setAttribute(\"aria-valuemax\",max);handle.children[0].setAttribute(\"aria-valuenow\",now);handle.children[0].setAttribute(\"aria-valuetext\",text);});});}\nfunction getGroup(mode,values,stepped){if(mode===\"range\"||mode===\"steps\"){return scope_Spectrum.xVal;}\nif(mode===\"count\"){if(values<2){throw new Error(\"noUiSlider (\"+VERSION+\"): 'values' (>= 2) required for mode 'count'.\");}\nvar interval=values-1;var spread=100 / interval;values=[];while(interval--){values[interval]=interval*spread;}\nvalues.push(100);mode=\"positions\";}\nif(mode===\"positions\"){return values.map(function(value){return scope_Spectrum.fromStepping(stepped?scope_Spectrum.getStep(value):value);});}\nif(mode===\"values\"){if(stepped){return values.map(function(value){return scope_Spectrum.fromStepping(scope_Spectrum.getStep(scope_Spectrum.toStepping(value)));});}\nreturn values;}}\nfunction generateSpread(density,mode,group){function safeIncrement(value,increment){return(value+increment).toFixed(7)/ 1;}\nvar indexes={};var firstInRange=scope_Spectrum.xVal[0];var lastInRange=scope_Spectrum.xVal[scope_Spectrum.xVal.length-1];var ignoreFirst=false;var ignoreLast=false;var prevPct=0;group=unique(group.slice().sort(function(a,b){return a-b;}));if(group[0]!==firstInRange){group.unshift(firstInRange);ignoreFirst=true;}\nif(group[group.length-1]!==lastInRange){group.push(lastInRange);ignoreLast=true;}\ngroup.forEach(function(current,index){var step;var i;var q;var low=current;var high=group[index+1];var newPct;var pctDifference;var pctPos;var type;var steps;var realSteps;var stepSize;var isSteps=mode===\"steps\";if(isSteps){step=scope_Spectrum.xNumSteps[index];}\nif(!step){step=high-low;}\nif(low===false){return;}\nif(high===undefined){high=low;}\nstep=Math.max(step,0.0000001);for(i=low;i<=high;i=safeIncrement(i,step)){newPct=scope_Spectrum.toStepping(i);pctDifference=newPct-prevPct;steps=pctDifference / density;realSteps=Math.round(steps);stepSize=pctDifference / realSteps;for(q=1;q<=realSteps;q+=1){pctPos=prevPct+q*stepSize;indexes[pctPos.toFixed(5)]=[scope_Spectrum.fromStepping(pctPos),0];}\ntype=group.indexOf(i)>-1?PIPS_LARGE_VALUE:isSteps?PIPS_SMALL_VALUE:PIPS_NO_VALUE;if(!index&&ignoreFirst&&i!==high){type=0;}\nif(!(i===high&&ignoreLast)){indexes[newPct.toFixed(5)]=[i,type];}\nprevPct=newPct;}});return indexes;}\nfunction addMarking(spread,filterFunc,formatter){var element=scope_Document.createElement(\"div\");var valueSizeClasses=[];valueSizeClasses[PIPS_NO_VALUE]=options.cssClasses.valueNormal;valueSizeClasses[PIPS_LARGE_VALUE]=options.cssClasses.valueLarge;valueSizeClasses[PIPS_SMALL_VALUE]=options.cssClasses.valueSub;var markerSizeClasses=[];markerSizeClasses[PIPS_NO_VALUE]=options.cssClasses.markerNormal;markerSizeClasses[PIPS_LARGE_VALUE]=options.cssClasses.markerLarge;markerSizeClasses[PIPS_SMALL_VALUE]=options.cssClasses.markerSub;var valueOrientationClasses=[options.cssClasses.valueHorizontal,options.cssClasses.valueVertical];var markerOrientationClasses=[options.cssClasses.markerHorizontal,options.cssClasses.markerVertical];addClass(element,options.cssClasses.pips);addClass(element,options.ort===0?options.cssClasses.pipsHorizontal:options.cssClasses.pipsVertical);function getClasses(type,source){var a=source===options.cssClasses.value;var orientationClasses=a?valueOrientationClasses:markerOrientationClasses;var sizeClasses=a?valueSizeClasses:markerSizeClasses;return source+\" \"+orientationClasses[options.ort]+\" \"+sizeClasses[type];}\nfunction addSpread(offset,value,type){type=filterFunc?filterFunc(value,type):type;if(type===PIPS_NONE){return;}\nvar node=addNodeTo(element,false);node.className=getClasses(type,options.cssClasses.marker);node.style[options.style]=offset+\"%\";if(type>PIPS_NO_VALUE){node=addNodeTo(element,false);node.className=getClasses(type,options.cssClasses.value);node.setAttribute(\"data-value\",value);node.style[options.style]=offset+\"%\";node.innerHTML=formatter.to(value);}}\nObject.keys(spread).forEach(function(offset){addSpread(offset,spread[offset][0],spread[offset][1]);});return element;}\nfunction removePips(){if(scope_Pips){removeElement(scope_Pips);scope_Pips=null;}}\nfunction pips(grid){removePips();var mode=grid.mode;var density=grid.density||1;var filter=grid.filter||false;var values=grid.values||false;var stepped=grid.stepped||false;var group=getGroup(mode,values,stepped);var spread=generateSpread(density,mode,group);var format=grid.format||{to:Math.round};scope_Pips=scope_Target.appendChild(addMarking(spread,filter,format));return scope_Pips;}\nfunction baseSize(){var rect=scope_Base.getBoundingClientRect();var alt=\"offset\"+[\"Width\",\"Height\"][options.ort];return options.ort===0?rect.width||scope_Base[alt]:rect.height||scope_Base[alt];}\nfunction attachEvent(events,element,callback,data){var method=function(e){e=fixEvent(e,data.pageOffset,data.target||element);if(!e){return false;}\nif(isSliderDisabled()&&!data.doNotReject){return false;}\nif(hasClass(scope_Target,options.cssClasses.tap)&&!data.doNotReject){return false;}\nif(events===actions.start&&e.buttons!==undefined&&e.buttons>1){return false;}\nif(data.hover&&e.buttons){return false;}\nif(!supportsPassive){e.preventDefault();}\ne.calcPoint=e.points[options.ort];callback(e,data);};var methods=[];events.split(\" \").forEach(function(eventName){element.addEventListener(eventName,method,supportsPassive?{passive:true}:false);methods.push([eventName,method]);});return methods;}\nfunction fixEvent(e,pageOffset,eventTarget){var touch=e.type.indexOf(\"touch\")===0;var mouse=e.type.indexOf(\"mouse\")===0;var pointer=e.type.indexOf(\"pointer\")===0;var x;var y;if(e.type.indexOf(\"MSPointer\")===0){pointer=true;}\nif(e.type===\"mousedown\"&&!e.buttons&&!e.touches){return false;}\nif(touch){var isTouchOnTarget=function(checkTouch){return(checkTouch.target===eventTarget||eventTarget.contains(checkTouch.target)||(checkTouch.target.shadowRoot&&checkTouch.target.shadowRoot.contains(eventTarget)));};if(e.type===\"touchstart\"){var targetTouches=Array.prototype.filter.call(e.touches,isTouchOnTarget);if(targetTouches.length>1){return false;}\nx=targetTouches[0].pageX;y=targetTouches[0].pageY;}else{var targetTouch=Array.prototype.find.call(e.changedTouches,isTouchOnTarget);if(!targetTouch){return false;}\nx=targetTouch.pageX;y=targetTouch.pageY;}}\npageOffset=pageOffset||getPageOffset(scope_Document);if(mouse||pointer){x=e.clientX+pageOffset.x;y=e.clientY+pageOffset.y;}\ne.pageOffset=pageOffset;e.points=[x,y];e.cursor=mouse||pointer;return e;}\nfunction calcPointToPercentage(calcPoint){var location=calcPoint-offset(scope_Base,options.ort);var proposal=(location*100)/ baseSize();proposal=limit(proposal);return options.dir?100-proposal:proposal;}\nfunction getClosestHandle(clickedPosition){var smallestDifference=100;var handleNumber=false;scope_Handles.forEach(function(handle,index){if(isHandleDisabled(index)){return;}\nvar handlePosition=scope_Locations[index];var differenceWithThisHandle=Math.abs(handlePosition-clickedPosition);var clickAtEdge=differenceWithThisHandle===100&&smallestDifference===100;var isCloser=differenceWithThisHandle<smallestDifference;var isCloserAfter=differenceWithThisHandle<=smallestDifference&&clickedPosition>handlePosition;if(isCloser||isCloserAfter||clickAtEdge){handleNumber=index;smallestDifference=differenceWithThisHandle;}});return handleNumber;}\nfunction documentLeave(event,data){if(event.type===\"mouseout\"&&event.target.nodeName===\"HTML\"&&event.relatedTarget===null){eventEnd(event,data);}}\nfunction eventMove(event,data){if(navigator.appVersion.indexOf(\"MSIE 9\")===-1&&event.buttons===0&&data.buttonsProperty!==0){return eventEnd(event,data);}\nvar movement=(options.dir?-1:1)*(event.calcPoint-data.startCalcPoint);var proposal=(movement*100)/ data.baseSize;moveHandles(movement>0,proposal,data.locations,data.handleNumbers);}\nfunction eventEnd(event,data){if(data.handle){removeClass(data.handle,options.cssClasses.active);scope_ActiveHandlesCount-=1;}\ndata.listeners.forEach(function(c){scope_DocumentElement.removeEventListener(c[0],c[1]);});if(scope_ActiveHandlesCount===0){removeClass(scope_Target,options.cssClasses.drag);setZindex();if(event.cursor){scope_Body.style.cursor=\"\";scope_Body.removeEventListener(\"selectstart\",preventDefault);}}\ndata.handleNumbers.forEach(function(handleNumber){fireEvent(\"change\",handleNumber);fireEvent(\"set\",handleNumber);fireEvent(\"end\",handleNumber);});}\nfunction eventStart(event,data){if(data.handleNumbers.some(isHandleDisabled)){return false;}\nvar handle;if(data.handleNumbers.length===1){var handleOrigin=scope_Handles[data.handleNumbers[0]];handle=handleOrigin.children[0];scope_ActiveHandlesCount+=1;addClass(handle,options.cssClasses.active);}\nevent.stopPropagation();var listeners=[];var moveEvent=attachEvent(actions.move,scope_DocumentElement,eventMove,{target:event.target,handle:handle,listeners:listeners,startCalcPoint:event.calcPoint,baseSize:baseSize(),pageOffset:event.pageOffset,handleNumbers:data.handleNumbers,buttonsProperty:event.buttons,locations:scope_Locations.slice()});var endEvent=attachEvent(actions.end,scope_DocumentElement,eventEnd,{target:event.target,handle:handle,listeners:listeners,doNotReject:true,handleNumbers:data.handleNumbers});var outEvent=attachEvent(\"mouseout\",scope_DocumentElement,documentLeave,{target:event.target,handle:handle,listeners:listeners,doNotReject:true,handleNumbers:data.handleNumbers});listeners.push.apply(listeners,moveEvent.concat(endEvent,outEvent));if(event.cursor){scope_Body.style.cursor=getComputedStyle(event.target).cursor;if(scope_Handles.length>1){addClass(scope_Target,options.cssClasses.drag);}\nscope_Body.addEventListener(\"selectstart\",preventDefault,false);}\ndata.handleNumbers.forEach(function(handleNumber){fireEvent(\"start\",handleNumber);});}\nfunction eventTap(event){event.stopPropagation();var proposal=calcPointToPercentage(event.calcPoint);var handleNumber=getClosestHandle(proposal);if(handleNumber===false){return false;}\nif(!options.events.snap){addClassFor(scope_Target,options.cssClasses.tap,options.animationDuration);}\nsetHandle(handleNumber,proposal,true,true);setZindex();fireEvent(\"slide\",handleNumber,true);fireEvent(\"update\",handleNumber,true);fireEvent(\"change\",handleNumber,true);fireEvent(\"set\",handleNumber,true);if(options.events.snap){eventStart(event,{handleNumbers:[handleNumber]});}}\nfunction eventHover(event){var proposal=calcPointToPercentage(event.calcPoint);var to=scope_Spectrum.getStep(proposal);var value=scope_Spectrum.fromStepping(to);Object.keys(scope_Events).forEach(function(targetEvent){if(\"hover\"===targetEvent.split(\".\")[0]){scope_Events[targetEvent].forEach(function(callback){callback.call(scope_Self,value);});}});}\nfunction eventKeydown(event,handleNumber){if(isSliderDisabled()||isHandleDisabled(handleNumber)){return false;}\nvar horizontalKeys=[\"Left\",\"Right\"];var verticalKeys=[\"Down\",\"Up\"];var largeStepKeys=[\"PageDown\",\"PageUp\"];var edgeKeys=[\"Home\",\"End\"];if(options.dir&&!options.ort){horizontalKeys.reverse();}else if(options.ort&&!options.dir){verticalKeys.reverse();largeStepKeys.reverse();}\nvar key=event.key.replace(\"Arrow\",\"\");var isLargeDown=key===largeStepKeys[0];var isLargeUp=key===largeStepKeys[1];var isDown=key===verticalKeys[0]||key===horizontalKeys[0]||isLargeDown;var isUp=key===verticalKeys[1]||key===horizontalKeys[1]||isLargeUp;var isMin=key===edgeKeys[0];var isMax=key===edgeKeys[1];if(!isDown&&!isUp&&!isMin&&!isMax){return true;}\nevent.preventDefault();var to;if(isUp||isDown){var multiplier=options.keyboardPageMultiplier;var direction=isDown?0:1;var steps=getNextStepsForHandle(handleNumber);var step=steps[direction];if(step===null){return false;}\nif(step===false){step=scope_Spectrum.getDefaultStep(scope_Locations[handleNumber],isDown,options.keyboardDefaultStep);}\nif(isLargeUp||isLargeDown){step*=multiplier;}\nstep=Math.max(step,0.0000001);step=(isDown?-1:1)*step;to=scope_Values[handleNumber]+step;}else if(isMax){to=options.spectrum.xVal[options.spectrum.xVal.length-1];}else{to=options.spectrum.xVal[0];}\nsetHandle(handleNumber,scope_Spectrum.toStepping(to),true,true);fireEvent(\"slide\",handleNumber);fireEvent(\"update\",handleNumber);fireEvent(\"change\",handleNumber);fireEvent(\"set\",handleNumber);return false;}\nfunction bindSliderEvents(behaviour){if(!behaviour.fixed){scope_Handles.forEach(function(handle,index){attachEvent(actions.start,handle.children[0],eventStart,{handleNumbers:[index]});});}\nif(behaviour.tap){attachEvent(actions.start,scope_Base,eventTap,{});}\nif(behaviour.hover){attachEvent(actions.move,scope_Base,eventHover,{hover:true});}\nif(behaviour.drag){scope_Connects.forEach(function(connect,index){if(connect===false||index===0||index===scope_Connects.length-1){return;}\nvar handleBefore=scope_Handles[index-1];var handleAfter=scope_Handles[index];var eventHolders=[connect];addClass(connect,options.cssClasses.draggable);if(behaviour.fixed){eventHolders.push(handleBefore.children[0]);eventHolders.push(handleAfter.children[0]);}\neventHolders.forEach(function(eventHolder){attachEvent(actions.start,eventHolder,eventStart,{handles:[handleBefore,handleAfter],handleNumbers:[index-1,index]});});});}}\nfunction bindEvent(namespacedEvent,callback){scope_Events[namespacedEvent]=scope_Events[namespacedEvent]||[];scope_Events[namespacedEvent].push(callback);if(namespacedEvent.split(\".\")[0]===\"update\"){scope_Handles.forEach(function(a,index){fireEvent(\"update\",index);});}}\nfunction isInternalNamespace(namespace){return namespace===INTERNAL_EVENT_NS.aria||namespace===INTERNAL_EVENT_NS.tooltips;}\nfunction removeEvent(namespacedEvent){var event=namespacedEvent&&namespacedEvent.split(\".\")[0];var namespace=event?namespacedEvent.substring(event.length):namespacedEvent;Object.keys(scope_Events).forEach(function(bind){var tEvent=bind.split(\".\")[0];var tNamespace=bind.substring(tEvent.length);if((!event||event===tEvent)&&(!namespace||namespace===tNamespace)){if(!isInternalNamespace(tNamespace)||namespace===tNamespace){delete scope_Events[bind];}}});}\nfunction fireEvent(eventName,handleNumber,tap){Object.keys(scope_Events).forEach(function(targetEvent){var eventType=targetEvent.split(\".\")[0];if(eventName===eventType){scope_Events[targetEvent].forEach(function(callback){callback.call(scope_Self,scope_Values.map(options.format.to),handleNumber,scope_Values.slice(),tap||false,scope_Locations.slice(),scope_Self);});}});}\nfunction checkHandlePosition(reference,handleNumber,to,lookBackward,lookForward,getValue){var distance;if(scope_Handles.length>1&&!options.events.unconstrained){if(lookBackward&&handleNumber>0){distance=scope_Spectrum.getAbsoluteDistance(reference[handleNumber-1],options.margin,0);to=Math.max(to,distance);}\nif(lookForward&&handleNumber<scope_Handles.length-1){distance=scope_Spectrum.getAbsoluteDistance(reference[handleNumber+1],options.margin,1);to=Math.min(to,distance);}}\nif(scope_Handles.length>1&&options.limit){if(lookBackward&&handleNumber>0){distance=scope_Spectrum.getAbsoluteDistance(reference[handleNumber-1],options.limit,0);to=Math.min(to,distance);}\nif(lookForward&&handleNumber<scope_Handles.length-1){distance=scope_Spectrum.getAbsoluteDistance(reference[handleNumber+1],options.limit,1);to=Math.max(to,distance);}}\nif(options.padding){if(handleNumber===0){distance=scope_Spectrum.getAbsoluteDistance(0,options.padding[0],0);to=Math.max(to,distance);}\nif(handleNumber===scope_Handles.length-1){distance=scope_Spectrum.getAbsoluteDistance(100,options.padding[1],1);to=Math.min(to,distance);}}\nto=scope_Spectrum.getStep(to);to=limit(to);if(to===reference[handleNumber]&&!getValue){return false;}\nreturn to;}\nfunction inRuleOrder(v,a){var o=options.ort;return(o?a:v)+\", \"+(o?v:a);}\nfunction moveHandles(upward,proposal,locations,handleNumbers){var proposals=locations.slice();var b=[!upward,upward];var f=[upward,!upward];handleNumbers=handleNumbers.slice();if(upward){handleNumbers.reverse();}\nif(handleNumbers.length>1){handleNumbers.forEach(function(handleNumber,o){var to=checkHandlePosition(proposals,handleNumber,proposals[handleNumber]+proposal,b[o],f[o],false);if(to===false){proposal=0;}else{proposal=to-proposals[handleNumber];proposals[handleNumber]=to;}});}\nelse{b=f=[true];}\nvar state=false;handleNumbers.forEach(function(handleNumber,o){state=setHandle(handleNumber,locations[handleNumber]+proposal,b[o],f[o])||state;});if(state){handleNumbers.forEach(function(handleNumber){fireEvent(\"update\",handleNumber);fireEvent(\"slide\",handleNumber);});}}\nfunction transformDirection(a,b){return options.dir?100-a-b:a;}\nfunction updateHandlePosition(handleNumber,to){scope_Locations[handleNumber]=to;scope_Values[handleNumber]=scope_Spectrum.fromStepping(to);var translation=10*(transformDirection(to,0)-scope_DirOffset);var translateRule=\"translate(\"+inRuleOrder(translation+\"%\",\"0\")+\")\";scope_Handles[handleNumber].style[options.transformRule]=translateRule;updateConnect(handleNumber);updateConnect(handleNumber+1);}\nfunction setZindex(){scope_HandleNumbers.forEach(function(handleNumber){var dir=scope_Locations[handleNumber]>50?-1:1;var zIndex=3+(scope_Handles.length+dir*handleNumber);scope_Handles[handleNumber].style.zIndex=zIndex;});}\nfunction setHandle(handleNumber,to,lookBackward,lookForward,exactInput){if(!exactInput){to=checkHandlePosition(scope_Locations,handleNumber,to,lookBackward,lookForward,false);}\nif(to===false){return false;}\nupdateHandlePosition(handleNumber,to);return true;}\nfunction updateConnect(index){if(!scope_Connects[index]){return;}\nvar l=0;var h=100;if(index!==0){l=scope_Locations[index-1];}\nif(index!==scope_Connects.length-1){h=scope_Locations[index];}\nvar connectWidth=h-l;var translateRule=\"translate(\"+inRuleOrder(transformDirection(l,connectWidth)+\"%\",\"0\")+\")\";var scaleRule=\"scale(\"+inRuleOrder(connectWidth / 100,\"1\")+\")\";scope_Connects[index].style[options.transformRule]=translateRule+\" \"+scaleRule;}\nfunction resolveToValue(to,handleNumber){if(to===null||to===false||to===undefined){return scope_Locations[handleNumber];}\nif(typeof to===\"number\"){to=String(to);}\nto=options.format.from(to);to=scope_Spectrum.toStepping(to);if(to===false||isNaN(to)){return scope_Locations[handleNumber];}\nreturn to;}\nfunction valueSet(input,fireSetEvent,exactInput){var values=asArray(input);var isInit=scope_Locations[0]===undefined;fireSetEvent=fireSetEvent===undefined?true:!!fireSetEvent;if(options.animate&&!isInit){addClassFor(scope_Target,options.cssClasses.tap,options.animationDuration);}\nscope_HandleNumbers.forEach(function(handleNumber){setHandle(handleNumber,resolveToValue(values[handleNumber],handleNumber),true,false,exactInput);});var i=scope_HandleNumbers.length===1?0:1;for(;i<scope_HandleNumbers.length;++i){scope_HandleNumbers.forEach(function(handleNumber){setHandle(handleNumber,scope_Locations[handleNumber],true,true,exactInput);});}\nsetZindex();scope_HandleNumbers.forEach(function(handleNumber){fireEvent(\"update\",handleNumber);if(values[handleNumber]!==null&&fireSetEvent){fireEvent(\"set\",handleNumber);}});}\nfunction valueReset(fireSetEvent){valueSet(options.start,fireSetEvent);}\nfunction valueSetHandle(handleNumber,value,fireSetEvent,exactInput){handleNumber=Number(handleNumber);if(!(handleNumber>=0&&handleNumber<scope_HandleNumbers.length)){throw new Error(\"noUiSlider (\"+VERSION+\"): invalid handle number, got: \"+handleNumber);}\nsetHandle(handleNumber,resolveToValue(value,handleNumber),true,true,exactInput);fireEvent(\"update\",handleNumber);if(fireSetEvent){fireEvent(\"set\",handleNumber);}}\nfunction valueGet(){var values=scope_Values.map(options.format.to);if(values.length===1){return values[0];}\nreturn values;}\nfunction destroy(){removeEvent(INTERNAL_EVENT_NS.aria);removeEvent(INTERNAL_EVENT_NS.tooltips);for(var key in options.cssClasses){if(!options.cssClasses.hasOwnProperty(key)){continue;}\nremoveClass(scope_Target,options.cssClasses[key]);}\nwhile(scope_Target.firstChild){scope_Target.removeChild(scope_Target.firstChild);}\ndelete scope_Target.noUiSlider;}\nfunction getNextStepsForHandle(handleNumber){var location=scope_Locations[handleNumber];var nearbySteps=scope_Spectrum.getNearbySteps(location);var value=scope_Values[handleNumber];var increment=nearbySteps.thisStep.step;var decrement=null;if(options.snap){return[value-nearbySteps.stepBefore.startValue||null,nearbySteps.stepAfter.startValue-value||null];}\nif(increment!==false){if(value+increment>nearbySteps.stepAfter.startValue){increment=nearbySteps.stepAfter.startValue-value;}}\nif(value>nearbySteps.thisStep.startValue){decrement=nearbySteps.thisStep.step;}else if(nearbySteps.stepBefore.step===false){decrement=false;}\nelse{decrement=value-nearbySteps.stepBefore.highestStep;}\nif(location===100){increment=null;}else if(location===0){decrement=null;}\nvar stepDecimals=scope_Spectrum.countStepDecimals();if(increment!==null&&increment!==false){increment=Number(increment.toFixed(stepDecimals));}\nif(decrement!==null&&decrement!==false){decrement=Number(decrement.toFixed(stepDecimals));}\nreturn[decrement,increment];}\nfunction getNextSteps(){return scope_HandleNumbers.map(getNextStepsForHandle);}\nfunction updateOptions(optionsToUpdate,fireSetEvent){var v=valueGet();var updateAble=[\"margin\",\"limit\",\"padding\",\"range\",\"animate\",\"snap\",\"step\",\"format\",\"pips\",\"tooltips\"];updateAble.forEach(function(name){if(optionsToUpdate[name]!==undefined){originalOptions[name]=optionsToUpdate[name];}});var newOptions=testOptions(originalOptions);updateAble.forEach(function(name){if(optionsToUpdate[name]!==undefined){options[name]=newOptions[name];}});scope_Spectrum=newOptions.spectrum;options.margin=newOptions.margin;options.limit=newOptions.limit;options.padding=newOptions.padding;if(options.pips){pips(options.pips);}else{removePips();}\nif(options.tooltips){tooltips();}else{removeTooltips();}\nscope_Locations=[];valueSet(optionsToUpdate.start||v,fireSetEvent);}\nfunction setupSlider(){scope_Base=addSlider(scope_Target);addElements(options.connect,scope_Base);bindSliderEvents(options.events);valueSet(options.start);if(options.pips){pips(options.pips);}\nif(options.tooltips){tooltips();}\naria();}\nsetupSlider();scope_Self={destroy:destroy,steps:getNextSteps,on:bindEvent,off:removeEvent,get:valueGet,set:valueSet,setHandle:valueSetHandle,reset:valueReset,__moveHandles:function(a,b,c){moveHandles(a,b,scope_Locations,c);},options:originalOptions,updateOptions:updateOptions,target:scope_Target,removePips:removePips,removeTooltips:removeTooltips,getTooltips:function(){return scope_Tooltips;},getOrigins:function(){return scope_Handles;},pips:pips};return scope_Self;}\nfunction initialize(target,originalOptions){if(!target||!target.nodeName){throw new Error(\"noUiSlider (\"+VERSION+\"): create requires a single element, got: \"+target);}\nif(target.noUiSlider){throw new Error(\"noUiSlider (\"+VERSION+\"): Slider was already initialized.\");}\nvar options=testOptions(originalOptions,target);var api=scope(target,options,originalOptions);target.noUiSlider=api;return api;}\nreturn{__spectrum:Spectrum,version:VERSION,cssClasses:cssClasses,create:initialize};});"}
}});
